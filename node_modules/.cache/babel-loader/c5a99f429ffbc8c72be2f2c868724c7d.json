{"ast":null,"code":"// app\nimport { addLoader, authLogout, removeLoader } from 'stores';\nimport * as utils from 'utils';\nexport var downloadDocument = function downloadDocument(doc) {\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint;\n\n    var id = doc.id,\n        fileName = doc.fileName;\n    dispatch(addLoader({\n      key: 'downloadDocument',\n      message: doc.fileName\n    }));\n    utils.api.get({\n      token: auth.accessToken,\n      endpoint: endpoint.document,\n      path: \"api/document/download/\".concat(id)\n    }).then(function (response) {\n      return response.blob();\n    }).then(function (blob) {\n      return utils.file.download(blob, fileName);\n    }).catch(function (err) {\n      var errorParams = {\n        file: 'stores/document.actions',\n        message: 'API fetch error (document)'\n      };\n      utils.api.handleError(err, errorParams);\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n    }).finally(function () {\n      dispatch(removeLoader('downloadDocument'));\n    });\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/document/document.actions.download.js"],"names":["addLoader","authLogout","removeLoader","utils","downloadDocument","doc","dispatch","getState","auth","user","endpoint","config","vars","id","fileName","key","message","api","get","token","accessToken","document","path","then","response","blob","file","download","catch","err","errorParams","handleError","handleUnauthorized","finally"],"mappings":"AAAA;AACA,SAASA,SAAT,EAAoBC,UAApB,EAAgCC,YAAhC,QAAoD,QAApD;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD;AAAA,SAAS,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC/D;AAD+D,oBAENA,QAAQ,EAFF;AAAA,QAE/CC,IAF+C,aAEvDC,IAFuD,CAE/CD,IAF+C;AAAA,QAErBE,QAFqB,aAEvCC,MAFuC,CAE7BC,IAF6B,CAErBF,QAFqB;;AAAA,QAGvDG,EAHuD,GAGtCR,GAHsC,CAGvDQ,EAHuD;AAAA,QAGnDC,QAHmD,GAGtCT,GAHsC,CAGnDS,QAHmD;AAK/DR,IAAAA,QAAQ,CAACN,SAAS,CAAC;AAAEe,MAAAA,GAAG,EAAE,kBAAP;AAA2BC,MAAAA,OAAO,EAAEX,GAAG,CAACS;AAAxC,KAAD,CAAV,CAAR;AAEAX,IAAAA,KAAK,CAACc,GAAN,CACGC,GADH,CACO;AACHC,MAAAA,KAAK,EAAEX,IAAI,CAACY,WADT;AAEHV,MAAAA,QAAQ,EAAEA,QAAQ,CAACW,QAFhB;AAGHC,MAAAA,IAAI,kCAA2BT,EAA3B;AAHD,KADP,EAMGU,IANH,CAMQ,UAACC,QAAD;AAAA,aAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,KANR,EAOGF,IAPH,CAOQ,UAACE,IAAD;AAAA,aAAUtB,KAAK,CAACuB,IAAN,CAAWC,QAAX,CAAoBF,IAApB,EAA0BX,QAA1B,CAAV;AAAA,KAPR,EAQGc,KARH,CAQS,UAACC,GAAD,EAAS;AACd,UAAMC,WAAW,GAAG;AAClBJ,QAAAA,IAAI,EAAE,yBADY;AAElBV,QAAAA,OAAO,EAAE;AAFS,OAApB;AAIAb,MAAAA,KAAK,CAACc,GAAN,CAAUc,WAAV,CAAsBF,GAAtB,EAA2BC,WAA3B;AACA3B,MAAAA,KAAK,CAACc,GAAN,CAAUe,kBAAV,CAA6BH,GAA7B,EAAkCvB,QAAlC,EAA4CL,UAA5C;AACD,KAfH,EAgBGgC,OAhBH,CAgBW,YAAM;AACb3B,MAAAA,QAAQ,CAACJ,YAAY,CAAC,kBAAD,CAAb,CAAR;AACD,KAlBH;AAmBD,GA1B+B;AAAA,CAAzB","sourcesContent":["// app\r\nimport { addLoader, authLogout, removeLoader } from 'stores';\r\nimport * as utils from 'utils';\r\n\r\nexport const downloadDocument = (doc) => (dispatch, getState) => {\r\n  // prettier-ignore\r\n  const { user: { auth }, config: { vars: { endpoint }}} = getState();\r\n  const { id, fileName } = doc;\r\n\r\n  dispatch(addLoader({ key: 'downloadDocument', message: doc.fileName }));\r\n\r\n  utils.api\r\n    .get({\r\n      token: auth.accessToken,\r\n      endpoint: endpoint.document,\r\n      path: `api/document/download/${id}`,\r\n    })\r\n    .then((response) => response.blob())\r\n    .then((blob) => utils.file.download(blob, fileName))\r\n    .catch((err) => {\r\n      const errorParams = {\r\n        file: 'stores/document.actions',\r\n        message: 'API fetch error (document)',\r\n      };\r\n      utils.api.handleError(err, errorParams);\r\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n    })\r\n    .finally(() => {\r\n      dispatch(removeLoader('downloadDocument'));\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}