{"ast":null,"code":"import \"core-js/modules/es.array.filter\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\PolicyAccordion\\\\PolicyAccordion.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport get from 'lodash/get';\nimport toNumber from 'lodash/toNumber'; // app\n\nimport { PolicyAccordionView } from './PolicyAccordion.view';\nimport { Translate } from 'components';\nimport { selectRefDataDepartments, selectRefDataStatusesMarketQuote } from 'stores';\nimport * as constants from 'consts';\nimport * as utils from 'utils'; // mui\n\nimport { useTheme } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nPolicyAccordion.propTypes = {\n  placement: PropTypes.object.isRequired,\n  nestedClasses: PropTypes.shape({\n    root: PropTypes.string\n  })\n};\nPolicyAccordion.defaultProps = {\n  nestedClasses: {}\n};\nexport default function PolicyAccordion(_ref) {\n  _s();\n\n  var placement = _ref.placement,\n      nestedClasses = _ref.nestedClasses;\n  var theme = useTheme();\n  var refDataDepartments = useSelector(selectRefDataDepartments);\n  var refDataStatusesMarketQuote = useSelector(selectRefDataStatusesMarketQuote);\n\n  var buildChartData = function buildChartData(value, label) {\n    return {\n      datasets: [{\n        data: [value <= 100 ? value : Math.min(100, value - 100), value <= 100 ? 100 - value : Math.max(0, 100 - (value - 100))],\n        backgroundColor: [value <= 100 ? theme.palette.primary.main : theme.palette.secondary.main, value <= 100 ? theme.palette.neutral.light : theme.palette.primary.main]\n      }],\n      labels: [utils.string.t(label), '']\n    };\n  };\n\n  var cols = [{\n    id: 'layer',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"placement.generic.layer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 27\n    }, this)\n  }, {\n    id: 'premium',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"placement.generic.premium\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 29\n    }, this),\n    align: 'center'\n  }, {\n    id: 'written',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"placement.generic.written\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 29\n    }, this),\n    align: 'center',\n    compact: true\n  }, {\n    id: 'signed',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"placement.generic.signed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 28\n    }, this),\n    align: 'center',\n    compact: true\n  }, {\n    id: 'status',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"placement.generic.status\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 28\n    }, this),\n    align: 'center',\n    compact: true\n  }];\n  var statusPendingId = utils.referenceData.status.getIdByCode(refDataStatusesMarketQuote, constants.STATUS_MARKET_PENDING);\n  var statusQuotedId = utils.referenceData.status.getIdByCode(refDataStatusesMarketQuote, constants.STATUS_MARKET_QUOTED);\n  var statusDeclinedId = utils.referenceData.status.getIdByCode(refDataStatusesMarketQuote, constants.STATUS_MARKET_DECLINED);\n  var policiesFiltered = utils.generic.isValidArray(placement === null || placement === void 0 ? void 0 : placement.policies, true) ? placement.policies.filter(function (policy) {\n    return utils.policy.isOriginGxb(policy);\n  }) : [];\n  var departmentId = get(placement, 'departmentId');\n  var department = utils.referenceData.departments.getById(refDataDepartments, departmentId);\n  var businessTypes = department && department.businessTypes;\n  var policiesGrouped = utils.policies.getByBusinessType(policiesFiltered);\n  var policiesParsed = policiesGrouped.map(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        key = _ref3[0],\n        items = _ref3[1];\n\n    var businessTypeName = utils.referenceData.businessTypes.getNameById(businessTypes, toNumber(key));\n    var orderedItems = utils.policies.orderPolicies(items);\n    return [businessTypeName, orderedItems];\n  }); // abort\n\n  if (utils.generic.isInvalidOrEmptyArray(policiesFiltered)) return null;\n  return /*#__PURE__*/_jsxDEV(PolicyAccordionView, {\n    groups: policiesParsed,\n    cols: cols,\n    statuses: {\n      quoted: statusQuotedId,\n      pending: statusPendingId,\n      declined: statusDeclinedId\n    },\n    handlers: {\n      buildChartData: buildChartData\n    },\n    nestedClasses: nestedClasses\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PolicyAccordion, \"zrRCylpPXf7gnNrwKQ3q7MOYULY=\", false, function () {\n  return [useTheme, useSelector, useSelector];\n});\n\n_c = PolicyAccordion;\nPolicyAccordion.displayName = \"PolicyAccordion\";\nPolicyAccordion.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"PolicyAccordion\",\n  \"props\": {\n    \"nestedClasses\": {\n      \"defaultValue\": {\n        \"value\": \"{}\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"shape\",\n        \"value\": {\n          \"root\": {\n            \"name\": \"string\",\n            \"required\": false\n          }\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"placement\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\modules\\\\PolicyAccordion\\\\PolicyAccordion.js\"] = {\n    name: \"PolicyAccordion\",\n    docgenInfo: PolicyAccordion.__docgenInfo,\n    path: \"src\\\\modules\\\\PolicyAccordion\\\\PolicyAccordion.js\"\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"PolicyAccordion\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/PolicyAccordion/PolicyAccordion.js"],"names":["React","PropTypes","useSelector","get","toNumber","PolicyAccordionView","Translate","selectRefDataDepartments","selectRefDataStatusesMarketQuote","constants","utils","useTheme","PolicyAccordion","propTypes","placement","object","isRequired","nestedClasses","shape","root","string","defaultProps","theme","refDataDepartments","refDataStatusesMarketQuote","buildChartData","value","label","datasets","data","Math","min","max","backgroundColor","palette","primary","main","secondary","neutral","light","labels","t","cols","id","align","compact","statusPendingId","referenceData","status","getIdByCode","STATUS_MARKET_PENDING","statusQuotedId","STATUS_MARKET_QUOTED","statusDeclinedId","STATUS_MARKET_DECLINED","policiesFiltered","generic","isValidArray","policies","filter","policy","isOriginGxb","departmentId","department","departments","getById","businessTypes","policiesGrouped","getByBusinessType","policiesParsed","map","key","items","businessTypeName","getNameById","orderedItems","orderPolicies","isInvalidOrEmptyArray","quoted","pending","declined"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport get from 'lodash/get';\r\nimport toNumber from 'lodash/toNumber';\r\n\r\n// app\r\nimport { PolicyAccordionView } from './PolicyAccordion.view';\r\nimport { Translate } from 'components';\r\nimport { selectRefDataDepartments, selectRefDataStatusesMarketQuote } from 'stores';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport { useTheme } from '@material-ui/core';\r\n\r\nPolicyAccordion.propTypes = {\r\n  placement: PropTypes.object.isRequired,\r\n  nestedClasses: PropTypes.shape({\r\n    root: PropTypes.string,\r\n  }),\r\n};\r\n\r\nPolicyAccordion.defaultProps = {\r\n  nestedClasses: {},\r\n};\r\n\r\nexport default function PolicyAccordion({ placement, nestedClasses }) {\r\n  const theme = useTheme();\r\n  const refDataDepartments = useSelector(selectRefDataDepartments);\r\n  const refDataStatusesMarketQuote = useSelector(selectRefDataStatusesMarketQuote);\r\n\r\n  const buildChartData = (value, label) => {\r\n    return {\r\n      datasets: [\r\n        {\r\n          data: [value <= 100 ? value : Math.min(100, value - 100), value <= 100 ? 100 - value : Math.max(0, 100 - (value - 100))],\r\n          backgroundColor: [\r\n            value <= 100 ? theme.palette.primary.main : theme.palette.secondary.main,\r\n            value <= 100 ? theme.palette.neutral.light : theme.palette.primary.main,\r\n          ],\r\n        },\r\n      ],\r\n      labels: [utils.string.t(label), ''],\r\n    };\r\n  };\r\n\r\n  const cols = [\r\n    { id: 'layer', label: <Translate label=\"placement.generic.layer\" /> },\r\n    { id: 'premium', label: <Translate label=\"placement.generic.premium\" />, align: 'center' },\r\n    { id: 'written', label: <Translate label=\"placement.generic.written\" />, align: 'center', compact: true },\r\n    { id: 'signed', label: <Translate label=\"placement.generic.signed\" />, align: 'center', compact: true },\r\n    { id: 'status', label: <Translate label=\"placement.generic.status\" />, align: 'center', compact: true },\r\n  ];\r\n\r\n  const statusPendingId = utils.referenceData.status.getIdByCode(refDataStatusesMarketQuote, constants.STATUS_MARKET_PENDING);\r\n  const statusQuotedId = utils.referenceData.status.getIdByCode(refDataStatusesMarketQuote, constants.STATUS_MARKET_QUOTED);\r\n  const statusDeclinedId = utils.referenceData.status.getIdByCode(refDataStatusesMarketQuote, constants.STATUS_MARKET_DECLINED);\r\n\r\n  const policiesFiltered = utils.generic.isValidArray(placement?.policies, true)\r\n    ? placement.policies.filter((policy) => {\r\n        return utils.policy.isOriginGxb(policy);\r\n      })\r\n    : [];\r\n\r\n  const departmentId = get(placement, 'departmentId');\r\n  const department = utils.referenceData.departments.getById(refDataDepartments, departmentId);\r\n  const businessTypes = department && department.businessTypes;\r\n\r\n  const policiesGrouped = utils.policies.getByBusinessType(policiesFiltered);\r\n\r\n  const policiesParsed = policiesGrouped.map(([key, items]) => {\r\n    const businessTypeName = utils.referenceData.businessTypes.getNameById(businessTypes, toNumber(key));\r\n\r\n    const orderedItems = utils.policies.orderPolicies(items);\r\n\r\n    return [businessTypeName, orderedItems];\r\n  });\r\n\r\n  // abort\r\n  if (utils.generic.isInvalidOrEmptyArray(policiesFiltered)) return null;\r\n\r\n  return (\r\n    <PolicyAccordionView\r\n      groups={policiesParsed}\r\n      cols={cols}\r\n      statuses={{\r\n        quoted: statusQuotedId,\r\n        pending: statusPendingId,\r\n        declined: statusDeclinedId,\r\n      }}\r\n      handlers={{\r\n        buildChartData,\r\n      }}\r\n      nestedClasses={nestedClasses}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}