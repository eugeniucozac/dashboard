{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\PremiumProcessingCaseDetails\\\\PremiumProcessingCaseDetails.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory, useParams } from 'react-router';\nimport { Helmet } from 'react-helmet';\nimport get from 'lodash/get'; // app\n\nimport { PremiumProcessingCaseDetailsView } from './PremiumProcessingCaseDetails.view';\nimport { getCaseTeamModule, getCheckSigningCaseHistory, getCaseHistoryDetails, getCaseTeamDetails, selectCaseDetails, hideModal, showModal, selectRefDataNewProcessType, selectRefDataNewFacilityType, selectRefDataNewBordereauType, selectRefDataNewBordereauPolicyType, getCaseTeamDetailsSuccess, selectCaseIsCheckSigning, selectUser } from 'stores';\nimport { useConfirmNavigation } from 'hooks';\nimport * as constants from 'consts';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar PremiumProcessingCaseDetails = function PremiumProcessingCaseDetails() {\n  _s();\n\n  var _user$userRole, _user$userRole2;\n\n  var history = useHistory();\n  var dispatch = useDispatch();\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      tab = _useParams.tab;\n\n  var _useConfirmNavigation = useConfirmNavigation(),\n      confirmNavigation = _useConfirmNavigation.confirmNavigation;\n\n  var user = useSelector(selectUser);\n  var caseDetails = useSelector(selectCaseDetails);\n  var uiBrand = useSelector(function (state) {\n    return get(state, 'ui.brand');\n  });\n  var processTypeRefData = useSelector(selectRefDataNewProcessType) || [];\n  var facilityTypeRefData = useSelector(selectRefDataNewFacilityType) || [];\n  var bordereauTypeRefData = useSelector(selectRefDataNewBordereauType) || [];\n  var bordereauPolicyTypeRefData = useSelector(selectRefDataNewBordereauPolicyType) || [];\n  var isCheckSigning = useSelector(selectCaseIsCheckSigning) || false;\n  var isFCE = user === null || user === void 0 ? void 0 : (_user$userRole = user.userRole) === null || _user$userRole === void 0 ? void 0 : _user$userRole.some(function (role) {\n    return (role === null || role === void 0 ? void 0 : role.name) === constants.ROLE_FRONT_END_CONTACT;\n  });\n  var isOperationsLead = user === null || user === void 0 ? void 0 : (_user$userRole2 = user.userRole) === null || _user$userRole2 === void 0 ? void 0 : _user$userRole2.some(function (role) {\n    return (role === null || role === void 0 ? void 0 : role.name) === constants.ROLE_OPERATIONS_LEAD;\n  });\n  var hasDocumentSearchPermission = isFCE || isOperationsLead;\n  var taskId = id || '';\n  var processId = caseDetails.processId,\n      caseId = caseDetails.caseId,\n      caseStageDetails = caseDetails.caseStageDetails;\n  var isIssueDocumentStage = caseStageDetails === null || caseStageDetails === void 0 ? void 0 : caseStageDetails.some(function (cs) {\n    return [constants.BPM_STAGE_ISSUE_DOCUMENTS].includes(cs.bpmStageCode) && cs.active;\n  });\n  var isCompletedStage = caseStageDetails === null || caseStageDetails === void 0 ? void 0 : caseStageDetails.some(function (cs) {\n    return [constants.BPM_STAGE_COMPLETED].includes(cs.bpmStageCode) && cs.active;\n  });\n  var isRejectedStage = caseStageDetails === null || caseStageDetails === void 0 ? void 0 : caseStageDetails.some(function (cs) {\n    return [constants.BPM_STAGE_REJECTED].includes(cs.bpmStageCode) && cs.active;\n  });\n  var breadcrumbs = [{\n    name: 'premiumProcessing',\n    label: utils.string.t('premiumProcessing.breadcrumbs.home'),\n    link: config.routes.premiumProcessing.root\n  }].concat(_toConsumableArray(caseId ? [{\n    name: 'caseId',\n    label: utils.string.t('premiumProcessing.breadcrumbs.case', {\n      id: caseId\n    }),\n    link: '#',\n    active: true\n  }] : []));\n  var tabs = [{\n    value: constants.PREMIUM_PROCESSING_TAB_CASE_DETAILS,\n    label: utils.string.t('premiumProcessing.tabs.caseDetails')\n  }, {\n    value: constants.PREMIUM_PROCESSING_TAB_DOCUMENTS,\n    label: utils.string.t('premiumProcessing.tabs.documents')\n  }, {\n    value: constants.PREMIUM_PROCESSING_TAB_RFI,\n    label: utils.string.t('premiumProcessing.tabs.rfi')\n  }].concat(_toConsumableArray(!isCheckSigning ? [{\n    value: constants.PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS,\n    label: utils.string.t('premiumProcessing.tabs.issueDocuments'),\n    disabled: !isIssueDocumentStage && !isCompletedStage && !isRejectedStage\n  }] : []), [{\n    value: constants.PREMIUM_PROCESSING_TAB_NOTES,\n    label: utils.string.t('premiumProcessing.tabs.notes')\n  }], _toConsumableArray(isCheckSigning ? [{\n    value: constants.PREMIUM_PROCESSING_TAB_HISTORY,\n    label: utils.string.t('premiumProcessing.tabs.history')\n  }] : []));\n  var isValidTab = tabs.map(function (item) {\n    return item.value;\n  }).includes(tab);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDataLoaded = _useState2[0],\n      setIsDataLoaded = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isPageDirty = _useState4[0],\n      setIsPageDirty = _useState4[1];\n\n  var _useState5 = useState(isValidTab ? tab : constants.PREMIUM_PROCESSING_TAB_CASE_DETAILS),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedTab = _useState6[0],\n      setSelectedTab = _useState6[1];\n\n  var openUpdatingPopup = function openUpdatingPopup() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('premiumProcessing.alert'),\n        maxWidth: 'xs',\n        componentProps: {\n          hideCancelButton: true,\n          confirmLabel: utils.string.t('processingInstructions.authorisations.form.confirm'),\n          confirmMessage: /*#__PURE__*/_jsxDEV(\"span\", {\n            dangerouslySetInnerHTML: {\n              __html: \"\".concat(utils.string.t('premiumProcessing.piHyperLinkErrorMessage'))\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, _this),\n          buttonColors: {\n            confirm: 'secondary'\n          },\n          submitHandler: function submitHandler() {},\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  };\n\n  var switchTab = function switchTab(newTab) {\n    setSelectedTab(newTab);\n    setIsPageDirty(false);\n    history.replace(\"\".concat(config.routes.premiumProcessing.case).concat(taskId ? \"/\".concat(taskId) : '').concat(tab ? \"/\".concat(newTab) : ''));\n    dispatch(hideModal());\n  };\n\n  var stayOnTab = function stayOnTab() {\n    dispatch(hideModal());\n  };\n\n  var selectTab = function selectTab(tab) {\n    if (isPageDirty) {\n      confirmNavigation(function () {\n        return switchTab(tab);\n      }, stayOnTab);\n    } else {\n      setIsPageDirty(false);\n      setSelectedTab(tab);\n      history.replace(\"\".concat(config.routes.premiumProcessing.case).concat(taskId ? \"/\".concat(taskId) : '').concat(tab ? \"/\".concat(tab) : '').concat(tab === constants.PREMIUM_PROCESSING_TAB_RFI ? \"/\".concat(constants.PREMIUM_PROCESSING_TAB_NEW_RFI) : tab === constants.PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS ? \"/\".concat(constants.PREMIUM_PROCESSING_TAB_NON_BUREAU) : ''));\n    }\n  };\n\n  useEffect(function () {\n    if (taskId && !isDataLoaded) {\n      dispatch(getCaseTeamDetails({\n        taskId: taskId,\n        taskView: caseDetails.taskView || constants.WORKLIST\n      })).then(function (response) {\n        if ((response === null || response === void 0 ? void 0 : response.message) === constants.API_RESPONSE_SUCCESS) {\n          var _response$status;\n\n          if ((response === null || response === void 0 ? void 0 : (_response$status = response.status) === null || _response$status === void 0 ? void 0 : _response$status.toUpperCase()) === constants.API_RESPONSE_OK) {\n            var _response$data, _response$data$caseDe, _response$data2, _response$data2$caseD, _response$data3, _response$data3$caseD, _response$data4, _response$data4$caseD, _response$data7, _response$data7$caseD;\n\n            response.data.caseDetails.processId = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$caseDe = _response$data.caseDetails) === null || _response$data$caseDe === void 0 ? void 0 : _response$data$caseDe.processId) && utils.referenceData.processTypes.getNameById(processTypeRefData, (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$caseD = _response$data2.caseDetails) === null || _response$data2$caseD === void 0 ? void 0 : _response$data2$caseD.processId) || '';\n\n            if (((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : (_response$data3$caseD = _response$data3.caseDetails) === null || _response$data3$caseD === void 0 ? void 0 : _response$data3$caseD.processId) === constants.FDO && ((_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : (_response$data4$caseD = _response$data4.caseDetails) === null || _response$data4$caseD === void 0 ? void 0 : _response$data4$caseD.facilityTypeId)) {\n              var _response$data5, _response$data5$caseD, _response$data6, _response$data6$caseD;\n\n              var facilityTypesName = utils.generic.isValidArray(facilityTypeRefData, true) && ((_response$data5 = response.data) === null || _response$data5 === void 0 ? void 0 : (_response$data5$caseD = _response$data5.caseDetails) === null || _response$data5$caseD === void 0 ? void 0 : _response$data5$caseD.facilityTypeId) && utils.referenceData.facilityTypes.getNameById(facilityTypeRefData, (_response$data6 = response.data) === null || _response$data6 === void 0 ? void 0 : (_response$data6$caseD = _response$data6.caseDetails) === null || _response$data6$caseD === void 0 ? void 0 : _response$data6$caseD.facilityTypeId) || '';\n              response.data.caseDetails.facilityTypeId = facilityTypesName;\n            }\n\n            if (((_response$data7 = response.data) === null || _response$data7 === void 0 ? void 0 : (_response$data7$caseD = _response$data7.caseDetails) === null || _response$data7$caseD === void 0 ? void 0 : _response$data7$caseD.processId) === constants.BORDEREAU) {\n              var _response$data8, _response$data8$caseD, _response$data11, _response$data11$case;\n\n              if ((_response$data8 = response.data) === null || _response$data8 === void 0 ? void 0 : (_response$data8$caseD = _response$data8.caseDetails) === null || _response$data8$caseD === void 0 ? void 0 : _response$data8$caseD.bordereauTypeId) {\n                var _response$data9, _response$data9$caseD, _response$data10, _response$data10$case;\n\n                var bordereauTypeName = utils.generic.isValidArray(bordereauTypeRefData, true) && ((_response$data9 = response.data) === null || _response$data9 === void 0 ? void 0 : (_response$data9$caseD = _response$data9.caseDetails) === null || _response$data9$caseD === void 0 ? void 0 : _response$data9$caseD.bordereauTypeId) && utils.referenceData.bordereauTypes.getNameById(bordereauTypeRefData, (_response$data10 = response.data) === null || _response$data10 === void 0 ? void 0 : (_response$data10$case = _response$data10.caseDetails) === null || _response$data10$case === void 0 ? void 0 : _response$data10$case.bordereauTypeId) || '';\n                response.data.caseDetails.bordereauTypeId = bordereauTypeName;\n              }\n\n              if ((_response$data11 = response.data) === null || _response$data11 === void 0 ? void 0 : (_response$data11$case = _response$data11.caseDetails) === null || _response$data11$case === void 0 ? void 0 : _response$data11$case.policyTypeId) {\n                var _response$data12, _response$data12$case, _response$data13, _response$data13$case;\n\n                var bordereauPolicyTypeName = utils.generic.isValidArray(bordereauPolicyTypeRefData, true) && ((_response$data12 = response.data) === null || _response$data12 === void 0 ? void 0 : (_response$data12$case = _response$data12.caseDetails) === null || _response$data12$case === void 0 ? void 0 : _response$data12$case.policyTypeId) && utils.referenceData.bordereauPolicyTypes.getNameById(bordereauPolicyTypeRefData, (_response$data13 = response.data) === null || _response$data13 === void 0 ? void 0 : (_response$data13$case = _response$data13.caseDetails) === null || _response$data13$case === void 0 ? void 0 : _response$data13$case.policyTypeId) || '';\n                response.data.caseDetails.policyTypeId = bordereauPolicyTypeName;\n              }\n            }\n\n            dispatch(getCaseTeamDetailsSuccess(response.data));\n          }\n        }\n      });\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    var getData = function getData() {\n      var promises = [dispatch(getCaseTeamModule({\n        taskId: taskId\n      })), dispatch(getCaseHistoryDetails({\n        taskId: taskId,\n        processId: processId\n      })), dispatch(getCheckSigningCaseHistory({\n        processId: processId\n      }))];\n      return Promise.allSettled(promises).then(function (results) {\n        return Promise.resolve(results);\n      });\n    };\n\n    if (processId) {\n      getData().then(function (data) {\n        if (utils.generic.isValidArray(data, true)) {\n          setIsDataLoaded(true);\n        }\n      });\n    }\n  }, [taskId, processId]); // eslint-disable-line react-hooks/exhaustive-deps\n  // abort\n\n  if (!isDataLoaded) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\".concat(utils.string.t('premiumProcessing.title'), \" - \").concat(utils.app.getAppName(uiBrand))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(PremiumProcessingCaseDetailsView, {\n      hasDocumentSearchPermission: hasDocumentSearchPermission,\n      taskId: taskId,\n      caseId: caseId,\n      caseDetails: caseDetails,\n      breadcrumbs: breadcrumbs,\n      tabs: tabs,\n      selectedTab: selectedTab,\n      isPageDirty: isPageDirty,\n      handlers: {\n        confirmNavigation: confirmNavigation,\n        openUpdatingPopup: openUpdatingPopup,\n        selectTab: selectTab,\n        setIsPageDirty: setIsPageDirty\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(PremiumProcessingCaseDetails, \"BBgY+i6/pGl8CqLDYfeBOMEhMNI=\", false, function () {\n  return [useHistory, useDispatch, useParams, useConfirmNavigation, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = PremiumProcessingCaseDetails;\nexport default PremiumProcessingCaseDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"PremiumProcessingCaseDetails\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/PremiumProcessingCaseDetails/PremiumProcessingCaseDetails.js"],"names":["React","useEffect","useState","useSelector","useDispatch","useHistory","useParams","Helmet","get","PremiumProcessingCaseDetailsView","getCaseTeamModule","getCheckSigningCaseHistory","getCaseHistoryDetails","getCaseTeamDetails","selectCaseDetails","hideModal","showModal","selectRefDataNewProcessType","selectRefDataNewFacilityType","selectRefDataNewBordereauType","selectRefDataNewBordereauPolicyType","getCaseTeamDetailsSuccess","selectCaseIsCheckSigning","selectUser","useConfirmNavigation","constants","utils","config","PremiumProcessingCaseDetails","history","dispatch","id","tab","confirmNavigation","user","caseDetails","uiBrand","state","processTypeRefData","facilityTypeRefData","bordereauTypeRefData","bordereauPolicyTypeRefData","isCheckSigning","isFCE","userRole","some","role","name","ROLE_FRONT_END_CONTACT","isOperationsLead","ROLE_OPERATIONS_LEAD","hasDocumentSearchPermission","taskId","processId","caseId","caseStageDetails","isIssueDocumentStage","cs","BPM_STAGE_ISSUE_DOCUMENTS","includes","bpmStageCode","active","isCompletedStage","BPM_STAGE_COMPLETED","isRejectedStage","BPM_STAGE_REJECTED","breadcrumbs","label","string","t","link","routes","premiumProcessing","root","tabs","value","PREMIUM_PROCESSING_TAB_CASE_DETAILS","PREMIUM_PROCESSING_TAB_DOCUMENTS","PREMIUM_PROCESSING_TAB_RFI","PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS","disabled","PREMIUM_PROCESSING_TAB_NOTES","PREMIUM_PROCESSING_TAB_HISTORY","isValidTab","map","item","isDataLoaded","setIsDataLoaded","isPageDirty","setIsPageDirty","selectedTab","setSelectedTab","openUpdatingPopup","component","props","fullWidth","title","maxWidth","componentProps","hideCancelButton","confirmLabel","confirmMessage","__html","buttonColors","confirm","submitHandler","handleClose","switchTab","newTab","replace","case","stayOnTab","selectTab","PREMIUM_PROCESSING_TAB_NEW_RFI","PREMIUM_PROCESSING_TAB_NON_BUREAU","taskView","WORKLIST","then","response","message","API_RESPONSE_SUCCESS","status","toUpperCase","API_RESPONSE_OK","data","referenceData","processTypes","getNameById","FDO","facilityTypeId","facilityTypesName","generic","isValidArray","facilityTypes","BORDEREAU","bordereauTypeId","bordereauTypeName","bordereauTypes","policyTypeId","bordereauPolicyTypeName","bordereauPolicyTypes","getData","promises","Promise","allSettled","results","resolve","app","getAppName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { Helmet } from 'react-helmet';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { PremiumProcessingCaseDetailsView } from './PremiumProcessingCaseDetails.view';\r\nimport {\r\n  getCaseTeamModule,\r\n  getCheckSigningCaseHistory,\r\n  getCaseHistoryDetails,\r\n  getCaseTeamDetails,\r\n  selectCaseDetails,\r\n  hideModal,\r\n  showModal,\r\n  selectRefDataNewProcessType,\r\n  selectRefDataNewFacilityType,\r\n  selectRefDataNewBordereauType,\r\n  selectRefDataNewBordereauPolicyType,\r\n  getCaseTeamDetailsSuccess,\r\n  selectCaseIsCheckSigning,\r\n  selectUser,\r\n} from 'stores';\r\nimport { useConfirmNavigation } from 'hooks';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\n\r\nconst PremiumProcessingCaseDetails = () => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const { id, tab } = useParams();\r\n  const { confirmNavigation } = useConfirmNavigation();\r\n\r\n  const user = useSelector(selectUser);\r\n  const caseDetails = useSelector(selectCaseDetails);\r\n  const uiBrand = useSelector((state) => get(state, 'ui.brand'));\r\n  const processTypeRefData = useSelector(selectRefDataNewProcessType) || [];\r\n  const facilityTypeRefData = useSelector(selectRefDataNewFacilityType) || [];\r\n  const bordereauTypeRefData = useSelector(selectRefDataNewBordereauType) || [];\r\n  const bordereauPolicyTypeRefData = useSelector(selectRefDataNewBordereauPolicyType) || [];\r\n  const isCheckSigning = useSelector(selectCaseIsCheckSigning) || false;\r\n  const isFCE = user?.userRole?.some((role) => role?.name === constants.ROLE_FRONT_END_CONTACT);\r\n  const isOperationsLead = user?.userRole?.some((role) => role?.name === constants.ROLE_OPERATIONS_LEAD);\r\n  const hasDocumentSearchPermission = isFCE || isOperationsLead;\r\n\r\n  const taskId = id || '';\r\n  const { processId, caseId, caseStageDetails } = caseDetails;\r\n  const isIssueDocumentStage = caseStageDetails?.some((cs) => [constants.BPM_STAGE_ISSUE_DOCUMENTS].includes(cs.bpmStageCode) && cs.active);\r\n  const isCompletedStage = caseStageDetails?.some((cs) => [constants.BPM_STAGE_COMPLETED].includes(cs.bpmStageCode) && cs.active);\r\n  const isRejectedStage = caseStageDetails?.some((cs) => [constants.BPM_STAGE_REJECTED].includes(cs.bpmStageCode) && cs.active);\r\n\r\n  const breadcrumbs = [\r\n    {\r\n      name: 'premiumProcessing',\r\n      label: utils.string.t('premiumProcessing.breadcrumbs.home'),\r\n      link: config.routes.premiumProcessing.root,\r\n    },\r\n    ...(caseId\r\n      ? [\r\n          {\r\n            name: 'caseId',\r\n            label: utils.string.t('premiumProcessing.breadcrumbs.case', { id: caseId }),\r\n            link: '#',\r\n            active: true,\r\n          },\r\n        ]\r\n      : []),\r\n  ];\r\n\r\n  const tabs = [\r\n    { value: constants.PREMIUM_PROCESSING_TAB_CASE_DETAILS, label: utils.string.t('premiumProcessing.tabs.caseDetails') },\r\n    { value: constants.PREMIUM_PROCESSING_TAB_DOCUMENTS, label: utils.string.t('premiumProcessing.tabs.documents') },\r\n    { value: constants.PREMIUM_PROCESSING_TAB_RFI, label: utils.string.t('premiumProcessing.tabs.rfi') },\r\n    ...(!isCheckSigning\r\n      ? [\r\n          {\r\n            value: constants.PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS,\r\n            label: utils.string.t('premiumProcessing.tabs.issueDocuments'),\r\n            disabled: !isIssueDocumentStage && !isCompletedStage && !isRejectedStage,\r\n          },\r\n        ]\r\n      : []),\r\n    { value: constants.PREMIUM_PROCESSING_TAB_NOTES, label: utils.string.t('premiumProcessing.tabs.notes') },\r\n    ...(isCheckSigning\r\n      ? [{ value: constants.PREMIUM_PROCESSING_TAB_HISTORY, label: utils.string.t('premiumProcessing.tabs.history') }]\r\n      : []),\r\n  ];\r\n\r\n  const isValidTab = tabs.map((item) => item.value).includes(tab);\r\n\r\n  const [isDataLoaded, setIsDataLoaded] = useState(false);\r\n  const [isPageDirty, setIsPageDirty] = useState(false);\r\n  const [selectedTab, setSelectedTab] = useState(isValidTab ? tab : constants.PREMIUM_PROCESSING_TAB_CASE_DETAILS);\r\n\r\n  const openUpdatingPopup = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('premiumProcessing.alert'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            hideCancelButton: true,\r\n            confirmLabel: utils.string.t('processingInstructions.authorisations.form.confirm'),\r\n            confirmMessage: (\r\n              <span\r\n                dangerouslySetInnerHTML={{\r\n                  __html: `${utils.string.t('premiumProcessing.piHyperLinkErrorMessage')}`,\r\n                }}\r\n              />\r\n            ),\r\n            buttonColors: { confirm: 'secondary' },\r\n            submitHandler: () => {},\r\n            handleClose: () => {},\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const switchTab = (newTab) => {\r\n    setSelectedTab(newTab);\r\n    setIsPageDirty(false);\r\n    history.replace(`${config.routes.premiumProcessing.case}${taskId ? `/${taskId}` : ''}${tab ? `/${newTab}` : ''}`);\r\n    dispatch(hideModal());\r\n  };\r\n\r\n  const stayOnTab = () => {\r\n    dispatch(hideModal());\r\n  };\r\n\r\n  const selectTab = (tab) => {\r\n    if (isPageDirty) {\r\n      confirmNavigation(() => switchTab(tab), stayOnTab);\r\n    } else {\r\n      setIsPageDirty(false);\r\n      setSelectedTab(tab);\r\n\r\n      history.replace(\r\n        `${config.routes.premiumProcessing.case}${taskId ? `/${taskId}` : ''}${tab ? `/${tab}` : ''}${\r\n          tab === constants.PREMIUM_PROCESSING_TAB_RFI\r\n            ? `/${constants.PREMIUM_PROCESSING_TAB_NEW_RFI}`\r\n            : tab === constants.PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS\r\n            ? `/${constants.PREMIUM_PROCESSING_TAB_NON_BUREAU}`\r\n            : ''\r\n        }`\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (taskId && !isDataLoaded) {\r\n      dispatch(getCaseTeamDetails({ taskId, taskView: caseDetails.taskView || constants.WORKLIST })).then((response) => {\r\n        if (response?.message === constants.API_RESPONSE_SUCCESS) {\r\n          if (response?.status?.toUpperCase() === constants.API_RESPONSE_OK) {\r\n            response.data.caseDetails.processId =\r\n              (response.data?.caseDetails?.processId &&\r\n                utils.referenceData.processTypes.getNameById(processTypeRefData, response.data?.caseDetails?.processId)) ||\r\n              '';\r\n            if (response.data?.caseDetails?.processId === constants.FDO && response.data?.caseDetails?.facilityTypeId) {\r\n              const facilityTypesName =\r\n                (utils.generic.isValidArray(facilityTypeRefData, true) &&\r\n                  response.data?.caseDetails?.facilityTypeId &&\r\n                  utils.referenceData.facilityTypes.getNameById(facilityTypeRefData, response.data?.caseDetails?.facilityTypeId)) ||\r\n                '';\r\n              response.data.caseDetails.facilityTypeId = facilityTypesName;\r\n            }\r\n            if (response.data?.caseDetails?.processId === constants.BORDEREAU) {\r\n              if (response.data?.caseDetails?.bordereauTypeId) {\r\n                const bordereauTypeName =\r\n                  (utils.generic.isValidArray(bordereauTypeRefData, true) &&\r\n                    response.data?.caseDetails?.bordereauTypeId &&\r\n                    utils.referenceData.bordereauTypes.getNameById(bordereauTypeRefData, response.data?.caseDetails?.bordereauTypeId)) ||\r\n                  '';\r\n                response.data.caseDetails.bordereauTypeId = bordereauTypeName;\r\n              }\r\n              if (response.data?.caseDetails?.policyTypeId) {\r\n                const bordereauPolicyTypeName =\r\n                  (utils.generic.isValidArray(bordereauPolicyTypeRefData, true) &&\r\n                    response.data?.caseDetails?.policyTypeId &&\r\n                    utils.referenceData.bordereauPolicyTypes.getNameById(\r\n                      bordereauPolicyTypeRefData,\r\n                      response.data?.caseDetails?.policyTypeId\r\n                    )) ||\r\n                  '';\r\n                response.data.caseDetails.policyTypeId = bordereauPolicyTypeName;\r\n              }\r\n            }\r\n            dispatch(getCaseTeamDetailsSuccess(response.data));\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    const getData = () => {\r\n      const promises = [\r\n        dispatch(getCaseTeamModule({ taskId })),\r\n        dispatch(getCaseHistoryDetails({ taskId, processId })),\r\n        dispatch(getCheckSigningCaseHistory({ processId })),\r\n      ];\r\n      return Promise.allSettled(promises).then((results) => Promise.resolve(results));\r\n    };\r\n\r\n    if (processId) {\r\n      getData().then((data) => {\r\n        if (utils.generic.isValidArray(data, true)) {\r\n          setIsDataLoaded(true);\r\n        }\r\n      });\r\n    }\r\n  }, [taskId, processId]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // abort\r\n  if (!isDataLoaded) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${utils.string.t('premiumProcessing.title')} - ${utils.app.getAppName(uiBrand)}`}</title>\r\n      </Helmet>\r\n      <PremiumProcessingCaseDetailsView\r\n        hasDocumentSearchPermission={hasDocumentSearchPermission}\r\n        taskId={taskId}\r\n        caseId={caseId}\r\n        caseDetails={caseDetails}\r\n        breadcrumbs={breadcrumbs}\r\n        tabs={tabs}\r\n        selectedTab={selectedTab}\r\n        isPageDirty={isPageDirty}\r\n        handlers={{ confirmNavigation, openUpdatingPopup, selectTab, setIsPageDirty }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PremiumProcessingCaseDetails;\r\n"]},"metadata":{},"sourceType":"module"}