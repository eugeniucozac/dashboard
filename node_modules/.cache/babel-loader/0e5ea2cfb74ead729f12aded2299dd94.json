{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ReportingGroup\\\\ReportingGroup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams, useHistory } from 'react-router';\nimport { Helmet } from 'react-helmet';\nimport { ReportingGroupView } from './ReportingGroup.view';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { showModal, selectReportList, getReportList, selectSelectedGroup, deleteReport, selectIsReportAdmin } from 'stores';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Reporting() {\n  _s();\n\n  var _useParams = useParams(),\n      id = _useParams.id;\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var brand = useSelector(function (state) {\n    return state.ui.brand;\n  });\n  var reportingList = useSelector(selectReportList);\n  var selectedGroup = useSelector(selectSelectedGroup);\n  var isReportAdmin = useSelector(selectIsReportAdmin);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      breadcrumbs = _useState2[0],\n      setBreadcrumbs = _useState2[1];\n\n  var groupTitle = selectedGroup.name;\n  var reportGroupId = id;\n  useEffect(function () {\n    dispatch(getReportList(id));\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setBreadcrumbs([{\n      name: 'report-group',\n      label: utils.string.t('reporting.title'),\n      link: \"\".concat(config.routes.reporting.root)\n    }, {\n      name: 'report',\n      label: groupTitle || '',\n      link: \"\".concat(config.routes.reporting.root, \"/\").concat(id),\n      active: false\n    }]);\n  }, [groupTitle] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  var filterReportngList = reportingList.items;\n\n  var setActiveStep = function setActiveStep(breadcrumbs) {\n    return breadcrumbs.map(function (item) {\n      if (item.name === 'report' && history.location.pathname.includes(\"reporting/\".concat(id))) {\n        item.active = true;\n      } else {\n        item.active = history.location.pathname === item.link;\n      }\n\n      return item;\n    });\n  };\n\n  var handleClickRow = function handleClickRow(report) {\n    return function (event) {\n      var id = report.id;\n      var reportTitle = report.title;\n      var route = report.id && \"\".concat(config.routes.reporting.root);\n      var slug = groupTitle.toLowerCase().replace(/\\s/g, '-');\n      history.push(\"\".concat(route, \"/\").concat(slug, \"/\").concat(id), {\n        groupTitle: groupTitle,\n        reportTitle: reportTitle,\n        reportGroupId: reportGroupId\n      });\n    };\n  };\n\n  var handleEdit = function handleEdit(popoverData) {\n    dispatch(showModal({\n      component: 'EDIT_REPORT_GROUP',\n      props: {\n        fullWidth: false,\n        maxWidth: 'sm',\n        title: utils.string.t('reporting.editReport'),\n        componentProps: _objectSpread(_objectSpread({}, popoverData), {}, {\n          report: popoverData\n        })\n      }\n    }));\n  };\n\n  var handleAdd = function handleAdd() {\n    var newPopoverData = {\n      groupId: id\n    };\n    dispatch(showModal({\n      component: 'ADD_REPORT_GROUP',\n      props: {\n        fullWidth: false,\n        maxWidth: 'sm',\n        title: utils.string.t('reporting.addReport'),\n        componentProps: _objectSpread(_objectSpread({}, newPopoverData), {}, {\n          report: newPopoverData\n        })\n      }\n    }));\n  };\n\n  var handleDelete = function handleDelete(popoverData) {\n    var submitHandler = function submitHandler() {\n      dispatch(deleteReport(popoverData === null || popoverData === void 0 ? void 0 : popoverData.id));\n    };\n\n    dispatch(showModal({\n      component: 'CONFIRM_DELETE',\n      props: {\n        title: utils.string.t('reporting.deleteReport'),\n        subtitle: popoverData.title,\n        fullWidth: true,\n        maxWidth: 'xs',\n        disableAutoFocus: true,\n        componentProps: {\n          submitHandler: submitHandler\n        }\n      }\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\".concat(groupTitle, \" - \").concat(groupTitle, \" - \").concat(utils.app.getAppName(brand))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReportingGroupView, {\n      isReportAdmin: isReportAdmin,\n      groupTitle: groupTitle || '',\n      groupId: id,\n      list: filterReportngList,\n      handleClickRow: handleClickRow,\n      handleAdd: handleAdd,\n      handleEdit: handleEdit,\n      handleDelete: handleDelete,\n      breadcrumbs: setActiveStep(breadcrumbs) || []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Reporting, \"Dpmt8jsG5vb3GK8RqNI01g0hC5g=\", false, function () {\n  return [useParams, useDispatch, useHistory, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Reporting;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reporting\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ReportingGroup/ReportingGroup.js"],"names":["React","useEffect","useState","useSelector","useDispatch","useParams","useHistory","Helmet","ReportingGroupView","utils","config","showModal","selectReportList","getReportList","selectSelectedGroup","deleteReport","selectIsReportAdmin","Reporting","id","dispatch","history","brand","state","ui","reportingList","selectedGroup","isReportAdmin","breadcrumbs","setBreadcrumbs","groupTitle","name","reportGroupId","label","string","t","link","routes","reporting","root","active","filterReportngList","items","setActiveStep","map","item","location","pathname","includes","handleClickRow","report","event","reportTitle","title","route","slug","toLowerCase","replace","push","handleEdit","popoverData","component","props","fullWidth","maxWidth","componentProps","handleAdd","newPopoverData","groupId","handleDelete","submitHandler","subtitle","disableAutoFocus","app","getAppName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useParams, useHistory } from 'react-router';\r\nimport { Helmet } from 'react-helmet';\r\n\r\nimport { ReportingGroupView } from './ReportingGroup.view';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport { showModal, selectReportList, getReportList, selectSelectedGroup, deleteReport, selectIsReportAdmin } from 'stores';\r\n\r\nexport default function Reporting() {\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const brand = useSelector((state) => state.ui.brand);\r\n  const reportingList = useSelector(selectReportList);\r\n  const selectedGroup = useSelector(selectSelectedGroup);\r\n  const isReportAdmin = useSelector(selectIsReportAdmin);\r\n  const [breadcrumbs, setBreadcrumbs] = useState([]);\r\n  const groupTitle = selectedGroup.name;\r\n  const reportGroupId = id;\r\n\r\n  useEffect(() => {\r\n    dispatch(getReportList(id));\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(\r\n    () => {\r\n      setBreadcrumbs([\r\n        {\r\n          name: 'report-group',\r\n          label: utils.string.t('reporting.title'),\r\n          link: `${config.routes.reporting.root}`,\r\n        },\r\n        {\r\n          name: 'report',\r\n          label: groupTitle || '',\r\n          link: `${config.routes.reporting.root}/${id}`,\r\n          active: false,\r\n        },\r\n      ]);\r\n    },\r\n    [groupTitle] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const filterReportngList = reportingList.items;\r\n\r\n  const setActiveStep = (breadcrumbs) => {\r\n    return breadcrumbs.map((item) => {\r\n      if (item.name === 'report' && history.location.pathname.includes(`reporting/${id}`)) {\r\n        item.active = true;\r\n      } else {\r\n        item.active = history.location.pathname === item.link;\r\n      }\r\n      return item;\r\n    });\r\n  };\r\n  const handleClickRow = (report) => (event) => {\r\n    const id = report.id;\r\n    const reportTitle = report.title;\r\n    const route = report.id && `${config.routes.reporting.root}`;\r\n    const slug = groupTitle.toLowerCase().replace(/\\s/g, '-');\r\n    history.push(`${route}/${slug}/${id}`, { groupTitle, reportTitle, reportGroupId });\r\n  };\r\n\r\n  const handleEdit = (popoverData) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'EDIT_REPORT_GROUP',\r\n        props: {\r\n          fullWidth: false,\r\n          maxWidth: 'sm',\r\n          title: utils.string.t('reporting.editReport'),\r\n          componentProps: {\r\n            ...popoverData,\r\n            report: popoverData,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n  const handleAdd = () => {\r\n    const newPopoverData = { groupId: id };\r\n    dispatch(\r\n      showModal({\r\n        component: 'ADD_REPORT_GROUP',\r\n        props: {\r\n          fullWidth: false,\r\n          maxWidth: 'sm',\r\n          title: utils.string.t('reporting.addReport'),\r\n          componentProps: {\r\n            ...newPopoverData,\r\n            report: newPopoverData,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n  const handleDelete = (popoverData) => {\r\n    let submitHandler = () => {\r\n      dispatch(deleteReport(popoverData?.id));\r\n    };\r\n\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM_DELETE',\r\n        props: {\r\n          title: utils.string.t('reporting.deleteReport'),\r\n          subtitle: popoverData.title,\r\n          fullWidth: true,\r\n          maxWidth: 'xs',\r\n          disableAutoFocus: true,\r\n          componentProps: {\r\n            submitHandler,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${groupTitle} - ${groupTitle} - ${utils.app.getAppName(brand)}`}</title>\r\n      </Helmet>\r\n      <ReportingGroupView\r\n        isReportAdmin={isReportAdmin}\r\n        groupTitle={groupTitle || ''}\r\n        groupId={id}\r\n        list={filterReportngList}\r\n        handleClickRow={handleClickRow}\r\n        handleAdd={handleAdd}\r\n        handleEdit={handleEdit}\r\n        handleDelete={handleDelete}\r\n        breadcrumbs={setActiveStep(breadcrumbs) || []}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}