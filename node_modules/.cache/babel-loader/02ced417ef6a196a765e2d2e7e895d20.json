{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\forms\\\\EditTripBrokers\\\\EditTripBrokers.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport get from 'lodash/get'; // app\n\nimport { EditTripBrokersView } from './EditTripBrokers.view';\nimport { editTripVisit, putTrip, hideModal, selectRefDataDepartmentUsers } from 'stores';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nEditTripBrokers.propTypes = {\n  visit: PropTypes.object.isRequired,\n  inlineEditMode: PropTypes.bool.isRequired,\n  handleClose: PropTypes.func.isRequired\n};\nexport default function EditTripBrokers(_ref) {\n  _s();\n\n  var _ref$visit = _ref.visit,\n      visit = _ref$visit === void 0 ? {} : _ref$visit,\n      inlineEditMode = _ref.inlineEditMode,\n      handleClose = _ref.handleClose;\n  var dispatch = useDispatch();\n  var refDataDepartmentUsers = useSelector(selectRefDataDepartmentUsers);\n  var users = get(visit, 'users') || [];\n  var usersOptions = utils.users.getWithName(refDataDepartmentUsers).map(function (broker) {\n    return _objectSpread(_objectSpread({}, broker), {}, {\n      label: utils.user.fullname(broker)\n    });\n  });\n  var usersSelected = users.map(function (user) {\n    return _objectSpread(_objectSpread({}, user), {}, {\n      label: utils.user.fullname(user)\n    });\n  });\n  var fields = [{\n    name: 'users',\n    type: 'autocomplete',\n    value: usersSelected || [],\n    label: utils.string.t('form.brokers.label'),\n    hint: utils.string.t('form.brokers.hint'),\n    options: usersOptions,\n    optionKey: 'id',\n    optionLabel: 'label',\n    validation: Yup.array().min(1, utils.string.t('trips.validation.users')).required(utils.string.t('trips.validation.users')),\n    muiComponentProps: {\n      autoFocus: true\n    },\n    innerComponentProps: {\n      isMulti: true,\n      allowEmpty: true,\n      maxMenuHeight: 200,\n      'data-testid': 'brokers'\n    }\n  }, {\n    name: 'id',\n    type: 'hidden',\n    value: visit.id\n  }];\n  var actions = [{\n    name: 'cancel',\n    label: utils.string.t('app.cancel'),\n    handler: handleClose\n  }, {\n    name: 'submit',\n    label: utils.string.t('app.submit'),\n    handler: function handler(formData) {\n      dispatch(hideModal());\n      dispatch(editTripVisit(formData));\n\n      if (inlineEditMode) {\n        dispatch(putTrip());\n      }\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(EditTripBrokersView, {\n    fields: fields,\n    actions: actions\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 10\n  }, this);\n}\n\n_s(EditTripBrokers, \"rRafmOd9gpOBGH/LSaPIdxrh7Dc=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = EditTripBrokers;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditTripBrokers\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/forms/EditTripBrokers/EditTripBrokers.js"],"names":["React","PropTypes","useDispatch","useSelector","Yup","get","EditTripBrokersView","editTripVisit","putTrip","hideModal","selectRefDataDepartmentUsers","utils","EditTripBrokers","propTypes","visit","object","isRequired","inlineEditMode","bool","handleClose","func","dispatch","refDataDepartmentUsers","users","usersOptions","getWithName","map","broker","label","user","fullname","usersSelected","fields","name","type","value","string","t","hint","options","optionKey","optionLabel","validation","array","min","required","muiComponentProps","autoFocus","innerComponentProps","isMulti","allowEmpty","maxMenuHeight","id","actions","handler","formData"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport * as Yup from 'yup';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { EditTripBrokersView } from './EditTripBrokers.view';\r\nimport { editTripVisit, putTrip, hideModal, selectRefDataDepartmentUsers } from 'stores';\r\nimport * as utils from 'utils';\r\n\r\nEditTripBrokers.propTypes = {\r\n  visit: PropTypes.object.isRequired,\r\n  inlineEditMode: PropTypes.bool.isRequired,\r\n  handleClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default function EditTripBrokers({ visit = {}, inlineEditMode, handleClose }) {\r\n  const dispatch = useDispatch();\r\n  const refDataDepartmentUsers = useSelector(selectRefDataDepartmentUsers);\r\n  const users = get(visit, 'users') || [];\r\n\r\n  const usersOptions = utils.users.getWithName(refDataDepartmentUsers).map((broker) => {\r\n    return {\r\n      ...broker,\r\n      label: utils.user.fullname(broker),\r\n    };\r\n  });\r\n\r\n  const usersSelected = users.map((user) => {\r\n    return {\r\n      ...user,\r\n      label: utils.user.fullname(user),\r\n    };\r\n  });\r\n\r\n  const fields = [\r\n    {\r\n      name: 'users',\r\n      type: 'autocomplete',\r\n      value: usersSelected || [],\r\n      label: utils.string.t('form.brokers.label'),\r\n      hint: utils.string.t('form.brokers.hint'),\r\n      options: usersOptions,\r\n      optionKey: 'id',\r\n      optionLabel: 'label',\r\n      validation: Yup.array().min(1, utils.string.t('trips.validation.users')).required(utils.string.t('trips.validation.users')),\r\n      muiComponentProps: {\r\n        autoFocus: true,\r\n      },\r\n      innerComponentProps: {\r\n        isMulti: true,\r\n        allowEmpty: true,\r\n        maxMenuHeight: 200,\r\n        'data-testid': 'brokers',\r\n      },\r\n    },\r\n    {\r\n      name: 'id',\r\n      type: 'hidden',\r\n      value: visit.id,\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'cancel',\r\n      label: utils.string.t('app.cancel'),\r\n      handler: handleClose,\r\n    },\r\n    {\r\n      name: 'submit',\r\n      label: utils.string.t('app.submit'),\r\n      handler: (formData) => {\r\n        dispatch(hideModal());\r\n        dispatch(editTripVisit(formData));\r\n\r\n        if (inlineEditMode) {\r\n          dispatch(putTrip());\r\n        }\r\n      },\r\n    },\r\n  ];\r\n\r\n  return <EditTripBrokersView fields={fields} actions={actions} />;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}