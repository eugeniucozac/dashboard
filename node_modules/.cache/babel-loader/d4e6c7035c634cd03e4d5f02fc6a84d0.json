{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\FormFileDrop\\\\FormFileDrop.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDropzone } from 'react-dropzone';\nimport { Controller } from 'react-hook-form';\nimport classnames from 'classnames'; // app\n\nimport * as utils from 'utils';\nimport styles from './FormFileDrop.styles';\nimport { ErrorMessage, Button, Warning } from 'components'; // mui\n\nimport { makeStyles, Box } from '@material-ui/core';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport InfoIcon from '@material-ui/icons/Info';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport HighlightOffRoundedIcon from '@material-ui/icons/HighlightOffRounded';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nFormFileDrop.propTypes = {\n  name: PropTypes.string.isRequired,\n  control: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  label: PropTypes.string,\n  dragLabel: PropTypes.string,\n  hint: PropTypes.string,\n  error: PropTypes.object,\n  showUploadPreview: PropTypes.bool,\n  fileNameLength: PropTypes.number,\n  componentProps: PropTypes.object,\n  showDragLabel: PropTypes.bool,\n  showButton: PropTypes.bool,\n  showMaxFilesError: PropTypes.bool,\n  nestedClasses: PropTypes.shape({\n    dragArea: PropTypes.string,\n    dragLabel: PropTypes.string,\n    icon: PropTypes.string\n  })\n};\nFormFileDrop.defaultProps = {\n  showUploadPreview: true,\n  fileNameLength: 48,\n  showDragLabel: true,\n  showButton: true,\n  showMaxFilesError: true,\n  componentProps: {\n    multiple: false,\n    maxFiles: 1\n  },\n  nestedClasses: {}\n};\nexport function FormFileDrop(_ref) {\n  _s();\n\n  var _this = this,\n      _classnames,\n      _classnames2,\n      _classnames3,\n      _classnames4;\n\n  var name = _ref.name,\n      label = _ref.label,\n      error = _ref.error,\n      hint = _ref.hint,\n      control = _ref.control,\n      onChange = _ref.onChange,\n      dragLabel = _ref.dragLabel,\n      showUploadPreview = _ref.showUploadPreview,\n      fileNameLength = _ref.fileNameLength,\n      showDragLabel = _ref.showDragLabel,\n      showButton = _ref.showButton,\n      showMaxFilesError = _ref.showMaxFilesError,\n      componentProps = _ref.componentProps,\n      nestedClasses = _ref.nestedClasses;\n  var classes = makeStyles(styles, {\n    name: 'FormFileDrop'\n  })();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      acceptedFileList = _useState2[0],\n      setAcceptedFileList = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      rejectedFileList = _useState4[0],\n      setRejectedFileList = _useState4[1];\n\n  var props = _objectSpread(_objectSpread({}, componentProps), {}, {\n    multiple: (componentProps === null || componentProps === void 0 ? void 0 : componentProps.multiple) || false,\n    maxFiles: (componentProps === null || componentProps === void 0 ? void 0 : componentProps.multiple) ? (componentProps === null || componentProps === void 0 ? void 0 : componentProps.maxFiles) || 0 : 1\n  });\n\n  var onDrop = useCallback(function (acceptedFiles, fileRejections) {\n    onChange(acceptedFiles, fileRejections);\n    setAcceptedFileList(_toConsumableArray(acceptedFiles));\n    setRejectedFileList(_toConsumableArray(fileRejections));\n  }, [onChange]);\n\n  var _useDropzone = useDropzone(_objectSpread({\n    onDrop: onDrop\n  }, props)),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps;\n\n  var onRemove = function onRemove(index) {\n    var newArray = acceptedFileList.filter(function (item, itemIndex) {\n      return itemIndex !== index;\n    });\n    setAcceptedFileList(newArray);\n  };\n\n  var UploadedFileList = function UploadedFileList() {\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: classes.uploadedFileList,\n      children: [acceptedFileList.map(function (file, index) {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(CheckCircleIcon, {\n            className: classes.successIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, _this), \" \", utils.file.truncate(file.name, fileNameLength), /*#__PURE__*/_jsxDEV(Box, {\n            justifyContent: \"right\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              icon: HighlightOffRoundedIcon,\n              size: \"xsmall\",\n              variant: \"text\",\n              color: \"primary\",\n              onClick: function onClick() {\n                return onRemove(index);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, _this)]\n        }, \"accepted-\".concat(index), true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, _this);\n      }), rejectedFileList.map(function (file, index) {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(InfoIcon, {\n            className: classes.errorIcon\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, _this), \" \", file.name]\n        }, \"rejected-\".concat(index), true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, _this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var maxFilesError = props.multiple && props.maxFiles && acceptedFileList.length + rejectedFileList.length > (props === null || props === void 0 ? void 0 : props.maxFiles) ? utils.string.t('validation.fileUpload.tooManyFiles', {\n    count: props.maxFiles\n  }) : '';\n\n  var dragInstruction = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n      className: classnames((_classnames = {}, _defineProperty(_classnames, classes.uploadIcon, true), _defineProperty(_classnames, nestedClasses.icon, Boolean(nestedClasses.icon)), _classnames))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), showDragLabel && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classnames((_classnames2 = {}, _defineProperty(_classnames2, classes.dragFile, true), _defineProperty(_classnames2, nestedClasses.dragLabel, Boolean(nestedClasses.dragLabel)), _classnames2)),\n      children: dragLabel || utils.string.t('form.dragDrop.dragFileHere')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this), showDragLabel && showButton && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.or,\n      children: utils.string.t('app.or')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 39\n    }, this), showButton && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: classes.browseFile,\n      children: utils.string.t('form.dragDrop.browseFile')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [label && /*#__PURE__*/_jsxDEV(\"label\", {\n      className: classes.formLabel,\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }, this), control ? /*#__PURE__*/_jsxDEV(Controller, {\n      control: control,\n      name: name,\n      as: /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n        className: classnames((_classnames3 = {}, _defineProperty(_classnames3, classes.dragArea, true), _defineProperty(_classnames3, nestedClasses.dragArea, Boolean(nestedClasses.dragArea)), _classnames3))\n      }, getRootProps()), {}, {\n        \"data-form-type\": \"file\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", _objectSpread({}, getInputProps()), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 15\n        }, this), dragInstruction]\n      }), void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", _objectSpread(_objectSpread({\n      className: classnames((_classnames4 = {}, _defineProperty(_classnames4, classes.dragArea, true), _defineProperty(_classnames4, nestedClasses.dragArea, Boolean(nestedClasses.dragArea)), _classnames4))\n    }, getRootProps()), {}, {\n      \"data-form-type\": \"file\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", _objectSpread({}, getInputProps()), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), dragInstruction]\n    }), void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this), showUploadPreview && (acceptedFileList.length > 0 || rejectedFileList.length > 0) && /*#__PURE__*/_jsxDEV(UploadedFileList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 93\n    }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      error: error,\n      hint: hint\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), showMaxFilesError && maxFilesError ? /*#__PURE__*/_jsxDEV(Warning, {\n      type: \"error\",\n      icon: true,\n      text: maxFilesError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 45\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FormFileDrop, \"WFZ2PZe2IjM0DmL0GQwUVvnlV0A=\", false, function () {\n  return [useDropzone];\n});\n\n_c = FormFileDrop;\nexport default FormFileDrop;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormFileDrop\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/FormFileDrop/FormFileDrop.js"],"names":["React","useCallback","useState","PropTypes","useDropzone","Controller","classnames","utils","styles","ErrorMessage","Button","Warning","makeStyles","Box","CheckCircleIcon","InfoIcon","CloudUploadIcon","HighlightOffRoundedIcon","FormFileDrop","propTypes","name","string","isRequired","control","object","onChange","func","label","dragLabel","hint","error","showUploadPreview","bool","fileNameLength","number","componentProps","showDragLabel","showButton","showMaxFilesError","nestedClasses","shape","dragArea","icon","defaultProps","multiple","maxFiles","classes","acceptedFileList","setAcceptedFileList","rejectedFileList","setRejectedFileList","props","onDrop","acceptedFiles","fileRejections","getRootProps","getInputProps","onRemove","index","newArray","filter","item","itemIndex","UploadedFileList","uploadedFileList","map","file","successIcon","truncate","errorIcon","maxFilesError","length","t","count","dragInstruction","uploadIcon","Boolean","dragFile","or","browseFile","root","formLabel"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport { Controller } from 'react-hook-form';\r\nimport classnames from 'classnames';\r\n\r\n// app\r\nimport * as utils from 'utils';\r\nimport styles from './FormFileDrop.styles';\r\nimport { ErrorMessage, Button, Warning } from 'components';\r\n\r\n// mui\r\nimport { makeStyles, Box } from '@material-ui/core';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport HighlightOffRoundedIcon from '@material-ui/icons/HighlightOffRounded';\r\n\r\nFormFileDrop.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  control: PropTypes.object,\r\n  onChange: PropTypes.func.isRequired,\r\n  label: PropTypes.string,\r\n  dragLabel: PropTypes.string,\r\n  hint: PropTypes.string,\r\n  error: PropTypes.object,\r\n  showUploadPreview: PropTypes.bool,\r\n  fileNameLength: PropTypes.number,\r\n\r\n  componentProps: PropTypes.object,\r\n  showDragLabel: PropTypes.bool,\r\n  showButton: PropTypes.bool,\r\n  showMaxFilesError: PropTypes.bool,\r\n  nestedClasses: PropTypes.shape({\r\n    dragArea: PropTypes.string,\r\n    dragLabel: PropTypes.string,\r\n    icon: PropTypes.string,\r\n  }),\r\n};\r\n\r\nFormFileDrop.defaultProps = {\r\n  showUploadPreview: true,\r\n  fileNameLength: 48,\r\n  showDragLabel: true,\r\n  showButton: true,\r\n  showMaxFilesError: true,\r\n  componentProps: {\r\n    multiple: false,\r\n    maxFiles: 1,\r\n  },\r\n  nestedClasses: {},\r\n};\r\n\r\nexport function FormFileDrop({\r\n  name,\r\n  label,\r\n  error,\r\n  hint,\r\n  control,\r\n  onChange,\r\n  dragLabel,\r\n  showUploadPreview,\r\n  fileNameLength,\r\n  showDragLabel,\r\n  showButton,\r\n  showMaxFilesError,\r\n  componentProps,\r\n  nestedClasses,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'FormFileDrop' })();\r\n  const [acceptedFileList, setAcceptedFileList] = useState([]);\r\n  const [rejectedFileList, setRejectedFileList] = useState([]);\r\n\r\n  const props = {\r\n    ...componentProps,\r\n    multiple: componentProps?.multiple || false,\r\n    maxFiles: componentProps?.multiple ? componentProps?.maxFiles || 0 : 1,\r\n  };\r\n  const onDrop = useCallback(\r\n    (acceptedFiles, fileRejections) => {\r\n      onChange(acceptedFiles, fileRejections);\r\n      setAcceptedFileList([...acceptedFiles]);\r\n      setRejectedFileList([...fileRejections]);\r\n    },\r\n    [onChange]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    onDrop,\r\n    ...props,\r\n  });\r\n\r\n  const onRemove = (index) => {\r\n    const newArray = acceptedFileList.filter((item, itemIndex) => itemIndex !== index);\r\n    setAcceptedFileList(newArray);\r\n  };\r\n\r\n  const UploadedFileList = () => {\r\n    return (\r\n      <ul className={classes.uploadedFileList}>\r\n        {acceptedFileList.map((file, index) => (\r\n          <li key={`accepted-${index}`}>\r\n            <CheckCircleIcon className={classes.successIcon} /> {utils.file.truncate(file.name, fileNameLength)}\r\n            <Box justifyContent=\"right\">\r\n              <Button icon={HighlightOffRoundedIcon} size=\"xsmall\" variant=\"text\" color=\"primary\" onClick={() => onRemove(index)} />\r\n            </Box>\r\n          </li>\r\n        ))}\r\n        {rejectedFileList.map((file, index) => (\r\n          <li key={`rejected-${index}`}>\r\n            <InfoIcon className={classes.errorIcon} /> {file.name}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  const maxFilesError =\r\n    props.multiple && props.maxFiles && acceptedFileList.length + rejectedFileList.length > props?.maxFiles\r\n      ? utils.string.t('validation.fileUpload.tooManyFiles', { count: props.maxFiles })\r\n      : '';\r\n\r\n  const dragInstruction = (\r\n    <>\r\n      <CloudUploadIcon\r\n        className={classnames({\r\n          [classes.uploadIcon]: true,\r\n          [nestedClasses.icon]: Boolean(nestedClasses.icon),\r\n        })}\r\n      />\r\n      {showDragLabel && (\r\n        <p\r\n          className={classnames({\r\n            [classes.dragFile]: true,\r\n            [nestedClasses.dragLabel]: Boolean(nestedClasses.dragLabel),\r\n          })}\r\n        >\r\n          {dragLabel || utils.string.t('form.dragDrop.dragFileHere')}\r\n        </p>\r\n      )}\r\n      {showDragLabel && showButton && <p className={classes.or}>{utils.string.t('app.or')}</p>}\r\n      {showButton && <p className={classes.browseFile}>{utils.string.t('form.dragDrop.browseFile')}</p>}\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {label && <label className={classes.formLabel}>{label}</label>}\r\n      {control ? (\r\n        <Controller\r\n          control={control}\r\n          name={name}\r\n          as={\r\n            <div\r\n              className={classnames({\r\n                [classes.dragArea]: true,\r\n                [nestedClasses.dragArea]: Boolean(nestedClasses.dragArea),\r\n              })}\r\n              {...getRootProps()}\r\n              data-form-type=\"file\"\r\n            >\r\n              <input {...getInputProps()} />\r\n              {dragInstruction}\r\n            </div>\r\n          }\r\n        />\r\n      ) : (\r\n        <div\r\n          className={classnames({\r\n            [classes.dragArea]: true,\r\n            [nestedClasses.dragArea]: Boolean(nestedClasses.dragArea),\r\n          })}\r\n          {...getRootProps()}\r\n          data-form-type=\"file\"\r\n        >\r\n          <input {...getInputProps()} />\r\n          {dragInstruction}\r\n        </div>\r\n      )}\r\n      {showUploadPreview && (acceptedFileList.length > 0 || rejectedFileList.length > 0) && <UploadedFileList />}\r\n      <ErrorMessage error={error} hint={hint} />\r\n      {showMaxFilesError && maxFilesError ? <Warning type=\"error\" icon text={maxFilesError} /> : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FormFileDrop;\r\n"]},"metadata":{},"sourceType":"module"}