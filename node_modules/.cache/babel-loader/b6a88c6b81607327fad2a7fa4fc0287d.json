{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\OpeningMemoSearch\\\\OpeningMemoSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types'; // app\n\nimport { OpeningMemoSearchView } from './OpeningMemoSearch.view';\nimport { searchOpeningMemoList, selectOpeningMemo, createOpeningMemo, resetOpeningMemoPostSuccess, selectOpeningMemoPostSuccess, selectUserDepartmentId } from 'stores';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nOpeningMemoSearch.propTypes = {\n  routeWithId: PropTypes.bool.isRequired,\n  route: PropTypes.string.isRequired,\n  origin: PropTypes.shape({\n    path: PropTypes.string.isRequired,\n    id: PropTypes.number\n  })\n};\nOpeningMemoSearch.defaultProps = {\n  origin: {}\n};\nexport default function OpeningMemoSearch(_ref) {\n  _s();\n\n  var route = _ref.route,\n      origin = _ref.origin,\n      routeWithId = _ref.routeWithId;\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var departmentId = useSelector(selectUserDepartmentId);\n  var openingMemo = useSelector(selectOpeningMemo);\n  var postSuccess = useSelector(selectOpeningMemoPostSuccess);\n  var isCreatable = origin.path === 'department';\n  var createableMethods = {\n    isValidNewOption: function isValidNewOption(inputValue, selectValue, selectOptions) {\n      return shouldHideCreate(inputValue, selectOptions);\n    },\n    onCreateOption: function onCreateOption(id) {\n      return handleCreate(id);\n    }\n  };\n  var field = {\n    id: 'openingMemoSearch',\n    name: 'uniqueMarketReference',\n    placeholder: utils.string.t('placement.openingMemo.search'),\n    hint: isCreatable ? utils.string.t('openingMemo.searchExplanation') : '',\n    value: [],\n    options: [],\n    optionKey: 'id',\n    type: 'autocomplete',\n    optionLabel: 'uniqueMarketReference',\n    handleUpdate: function handleUpdate(id, value) {\n      if (value[0] && typeof value[0] === 'object') {\n        redirect(value[0].id);\n      }\n    },\n    innerComponentProps: _objectSpread({\n      isCreatable: isCreatable,\n      isClearable: false,\n      allowEmpty: true,\n      noOptionsFoundMessage: isCreatable ? utils.string.t('openingMemo.searchHintCreate') : utils.string.t('openingMemo.searchHint'),\n      async: {\n        handler: function handler(type, query) {\n          var path = origin.path,\n              id = origin.id;\n          return dispatch(searchOpeningMemoList({\n            type: type,\n            query: query,\n            origin: {\n              path: path,\n              id: path === 'department' ? departmentId : id\n            }\n          }));\n        },\n        type: 'uniqueMarketReference'\n      },\n      customStyles: {\n        size: 'xs'\n      }\n    }, isCreatable && _objectSpread({}, createableMethods))\n  };\n  useEffect(function () {\n    if (!postSuccess) return;\n    redirect(openingMemo.id);\n    return function () {\n      return dispatch(resetOpeningMemoPostSuccess());\n    };\n  }, [openingMemo.id] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var redirect = function redirect(id) {\n    var redirectPath = routeWithId ? \"\".concat(route, \"/\").concat(origin.id, \"/\").concat(id) : \"\".concat(route, \"/\").concat(id);\n    history.push(redirectPath);\n  };\n\n  var shouldHideCreate = function shouldHideCreate(inputValue, selectOptions) {\n    return inputValue.length > 3 && selectOptions.filter(function (option) {\n      return inputValue.toLowerCase() === option.uniqueMarketReference.toLowerCase();\n    }).length === 0;\n  };\n\n  var handleCreate = function handleCreate(uniqueMarketReference) {\n    dispatch(createOpeningMemo(uniqueMarketReference, departmentId));\n  };\n\n  return /*#__PURE__*/_jsxDEV(OpeningMemoSearchView, {\n    onCreate: handleCreate,\n    field: field\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 10\n  }, this);\n}\n\n_s(OpeningMemoSearch, \"ElcVTzYHMDk5FY5CDGyucf/GpZA=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector];\n});\n\n_c = OpeningMemoSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"OpeningMemoSearch\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/OpeningMemoSearch/OpeningMemoSearch.js"],"names":["React","useEffect","useHistory","useDispatch","useSelector","PropTypes","OpeningMemoSearchView","searchOpeningMemoList","selectOpeningMemo","createOpeningMemo","resetOpeningMemoPostSuccess","selectOpeningMemoPostSuccess","selectUserDepartmentId","utils","OpeningMemoSearch","propTypes","routeWithId","bool","isRequired","route","string","origin","shape","path","id","number","defaultProps","dispatch","history","departmentId","openingMemo","postSuccess","isCreatable","createableMethods","isValidNewOption","inputValue","selectValue","selectOptions","shouldHideCreate","onCreateOption","handleCreate","field","name","placeholder","t","hint","value","options","optionKey","type","optionLabel","handleUpdate","redirect","innerComponentProps","isClearable","allowEmpty","noOptionsFoundMessage","async","handler","query","customStyles","size","redirectPath","push","length","filter","option","toLowerCase","uniqueMarketReference"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// app\r\nimport { OpeningMemoSearchView } from './OpeningMemoSearch.view';\r\nimport {\r\n  searchOpeningMemoList,\r\n  selectOpeningMemo,\r\n  createOpeningMemo,\r\n  resetOpeningMemoPostSuccess,\r\n  selectOpeningMemoPostSuccess,\r\n  selectUserDepartmentId,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\n\r\nOpeningMemoSearch.propTypes = {\r\n  routeWithId: PropTypes.bool.isRequired,\r\n  route: PropTypes.string.isRequired,\r\n  origin: PropTypes.shape({\r\n    path: PropTypes.string.isRequired,\r\n    id: PropTypes.number,\r\n  }),\r\n};\r\n\r\nOpeningMemoSearch.defaultProps = {\r\n  origin: {},\r\n};\r\n\r\nexport default function OpeningMemoSearch({ route, origin, routeWithId }) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const departmentId = useSelector(selectUserDepartmentId);\r\n  const openingMemo = useSelector(selectOpeningMemo);\r\n  const postSuccess = useSelector(selectOpeningMemoPostSuccess);\r\n  const isCreatable = origin.path === 'department';\r\n\r\n  const createableMethods = {\r\n    isValidNewOption: (inputValue, selectValue, selectOptions) => shouldHideCreate(inputValue, selectOptions),\r\n    onCreateOption: (id) => handleCreate(id),\r\n  };\r\n\r\n  const field = {\r\n    id: 'openingMemoSearch',\r\n    name: 'uniqueMarketReference',\r\n    placeholder: utils.string.t('placement.openingMemo.search'),\r\n    hint: isCreatable ? utils.string.t('openingMemo.searchExplanation') : '',\r\n    value: [],\r\n    options: [],\r\n    optionKey: 'id',\r\n    type: 'autocomplete',\r\n    optionLabel: 'uniqueMarketReference',\r\n    handleUpdate: (id, value) => {\r\n      if (value[0] && typeof value[0] === 'object') {\r\n        redirect(value[0].id);\r\n      }\r\n    },\r\n    innerComponentProps: {\r\n      isCreatable,\r\n      isClearable: false,\r\n      allowEmpty: true,\r\n      noOptionsFoundMessage: isCreatable ? utils.string.t('openingMemo.searchHintCreate') : utils.string.t('openingMemo.searchHint'),\r\n      async: {\r\n        handler: (type, query) => {\r\n          const { path, id } = origin;\r\n          return dispatch(\r\n            searchOpeningMemoList({\r\n              type,\r\n              query,\r\n              origin: {\r\n                path,\r\n                id: path === 'department' ? departmentId : id,\r\n              },\r\n            })\r\n          );\r\n        },\r\n        type: 'uniqueMarketReference',\r\n      },\r\n      customStyles: {\r\n        size: 'xs',\r\n      },\r\n      ...(isCreatable && { ...createableMethods }),\r\n    },\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      if (!postSuccess) return;\r\n      redirect(openingMemo.id);\r\n      return () => dispatch(resetOpeningMemoPostSuccess());\r\n    },\r\n    [openingMemo.id] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const redirect = (id) => {\r\n    const redirectPath = routeWithId ? `${route}/${origin.id}/${id}` : `${route}/${id}`;\r\n    history.push(redirectPath);\r\n  };\r\n\r\n  const shouldHideCreate = (inputValue, selectOptions) => {\r\n    return (\r\n      inputValue.length > 3 &&\r\n      selectOptions.filter((option) => inputValue.toLowerCase() === option.uniqueMarketReference.toLowerCase()).length === 0\r\n    );\r\n  };\r\n\r\n  const handleCreate = (uniqueMarketReference) => {\r\n    dispatch(createOpeningMemo(uniqueMarketReference, departmentId));\r\n  };\r\n\r\n  return <OpeningMemoSearchView onCreate={handleCreate} field={field} />;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}