{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\LossAction\\\\LossAction.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport compact from 'lodash/compact';\nimport uniq from 'lodash/uniq'; // app\n\nimport { LossActionView } from './LossAction.view';\nimport { selectPriorities, getPriorityLevels, getLossActions, selectLossActions } from 'stores';\nimport { MultiSelect, FormDate } from 'components';\nimport { useFlexiColumns } from 'hooks';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LossAction(_ref) {\n  _s();\n\n  var _uniq, _uniq2;\n\n  var lossData = _ref.lossData;\n  var dispatch = useDispatch();\n  var priorities = useSelector(selectPriorities);\n  var lossActions = useSelector(selectLossActions);\n\n  var getItemsFlat = function getItemsFlat(items, propName) {\n    return items.reduce(function (acc, cur) {\n      var item = _objectSpread({}, cur);\n\n      var itemChildren = utils.generic.isValidArray(item === null || item === void 0 ? void 0 : item[propName], true) ? _toConsumableArray(item[propName]) : null;\n      return [].concat(_toConsumableArray(acc), [item], _toConsumableArray(itemChildren ? getItemsFlat(itemChildren, propName) : []));\n    }, []);\n  };\n\n  var _useState = useState(lossActions.items),\n      _useState2 = _slicedToArray(_useState, 2),\n      itemsFiltered = _useState2[0],\n      setItemsFiltered = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchQuery = _useState4[0],\n      setSearchQuery = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filters = _useState6[0],\n      setFilters = _useState6[1];\n\n  var searchableColumns = ['actionID', 'actionName', 'team', 'assignedTo', 'priority', 'status', 'description', 'department', 'insured'];\n  var filterableColumns = [{\n    name: 'assignedTo',\n    type: 'array'\n  }, {\n    name: 'priority',\n    type: 'array'\n  }, {\n    name: 'status',\n    type: 'array'\n  }, {\n    name: 'description',\n    type: 'array'\n  }, {\n    name: 'department',\n    type: 'array'\n  }, {\n    name: 'insured',\n    type: 'array'\n  }, {\n    name: 'dateCreated',\n    type: 'date'\n  }, {\n    name: 'targetDueDate',\n    type: 'date'\n  }];\n  useEffect(function () {\n    var unfilteredItems = (lossActions === null || lossActions === void 0 ? void 0 : lossActions.items) || [];\n    var nestedArrayKey = 'actionChildItemList';\n    var hasSearchFilters = filterableColumns.some(utils.filters.hasFilters(filters)); // update the visible rows if there is a search term or filters\n\n    if (searchQuery || hasSearchFilters) {\n      setItemsFiltered(utils.filters.items(unfilteredItems, searchQuery, searchableColumns, filterableColumns, nestedArrayKey, filters));\n    } else {\n      setItemsFiltered(unfilteredItems);\n    }\n  }, [searchQuery, filters]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    dispatch(getPriorityLevels());\n    dispatch(getLossActions(lossData));\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setItemsFiltered(lossActions.items);\n  }, [lossActions.items]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var allItems = getItemsFlat((lossActions === null || lossActions === void 0 ? void 0 : lossActions.items) || [], 'actionChildItemList');\n  var optionsAssignedTo = (_uniq = uniq(compact(allItems === null || allItems === void 0 ? void 0 : allItems.map(function (i) {\n    return i === null || i === void 0 ? void 0 : i.assignedTo;\n  })))) === null || _uniq === void 0 ? void 0 : _uniq.map(function (i) {\n    return {\n      id: i,\n      name: i\n    };\n  });\n  var optionsStatus = (_uniq2 = uniq(compact(allItems === null || allItems === void 0 ? void 0 : allItems.map(function (i) {\n    return i === null || i === void 0 ? void 0 : i.status;\n  })))) === null || _uniq2 === void 0 ? void 0 : _uniq2.map(function (i) {\n    return {\n      id: i,\n      name: i\n    };\n  });\n  var optionsPriorities = priorities === null || priorities === void 0 ? void 0 : priorities.map(function (i) {\n    return {\n      id: i === null || i === void 0 ? void 0 : i.id,\n      name: i === null || i === void 0 ? void 0 : i.description\n    };\n  });\n  var viewFields = [{\n    name: 'dateCreated',\n    type: 'datepicker',\n    value: null\n  }, {\n    name: 'targetDueDate',\n    type: 'datepicker',\n    value: null\n  }];\n  var defaultValues = utils.form.getInitialValues(viewFields);\n  var validationSchema = utils.form.getValidationSchema(viewFields);\n\n  var _useForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      control = _useForm.control,\n      reset = _useForm.reset;\n\n  var datePickerProps = {\n    type: 'datepicker',\n    value: '',\n    label: '',\n    plainText: true,\n    plainTextIcon: true,\n    placeholder: utils.string.t('app.selectDate'),\n    muiComponentProps: {\n      fullWidth: false,\n      margin: 'dense'\n    },\n    muiPickerProps: {\n      variant: 'inline',\n      format: 'DD-MM-YYYY'\n    }\n  };\n  var tableFilterFields = [{\n    id: 'assignedTo',\n    type: 'multiSelect',\n    label: utils.string.t('claims.columns.claimsList.assignedTo'),\n    value: [],\n    options: optionsAssignedTo,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"assignedTo\",\n      search: true,\n      options: optionsAssignedTo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'dateCreated',\n    type: 'datepicker',\n    label: utils.string.t('claims.columns.claimsList.dateAndTimeCreated'),\n    value: '',\n    content: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread({\n      control: control,\n      id: \"creationdatepicker\",\n      name: \"dateCreated\"\n    }, datePickerProps), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'targetDueDate',\n    type: 'datepicker',\n    label: utils.string.t('claims.columns.claimsList.targetDueDate'),\n    value: '',\n    content: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread({\n      control: control,\n      id: \"targetduedatepicker\",\n      name: \"targetDueDate\"\n    }, datePickerProps), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'priority',\n    type: 'multiSelect',\n    label: utils.string.t('claims.claimInformation.priority'),\n    value: [],\n    options: optionsPriorities,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"priority\",\n      options: optionsPriorities\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'status',\n    type: 'multiSelect',\n    label: utils.string.t('claims.columns.claimsManagement.status'),\n    value: [],\n    options: optionsStatus,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"status\",\n      options: optionsStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 16\n    }, this)\n  }];\n\n  var handleSearch = function handleSearch(searchObj) {\n    setSearchQuery((searchObj === null || searchObj === void 0 ? void 0 : searchObj.search) || '');\n  };\n\n  var handleResetSearch = function handleResetSearch() {\n    setSearchQuery('');\n  };\n\n  var handleFilter = function handleFilter(filters) {\n    setFilters(filters === null || filters === void 0 ? void 0 : filters.filters);\n  };\n\n  var handleResetFilter = function handleResetFilter() {\n    setFilters(null);\n    reset();\n  };\n\n  var columns = [{\n    id: 'actionId',\n    label: utils.string.t('app.actionId'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'name',\n    label: utils.string.t('app.name'),\n    nowrap: false,\n    visible: true\n  }, {\n    id: 'description',\n    label: utils.string.t('claims.processing.tasksGridColumns.description'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'team',\n    label: utils.string.t('claims.columns.claimsManagement.team'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'assignedTo',\n    label: utils.string.t('claims.columns.claimsManagement.assignedTo'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'dateCreated',\n    label: utils.string.t('claims.columns.claimsManagement.createdDate'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'targetDate',\n    label: utils.string.t('claims.columns.claimsList.targetDueDate'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'priority',\n    label: utils.string.t('claims.columns.claimsManagement.priority'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'status',\n    label: utils.string.t('claims.columns.claimsManagement.status'),\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'taskCompleted',\n    label: utils.string.t('claims.columns.claimsManagement.taskCompleted'),\n    nowrap: true,\n    visible: true\n  }];\n\n  var _useFlexiColumns = useFlexiColumns(columns),\n      columnsArray = _useFlexiColumns.columns,\n      columnProps = _useFlexiColumns.columnProps;\n\n  return /*#__PURE__*/_jsxDEV(LossActionView, {\n    items: _objectSpread(_objectSpread({}, lossActions), {}, {\n      items: itemsFiltered\n    }),\n    columnsArray: columnsArray,\n    columnProps: columnProps,\n    tableFilterFields: tableFilterFields,\n    handlers: {\n      search: handleSearch,\n      filter: handleFilter,\n      resetFilter: handleResetFilter,\n      resetSearch: handleResetSearch\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LossAction, \"E5PJMNzPJ3p7mpz0PV1KIiW4ho8=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useForm, useFlexiColumns];\n});\n\n_c = LossAction;\n\nvar _c;\n\n$RefreshReg$(_c, \"LossAction\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/LossAction/LossAction.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useForm","yupResolver","compact","uniq","LossActionView","selectPriorities","getPriorityLevels","getLossActions","selectLossActions","MultiSelect","FormDate","useFlexiColumns","utils","LossAction","lossData","dispatch","priorities","lossActions","getItemsFlat","items","propName","reduce","acc","cur","item","itemChildren","generic","isValidArray","itemsFiltered","setItemsFiltered","searchQuery","setSearchQuery","filters","setFilters","searchableColumns","filterableColumns","name","type","unfilteredItems","nestedArrayKey","hasSearchFilters","some","hasFilters","allItems","optionsAssignedTo","map","i","assignedTo","id","optionsStatus","status","optionsPriorities","description","viewFields","value","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","resolver","control","reset","datePickerProps","label","plainText","plainTextIcon","placeholder","string","t","muiComponentProps","fullWidth","margin","muiPickerProps","variant","format","tableFilterFields","options","content","handleSearch","searchObj","search","handleResetSearch","handleFilter","handleResetFilter","columns","nowrap","visible","columnsArray","columnProps","filter","resetFilter","resetSearch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport compact from 'lodash/compact';\r\nimport uniq from 'lodash/uniq';\r\n\r\n// app\r\nimport { LossActionView } from './LossAction.view';\r\nimport { selectPriorities, getPriorityLevels, getLossActions, selectLossActions } from 'stores';\r\nimport { MultiSelect, FormDate } from 'components';\r\nimport { useFlexiColumns } from 'hooks';\r\nimport * as utils from 'utils';\r\n\r\nexport default function LossAction({ lossData }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const priorities = useSelector(selectPriorities);\r\n  const lossActions = useSelector(selectLossActions);\r\n\r\n  const getItemsFlat = (items, propName) => {\r\n    return items.reduce((acc, cur) => {\r\n      const item = { ...cur };\r\n      const itemChildren = utils.generic.isValidArray(item?.[propName], true) ? [...item[propName]] : null;\r\n\r\n      return [...acc, item, ...(itemChildren ? getItemsFlat(itemChildren, propName) : [])];\r\n    }, []);\r\n  };\r\n\r\n  const [itemsFiltered, setItemsFiltered] = useState(lossActions.items);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filters, setFilters] = useState(null);\r\n\r\n  const searchableColumns = ['actionID', 'actionName', 'team', 'assignedTo', 'priority', 'status', 'description', 'department', 'insured'];\r\n\r\n  const filterableColumns = [\r\n    { name: 'assignedTo', type: 'array' },\r\n    { name: 'priority', type: 'array' },\r\n    { name: 'status', type: 'array' },\r\n    { name: 'description', type: 'array' },\r\n    { name: 'department', type: 'array' },\r\n    { name: 'insured', type: 'array' },\r\n    { name: 'dateCreated', type: 'date' },\r\n    { name: 'targetDueDate', type: 'date' },\r\n  ];\r\n\r\n  useEffect(() => {\r\n    const unfilteredItems = lossActions?.items || [];\r\n    const nestedArrayKey = 'actionChildItemList';\r\n    const hasSearchFilters = filterableColumns.some(utils.filters.hasFilters(filters));\r\n\r\n    // update the visible rows if there is a search term or filters\r\n    if (searchQuery || hasSearchFilters) {\r\n      setItemsFiltered(utils.filters.items(unfilteredItems, searchQuery, searchableColumns, filterableColumns, nestedArrayKey, filters));\r\n    } else {\r\n      setItemsFiltered(unfilteredItems);\r\n    }\r\n  }, [searchQuery, filters]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    dispatch(getPriorityLevels());\r\n    dispatch(getLossActions(lossData));\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    setItemsFiltered(lossActions.items);\r\n  }, [lossActions.items]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const allItems = getItemsFlat(lossActions?.items || [], 'actionChildItemList');\r\n\r\n  const optionsAssignedTo = uniq(compact(allItems?.map((i) => i?.assignedTo)))?.map((i) => ({ id: i, name: i }));\r\n  const optionsStatus = uniq(compact(allItems?.map((i) => i?.status)))?.map((i) => ({ id: i, name: i }));\r\n  const optionsPriorities = priorities?.map((i) => ({ id: i?.id, name: i?.description }));\r\n\r\n  const viewFields = [\r\n    { name: 'dateCreated', type: 'datepicker', value: null },\r\n    { name: 'targetDueDate', type: 'datepicker', value: null },\r\n  ];\r\n\r\n  const defaultValues = utils.form.getInitialValues(viewFields);\r\n  const validationSchema = utils.form.getValidationSchema(viewFields);\r\n\r\n  const { control, reset } = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n\r\n  const datePickerProps = {\r\n    type: 'datepicker',\r\n    value: '',\r\n    label: '',\r\n    plainText: true,\r\n    plainTextIcon: true,\r\n    placeholder: utils.string.t('app.selectDate'),\r\n    muiComponentProps: {\r\n      fullWidth: false,\r\n      margin: 'dense',\r\n    },\r\n    muiPickerProps: {\r\n      variant: 'inline',\r\n      format: 'DD-MM-YYYY',\r\n    },\r\n  };\r\n\r\n  const tableFilterFields = [\r\n    {\r\n      id: 'assignedTo',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.columns.claimsList.assignedTo'),\r\n      value: [],\r\n      options: optionsAssignedTo,\r\n      content: <MultiSelect id=\"assignedTo\" search options={optionsAssignedTo} />,\r\n    },\r\n    {\r\n      id: 'dateCreated',\r\n      type: 'datepicker',\r\n      label: utils.string.t('claims.columns.claimsList.dateAndTimeCreated'),\r\n      value: '',\r\n      content: <FormDate control={control} id=\"creationdatepicker\" name=\"dateCreated\" {...datePickerProps} />,\r\n    },\r\n    {\r\n      id: 'targetDueDate',\r\n      type: 'datepicker',\r\n      label: utils.string.t('claims.columns.claimsList.targetDueDate'),\r\n      value: '',\r\n      content: <FormDate control={control} id=\"targetduedatepicker\" name=\"targetDueDate\" {...datePickerProps} />,\r\n    },\r\n    {\r\n      id: 'priority',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.claimInformation.priority'),\r\n      value: [],\r\n      options: optionsPriorities,\r\n      content: <MultiSelect id=\"priority\" options={optionsPriorities} />,\r\n    },\r\n    {\r\n      id: 'status',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.columns.claimsManagement.status'),\r\n      value: [],\r\n      options: optionsStatus,\r\n      content: <MultiSelect id=\"status\" options={optionsStatus} />,\r\n    },\r\n  ];\r\n\r\n  const handleSearch = (searchObj) => {\r\n    setSearchQuery(searchObj?.search || '');\r\n  };\r\n\r\n  const handleResetSearch = () => {\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const handleFilter = (filters) => {\r\n    setFilters(filters?.filters);\r\n  };\r\n\r\n  const handleResetFilter = () => {\r\n    setFilters(null);\r\n    reset();\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      id: 'actionId',\r\n      label: utils.string.t('app.actionId'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'name',\r\n      label: utils.string.t('app.name'),\r\n      nowrap: false,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'description',\r\n      label: utils.string.t('claims.processing.tasksGridColumns.description'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'team',\r\n      label: utils.string.t('claims.columns.claimsManagement.team'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'assignedTo',\r\n      label: utils.string.t('claims.columns.claimsManagement.assignedTo'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'dateCreated',\r\n      label: utils.string.t('claims.columns.claimsManagement.createdDate'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'targetDate',\r\n      label: utils.string.t('claims.columns.claimsList.targetDueDate'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'priority',\r\n      label: utils.string.t('claims.columns.claimsManagement.priority'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'status',\r\n      label: utils.string.t('claims.columns.claimsManagement.status'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'taskCompleted',\r\n      label: utils.string.t('claims.columns.claimsManagement.taskCompleted'),\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n  ];\r\n\r\n  const { columns: columnsArray, columnProps } = useFlexiColumns(columns);\r\n\r\n  return (\r\n    <LossActionView\r\n      items={{ ...lossActions, items: itemsFiltered }}\r\n      columnsArray={columnsArray}\r\n      columnProps={columnProps}\r\n      tableFilterFields={tableFilterFields}\r\n      handlers={{\r\n        search: handleSearch,\r\n        filter: handleFilter,\r\n        resetFilter: handleResetFilter,\r\n        resetSearch: handleResetSearch,\r\n      }}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}