{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ClaimsUploadViewSearchDocs\\\\ClaimsUploadViewSearchDocs.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport merge from 'lodash/merge'; // app\n\nimport ClaimsUploadViewSearchDocsView from './ClaimsUploadViewSearchDocs.view';\nimport * as constants from 'consts';\nimport * as utils from 'utils';\nimport { getViewTableDocuments, selectorDmsViewFiles, selectContextSubType, resetDmsDocumentsUpload, resetDmsDocumentsView, resetDmsDocumentsHistory, resetFilesUploaded } from 'stores';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nClaimsUploadViewSearchDocs.propTypes = {\n  refData: PropTypes.object.isRequired,\n  refIdName: PropTypes.string.isRequired,\n  dmsContext: PropTypes.string.isRequired,\n  sourceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  viewOptions: PropTypes.shape({\n    disabled: PropTypes.bool,\n    canUpload: PropTypes.bool,\n    canSearch: PropTypes.bool,\n    canUnlink: PropTypes.bool,\n    canDelete: PropTypes.bool,\n    canEditMetaData: PropTypes.bool,\n    canMultiSelect: PropTypes.bool\n  }).isRequired,\n  searchOptions: PropTypes.shape({\n    disabled: PropTypes.bool\n  }).isRequired,\n  defaultTab: PropTypes.string,\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\n  isTabView: PropTypes.bool,\n  isClaims: PropTypes.bool,\n  isClaimsUploadDisabled: PropTypes.bool,\n  isDmsDocumentMenuDisabled: PropTypes.bool,\n  claimsUploadWarningMsg: PropTypes.string,\n  claimsSearchDocumentsTxt: PropTypes.string,\n  uploadDocumentsTitle: PropTypes.string,\n  handlers: PropTypes.shape({\n    onClosingUploadModal: PropTypes.func\n  }),\n  docList: PropTypes.array\n};\nClaimsUploadViewSearchDocs.defaultProps = {\n  viewOptions: {},\n  searchOptions: {},\n  defaultTab: constants.DMS_VIEW_TAB_VIEW,\n  isTabView: true,\n  isClaims: false,\n  isClaimsUploadDisabled: false,\n  isDmsDocumentMenuDisabled: false,\n  handlers: {\n    onClosingUploadModal: function onClosingUploadModal() {}\n  },\n  docList: []\n};\nexport default function ClaimsUploadViewSearchDocs(_ref) {\n  _s();\n\n  var refData = _ref.refData,\n      refIdName = _ref.refIdName,\n      dmsContext = _ref.dmsContext,\n      sourceId = _ref.sourceId,\n      viewOptions = _ref.viewOptions,\n      searchOptions = _ref.searchOptions,\n      defaultTab = _ref.defaultTab,\n      documentTypeKey = _ref.documentTypeKey,\n      isTabView = _ref.isTabView,\n      isClaims = _ref.isClaims,\n      isClaimsUploadDisabled = _ref.isClaimsUploadDisabled,\n      isDmsDocumentMenuDisabled = _ref.isDmsDocumentMenuDisabled,\n      claimsUploadWarningMsg = _ref.claimsUploadWarningMsg,\n      claimsSearchDocumentsTxt = _ref.claimsSearchDocumentsTxt,\n      uploadDocumentsTitle = _ref.uploadDocumentsTitle,\n      handlers = _ref.handlers,\n      docList = _ref.docList;\n  var dispatch = useDispatch();\n  var viewOptionsMerged = merge({\n    disabled: false,\n    upload: true,\n    search: true,\n    unlink: true,\n    delete: true,\n    editMetaData: true,\n    multiSelect: true\n  }, viewOptions);\n  var searchOptionsMerged = merge({\n    disabled: false\n  }, searchOptions);\n\n  var _useState = useState(defaultTab),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedTab = _useState2[0],\n      setSelectedTab = _useState2[1];\n\n  var viewDocumentList = useSelector(selectorDmsViewFiles);\n  var contextSubType = useSelector(selectContextSubType); // pp details\n\n  var policyRef = refData === null || refData === void 0 ? void 0 : refData.policyRef;\n  var instructionId = refData === null || refData === void 0 ? void 0 : refData.instructionId;\n  var referenceId = refData === null || refData === void 0 ? void 0 : refData[refIdName];\n  var sectionType = dmsContext;\n  var isAutoSearchScreen = defaultTab === constants.DMS_VIEW_TAB_SEARCH;\n  useEffect(function () {\n    if (checkisSubContext()) {\n      getViewTableDocsForSubContext();\n    } else if (referenceId && sectionType && (docList === null || docList === void 0 ? void 0 : docList.length) === 0) {\n      dispatch(getViewTableDocuments(_objectSpread({\n        referenceId: referenceId,\n        sectionType: sectionType,\n        documentTypeKey: documentTypeKey\n      }, policyRef && instructionId && {\n        policyRef: policyRef,\n        instructionId: instructionId\n      })));\n    }\n  }, [referenceId, sectionType, contextSubType === null || contextSubType === void 0 ? void 0 : contextSubType.caseIncidentNotesID]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    // Cleanup\n    return function () {\n      dispatch(resetDmsDocumentsUpload());\n      dispatch(resetDmsDocumentsView());\n      dispatch(resetDmsDocumentsHistory());\n      dispatch(resetFilesUploaded());\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var dms = {\n    context: dmsContext,\n    source: sourceId || (refData === null || refData === void 0 ? void 0 : refData.sourceId),\n    refData: refData\n  };\n\n  var onUnlinkorDeleteSuccess = function onUnlinkorDeleteSuccess() {\n    dispatch(getViewTableDocuments(_objectSpread({\n      referenceId: referenceId,\n      sectionType: sectionType,\n      documentTypeKey: documentTypeKey\n    }, policyRef && instructionId && {\n      policyRef: policyRef,\n      instructionId: instructionId\n    })));\n  };\n\n  var tabs = [{\n    value: constants.DMS_VIEW_TAB_VIEW,\n    label: utils.string.t('dms.wrapper.tabs.viewDocuments'),\n    disabled: viewOptionsMerged.disabled\n  }, {\n    value: constants.DMS_VIEW_TAB_SEARCH,\n    label: utils.string.t('dms.wrapper.tabs.search'),\n    disabled: searchOptionsMerged.disabled\n  }];\n\n  var selectTab = function selectTab(tabName) {\n    setSelectedTab(tabName);\n\n    if (tabName === constants.DMS_VIEW_TAB_VIEW) {\n      if (referenceId && sectionType) {\n        dispatch(getViewTableDocuments(_objectSpread({\n          referenceId: referenceId,\n          sectionType: sectionType,\n          documentTypeKey: documentTypeKey\n        }, policyRef && instructionId && {\n          policyRef: policyRef,\n          instructionId: instructionId\n        })));\n      }\n    }\n  };\n\n  var checkisSubContext = function checkisSubContext() {\n    var type = contextSubType.type;\n    return type && constants.DMS_TASK_CONTEXT_ALL_TYPES.includes(type);\n  };\n\n  var getViewTableDocsForSubContext = function getViewTableDocsForSubContext() {\n    var caseIncidentNotesID = contextSubType.caseIncidentNotesID,\n        refId = contextSubType.refId;\n\n    if (caseIncidentNotesID) {\n      var refIdForSubContext = refId + '-' + caseIncidentNotesID;\n      dispatch(getViewTableDocuments(_objectSpread({\n        referenceId: refIdForSubContext,\n        sectionType: sectionType,\n        documentTypeKey: documentTypeKey\n      }, policyRef && instructionId && {\n        policyRef: policyRef,\n        instructionId: instructionId\n      })));\n    } else {\n      dispatch(getViewTableDocuments(_objectSpread({\n        referenceId: refId,\n        sectionType: sectionType,\n        documentTypeKey: documentTypeKey\n      }, policyRef && instructionId && {\n        policyRef: policyRef,\n        instructionId: instructionId\n      })));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ClaimsUploadViewSearchDocsView, {\n    tabs: tabs,\n    selectedTab: selectedTab,\n    isAutoSearchScreen: isAutoSearchScreen,\n    dms: dms,\n    sourceId: sourceId,\n    viewOptions: viewOptionsMerged,\n    referenceId: referenceId,\n    viewDocumentList: (docList === null || docList === void 0 ? void 0 : docList.length) > 0 ? docList : viewDocumentList,\n    handlers: {\n      selectTab: selectTab,\n      onUnlinkorDeleteSuccess: onUnlinkorDeleteSuccess,\n      onClosingUploadModal: handlers.onClosingUploadModal\n    },\n    documentTypeKey: documentTypeKey,\n    refData: refData,\n    isTabView: isTabView,\n    isClaimsUploadDisabled: isClaimsUploadDisabled,\n    isClaims: isClaims,\n    isDmsDocumentMenuDisabled: isDmsDocumentMenuDisabled,\n    claimsUploadWarningMsg: claimsUploadWarningMsg,\n    claimsSearchDocumentsTxt: claimsSearchDocumentsTxt,\n    uploadDocumentsTitle: uploadDocumentsTitle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClaimsUploadViewSearchDocs, \"iTAkqbLt37Du+IV5IAWqxvPe+ZE=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = ClaimsUploadViewSearchDocs;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimsUploadViewSearchDocs\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ClaimsUploadViewSearchDocs/ClaimsUploadViewSearchDocs.js"],"names":["React","useState","useEffect","PropTypes","useDispatch","useSelector","merge","ClaimsUploadViewSearchDocsView","constants","utils","getViewTableDocuments","selectorDmsViewFiles","selectContextSubType","resetDmsDocumentsUpload","resetDmsDocumentsView","resetDmsDocumentsHistory","resetFilesUploaded","ClaimsUploadViewSearchDocs","propTypes","refData","object","isRequired","refIdName","string","dmsContext","sourceId","oneOfType","number","viewOptions","shape","disabled","bool","canUpload","canSearch","canUnlink","canDelete","canEditMetaData","canMultiSelect","searchOptions","defaultTab","documentTypeKey","oneOf","DMS_DOCUMENT_TYPE_SECTION_KEYS","isTabView","isClaims","isClaimsUploadDisabled","isDmsDocumentMenuDisabled","claimsUploadWarningMsg","claimsSearchDocumentsTxt","uploadDocumentsTitle","handlers","onClosingUploadModal","func","docList","array","defaultProps","DMS_VIEW_TAB_VIEW","dispatch","viewOptionsMerged","upload","search","unlink","delete","editMetaData","multiSelect","searchOptionsMerged","selectedTab","setSelectedTab","viewDocumentList","contextSubType","policyRef","instructionId","referenceId","sectionType","isAutoSearchScreen","DMS_VIEW_TAB_SEARCH","checkisSubContext","getViewTableDocsForSubContext","length","caseIncidentNotesID","dms","context","source","onUnlinkorDeleteSuccess","tabs","value","label","t","selectTab","tabName","type","DMS_TASK_CONTEXT_ALL_TYPES","includes","refId","refIdForSubContext"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport merge from 'lodash/merge';\r\n\r\n// app\r\nimport ClaimsUploadViewSearchDocsView from './ClaimsUploadViewSearchDocs.view';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\nimport {\r\n  getViewTableDocuments,\r\n  selectorDmsViewFiles,\r\n  selectContextSubType,\r\n  resetDmsDocumentsUpload,\r\n  resetDmsDocumentsView,\r\n  resetDmsDocumentsHistory,\r\n  resetFilesUploaded,\r\n} from 'stores';\r\n\r\nClaimsUploadViewSearchDocs.propTypes = {\r\n  refData: PropTypes.object.isRequired,\r\n  refIdName: PropTypes.string.isRequired,\r\n  dmsContext: PropTypes.string.isRequired,\r\n  sourceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  viewOptions: PropTypes.shape({\r\n    disabled: PropTypes.bool,\r\n    canUpload: PropTypes.bool,\r\n    canSearch: PropTypes.bool,\r\n    canUnlink: PropTypes.bool,\r\n    canDelete: PropTypes.bool,\r\n    canEditMetaData: PropTypes.bool,\r\n    canMultiSelect: PropTypes.bool,\r\n  }).isRequired,\r\n  searchOptions: PropTypes.shape({\r\n    disabled: PropTypes.bool,\r\n  }).isRequired,\r\n  defaultTab: PropTypes.string,\r\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\r\n  isTabView: PropTypes.bool,\r\n  isClaims: PropTypes.bool,\r\n  isClaimsUploadDisabled: PropTypes.bool,\r\n  isDmsDocumentMenuDisabled: PropTypes.bool,\r\n  claimsUploadWarningMsg: PropTypes.string,\r\n  claimsSearchDocumentsTxt: PropTypes.string,\r\n  uploadDocumentsTitle: PropTypes.string,\r\n  handlers: PropTypes.shape({\r\n    onClosingUploadModal: PropTypes.func,\r\n  }),\r\n  docList: PropTypes.array,\r\n};\r\n\r\nClaimsUploadViewSearchDocs.defaultProps = {\r\n  viewOptions: {},\r\n  searchOptions: {},\r\n  defaultTab: constants.DMS_VIEW_TAB_VIEW,\r\n  isTabView: true,\r\n  isClaims: false,\r\n  isClaimsUploadDisabled: false,\r\n  isDmsDocumentMenuDisabled: false,\r\n  handlers: {\r\n    onClosingUploadModal: () => {},\r\n  },\r\n  docList: [],\r\n};\r\n\r\nexport default function ClaimsUploadViewSearchDocs({\r\n  refData,\r\n  refIdName,\r\n  dmsContext,\r\n  sourceId,\r\n  viewOptions,\r\n  searchOptions,\r\n  defaultTab,\r\n  documentTypeKey,\r\n  isTabView,\r\n  isClaims,\r\n  isClaimsUploadDisabled,\r\n  isDmsDocumentMenuDisabled,\r\n  claimsUploadWarningMsg,\r\n  claimsSearchDocumentsTxt,\r\n  uploadDocumentsTitle,\r\n  handlers,\r\n  docList,\r\n}) {\r\n  const dispatch = useDispatch();\r\n\r\n  const viewOptionsMerged = merge(\r\n    {\r\n      disabled: false,\r\n      upload: true,\r\n      search: true,\r\n      unlink: true,\r\n      delete: true,\r\n      editMetaData: true,\r\n      multiSelect: true,\r\n    },\r\n    viewOptions\r\n  );\r\n\r\n  const searchOptionsMerged = merge(\r\n    {\r\n      disabled: false,\r\n    },\r\n    searchOptions\r\n  );\r\n\r\n  const [selectedTab, setSelectedTab] = useState(defaultTab);\r\n\r\n  const viewDocumentList = useSelector(selectorDmsViewFiles);\r\n  const contextSubType = useSelector(selectContextSubType);\r\n\r\n  // pp details\r\n  const policyRef = refData?.policyRef;\r\n  const instructionId = refData?.instructionId;\r\n\r\n  const referenceId = refData?.[refIdName];\r\n  const sectionType = dmsContext;\r\n  const isAutoSearchScreen = defaultTab === constants.DMS_VIEW_TAB_SEARCH;\r\n\r\n  useEffect(() => {\r\n    if (checkisSubContext()) {\r\n      getViewTableDocsForSubContext();\r\n    } else if (referenceId && sectionType && docList?.length === 0) {\r\n      dispatch(\r\n        getViewTableDocuments({\r\n          referenceId,\r\n          sectionType,\r\n          documentTypeKey,\r\n          ...(policyRef && instructionId && { policyRef, instructionId }),\r\n        })\r\n      );\r\n    }\r\n  }, [referenceId, sectionType, contextSubType?.caseIncidentNotesID]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    // Cleanup\r\n    return () => {\r\n      dispatch(resetDmsDocumentsUpload());\r\n      dispatch(resetDmsDocumentsView());\r\n      dispatch(resetDmsDocumentsHistory());\r\n      dispatch(resetFilesUploaded());\r\n    };\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const dms = {\r\n    context: dmsContext,\r\n    source: sourceId || refData?.sourceId,\r\n    refData,\r\n  };\r\n\r\n  const onUnlinkorDeleteSuccess = () => {\r\n    dispatch(\r\n      getViewTableDocuments({ referenceId, sectionType, documentTypeKey, ...(policyRef && instructionId && { policyRef, instructionId }) })\r\n    );\r\n  };\r\n\r\n  const tabs = [\r\n    {\r\n      value: constants.DMS_VIEW_TAB_VIEW,\r\n      label: utils.string.t('dms.wrapper.tabs.viewDocuments'),\r\n      disabled: viewOptionsMerged.disabled,\r\n    },\r\n    {\r\n      value: constants.DMS_VIEW_TAB_SEARCH,\r\n      label: utils.string.t('dms.wrapper.tabs.search'),\r\n      disabled: searchOptionsMerged.disabled,\r\n    },\r\n  ];\r\n\r\n  const selectTab = (tabName) => {\r\n    setSelectedTab(tabName);\r\n\r\n    if (tabName === constants.DMS_VIEW_TAB_VIEW) {\r\n      if (referenceId && sectionType) {\r\n        dispatch(\r\n          getViewTableDocuments({\r\n            referenceId,\r\n            sectionType,\r\n            documentTypeKey,\r\n            ...(policyRef && instructionId && { policyRef, instructionId }),\r\n          })\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const checkisSubContext = () => {\r\n    const { type } = contextSubType;\r\n    return type && constants.DMS_TASK_CONTEXT_ALL_TYPES.includes(type);\r\n  };\r\n\r\n  const getViewTableDocsForSubContext = () => {\r\n    const { caseIncidentNotesID, refId } = contextSubType;\r\n    if (caseIncidentNotesID) {\r\n      const refIdForSubContext = refId + '-' + caseIncidentNotesID;\r\n      dispatch(\r\n        getViewTableDocuments({\r\n          referenceId: refIdForSubContext,\r\n          sectionType,\r\n          documentTypeKey,\r\n          ...(policyRef && instructionId && { policyRef, instructionId }),\r\n        })\r\n      );\r\n    } else {\r\n      dispatch(\r\n        getViewTableDocuments({\r\n          referenceId: refId,\r\n          sectionType,\r\n          documentTypeKey,\r\n          ...(policyRef && instructionId && { policyRef, instructionId }),\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ClaimsUploadViewSearchDocsView\r\n      tabs={tabs}\r\n      selectedTab={selectedTab}\r\n      isAutoSearchScreen={isAutoSearchScreen}\r\n      dms={dms}\r\n      sourceId={sourceId}\r\n      viewOptions={viewOptionsMerged}\r\n      referenceId={referenceId}\r\n      viewDocumentList={docList?.length > 0 ? docList : viewDocumentList}\r\n      handlers={{ selectTab, onUnlinkorDeleteSuccess, onClosingUploadModal: handlers.onClosingUploadModal }}\r\n      documentTypeKey={documentTypeKey}\r\n      refData={refData}\r\n      isTabView={isTabView}\r\n      isClaimsUploadDisabled={isClaimsUploadDisabled}\r\n      isClaims={isClaims}\r\n      isDmsDocumentMenuDisabled={isDmsDocumentMenuDisabled}\r\n      claimsUploadWarningMsg={claimsUploadWarningMsg}\r\n      claimsSearchDocumentsTxt={claimsSearchDocumentsTxt}\r\n      uploadDocumentsTitle={uploadDocumentsTitle}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}