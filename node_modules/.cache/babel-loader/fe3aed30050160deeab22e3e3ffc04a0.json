{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\forms\\\\DmsLinkToLossAndClaim\\\\DmsLinkToLossAndClaim.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useDispatch, useSelector } from 'react-redux'; // app\n\nimport DmsLinkToLossAndClaimView from './DmsLinkToLossAndClaim.view';\nimport { linkMultipleDmsDocuments, selectLossInformation, selectClaimsInformation, hideModal, selectClaimsProcessingSelected } from 'stores';\nimport * as constants from 'consts';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nDmsLinkToLossAndClaim.propTypes = {\n  docData: PropTypes.object.isRequired,\n  resetToDefaultValues: PropTypes.func.isRequired,\n  canLinkToTask: PropTypes.bool\n};\nexport default function DmsLinkToLossAndClaim(_ref) {\n  _s();\n\n  var _useSelector, _useSelector2, _useSelector3;\n\n  var docData = _ref.docData,\n      resetToDefaultValues = _ref.resetToDefaultValues,\n      canLinkToTask = _ref.canLinkToTask;\n  var dispatch = useDispatch();\n  var claimGridSelectedData = (_useSelector = useSelector(selectClaimsProcessingSelected)) === null || _useSelector === void 0 ? void 0 : _useSelector[0];\n  var lossRefID = ((_useSelector2 = useSelector(selectLossInformation)) === null || _useSelector2 === void 0 ? void 0 : _useSelector2.lossRef) || (claimGridSelectedData === null || claimGridSelectedData === void 0 ? void 0 : claimGridSelectedData.lossRef);\n  var claimRefID = ((_useSelector3 = useSelector(selectClaimsInformation)) === null || _useSelector3 === void 0 ? void 0 : _useSelector3.claimReference) || (claimGridSelectedData === null || claimGridSelectedData === void 0 ? void 0 : claimGridSelectedData.claimRef);\n\n  var confirmDocumentlink = function confirmDocumentlink(docs) {\n    var formValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var requestParams = [];\n\n    if (formValues === null || formValues === void 0 ? void 0 : formValues.linkToLoss) {\n      var lossParams = docs === null || docs === void 0 ? void 0 : docs.map(function (d) {\n        return {\n          documentId: d.documentId,\n          referenceId: lossRefID,\n          sectionType: constants.DMS_CONTEXT_LOSS\n        };\n      });\n      requestParams === null || requestParams === void 0 ? void 0 : requestParams.push.apply(requestParams, _toConsumableArray(lossParams));\n    }\n\n    if ((formValues === null || formValues === void 0 ? void 0 : formValues.linkToClaim) && !(formValues === null || formValues === void 0 ? void 0 : formValues.linkToLoss)) {\n      var claimParams = docs === null || docs === void 0 ? void 0 : docs.map(function (d) {\n        return {\n          documentId: d.documentId,\n          referenceId: claimRefID,\n          sectionType: constants.DMS_CONTEXT_CLAIM\n        };\n      });\n      requestParams === null || requestParams === void 0 ? void 0 : requestParams.push.apply(requestParams, _toConsumableArray(claimParams));\n    }\n\n    if (formValues === null || formValues === void 0 ? void 0 : formValues.linkToTask) {\n      var taskParams = docs === null || docs === void 0 ? void 0 : docs.map(function (d) {\n        return {\n          documentId: d.documentId,\n          referenceId: claimGridSelectedData === null || claimGridSelectedData === void 0 ? void 0 : claimGridSelectedData.taskRef,\n          sectionType: constants.DMS_CONTEXT_TASK\n        };\n      });\n      requestParams === null || requestParams === void 0 ? void 0 : requestParams.push.apply(requestParams, _toConsumableArray(taskParams));\n    }\n\n    if (!utils.generic.isInvalidOrEmptyArray(requestParams)) {\n      dispatch(linkMultipleDmsDocuments(requestParams)).then(function (response) {\n        if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n          resetToDefaultValues();\n          dispatch(hideModal('DMS_LINK_TO_LOSS_AND_CLAIM'));\n        }\n      });\n    }\n  };\n\n  var handleLinkTo = function handleLinkTo(formValues) {\n    if (docData === null || docData === void 0 ? void 0 : docData.isLinked) {\n      return;\n    }\n\n    confirmDocumentlink(docData, formValues);\n  };\n\n  var fields = [{\n    name: 'linkToLoss',\n    type: 'checkbox',\n    defaultValue: false\n  }, {\n    name: 'linkToClaim',\n    type: 'checkbox',\n    defaultValue: false\n  }].concat(_toConsumableArray(canLinkToTask ? [{\n    name: 'linkToTask',\n    type: 'checkbox',\n    defaultValue: false\n  }] : []));\n  var actions = [{\n    name: 'secondary',\n    label: utils.string.t('app.cancel'),\n    handler: function handler() {\n      dispatch(hideModal('DMS_LINK_TO_LOSS_AND_CLAIM'));\n    }\n  }, {\n    name: 'submit',\n    label: utils.string.t('app.link'),\n    handler: function handler(values) {\n      handleLinkTo(values);\n    }\n  }];\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n\n  var _useForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      control = _useForm.control,\n      reset = _useForm.reset,\n      handleSubmit = _useForm.handleSubmit,\n      formState = _useForm.formState;\n\n  return /*#__PURE__*/_jsxDEV(DmsLinkToLossAndClaimView, {\n    fields: fields,\n    control: control,\n    actions: actions,\n    reset: reset,\n    handleSubmit: handleSubmit,\n    formState: formState,\n    canLinkToTask: canLinkToTask\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DmsLinkToLossAndClaim, \"K6sLNLZZ+w1kbrqGK//XALH4H7w=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useForm];\n});\n\n_c = DmsLinkToLossAndClaim;\n\nvar _c;\n\n$RefreshReg$(_c, \"DmsLinkToLossAndClaim\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/forms/DmsLinkToLossAndClaim/DmsLinkToLossAndClaim.js"],"names":["React","PropTypes","useForm","yupResolver","useDispatch","useSelector","DmsLinkToLossAndClaimView","linkMultipleDmsDocuments","selectLossInformation","selectClaimsInformation","hideModal","selectClaimsProcessingSelected","constants","utils","DmsLinkToLossAndClaim","propTypes","docData","object","isRequired","resetToDefaultValues","func","canLinkToTask","bool","dispatch","claimGridSelectedData","lossRefID","lossRef","claimRefID","claimReference","claimRef","confirmDocumentlink","docs","formValues","requestParams","linkToLoss","lossParams","map","d","documentId","referenceId","sectionType","DMS_CONTEXT_LOSS","push","linkToClaim","claimParams","DMS_CONTEXT_CLAIM","linkToTask","taskParams","taskRef","DMS_CONTEXT_TASK","generic","isInvalidOrEmptyArray","then","response","status","API_RESPONSE_OK","handleLinkTo","isLinked","fields","name","type","defaultValue","actions","label","string","t","handler","values","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","resolver","control","reset","handleSubmit","formState"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// app\r\nimport DmsLinkToLossAndClaimView from './DmsLinkToLossAndClaim.view';\r\nimport { linkMultipleDmsDocuments, selectLossInformation, selectClaimsInformation, hideModal, selectClaimsProcessingSelected } from 'stores';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\n\r\nDmsLinkToLossAndClaim.propTypes = {\r\n  docData: PropTypes.object.isRequired,\r\n  resetToDefaultValues: PropTypes.func.isRequired,\r\n  canLinkToTask: PropTypes.bool\r\n};\r\n\r\nexport default function DmsLinkToLossAndClaim({ docData, resetToDefaultValues, canLinkToTask }) {\r\n  const dispatch = useDispatch();\r\n  const claimGridSelectedData = useSelector(selectClaimsProcessingSelected)?.[0];\r\n  const lossRefID = useSelector(selectLossInformation)?.lossRef || claimGridSelectedData?.lossRef;\r\n  const claimRefID = useSelector(selectClaimsInformation)?.claimReference || claimGridSelectedData?.claimRef;\r\n\r\n  const confirmDocumentlink = (docs, formValues = '') => {\r\n    const requestParams = [];\r\n    if (formValues?.linkToLoss) {\r\n      const lossParams = docs?.map((d) => {\r\n        return {\r\n          documentId: d.documentId,\r\n          referenceId: lossRefID,\r\n          sectionType: constants.DMS_CONTEXT_LOSS,\r\n        };\r\n      });\r\n      requestParams?.push(...lossParams);\r\n    }\r\n    if (formValues?.linkToClaim && !formValues?.linkToLoss) {\r\n      const claimParams = docs?.map((d) => {\r\n        return {\r\n          documentId: d.documentId,\r\n          referenceId: claimRefID,\r\n          sectionType: constants.DMS_CONTEXT_CLAIM,\r\n        };\r\n      });\r\n      requestParams?.push(...claimParams);\r\n    }\r\n    if (formValues?.linkToTask) {\r\n      const taskParams = docs?.map((d) => {\r\n        return {\r\n          documentId: d.documentId,\r\n          referenceId: claimGridSelectedData?.taskRef,\r\n          sectionType: constants.DMS_CONTEXT_TASK,\r\n        };\r\n      });\r\n      requestParams?.push(...taskParams);\r\n    }\r\n\r\n    if (!utils.generic.isInvalidOrEmptyArray(requestParams)) {\r\n      dispatch(linkMultipleDmsDocuments(requestParams)).then((response) => {\r\n        if (response?.status === constants.API_RESPONSE_OK) {\r\n          resetToDefaultValues();\r\n          dispatch(hideModal('DMS_LINK_TO_LOSS_AND_CLAIM'));\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleLinkTo = (formValues) => {\r\n    if (docData?.isLinked) {\r\n      return;\r\n    }\r\n    confirmDocumentlink(docData, formValues);\r\n  };\r\n\r\n  const fields = [\r\n    {\r\n      name: 'linkToLoss',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n    },\r\n    {\r\n      name: 'linkToClaim',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n    },\r\n    ...(canLinkToTask ? [{\r\n      name: 'linkToTask',\r\n      type: 'checkbox',\r\n      defaultValue: false,\r\n    }] : []),\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'secondary',\r\n      label: utils.string.t('app.cancel'),\r\n      handler: () => {\r\n        dispatch(hideModal('DMS_LINK_TO_LOSS_AND_CLAIM'));\r\n      },\r\n    },\r\n    {\r\n      name: 'submit',\r\n      label: utils.string.t('app.link'),\r\n      handler: (values) => {\r\n        handleLinkTo(values);\r\n      },\r\n    },\r\n  ];\r\n\r\n  const defaultValues = utils.form.getInitialValues(fields);\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n  const { control, reset, handleSubmit, formState } = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n\r\n  return (\r\n    <DmsLinkToLossAndClaimView\r\n      fields={fields}\r\n      control={control}\r\n      actions={actions}\r\n      reset={reset}\r\n      handleSubmit={handleSubmit}\r\n      formState={formState}\r\n      canLinkToTask={canLinkToTask}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}