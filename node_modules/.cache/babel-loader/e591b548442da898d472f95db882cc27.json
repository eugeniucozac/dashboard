{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\forms\\\\DmsEditMetadata\\\\DmsEditMetadata.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useForm } from 'react-hook-form';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as Yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup'; //app\n\nimport DmsEditMetadataView from './DmsEditMetadata.view';\nimport * as utils from 'utils';\nimport * as constants from 'consts';\nimport { selectRefDataXbInstances, getViewTableDocuments, selectRefDataNewDocumentTypesByContextSource, selectRefDataNewDocumentTypeLookUpByContextSource, selectCaseDetails, getDmsEditMetadataSelector, getDmsEditMetadata, selectSettlementCurrency, postEditedMetadataDetails, selectDmsMetaData } from 'stores';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nDmsEditMetadata.propTypes = {\n  docData: PropTypes.object.isRequired,\n  context: PropTypes.string.isRequired,\n  selectedSourceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\n  searchParamsAfterUpload: PropTypes.shape({\n    referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    sectionType: PropTypes.string.isRequired\n  }),\n  cancelHandler: PropTypes.func.isRequired\n};\nDmsEditMetadata.defaultProps = {\n  documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy\n};\nexport default function DmsEditMetadata(_ref) {\n  _s();\n\n  var _existedMetaData$meta, _existedMetaData$meta2, _existedMetaData$meta3, _existedMetaData$meta4, _existedMetaData$meta5, _existedMetaData$meta6, _existedMetaData$meta7, _existedMetaData$meta8;\n\n  var docData = _ref.docData,\n      context = _ref.context,\n      selectedSourceId = _ref.selectedSourceId,\n      referenceId = _ref.referenceId,\n      documentTypeKey = _ref.documentTypeKey,\n      searchParamsAfterUpload = _ref.searchParamsAfterUpload,\n      cancelHandler = _ref.cancelHandler;\n  var dispatch = useDispatch();\n  var documentMetaData = useSelector(selectDmsMetaData);\n  var refDataXbInstances = useSelector(selectRefDataXbInstances);\n  var ppSelectCaseDetails = useSelector(selectCaseDetails);\n  var existedMetaData = useSelector(getDmsEditMetadataSelector);\n  var currenciesList = useSelector(selectSettlementCurrency);\n  var currencies = currenciesList === null || currenciesList === void 0 ? void 0 : currenciesList.map(function (currency) {\n    return _objectSpread(_objectSpread({}, currency), {}, {\n      name: \"\".concat(currency.id, \" - \").concat(currency.name)\n    });\n  });\n  var docInfo = utils.dmsFormatter.formatDocumentMetaData(documentMetaData, context, refDataXbInstances);\n  var xbInstanceId = selectedSourceId ? selectedSourceId : constants.DMS_CLAIM_SOURCE_ID;\n\n  var _utils$dmsFormatter$g = utils.dmsFormatter.getDocumentTypeFilterKeys(context, xbInstanceId, documentTypeKey),\n      dmsSectionKey = _utils$dmsFormatter$g.dmsSectionKey,\n      sourceId = _utils$dmsFormatter$g.sourceId;\n\n  var isDmsFromPi = utils.dmsFormatter.isDmsFromPi(documentTypeKey);\n\n  var _ref2 = isDmsFromPi && utils.dmsFormatter.getDocumentTypeInfo(documentTypeKey, sourceId),\n      documentTypeDescription = _ref2.documentTypeDescription,\n      sectionKey = _ref2.sectionKey,\n      dmsSourceID = _ref2.dmsSourceID;\n\n  var documentTypesBeforeFilter = useSelector(dmsSectionKey === constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy ? selectRefDataNewDocumentTypeLookUpByContextSource(dmsSectionKey, sourceId) : selectRefDataNewDocumentTypesByContextSource(dmsSectionKey, sourceId));\n  var documentTypesAfterFilter = (context === constants.DMS_CONTEXT_POLICY || context === constants.DMS_CONTEXT_PROCESSING_INSTRUCTION) && isDmsFromPi ? documentTypesBeforeFilter === null || documentTypesBeforeFilter === void 0 ? void 0 : documentTypesBeforeFilter.filter(function (type) {\n    return type.documentTypeDescription === documentTypeDescription && type.sectionKey === sectionKey && type.sourceID === dmsSourceID;\n  }) : documentTypesBeforeFilter;\n  var documentId = docData.documentId,\n      docClassification = docData.docClassification;\n\n  var _useState = useState((existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentTypeDescription) === constants.DMS_EDIT_PAYMENT_TYPE),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPaymentAllowed = _useState2[0],\n      setIsPaymentAllowed = _useState2[1];\n\n  var isDmsFromPiInstruction = utils.dmsFormatter.isDmsFromPiInstruction(documentTypeKey);\n  var policyRef = ppSelectCaseDetails.policyRef,\n      instructionId = ppSelectCaseDetails.instructionId; //if api is added for this, please update this\n\n  var docClassificationTypes = [{\n    id: 1,\n    value: utils.string.t('dms.upload.modalItems.classificationType.low')\n  }, {\n    id: 2,\n    value: utils.string.t('dms.upload.modalItems.classificationType.guarded')\n  }, {\n    id: 3,\n    value: utils.string.t('dms.upload.modalItems.classificationType.high')\n  }, {\n    id: 4,\n    value: utils.string.t('dms.upload.modalItems.classificationType.severe')\n  }];\n  var fields = [{\n    name: 'documentName',\n    type: 'text',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentName) || '',\n    validation: Yup.string().required(utils.string.t('validation.required'))\n  }, {\n    name: 'documentType',\n    type: 'autocompletemui',\n    options: documentTypesAfterFilter || [],\n    optionKey: 'id',\n    optionLabel: 'documentTypeDescription',\n    value: (documentTypesAfterFilter === null || documentTypesAfterFilter === void 0 ? void 0 : documentTypesAfterFilter.find(function (item) {\n      return item.documentTypeDescription === (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentTypeDescription);\n    })) || '',\n    validation: Yup.object().nullable().required(utils.string.t('validation.required'))\n  }, {\n    name: 'documentClassification',\n    type: 'autocompletemui',\n    options: docClassificationTypes || [],\n    optionKey: 'id',\n    optionLabel: 'value',\n    value: (docClassificationTypes === null || docClassificationTypes === void 0 ? void 0 : docClassificationTypes.find(function (item) {\n      return item.id === Number(docClassification);\n    })) || '',\n    validation: Yup.object().nullable().required(utils.string.t('validation.required'))\n  }, {\n    type: 'datepicker',\n    name: 'payment.paymentDate',\n    icon: 'TodayIcon',\n    muiComponentProps: {\n      fullWidth: true\n    },\n    outputFormat: 'iso',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta = existedMetaData.metadataFields) === null || _existedMetaData$meta === void 0 ? void 0 : (_existedMetaData$meta2 = _existedMetaData$meta.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_DATE;\n    })) === null || _existedMetaData$meta2 === void 0 ? void 0 : _existedMetaData$meta2.value) || ''\n  }, {\n    name: 'payment.paymentReference',\n    type: 'text',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta3 = existedMetaData.metadataFields) === null || _existedMetaData$meta3 === void 0 ? void 0 : (_existedMetaData$meta4 = _existedMetaData$meta3.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_REFERENCE;\n    })) === null || _existedMetaData$meta4 === void 0 ? void 0 : _existedMetaData$meta4.value) || ''\n  }, {\n    name: 'payment.lossPayee',\n    type: 'text',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta5 = existedMetaData.metadataFields) === null || _existedMetaData$meta5 === void 0 ? void 0 : (_existedMetaData$meta6 = _existedMetaData$meta5.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_LOSS_PAYEE;\n    })) === null || _existedMetaData$meta6 === void 0 ? void 0 : _existedMetaData$meta6.value) || ''\n  }, {\n    name: 'payment.amount',\n    type: 'number',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta7 = existedMetaData.metadataFields) === null || _existedMetaData$meta7 === void 0 ? void 0 : (_existedMetaData$meta8 = _existedMetaData$meta7.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_AMOUNT;\n    })) === null || _existedMetaData$meta8 === void 0 ? void 0 : _existedMetaData$meta8.value) || ''\n  }, {\n    name: 'payment.currency',\n    type: 'autocompletemui',\n    options: currencies || [],\n    optionKey: 'id',\n    optionLabel: 'name',\n    value: (currencies === null || currencies === void 0 ? void 0 : currencies.find(function (item) {\n      var _existedMetaData$meta9, _existedMetaData$meta10;\n\n      return item.id === (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta9 = existedMetaData.metadataFields) === null || _existedMetaData$meta9 === void 0 ? void 0 : (_existedMetaData$meta10 = _existedMetaData$meta9.find(function (subItem) {\n        return subItem.prop === constants.DMS_EDIT_PAYMENT_CURRENCY;\n      })) === null || _existedMetaData$meta10 === void 0 ? void 0 : _existedMetaData$meta10.value);\n    })) || ''\n  }];\n  var actions = [{\n    name: 'secondary',\n    label: utils.string.t('app.cancel'),\n    handler: function handler() {\n      cancelHandler();\n    }\n  }, {\n    name: 'submit',\n    label: utils.string.t('app.save'),\n    handler: function handler(values) {\n      handleMetaDataSubmit(values);\n    }\n  }];\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n\n  var _useForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      control = _useForm.control,\n      reset = _useForm.reset,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit,\n      formState = _useForm.formState,\n      watch = _useForm.watch;\n\n  var documentType = watch('documentType');\n  useEffect(function () {\n    !utils.generic.isValidObject(existedMetaData) && dispatch(getDmsEditMetadata(documentId, docClassification));\n  }, [documentId]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setIsPaymentAllowed((documentType === null || documentType === void 0 ? void 0 : documentType.documentTypeDescription) === constants.DMS_EDIT_PAYMENT_TYPE);\n  }, [documentType]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var handleMetaDataSubmit = function handleMetaDataSubmit(values) {\n    var _Object$keys, _values$documentType, _values$documentType2, _values$documentClass;\n\n    var metadataField = isPaymentAllowed && ((_Object$keys = Object.keys(values === null || values === void 0 ? void 0 : values.payment)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.map(function (item) {\n      var _values$payment$item;\n\n      var propVal = item === 'currency' ? values === null || values === void 0 ? void 0 : (_values$payment$item = values.payment[item]) === null || _values$payment$item === void 0 ? void 0 : _values$payment$item.id : values === null || values === void 0 ? void 0 : values.payment[item];\n      return {\n        prop: constants.DMS_EDIT_PAYMENT_PAYLOAD[item],\n        value: (item === 'amount' ? parseInt(propVal) : propVal) || ''\n      };\n    }));\n    var editMetadata = {\n      documentExtType: (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentExtType) || '',\n      documentId: parseInt(existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentId) || '',\n      documentTypeId: (values === null || values === void 0 ? void 0 : (_values$documentType = values.documentType) === null || _values$documentType === void 0 ? void 0 : _values$documentType.documentTypeID) || '',\n      documentTypeDescription: (values === null || values === void 0 ? void 0 : (_values$documentType2 = values.documentType) === null || _values$documentType2 === void 0 ? void 0 : _values$documentType2.documentTypeDescription) || '',\n      createdDate: (docData === null || docData === void 0 ? void 0 : docData.createdDate) || '',\n      createdBy: (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.createdBy) || '',\n      docClassificationId: (values === null || values === void 0 ? void 0 : (_values$documentClass = values.documentClassification) === null || _values$documentClass === void 0 ? void 0 : _values$documentClass.id) || '',\n      newFileName: values === null || values === void 0 ? void 0 : values.documentName,\n      metadataFields: metadataField || null\n    };\n    dispatch(postEditedMetadataDetails(editMetadata)).then(function (response) {\n      if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n        if (!isDmsFromPiInstruction) {\n          dispatch(getViewTableDocuments(_objectSpread({}, searchParamsAfterUpload ? searchParamsAfterUpload : _objectSpread({\n            referenceId: referenceId,\n            sectionType: context,\n            documentTypeKey: documentTypeKey\n          }, policyRef && instructionId && {\n            policyRef: policyRef,\n            instructionId: instructionId\n          }))));\n        }\n\n        cancelHandler();\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(DmsEditMetadataView, {\n    fields: fields,\n    control: control,\n    errors: errors,\n    actions: actions,\n    reset: reset,\n    handleSubmit: handleSubmit,\n    formState: formState,\n    dmsContext: context,\n    docInfo: docInfo,\n    documentData: docData,\n    existedMetaData: existedMetaData,\n    isPaymentAllowed: isPaymentAllowed\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DmsEditMetadata, \"5hwtfOqIVdpmxUSr5nSzgJnAG+Y=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useForm];\n});\n\n_c = DmsEditMetadata;\n\nvar _c;\n\n$RefreshReg$(_c, \"DmsEditMetadata\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/forms/DmsEditMetadata/DmsEditMetadata.js"],"names":["React","useEffect","useState","PropTypes","useForm","useSelector","useDispatch","Yup","yupResolver","DmsEditMetadataView","utils","constants","selectRefDataXbInstances","getViewTableDocuments","selectRefDataNewDocumentTypesByContextSource","selectRefDataNewDocumentTypeLookUpByContextSource","selectCaseDetails","getDmsEditMetadataSelector","getDmsEditMetadata","selectSettlementCurrency","postEditedMetadataDetails","selectDmsMetaData","DmsEditMetadata","propTypes","docData","object","isRequired","context","string","selectedSourceId","oneOfType","number","referenceId","documentTypeKey","oneOf","DMS_DOCUMENT_TYPE_SECTION_KEYS","searchParamsAfterUpload","shape","sectionType","cancelHandler","func","defaultProps","type","policy","dispatch","documentMetaData","refDataXbInstances","ppSelectCaseDetails","existedMetaData","currenciesList","currencies","map","currency","name","id","docInfo","dmsFormatter","formatDocumentMetaData","xbInstanceId","DMS_CLAIM_SOURCE_ID","getDocumentTypeFilterKeys","dmsSectionKey","sourceId","isDmsFromPi","getDocumentTypeInfo","documentTypeDescription","sectionKey","dmsSourceID","documentTypesBeforeFilter","documentTypesAfterFilter","DMS_CONTEXT_POLICY","DMS_CONTEXT_PROCESSING_INSTRUCTION","filter","sourceID","documentId","docClassification","DMS_EDIT_PAYMENT_TYPE","isPaymentAllowed","setIsPaymentAllowed","isDmsFromPiInstruction","policyRef","instructionId","docClassificationTypes","value","t","fields","documentName","validation","required","options","optionKey","optionLabel","find","item","nullable","Number","icon","muiComponentProps","fullWidth","outputFormat","metadataFields","prop","DMS_EDIT_PAYMENT_DATE","DMS_EDIT_PAYMENT_REFERENCE","DMS_EDIT_PAYMENT_LOSS_PAYEE","DMS_EDIT_PAYMENT_AMOUNT","subItem","DMS_EDIT_PAYMENT_CURRENCY","actions","label","handler","values","handleMetaDataSubmit","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","resolver","control","reset","errors","handleSubmit","formState","watch","documentType","generic","isValidObject","metadataField","Object","keys","payment","propVal","DMS_EDIT_PAYMENT_PAYLOAD","parseInt","editMetadata","documentExtType","documentTypeId","documentTypeID","createdDate","createdBy","docClassificationId","documentClassification","newFileName","then","response","status","API_RESPONSE_OK"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as Yup from 'yup';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\n//app\r\nimport DmsEditMetadataView from './DmsEditMetadata.view';\r\nimport * as utils from 'utils';\r\nimport * as constants from 'consts';\r\nimport {\r\n  selectRefDataXbInstances,\r\n  getViewTableDocuments,\r\n  selectRefDataNewDocumentTypesByContextSource,\r\n  selectRefDataNewDocumentTypeLookUpByContextSource,\r\n  selectCaseDetails,\r\n  getDmsEditMetadataSelector,\r\n  getDmsEditMetadata,\r\n  selectSettlementCurrency,\r\n  postEditedMetadataDetails,\r\n  selectDmsMetaData\r\n} from 'stores';\r\n\r\nDmsEditMetadata.propTypes = {\r\n  docData: PropTypes.object.isRequired,\r\n  context: PropTypes.string.isRequired,\r\n  selectedSourceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\r\n  searchParamsAfterUpload: PropTypes.shape({\r\n    referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n    sectionType: PropTypes.string.isRequired,\r\n  }),\r\n  cancelHandler: PropTypes.func.isRequired,\r\n};\r\n\r\nDmsEditMetadata.defaultProps = {\r\n  documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy,\r\n};\r\n\r\nexport default function DmsEditMetadata({\r\n  docData,\r\n  context,\r\n  selectedSourceId,\r\n  referenceId,\r\n  documentTypeKey,\r\n  searchParamsAfterUpload,\r\n  cancelHandler,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const documentMetaData = useSelector(selectDmsMetaData);\r\n  const refDataXbInstances = useSelector(selectRefDataXbInstances);\r\n  const ppSelectCaseDetails = useSelector(selectCaseDetails);\r\n  const existedMetaData = useSelector(getDmsEditMetadataSelector);\r\n  const currenciesList = useSelector(selectSettlementCurrency);\r\n\r\n  const currencies = currenciesList?.map((currency) => ({ ...currency, name: `${currency.id} - ${currency.name}` }));\r\n  const docInfo = utils.dmsFormatter.formatDocumentMetaData(documentMetaData, context, refDataXbInstances);\r\n\r\n  const xbInstanceId = selectedSourceId ? selectedSourceId : constants.DMS_CLAIM_SOURCE_ID;\r\n\r\n  const { dmsSectionKey, sourceId } = utils.dmsFormatter.getDocumentTypeFilterKeys(context, xbInstanceId, documentTypeKey);\r\n  const isDmsFromPi = utils.dmsFormatter.isDmsFromPi(documentTypeKey);\r\n  const { documentTypeDescription, sectionKey, dmsSourceID } =\r\n    isDmsFromPi && utils.dmsFormatter.getDocumentTypeInfo(documentTypeKey, sourceId);\r\n  const documentTypesBeforeFilter = useSelector(\r\n    dmsSectionKey === constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy\r\n      ? selectRefDataNewDocumentTypeLookUpByContextSource(dmsSectionKey, sourceId)\r\n      : selectRefDataNewDocumentTypesByContextSource(dmsSectionKey, sourceId)\r\n  );\r\n  const documentTypesAfterFilter =\r\n    (context === constants.DMS_CONTEXT_POLICY || context === constants.DMS_CONTEXT_PROCESSING_INSTRUCTION) && isDmsFromPi\r\n      ? documentTypesBeforeFilter?.filter(\r\n        (type) =>\r\n          type.documentTypeDescription === documentTypeDescription && type.sectionKey === sectionKey && type.sourceID === dmsSourceID\r\n      )\r\n      : documentTypesBeforeFilter;\r\n\r\n  const { documentId, docClassification } = docData;\r\n  const [isPaymentAllowed, setIsPaymentAllowed] = useState(existedMetaData?.documentTypeDescription === constants.DMS_EDIT_PAYMENT_TYPE);\r\n  const isDmsFromPiInstruction = utils.dmsFormatter.isDmsFromPiInstruction(documentTypeKey);\r\n  const { policyRef, instructionId } = ppSelectCaseDetails;\r\n\r\n  //if api is added for this, please update this\r\n  const docClassificationTypes = [\r\n    { id: 1, value: utils.string.t('dms.upload.modalItems.classificationType.low') },\r\n    { id: 2, value: utils.string.t('dms.upload.modalItems.classificationType.guarded') },\r\n    { id: 3, value: utils.string.t('dms.upload.modalItems.classificationType.high') },\r\n    { id: 4, value: utils.string.t('dms.upload.modalItems.classificationType.severe') },\r\n  ];\r\n\r\n  const fields = [\r\n    {\r\n      name: 'documentName',\r\n      type: 'text',\r\n      value: existedMetaData?.documentName || '',\r\n      validation: Yup.string().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      name: 'documentType',\r\n      type: 'autocompletemui',\r\n      options: documentTypesAfterFilter || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'documentTypeDescription',\r\n      value: documentTypesAfterFilter?.find((item) => item.documentTypeDescription === existedMetaData?.documentTypeDescription) || '',\r\n      validation: Yup.object().nullable().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      name: 'documentClassification',\r\n      type: 'autocompletemui',\r\n      options: docClassificationTypes || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'value',\r\n      value: docClassificationTypes?.find((item) => item.id === Number(docClassification)) || '',\r\n      validation: Yup.object().nullable().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      type: 'datepicker',\r\n      name: 'payment.paymentDate',\r\n      icon: 'TodayIcon',\r\n      muiComponentProps: {\r\n        fullWidth: true,\r\n      },\r\n      outputFormat: 'iso',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_DATE)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.paymentReference',\r\n      type: 'text',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_REFERENCE)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.lossPayee',\r\n      type: 'text',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_LOSS_PAYEE)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.amount',\r\n      type: 'number',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_AMOUNT)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.currency',\r\n      type: 'autocompletemui',\r\n      options: currencies || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      value:\r\n        currencies?.find((item) => {\r\n          return (\r\n            item.id === existedMetaData?.metadataFields?.find((subItem) => subItem.prop === constants.DMS_EDIT_PAYMENT_CURRENCY)?.value\r\n          );\r\n        }) || '',\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'secondary',\r\n      label: utils.string.t('app.cancel'),\r\n      handler: () => {\r\n        cancelHandler();\r\n      },\r\n    },\r\n    {\r\n      name: 'submit',\r\n      label: utils.string.t('app.save'),\r\n      handler: (values) => {\r\n        handleMetaDataSubmit(values);\r\n      },\r\n    },\r\n  ];\r\n\r\n  const defaultValues = utils.form.getInitialValues(fields);\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n  const { control, reset, errors, handleSubmit, formState, watch } = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n  const documentType = watch('documentType');\r\n\r\n  useEffect(() => {\r\n    !utils.generic.isValidObject(existedMetaData) && dispatch(getDmsEditMetadata(documentId, docClassification));\r\n  }, [documentId]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    setIsPaymentAllowed(documentType?.documentTypeDescription === constants.DMS_EDIT_PAYMENT_TYPE);\r\n  }, [documentType]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const handleMetaDataSubmit = (values) => {\r\n    const metadataField =\r\n      isPaymentAllowed &&\r\n      Object.keys(values?.payment)?.map((item) => {\r\n        const propVal = item === 'currency' ? values?.payment[item]?.id : values?.payment[item];\r\n        return {\r\n          prop: constants.DMS_EDIT_PAYMENT_PAYLOAD[item],\r\n          value: (item === 'amount' ? parseInt(propVal) : propVal) || '',\r\n        };\r\n      });\r\n    const editMetadata = {\r\n      documentExtType: existedMetaData?.documentExtType || '',\r\n      documentId: parseInt(existedMetaData?.documentId) || '',\r\n      documentTypeId: values?.documentType?.documentTypeID || '',\r\n      documentTypeDescription: values?.documentType?.documentTypeDescription || '',\r\n      createdDate: docData?.createdDate || '',\r\n      createdBy: existedMetaData?.createdBy || '',\r\n      docClassificationId: values?.documentClassification?.id || '',\r\n      newFileName: values?.documentName,\r\n      metadataFields: metadataField || null,\r\n    };\r\n\r\n    dispatch(postEditedMetadataDetails(editMetadata)).then((response) => {\r\n      if (response?.status === constants.API_RESPONSE_OK) {\r\n        if (!isDmsFromPiInstruction) {\r\n          dispatch(\r\n            getViewTableDocuments({\r\n              ...(searchParamsAfterUpload\r\n                ? searchParamsAfterUpload\r\n                : {\r\n                  referenceId,\r\n                  sectionType: context,\r\n                  documentTypeKey,\r\n                  ...(policyRef && instructionId && { policyRef, instructionId }),\r\n                }),\r\n            })\r\n          );\r\n        }\r\n        cancelHandler();\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <DmsEditMetadataView\r\n      fields={fields}\r\n      control={control}\r\n      errors={errors}\r\n      actions={actions}\r\n      reset={reset}\r\n      handleSubmit={handleSubmit}\r\n      formState={formState}\r\n      dmsContext={context}\r\n      docInfo={docInfo}\r\n      documentData={docData}\r\n      existedMetaData={existedMetaData}\r\n      isPaymentAllowed={isPaymentAllowed}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}