{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\TasksProcessingTable\\\\TasksProcessingTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport get from 'lodash/get';\nimport xorBy from 'lodash/xorBy'; // app\n\nimport { TasksProcessingTableView } from './TasksProcessingTable.view';\nimport { showModal, hideModal, selectClaimsTasksProcessingPagination, selectPremiumProcessingPagination, expandSidebar, collapseSidebar, resetAdhocTaskStatus, selectClaimsTasksProcessingSelected, selectClaimsProcessingTasksSelected, getClaimsTasksProcessing, postSanctionsCheck, updateMultiSelectedRows, selectMultiSelectedCase, selectClaimsProcessingItem, singleCaseSelectRows, selectPremiumProcessingCasesSelected } from 'stores';\nimport { useSort, usePagination } from 'hooks';\nimport * as utils from 'utils';\nimport { RFI_ON_TASKS, API_RESPONSE_OK, TASK_TEAM_TYPE, CLAIM_PROCESSING_REQ_TYPES } from 'consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nTasksProcessingTable.propTypes = {\n  isTaskTeam: PropTypes.bool.isRequired,\n  tasks: PropTypes.object.isRequired,\n  cols: PropTypes.array.isRequired,\n  columnProps: PropTypes.func.isRequired,\n  handleUpdateTaskPriority: PropTypes.func.isRequired,\n  sort: PropTypes.object.isRequired,\n  handleSort: PropTypes.func.isRequired,\n  handleChangePage: PropTypes.func.isRequired,\n  handleChangeRowsPerPage: PropTypes.func.isRequired,\n  refreshTasksGrid: PropTypes.func.isRequired,\n  premiumProcessingSaveAssignee: PropTypes.func,\n  isPremiumProcessing: PropTypes.bool\n};\nexport default function TasksProcessingTable(_ref) {\n  _s();\n\n  var isTaskTeam = _ref.isTaskTeam,\n      tasks = _ref.tasks,\n      colsArr = _ref.cols,\n      columnProps = _ref.columnProps,\n      sortObj = _ref.sort,\n      handleSort = _ref.handleSort,\n      handleChangePage = _ref.handleChangePage,\n      handleChangeRowsPerPage = _ref.handleChangeRowsPerPage,\n      handleUpdateTaskPriority = _ref.handleUpdateTaskPriority,\n      refreshTasksGrid = _ref.refreshTasksGrid,\n      premiumProcessingSaveAssignee = _ref.premiumProcessingSaveAssignee,\n      isPremiumProcessing = _ref.isPremiumProcessing;\n  var dispatch = useDispatch();\n  var uiSidebarExpanded = useSelector(function (state) {\n    return get(state, 'ui.sidebar.expanded');\n  });\n  var tasksProcessingSelected = useSelector(selectClaimsTasksProcessingSelected);\n  var tasksProcessingPagination = useSelector(selectClaimsTasksProcessingPagination);\n  var premiumProcessingPagination = useSelector(selectPremiumProcessingPagination);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      singleCaseRowSelected = _useState2[0],\n      setSingleCaseRowSelected = _useState2[1];\n\n  var _useSort = useSort(colsArr, sortObj, handleSort),\n      cols = _useSort.cols,\n      sort = _useSort.sort;\n\n  var pagination = usePagination((tasks === null || tasks === void 0 ? void 0 : tasks.items) || [], isPremiumProcessing ? premiumProcessingPagination : tasksProcessingPagination, handleChangePage, handleChangeRowsPerPage);\n  var taskItems = (tasks === null || tasks === void 0 ? void 0 : tasks.items) || [];\n  var hasTasks = utils.generic.isValidArray(taskItems, true);\n  var premiumProcessCheckBoxSelectedTaskList = useSelector(selectMultiSelectedCase);\n  var premiumProcessSelectedTaskList = useSelector(selectPremiumProcessingCasesSelected);\n  var tasksProcessingSelectedLength = (tasksProcessingSelected === null || tasksProcessingSelected === void 0 ? void 0 : tasksProcessingSelected.length) || 0;\n  useEffect(function () {\n    if (tasksProcessingSelectedLength !== 1) {\n      dispatch(collapseSidebar());\n    }\n  }, [tasksProcessingSelectedLength]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var selectCheckBox = function selectCheckBox(taskObj) {\n    var selectedPpTasksArray = xorBy(premiumProcessCheckBoxSelectedTaskList, [taskObj], (taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) ? 'taskId' : 'processId');\n\n    if ((taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) || (taskObj === null || taskObj === void 0 ? void 0 : taskObj.processId)) {\n      dispatch(updateMultiSelectedRows(selectedPpTasksArray));\n    }\n  };\n\n  var selectSingleTask = function selectSingleTask(taskObj) {\n    var selectedTask = xorBy([singleCaseRowSelected], [taskObj], (taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) ? 'taskId' : 'processId');\n\n    if (!uiSidebarExpanded || (selectedTask === null || selectedTask === void 0 ? void 0 : selectedTask.length) > 1) {\n      dispatch(singleCaseSelectRows(taskObj));\n      setSingleCaseRowSelected(taskObj);\n      dispatch(expandSidebar());\n    } else {\n      dispatch(singleCaseSelectRows({}));\n      setSingleCaseRowSelected({});\n      dispatch(collapseSidebar());\n    }\n  };\n\n  var selectTask = function selectTask(taskObj) {\n    return function (e) {\n      if (isPremiumProcessing) {\n        if (e.target.nodeName === 'INPUT') {\n          selectCheckBox(taskObj);\n        } else {\n          selectSingleTask(taskObj);\n        }\n      } else {\n        var selectedTasksArray = xorBy(tasksProcessingSelected, [taskObj], 'taskId');\n\n        if (taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) {\n          dispatch(selectClaimsProcessingTasksSelected(taskObj, true));\n\n          if (!uiSidebarExpanded && (selectedTasksArray === null || selectedTasksArray === void 0 ? void 0 : selectedTasksArray.length) === 1) {\n            dispatch(expandSidebar());\n          }\n        }\n      }\n    };\n  };\n\n  var handleEditAdhoc = function handleEditAdhoc(claim) {\n    dispatch(resetAdhocTaskStatus());\n    dispatch(showModal({\n      component: 'CREATE_AD_HOC_TASK',\n      props: {\n        title: utils.string.t('claims.processing.taskFunction.editTask'),\n        hideCompOnBlur: false,\n        fullWidth: true,\n        maxWidth: 'md',\n        disableAutoFocus: true,\n        componentProps: {\n          claim: claim,\n          cancelHandler: function cancelHandler() {\n            dispatch(hideModal());\n          }\n        }\n      }\n    }));\n  };\n\n  var handleCreateRFITaskLevel = function handleCreateRFITaskLevel(claim) {\n    dispatch(selectClaimsProcessingItem(claim, true));\n    dispatch(showModal({\n      component: 'CLAIMS_CREATE_RFI_STEPPER',\n      props: {\n        title: utils.string.t('claims.processing.taskFunction.createRFI'),\n        hideCompOnBlur: false,\n        fullWidth: true,\n        maxWidth: 'md',\n        disableAutoFocus: true,\n        componentProps: {\n          claim: claim,\n          type: RFI_ON_TASKS,\n          cancelHandler: function cancelHandler() {\n            dispatch(hideModal());\n          }\n        }\n      }\n    }));\n  };\n\n  var createSanctionsCheck = function createSanctionsCheck(selectedTask) {\n    if (selectedTask) {\n      dispatch(showModal({\n        component: 'CONFIRM',\n        props: {\n          title: utils.string.t('status.alert'),\n          hint: utils.string.t('claims.processing.sanctionsChecksNotification.conformationAlert'),\n          fullWidth: true,\n          maxWidth: 'xs',\n          componentProps: {\n            cancelLabel: utils.string.t('app.no'),\n            confirmLabel: utils.string.t('app.yes'),\n            submitHandler: function submitHandler() {\n              dispatch(postSanctionsCheck({\n                taskId: selectedTask === null || selectedTask === void 0 ? void 0 : selectedTask.taskId,\n                rootProcessId: selectedTask === null || selectedTask === void 0 ? void 0 : selectedTask.rootProcessId\n              })).then(function (response) {\n                dispatch(hideModal());\n\n                if (response.status === API_RESPONSE_OK) {\n                  dispatch(getClaimsTasksProcessing({\n                    requestType: CLAIM_PROCESSING_REQ_TYPES.search,\n                    taskType: TASK_TEAM_TYPE.myTask\n                  }));\n                }\n              });\n            },\n            cancelHandler: function cancelHandler() {}\n          }\n        }\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(TasksProcessingTableView, {\n    isTaskTeam: isTaskTeam,\n    hasTasks: hasTasks,\n    taskItems: taskItems,\n    tasksSelected: tasksProcessingSelected,\n    cols: cols,\n    columnProps: columnProps,\n    handleUpdateTaskPriority: handleUpdateTaskPriority,\n    sort: sort,\n    pagination: pagination,\n    handleSort: handleSort,\n    isPremiumProcessing: isPremiumProcessing,\n    premiumProcessCheckBoxSelectedTaskList: premiumProcessCheckBoxSelectedTaskList,\n    premiumProcessSelectedTaskList: premiumProcessSelectedTaskList,\n    handlers: {\n      selectTask: selectTask,\n      handleEditAdhoc: handleEditAdhoc,\n      handleCreateRFITaskLevel: handleCreateRFITaskLevel,\n      createSanctionsCheck: createSanctionsCheck\n    },\n    refreshTasksGrid: refreshTasksGrid,\n    premiumProcessingSaveAssignee: premiumProcessingSaveAssignee,\n    isTaskGridLoading: tasks === null || tasks === void 0 ? void 0 : tasks.isTaskGridLoading,\n    isTaskGridDataFetchingError: tasks === null || tasks === void 0 ? void 0 : tasks.isTaskGridDataFetchingError\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TasksProcessingTable, \"oPgxBoSFG6tSK8mOaVLLNYr4t4E=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSort, usePagination, useSelector, useSelector];\n});\n\n_c = TasksProcessingTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"TasksProcessingTable\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/TasksProcessingTable/TasksProcessingTable.js"],"names":["React","useState","useEffect","PropTypes","useSelector","useDispatch","get","xorBy","TasksProcessingTableView","showModal","hideModal","selectClaimsTasksProcessingPagination","selectPremiumProcessingPagination","expandSidebar","collapseSidebar","resetAdhocTaskStatus","selectClaimsTasksProcessingSelected","selectClaimsProcessingTasksSelected","getClaimsTasksProcessing","postSanctionsCheck","updateMultiSelectedRows","selectMultiSelectedCase","selectClaimsProcessingItem","singleCaseSelectRows","selectPremiumProcessingCasesSelected","useSort","usePagination","utils","RFI_ON_TASKS","API_RESPONSE_OK","TASK_TEAM_TYPE","CLAIM_PROCESSING_REQ_TYPES","TasksProcessingTable","propTypes","isTaskTeam","bool","isRequired","tasks","object","cols","array","columnProps","func","handleUpdateTaskPriority","sort","handleSort","handleChangePage","handleChangeRowsPerPage","refreshTasksGrid","premiumProcessingSaveAssignee","isPremiumProcessing","colsArr","sortObj","dispatch","uiSidebarExpanded","state","tasksProcessingSelected","tasksProcessingPagination","premiumProcessingPagination","singleCaseRowSelected","setSingleCaseRowSelected","pagination","items","taskItems","hasTasks","generic","isValidArray","premiumProcessCheckBoxSelectedTaskList","premiumProcessSelectedTaskList","tasksProcessingSelectedLength","length","selectCheckBox","taskObj","selectedPpTasksArray","taskId","processId","selectSingleTask","selectedTask","selectTask","e","target","nodeName","selectedTasksArray","handleEditAdhoc","claim","component","props","title","string","t","hideCompOnBlur","fullWidth","maxWidth","disableAutoFocus","componentProps","cancelHandler","handleCreateRFITaskLevel","type","createSanctionsCheck","hint","cancelLabel","confirmLabel","submitHandler","rootProcessId","then","response","status","requestType","search","taskType","myTask","isTaskGridLoading","isTaskGridDataFetchingError"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport get from 'lodash/get';\r\nimport xorBy from 'lodash/xorBy';\r\n\r\n// app\r\nimport { TasksProcessingTableView } from './TasksProcessingTable.view';\r\nimport {\r\n  showModal,\r\n  hideModal,\r\n  selectClaimsTasksProcessingPagination,\r\n  selectPremiumProcessingPagination,\r\n  expandSidebar,\r\n  collapseSidebar,\r\n  resetAdhocTaskStatus,\r\n  selectClaimsTasksProcessingSelected,\r\n  selectClaimsProcessingTasksSelected,\r\n  getClaimsTasksProcessing,\r\n  postSanctionsCheck,\r\n  updateMultiSelectedRows,\r\n  selectMultiSelectedCase,\r\n  selectClaimsProcessingItem,\r\n  singleCaseSelectRows,\r\n  selectPremiumProcessingCasesSelected,\r\n} from 'stores';\r\nimport { useSort, usePagination } from 'hooks';\r\nimport * as utils from 'utils';\r\nimport { RFI_ON_TASKS, API_RESPONSE_OK, TASK_TEAM_TYPE, CLAIM_PROCESSING_REQ_TYPES } from 'consts';\r\n\r\nTasksProcessingTable.propTypes = {\r\n  isTaskTeam: PropTypes.bool.isRequired,\r\n  tasks: PropTypes.object.isRequired,\r\n  cols: PropTypes.array.isRequired,\r\n  columnProps: PropTypes.func.isRequired,\r\n  handleUpdateTaskPriority: PropTypes.func.isRequired,\r\n  sort: PropTypes.object.isRequired,\r\n  handleSort: PropTypes.func.isRequired,\r\n  handleChangePage: PropTypes.func.isRequired,\r\n  handleChangeRowsPerPage: PropTypes.func.isRequired,\r\n  refreshTasksGrid: PropTypes.func.isRequired,\r\n  premiumProcessingSaveAssignee: PropTypes.func,\r\n  isPremiumProcessing: PropTypes.bool,\r\n};\r\n\r\nexport default function TasksProcessingTable({\r\n  isTaskTeam,\r\n  tasks,\r\n  cols: colsArr,\r\n  columnProps,\r\n  sort: sortObj,\r\n  handleSort,\r\n  handleChangePage,\r\n  handleChangeRowsPerPage,\r\n  handleUpdateTaskPriority,\r\n  refreshTasksGrid,\r\n  premiumProcessingSaveAssignee,\r\n  isPremiumProcessing,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const uiSidebarExpanded = useSelector((state) => get(state, 'ui.sidebar.expanded'));\r\n  const tasksProcessingSelected = useSelector(selectClaimsTasksProcessingSelected);\r\n  const tasksProcessingPagination = useSelector(selectClaimsTasksProcessingPagination);\r\n  const premiumProcessingPagination = useSelector(selectPremiumProcessingPagination);\r\n  const [singleCaseRowSelected, setSingleCaseRowSelected] = useState({});\r\n  const { cols, sort } = useSort(colsArr, sortObj, handleSort);\r\n  const pagination = usePagination(\r\n    tasks?.items || [],\r\n    isPremiumProcessing ? premiumProcessingPagination : tasksProcessingPagination,\r\n    handleChangePage,\r\n    handleChangeRowsPerPage\r\n  );\r\n  const taskItems = tasks?.items || [];\r\n  const hasTasks = utils.generic.isValidArray(taskItems, true);\r\n  const premiumProcessCheckBoxSelectedTaskList = useSelector(selectMultiSelectedCase);\r\n  const premiumProcessSelectedTaskList = useSelector(selectPremiumProcessingCasesSelected);\r\n  const tasksProcessingSelectedLength = tasksProcessingSelected?.length || 0;\r\n\r\n  useEffect(() => {\r\n    if (tasksProcessingSelectedLength !== 1) {\r\n      dispatch(collapseSidebar());\r\n    }\r\n  }, [tasksProcessingSelectedLength]); // eslint-disable-line react-hooks/exhaustive-deps\r\n  const selectCheckBox = (taskObj) => {\r\n    const selectedPpTasksArray = xorBy(premiumProcessCheckBoxSelectedTaskList, [taskObj], taskObj?.taskId ? 'taskId' : 'processId');\r\n    if (taskObj?.taskId || taskObj?.processId) {\r\n      dispatch(updateMultiSelectedRows(selectedPpTasksArray));\r\n    }\r\n  };\r\n  const selectSingleTask = (taskObj) => {\r\n    const selectedTask = xorBy([singleCaseRowSelected], [taskObj], taskObj?.taskId ? 'taskId' : 'processId');\r\n    if (!uiSidebarExpanded || selectedTask?.length > 1) {\r\n      dispatch(singleCaseSelectRows(taskObj));\r\n      setSingleCaseRowSelected(taskObj);\r\n      dispatch(expandSidebar());\r\n    } else {\r\n      dispatch(singleCaseSelectRows({}));\r\n      setSingleCaseRowSelected({});\r\n      dispatch(collapseSidebar());\r\n    }\r\n  };\r\n  const selectTask = (taskObj) => (e) => {\r\n    if (isPremiumProcessing) {\r\n      if (e.target.nodeName === 'INPUT') {\r\n        selectCheckBox(taskObj);\r\n      } else {\r\n        selectSingleTask(taskObj);\r\n      }\r\n    } else {\r\n      const selectedTasksArray = xorBy(tasksProcessingSelected, [taskObj], 'taskId');\r\n\r\n      if (taskObj?.taskId) {\r\n        dispatch(selectClaimsProcessingTasksSelected(taskObj, true));\r\n        if (!uiSidebarExpanded && selectedTasksArray?.length === 1) {\r\n          dispatch(expandSidebar());\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditAdhoc = (claim) => {\r\n    dispatch(resetAdhocTaskStatus());\r\n    dispatch(\r\n      showModal({\r\n        component: 'CREATE_AD_HOC_TASK',\r\n        props: {\r\n          title: utils.string.t('claims.processing.taskFunction.editTask'),\r\n          hideCompOnBlur: false,\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          disableAutoFocus: true,\r\n          componentProps: {\r\n            claim,\r\n            cancelHandler: () => {\r\n              dispatch(hideModal());\r\n            },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCreateRFITaskLevel = (claim) => {\r\n    dispatch(selectClaimsProcessingItem(claim, true));\r\n    dispatch(\r\n      showModal({\r\n        component: 'CLAIMS_CREATE_RFI_STEPPER',\r\n        props: {\r\n          title: utils.string.t('claims.processing.taskFunction.createRFI'),\r\n          hideCompOnBlur: false,\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          disableAutoFocus: true,\r\n          componentProps: {\r\n            claim,\r\n            type: RFI_ON_TASKS,\r\n            cancelHandler: () => {\r\n              dispatch(hideModal());\r\n            },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const createSanctionsCheck = (selectedTask) => {\r\n    if (selectedTask) {\r\n      dispatch(\r\n        showModal({\r\n          component: 'CONFIRM',\r\n          props: {\r\n            title: utils.string.t('status.alert'),\r\n            hint: utils.string.t('claims.processing.sanctionsChecksNotification.conformationAlert'),\r\n            fullWidth: true,\r\n            maxWidth: 'xs',\r\n            componentProps: {\r\n              cancelLabel: utils.string.t('app.no'),\r\n              confirmLabel: utils.string.t('app.yes'),\r\n              submitHandler: () => {\r\n                dispatch(postSanctionsCheck({ taskId: selectedTask?.taskId, rootProcessId: selectedTask?.rootProcessId })).then(\r\n                  (response) => {\r\n                    dispatch(hideModal());\r\n                    if (response.status === API_RESPONSE_OK) {\r\n                      dispatch(\r\n                        getClaimsTasksProcessing({ requestType: CLAIM_PROCESSING_REQ_TYPES.search, taskType: TASK_TEAM_TYPE.myTask })\r\n                      );\r\n                    }\r\n                  }\r\n                );\r\n              },\r\n              cancelHandler: () => {},\r\n            },\r\n          },\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TasksProcessingTableView\r\n      isTaskTeam={isTaskTeam}\r\n      hasTasks={hasTasks}\r\n      taskItems={taskItems}\r\n      tasksSelected={tasksProcessingSelected}\r\n      cols={cols}\r\n      columnProps={columnProps}\r\n      handleUpdateTaskPriority={handleUpdateTaskPriority}\r\n      sort={sort}\r\n      pagination={pagination}\r\n      handleSort={handleSort}\r\n      isPremiumProcessing={isPremiumProcessing}\r\n      premiumProcessCheckBoxSelectedTaskList={premiumProcessCheckBoxSelectedTaskList}\r\n      premiumProcessSelectedTaskList={premiumProcessSelectedTaskList}\r\n      handlers={{\r\n        selectTask,\r\n        handleEditAdhoc,\r\n        handleCreateRFITaskLevel,\r\n        createSanctionsCheck,\r\n      }}\r\n      refreshTasksGrid={refreshTasksGrid}\r\n      premiumProcessingSaveAssignee={premiumProcessingSaveAssignee}\r\n      isTaskGridLoading={tasks?.isTaskGridLoading}\r\n      isTaskGridDataFetchingError={tasks?.isTaskGridDataFetchingError}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}