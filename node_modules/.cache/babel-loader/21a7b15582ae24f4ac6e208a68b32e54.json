{"ast":null,"code":"import _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\DmsSearch\\\\DmsSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { get } from 'lodash'; // app\n\nimport { DmsSearchView } from './DmsSearch.view';\nimport { searchDmsDocuments, selectRefDataNewDocumentTypesByContextSource, resetDmsDocumentsSearch, viewDocumentsDownload, viewDocumentsMultiDownload, linkMultipleDmsDocuments, showModal, selectClaimsListFilterLoading } from 'stores';\nimport { useFormActions, useFlexiColumns } from 'hooks';\nimport * as constants from 'consts';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { MultiSelect } from 'components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nDmsSearch.propTypes = {\n  context: PropTypes.oneOf([constants.DMS_CONTEXT_CASE, constants.DMS_CONTEXT_CLAIM, constants.DMS_CONTEXT_LOSS, constants.DMS_CONTEXT_POLICY, constants.DMS_CONTEXT_TASK, constants.DMS_CONTEXT_PROCESSING_INSTRUCTION, constants.DMS_CONTEXT_INSTRUCTION, constants.DMS_CONTEXT_RFI]).isRequired,\n  source: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  referenceId: PropTypes.string.isRequired,\n  isAutoSearchScreen: PropTypes.bool,\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS])\n};\nDmsSearch.defaultProps = {\n  documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy\n};\nexport default function DmsSearch(_ref) {\n  _s();\n\n  var _documentsList$filter, _documentsList$filter2, _documentsList$filter3, _documentsList$filter4, _documentsList$filter5, _documentsList$filter6, _documentsList$files, _documentsList$files$, _documentsList$files2, _documentsList$files3, _documentsList$files4, _documentsList$files5, _documentsList$files6, _documentsList$files7;\n\n  var context = _ref.context,\n      source = _ref.source,\n      referenceId = _ref.referenceId,\n      isAutoSearchScreen = _ref.isAutoSearchScreen,\n      documentTypeKey = _ref.documentTypeKey;\n  var dispatch = useDispatch();\n\n  var _utils$dmsFormatter$g = utils.dmsFormatter.getDocumentTypeFilterKeys(context, source, documentTypeKey),\n      dmsSectionKey = _utils$dmsFormatter$g.dmsSectionKey,\n      sourceId = _utils$dmsFormatter$g.sourceId; // redux\n\n\n  var documentTypes = useSelector(selectRefDataNewDocumentTypesByContextSource(dmsSectionKey, sourceId));\n  var documentsList = useSelector(function (state) {\n    return get(state, 'dms.search');\n  }) || [];\n  var isFetchingFilters = useSelector(selectClaimsListFilterLoading); // state\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      resetKey = _useState2[0],\n      setResetKey = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchExpanded = _useState4[0],\n      setSearchExpanded = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isMultiSelect = _useState6[0],\n      setIsMultiSelect = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedDocs = _useState8[0],\n      setSelectedDocs = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      searchFields = _useState10[0],\n      setSearchFields = _useState10[1];\n\n  var _useState11 = useState(constants.DMS_SEARCH_TABLE_DEFAULT_ROWS),\n      _useState12 = _slicedToArray(_useState11, 2),\n      searchRowsTotalPreference = _useState12[0],\n      setSearchRowsTotalPreference = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      filtersPreference = _useState14[0],\n      setFiltersPreference = _useState14[1];\n\n  var filterTypeCall = constants.CLAIM_PROCESSING_REQ_TYPES.filter;\n  var bothTypeCall = constants.CLAIM_PROCESSING_REQ_TYPES.both;\n  var contextReferenceObject = {\n    id: referenceId\n  };\n  useEffect(function () {\n    dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, searchFields), {}, {\n      pageSize: 1,\n      requestType: filterTypeCall\n    })));\n\n    if (isAutoSearchScreen) {\n      var defaultSearchCriteria = context === constants.DMS_CONTEXT_POLICY ? {\n        policyId: referenceId,\n        pageSize: searchRowsTotalPreference\n      } : {};\n\n      if (utils.generic.isValidArray(Object.values(defaultSearchCriteria), true)) {\n        setSearchFields(defaultSearchCriteria);\n        dispatch(searchDmsDocuments(context, contextReferenceObject, defaultSearchCriteria));\n      }\n    }\n\n    dispatch(selectRefDataNewDocumentTypesByContextSource(context, source));\n    return function () {\n      dispatch(resetDmsDocumentsSearch());\n    };\n  }, [referenceId]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var cols = [{\n    id: 'multiSelect',\n    visible: true\n  }, {\n    id: 'fileName',\n    label: utils.string.t('dms.search.cols.fileName'),\n    sort: {\n      type: 'numeric',\n      direction: 'desc'\n    },\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'hDriveFolders',\n    label: utils.string.t('dms.search.cols.hDriveFolders'),\n    sort: {\n      type: 'lexical',\n      direction: 'asc'\n    },\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'reference',\n    label: utils.string.t('dms.search.cols.reference'),\n    sort: {\n      type: 'lexical',\n      direction: 'asc'\n    },\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'documentTypeDescription',\n    label: utils.string.t('dms.search.cols.documentType'),\n    sort: {\n      type: 'lexical',\n      direction: 'asc'\n    },\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'version',\n    label: utils.string.t('dms.search.cols.version'),\n    sort: {\n      type: 'numeric',\n      direction: 'asc'\n    },\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'userDetails.fullName',\n    label: utils.string.t('dms.search.cols.uploadedBy'),\n    sort: {\n      type: 'date',\n      direction: 'asc'\n    },\n    nowrap: true,\n    visible: true\n  }, {\n    id: 'actionButtons',\n    menu: true,\n    nowrap: true\n  }];\n\n  var _useFlexiColumns = useFlexiColumns(cols),\n      colsArray = _useFlexiColumns.columns;\n\n  var fields = [{\n    name: 'policyId',\n    type: 'text',\n    label: utils.string.t('dms.search.fields.policyReference.label'),\n    defaultValue: isAutoSearchScreen ? referenceId : ''\n  }, {\n    name: 'claimId',\n    type: 'text',\n    label: utils.string.t('dms.search.fields.claimReference.label'),\n    value: ''\n  }, {\n    name: 'lossId',\n    type: 'text',\n    label: utils.string.t('dms.search.fields.lossReference.label'),\n    value: ''\n  }, {\n    name: 'insuredName',\n    type: 'text',\n    label: utils.string.t('dms.search.fields.insuredName.label'),\n    value: ''\n  }, {\n    name: 'documentType',\n    type: 'autocompletemui',\n    label: utils.string.t('dms.search.fields.documentType.label'),\n    placeholder: utils.string.t('dms.search.fields.documentType.placeholder'),\n    value: null,\n    options: documentTypes,\n    optionKey: 'documentTypeID',\n    optionLabel: 'documentTypeDescription'\n  }, {\n    name: 'documentName',\n    type: 'text',\n    label: utils.string.t('dms.search.fields.documentName.label'),\n    value: ''\n  }, {\n    name: 'year',\n    type: 'datepicker',\n    label: utils.string.t('dms.search.fields.inceptionYear.label'),\n    placeholder: utils.string.t('dms.search.fields.inceptionYear.placeholder'),\n    value: null,\n    muiComponentProps: {\n      fullWidth: true,\n      helperText: utils.string.t('dms.search.fields.inceptionYear.helperText')\n    },\n    muiPickerProps: {\n      views: ['year'],\n      format: 'YYYY',\n      clearable: true\n    }\n  }, {\n    name: 'division',\n    type: 'text',\n    label: utils.string.t('dms.search.fields.division.label'),\n    value: ''\n  }, {\n    name: \"\".concat(constants.DMS_DOCUMENT_TYPE_PAYMENT, \"_paymentDate\"),\n    type: 'datepicker',\n    group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\n    label: utils.string.t('dms.search.fields.paymentDate.label'),\n    placeholder: utils.string.t('dms.search.fields.paymentDate.placeholder'),\n    value: null,\n    muiComponentProps: {\n      fullWidth: true,\n      helperText: utils.string.t('dms.search.fields.paymentDate.helperText')\n    },\n    muiPickerProps: {\n      format: config.ui.format.date.slashNumeric,\n      clearable: true\n    }\n  }, {\n    name: \"\".concat(constants.DMS_DOCUMENT_TYPE_PAYMENT, \"_paymentReference\"),\n    type: 'text',\n    group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\n    label: utils.string.t('dms.search.fields.paymentReference.label'),\n    value: ''\n  }, {\n    name: \"\".concat(constants.DMS_DOCUMENT_TYPE_PAYMENT, \"_lossPayee\"),\n    type: 'text',\n    group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\n    label: utils.string.t('dms.search.fields.lossPayee.label'),\n    value: ''\n  }, {\n    name: \"\".concat(constants.DMS_DOCUMENT_TYPE_PAYMENT, \"_amount\"),\n    type: 'number',\n    group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\n    label: utils.string.t('dms.search.fields.amount.label'),\n    value: ''\n  }];\n  var actions = [{\n    name: 'cancel',\n    label: utils.string.t('app.cancel'),\n    handler: function handler() {\n      setResetKey(new Date().getTime());\n    }\n  }, {\n    name: 'submit',\n    label: utils.string.t('dms.search.btn'),\n    handler: function handler(data) {\n      setSearchExpanded(true);\n      setSearchFields(data);\n      dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, data), {}, {\n        pageSize: searchRowsTotalPreference,\n        requestType: bothTypeCall,\n        filterRequest: filtersPreference\n      }))).then(function () {\n        setSearchExpanded(false);\n      });\n    }\n  }];\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n  var formProps = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  }));\n\n  var _useFormActions = useFormActions(actions, formProps.reset),\n      cancel = _useFormActions.cancel,\n      submit = _useFormActions.submit;\n\n  var handleDownloadFile = function handleDownloadFile(file) {\n    dispatch(viewDocumentsDownload(file));\n  };\n\n  var handleLinkFile = function handleLinkFile(file) {\n    if (file.isLinked) {\n      return;\n    }\n\n    confirmDocumentlink([file]);\n  };\n\n  var handleMultipleDownload = function handleMultipleDownload() {\n    var selectedDocIds = selectedDocs === null || selectedDocs === void 0 ? void 0 : selectedDocs.map(function (docId) {\n      return docId.documentId;\n    });\n\n    if ((selectedDocs === null || selectedDocs === void 0 ? void 0 : selectedDocs.length) !== 1) {\n      dispatch(viewDocumentsMultiDownload(selectedDocIds));\n      return;\n    }\n\n    dispatch(viewDocumentsDownload(selectedDocs === null || selectedDocs === void 0 ? void 0 : selectedDocs[0]));\n  };\n\n  var handleMutiplelinking = function handleMutiplelinking() {\n    confirmDocumentlink(selectedDocs);\n  };\n\n  var resetToDefaultValues = function resetToDefaultValues() {\n    setSelectedDocs([]);\n    setIsMultiSelect(false);\n  };\n\n  var confirmDocumentlink = function confirmDocumentlink(docs) {\n    var requestParams = docs === null || docs === void 0 ? void 0 : docs.map(function (d) {\n      return {\n        documentId: d.documentId,\n        referenceId: referenceId,\n        sectionType: context\n      };\n    });\n    var requestParamsLength = requestParams === null || requestParams === void 0 ? void 0 : requestParams.length;\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('dms.search.linkDocument.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('dms.search.linkDocument.confirmLabel'),\n          confirmMessage: requestParamsLength === 1 ? utils.string.t('dms.search.linkDocument.confirmMessage') : utils.string.t('dms.search.linkDocument.confirmMessageForMulti', {\n            count: requestParamsLength\n          }),\n          submitHandler: function submitHandler() {\n            return dispatch(linkMultipleDmsDocuments(requestParams)).then(function (response) {\n              if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n                resetToDefaultValues();\n\n                if (utils.generic.isValidArray(Object.values(searchFields), true)) {\n                  dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, searchFields), {}, {\n                    pageSize: searchRowsTotalPreference\n                  })));\n                }\n              }\n            });\n          }\n        }\n      }\n    }));\n  };\n\n  var handleCheckboxClick = function handleCheckboxClick(doc) {\n    var newlySelectedDocs = [].concat(_toConsumableArray(selectedDocs), [doc]);\n\n    if (selectedDocs === null || selectedDocs === void 0 ? void 0 : selectedDocs.includes(doc)) {\n      newlySelectedDocs = newlySelectedDocs.filter(function (selectedDoc) {\n        return selectedDoc !== doc;\n      });\n    }\n\n    setSelectedDocs(newlySelectedDocs);\n  };\n\n  var showCheckboxesClick = function showCheckboxesClick(event) {\n    var _event$target;\n\n    setIsMultiSelect(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.checked);\n  };\n\n  var handleSort = function handleSort(by, dir) {\n    dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, searchFields), {}, {\n      by: by,\n      dir: dir,\n      pageSize: searchRowsTotalPreference,\n      requestType: bothTypeCall,\n      filterRequest: filtersPreference\n    }))).then(function () {\n      setSearchExpanded(false);\n    });\n  };\n\n  var _useFlexiColumns2 = useFlexiColumns(cols),\n      columnProps = _useFlexiColumns2.columnProps;\n\n  var handleChangeRowsPerPage = function handleChangeRowsPerPage(rowsPerPage) {\n    setSearchRowsTotalPreference(rowsPerPage);\n    dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, searchFields), {}, {\n      requestType: bothTypeCall,\n      pageSize: rowsPerPage,\n      filterRequest: filtersPreference\n    }))).then(function () {\n      setSearchExpanded(false);\n    });\n  };\n\n  var handleChangePage = function handleChangePage(newPage) {\n    dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, searchFields), {}, {\n      page: newPage,\n      pageSize: searchRowsTotalPreference,\n      filterRequest: filtersPreference,\n      requestType: bothTypeCall\n    }))).then(function () {\n      setSearchExpanded(false);\n    });\n  };\n\n  var _useForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      setValue = _useForm.setValue;\n\n  var managedTableFilterFields = [{\n    id: 'hdriveFolder',\n    type: 'multiSelect',\n    label: utils.string.t('claims.list.tasksGridColumns.hDriveFolders'),\n    value: [],\n    options: documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$filter = documentsList.filters) === null || _documentsList$filter === void 0 ? void 0 : _documentsList$filter.hdriveFolder,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"hdriveFolder\",\n      search: true,\n      options: documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$filter2 = documentsList.filters) === null || _documentsList$filter2 === void 0 ? void 0 : _documentsList$filter2.hdriveFolder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'documentTypeDescription',\n    type: 'multiSelect',\n    label: utils.string.t('claims.list.tasksGridColumns.docType'),\n    value: [],\n    options: documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$filter3 = documentsList.filters) === null || _documentsList$filter3 === void 0 ? void 0 : _documentsList$filter3.documentTypeDescription,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"documentTypeDescription\",\n      search: true,\n      options: documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$filter4 = documentsList.filters) === null || _documentsList$filter4 === void 0 ? void 0 : _documentsList$filter4.documentTypeDescription\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'createdBy',\n    type: 'multiSelect',\n    label: utils.string.t('claims.list.tasksGridColumns.createdBy'),\n    value: [],\n    options: documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$filter5 = documentsList.filters) === null || _documentsList$filter5 === void 0 ? void 0 : _documentsList$filter5.createdBy,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"createdBy\",\n      search: true,\n      options: documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$filter6 = documentsList.filters) === null || _documentsList$filter6 === void 0 ? void 0 : _documentsList$filter6.createdBy\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 16\n    }, this)\n  }];\n\n  var resetFilter = function resetFilter() {\n    setValue('hdriveFolder', null);\n    setValue('documentTypeDescription', null);\n    setValue('createdBy', null);\n    setFiltersPreference([]);\n    if (!Object.keys(searchFields).length) return;\n    dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread({}, searchFields)));\n  };\n\n  var handleSearchFilter = function handleSearchFilter(_ref2) {\n    var search = _ref2.search,\n        filters = _ref2.filters;\n    setFiltersPreference(filters);\n    dispatch(searchDmsDocuments(context, contextReferenceObject, _objectSpread(_objectSpread({}, searchFields), {}, {\n      pageSize: searchRowsTotalPreference,\n      requestType: bothTypeCall,\n      filterRequest: filters\n    })));\n  }; // TODO\n\n\n  var resetNotificationFilters = function resetNotificationFilters() {};\n\n  return /*#__PURE__*/_jsxDEV(DmsSearchView, {\n    cols: colsArray,\n    columnPropsFunc: columnProps,\n    rows: (documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$files = documentsList.files) === null || _documentsList$files === void 0 ? void 0 : (_documentsList$files$ = _documentsList$files.data) === null || _documentsList$files$ === void 0 ? void 0 : _documentsList$files$.searchValue) || [],\n    fields: fields,\n    buttons: {\n      cancel: cancel,\n      submit: submit\n    },\n    formProps: formProps,\n    searchExpanded: searchExpanded,\n    handlers: {\n      download: handleDownloadFile,\n      link: handleLinkFile,\n      sort: handleSort,\n      handleCheckboxClick: handleCheckboxClick,\n      showCheckboxesClick: showCheckboxesClick,\n      handleMultipleDownload: handleMultipleDownload,\n      handleMutiplelinking: handleMutiplelinking,\n      resetFilter: resetFilter,\n      handleSearchFilter: handleSearchFilter,\n      resetNotificationFilters: resetNotificationFilters\n    },\n    resetKey: resetKey,\n    isMultiSelect: isMultiSelect,\n    selectedDocs: selectedDocs,\n    pagination: {\n      page: (documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$files2 = documentsList.files) === null || _documentsList$files2 === void 0 ? void 0 : (_documentsList$files3 = _documentsList$files2.pagination) === null || _documentsList$files3 === void 0 ? void 0 : _documentsList$files3.page) || 0,\n      rowsTotal: (documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$files4 = documentsList.files) === null || _documentsList$files4 === void 0 ? void 0 : (_documentsList$files5 = _documentsList$files4.pagination) === null || _documentsList$files5 === void 0 ? void 0 : _documentsList$files5.totalElements) || 0,\n      rowsPerPage: (documentsList === null || documentsList === void 0 ? void 0 : (_documentsList$files6 = documentsList.files) === null || _documentsList$files6 === void 0 ? void 0 : (_documentsList$files7 = _documentsList$files6.pagination) === null || _documentsList$files7 === void 0 ? void 0 : _documentsList$files7.size) || searchRowsTotalPreference,\n      handlers: {\n        handleChangePage: handleChangePage,\n        handleChangeRowsPerPage: handleChangeRowsPerPage\n      }\n    },\n    tableFilterFields: managedTableFilterFields,\n    isFetchingFilters: isFetchingFilters\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 469,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DmsSearch, \"lKuidhQ9PapmvdT16gF1qchy/ns=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useFlexiColumns, useForm, useFormActions, useFlexiColumns, useForm];\n});\n\n_c = DmsSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"DmsSearch\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/DmsSearch/DmsSearch.js"],"names":["React","useEffect","useState","PropTypes","useSelector","useDispatch","useForm","yupResolver","get","DmsSearchView","searchDmsDocuments","selectRefDataNewDocumentTypesByContextSource","resetDmsDocumentsSearch","viewDocumentsDownload","viewDocumentsMultiDownload","linkMultipleDmsDocuments","showModal","selectClaimsListFilterLoading","useFormActions","useFlexiColumns","constants","utils","config","MultiSelect","DmsSearch","propTypes","context","oneOf","DMS_CONTEXT_CASE","DMS_CONTEXT_CLAIM","DMS_CONTEXT_LOSS","DMS_CONTEXT_POLICY","DMS_CONTEXT_TASK","DMS_CONTEXT_PROCESSING_INSTRUCTION","DMS_CONTEXT_INSTRUCTION","DMS_CONTEXT_RFI","isRequired","source","oneOfType","string","number","referenceId","isAutoSearchScreen","bool","documentTypeKey","DMS_DOCUMENT_TYPE_SECTION_KEYS","defaultProps","type","policy","dispatch","dmsFormatter","getDocumentTypeFilterKeys","dmsSectionKey","sourceId","documentTypes","documentsList","state","isFetchingFilters","resetKey","setResetKey","searchExpanded","setSearchExpanded","isMultiSelect","setIsMultiSelect","selectedDocs","setSelectedDocs","searchFields","setSearchFields","DMS_SEARCH_TABLE_DEFAULT_ROWS","searchRowsTotalPreference","setSearchRowsTotalPreference","filtersPreference","setFiltersPreference","filterTypeCall","CLAIM_PROCESSING_REQ_TYPES","filter","bothTypeCall","both","contextReferenceObject","id","pageSize","requestType","defaultSearchCriteria","policyId","generic","isValidArray","Object","values","cols","visible","label","t","sort","direction","nowrap","menu","colsArray","columns","fields","name","defaultValue","value","placeholder","options","optionKey","optionLabel","muiComponentProps","fullWidth","helperText","muiPickerProps","views","format","clearable","DMS_DOCUMENT_TYPE_PAYMENT","group","ui","date","slashNumeric","actions","handler","Date","getTime","data","filterRequest","then","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","formProps","resolver","reset","cancel","submit","handleDownloadFile","file","handleLinkFile","isLinked","confirmDocumentlink","handleMultipleDownload","selectedDocIds","map","docId","documentId","length","handleMutiplelinking","resetToDefaultValues","docs","requestParams","d","sectionType","requestParamsLength","component","props","title","maxWidth","componentProps","confirmLabel","confirmMessage","count","submitHandler","response","status","API_RESPONSE_OK","handleCheckboxClick","doc","newlySelectedDocs","includes","selectedDoc","showCheckboxesClick","event","target","checked","handleSort","by","dir","columnProps","handleChangeRowsPerPage","rowsPerPage","handleChangePage","newPage","page","setValue","managedTableFilterFields","filters","hdriveFolder","content","documentTypeDescription","createdBy","resetFilter","keys","handleSearchFilter","search","resetNotificationFilters","files","searchValue","download","link","pagination","rowsTotal","totalElements","size","handlers"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { get } from 'lodash';\r\n\r\n// app\r\nimport { DmsSearchView } from './DmsSearch.view';\r\nimport {\r\n  searchDmsDocuments,\r\n  selectRefDataNewDocumentTypesByContextSource,\r\n  resetDmsDocumentsSearch,\r\n  viewDocumentsDownload,\r\n  viewDocumentsMultiDownload,\r\n  linkMultipleDmsDocuments,\r\n  showModal,\r\n  selectClaimsListFilterLoading,\r\n} from 'stores';\r\nimport { useFormActions, useFlexiColumns } from 'hooks';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport { MultiSelect } from 'components';\r\n\r\nDmsSearch.propTypes = {\r\n  context: PropTypes.oneOf([\r\n    constants.DMS_CONTEXT_CASE,\r\n    constants.DMS_CONTEXT_CLAIM,\r\n    constants.DMS_CONTEXT_LOSS,\r\n    constants.DMS_CONTEXT_POLICY,\r\n    constants.DMS_CONTEXT_TASK,\r\n    constants.DMS_CONTEXT_PROCESSING_INSTRUCTION,\r\n    constants.DMS_CONTEXT_INSTRUCTION,\r\n    constants.DMS_CONTEXT_RFI,\r\n  ]).isRequired,\r\n  source: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n  referenceId: PropTypes.string.isRequired,\r\n  isAutoSearchScreen: PropTypes.bool,\r\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\r\n};\r\n\r\nDmsSearch.defaultProps = {\r\n  documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy,\r\n};\r\n\r\nexport default function DmsSearch({ context, source, referenceId, isAutoSearchScreen, documentTypeKey }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const { dmsSectionKey, sourceId } = utils.dmsFormatter.getDocumentTypeFilterKeys(context, source, documentTypeKey);\r\n\r\n  // redux\r\n  const documentTypes = useSelector(selectRefDataNewDocumentTypesByContextSource(dmsSectionKey, sourceId));\r\n  const documentsList = useSelector((state) => get(state, 'dms.search')) || [];\r\n  const isFetchingFilters = useSelector(selectClaimsListFilterLoading);\r\n\r\n  // state\r\n  const [resetKey, setResetKey] = useState();\r\n  const [searchExpanded, setSearchExpanded] = useState(false);\r\n  const [isMultiSelect, setIsMultiSelect] = useState(false);\r\n  const [selectedDocs, setSelectedDocs] = useState([]);\r\n  const [searchFields, setSearchFields] = useState({});\r\n  const [searchRowsTotalPreference, setSearchRowsTotalPreference] = useState(constants.DMS_SEARCH_TABLE_DEFAULT_ROWS);\r\n  const [filtersPreference, setFiltersPreference] = useState([]);\r\n  const filterTypeCall = constants.CLAIM_PROCESSING_REQ_TYPES.filter;\r\n  const bothTypeCall = constants.CLAIM_PROCESSING_REQ_TYPES.both;\r\n\r\n  const contextReferenceObject = { id: referenceId };\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      searchDmsDocuments(context, contextReferenceObject, {\r\n        ...searchFields,\r\n        pageSize: 1,\r\n        requestType: filterTypeCall,\r\n      })\r\n    );\r\n    if (isAutoSearchScreen) {\r\n      const defaultSearchCriteria =\r\n        context === constants.DMS_CONTEXT_POLICY ? { policyId: referenceId, pageSize: searchRowsTotalPreference } : {};\r\n      if (utils.generic.isValidArray(Object.values(defaultSearchCriteria), true)) {\r\n        setSearchFields(defaultSearchCriteria);\r\n        dispatch(searchDmsDocuments(context, contextReferenceObject, defaultSearchCriteria));\r\n      }\r\n    }\r\n    dispatch(selectRefDataNewDocumentTypesByContextSource(context, source));\r\n    return () => {\r\n      dispatch(resetDmsDocumentsSearch());\r\n    };\r\n  }, [referenceId]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const cols = [\r\n    {\r\n      id: 'multiSelect',\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'fileName',\r\n      label: utils.string.t('dms.search.cols.fileName'),\r\n      sort: { type: 'numeric', direction: 'desc' },\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'hDriveFolders',\r\n      label: utils.string.t('dms.search.cols.hDriveFolders'),\r\n      sort: { type: 'lexical', direction: 'asc' },\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'reference',\r\n      label: utils.string.t('dms.search.cols.reference'),\r\n      sort: { type: 'lexical', direction: 'asc' },\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'documentTypeDescription',\r\n      label: utils.string.t('dms.search.cols.documentType'),\r\n      sort: { type: 'lexical', direction: 'asc' },\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'version',\r\n      label: utils.string.t('dms.search.cols.version'),\r\n      sort: { type: 'numeric', direction: 'asc' },\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    {\r\n      id: 'userDetails.fullName',\r\n      label: utils.string.t('dms.search.cols.uploadedBy'),\r\n      sort: { type: 'date', direction: 'asc' },\r\n      nowrap: true,\r\n      visible: true,\r\n    },\r\n    { id: 'actionButtons', menu: true, nowrap: true },\r\n  ];\r\n\r\n  const { columns: colsArray } = useFlexiColumns(cols);\r\n\r\n  const fields = [\r\n    {\r\n      name: 'policyId',\r\n      type: 'text',\r\n      label: utils.string.t('dms.search.fields.policyReference.label'),\r\n      defaultValue: isAutoSearchScreen ? referenceId : '',\r\n    },\r\n    {\r\n      name: 'claimId',\r\n      type: 'text',\r\n      label: utils.string.t('dms.search.fields.claimReference.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: 'lossId',\r\n      type: 'text',\r\n      label: utils.string.t('dms.search.fields.lossReference.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: 'insuredName',\r\n      type: 'text',\r\n      label: utils.string.t('dms.search.fields.insuredName.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: 'documentType',\r\n      type: 'autocompletemui',\r\n      label: utils.string.t('dms.search.fields.documentType.label'),\r\n      placeholder: utils.string.t('dms.search.fields.documentType.placeholder'),\r\n      value: null,\r\n      options: documentTypes,\r\n      optionKey: 'documentTypeID',\r\n      optionLabel: 'documentTypeDescription',\r\n    },\r\n    {\r\n      name: 'documentName',\r\n      type: 'text',\r\n      label: utils.string.t('dms.search.fields.documentName.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: 'year',\r\n      type: 'datepicker',\r\n      label: utils.string.t('dms.search.fields.inceptionYear.label'),\r\n      placeholder: utils.string.t('dms.search.fields.inceptionYear.placeholder'),\r\n      value: null,\r\n      muiComponentProps: {\r\n        fullWidth: true,\r\n        helperText: utils.string.t('dms.search.fields.inceptionYear.helperText'),\r\n      },\r\n      muiPickerProps: {\r\n        views: ['year'],\r\n        format: 'YYYY',\r\n        clearable: true,\r\n      },\r\n    },\r\n    {\r\n      name: 'division',\r\n      type: 'text',\r\n      label: utils.string.t('dms.search.fields.division.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: `${constants.DMS_DOCUMENT_TYPE_PAYMENT}_paymentDate`,\r\n      type: 'datepicker',\r\n      group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\r\n      label: utils.string.t('dms.search.fields.paymentDate.label'),\r\n      placeholder: utils.string.t('dms.search.fields.paymentDate.placeholder'),\r\n      value: null,\r\n      muiComponentProps: {\r\n        fullWidth: true,\r\n        helperText: utils.string.t('dms.search.fields.paymentDate.helperText'),\r\n      },\r\n      muiPickerProps: {\r\n        format: config.ui.format.date.slashNumeric,\r\n        clearable: true,\r\n      },\r\n    },\r\n    {\r\n      name: `${constants.DMS_DOCUMENT_TYPE_PAYMENT}_paymentReference`,\r\n      type: 'text',\r\n      group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\r\n      label: utils.string.t('dms.search.fields.paymentReference.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: `${constants.DMS_DOCUMENT_TYPE_PAYMENT}_lossPayee`,\r\n      type: 'text',\r\n      group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\r\n      label: utils.string.t('dms.search.fields.lossPayee.label'),\r\n      value: '',\r\n    },\r\n    {\r\n      name: `${constants.DMS_DOCUMENT_TYPE_PAYMENT}_amount`,\r\n      type: 'number',\r\n      group: constants.DMS_DOCUMENT_TYPE_PAYMENT,\r\n      label: utils.string.t('dms.search.fields.amount.label'),\r\n      value: '',\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'cancel',\r\n      label: utils.string.t('app.cancel'),\r\n      handler: () => {\r\n        setResetKey(new Date().getTime());\r\n      },\r\n    },\r\n    {\r\n      name: 'submit',\r\n      label: utils.string.t('dms.search.btn'),\r\n      handler: (data) => {\r\n        setSearchExpanded(true);\r\n        setSearchFields(data);\r\n\r\n        dispatch(\r\n          searchDmsDocuments(context, contextReferenceObject, {\r\n            ...data,\r\n            pageSize: searchRowsTotalPreference,\r\n            requestType: bothTypeCall,\r\n            filterRequest: filtersPreference,\r\n          })\r\n        ).then(() => {\r\n          setSearchExpanded(false);\r\n        });\r\n      },\r\n    },\r\n  ];\r\n\r\n  const defaultValues = utils.form.getInitialValues(fields);\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n\r\n  const formProps = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n\r\n  const { cancel, submit } = useFormActions(actions, formProps.reset);\r\n\r\n  const handleDownloadFile = (file) => {\r\n    dispatch(viewDocumentsDownload(file));\r\n  };\r\n\r\n  const handleLinkFile = (file) => {\r\n    if (file.isLinked) {\r\n      return;\r\n    }\r\n    confirmDocumentlink([file]);\r\n  };\r\n\r\n  const handleMultipleDownload = () => {\r\n    const selectedDocIds = selectedDocs?.map((docId) => docId.documentId);\r\n    if (selectedDocs?.length !== 1) {\r\n      dispatch(viewDocumentsMultiDownload(selectedDocIds));\r\n      return;\r\n    }\r\n    dispatch(viewDocumentsDownload(selectedDocs?.[0]));\r\n  };\r\n\r\n  const handleMutiplelinking = () => {\r\n    confirmDocumentlink(selectedDocs);\r\n  };\r\n\r\n  const resetToDefaultValues = () => {\r\n    setSelectedDocs([]);\r\n    setIsMultiSelect(false);\r\n  };\r\n\r\n  const confirmDocumentlink = (docs) => {\r\n    const requestParams = docs?.map((d) => {\r\n      return {\r\n        documentId: d.documentId,\r\n        referenceId: referenceId,\r\n        sectionType: context,\r\n      };\r\n    });\r\n    const requestParamsLength = requestParams?.length;\r\n\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('dms.search.linkDocument.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('dms.search.linkDocument.confirmLabel'),\r\n            confirmMessage:\r\n              requestParamsLength === 1\r\n                ? utils.string.t('dms.search.linkDocument.confirmMessage')\r\n                : utils.string.t('dms.search.linkDocument.confirmMessageForMulti', {\r\n                    count: requestParamsLength,\r\n                  }),\r\n            submitHandler: () =>\r\n              dispatch(linkMultipleDmsDocuments(requestParams)).then((response) => {\r\n                if (response?.status === constants.API_RESPONSE_OK) {\r\n                  resetToDefaultValues();\r\n                  if (utils.generic.isValidArray(Object.values(searchFields), true)) {\r\n                    dispatch(searchDmsDocuments(context, contextReferenceObject, { ...searchFields, pageSize: searchRowsTotalPreference }));\r\n                  }\r\n                }\r\n              }),\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCheckboxClick = (doc) => {\r\n    let newlySelectedDocs = [...selectedDocs, doc];\r\n    if (selectedDocs?.includes(doc)) {\r\n      newlySelectedDocs = newlySelectedDocs.filter((selectedDoc) => selectedDoc !== doc);\r\n    }\r\n    setSelectedDocs(newlySelectedDocs);\r\n  };\r\n\r\n  const showCheckboxesClick = (event) => {\r\n    setIsMultiSelect(event?.target?.checked);\r\n  };\r\n\r\n  const handleSort = (by, dir) => {\r\n    dispatch(\r\n      searchDmsDocuments(context, contextReferenceObject, {\r\n        ...searchFields,\r\n        by,\r\n        dir,\r\n        pageSize: searchRowsTotalPreference,\r\n        requestType: bothTypeCall,\r\n        filterRequest: filtersPreference,\r\n      })\r\n    ).then(() => {\r\n      setSearchExpanded(false);\r\n    });\r\n  };\r\n\r\n  const { columnProps } = useFlexiColumns(cols);\r\n\r\n  const handleChangeRowsPerPage = (rowsPerPage) => {\r\n    setSearchRowsTotalPreference(rowsPerPage);\r\n    dispatch(\r\n      searchDmsDocuments(context, contextReferenceObject, {\r\n        ...searchFields,\r\n        requestType: bothTypeCall,\r\n        pageSize: rowsPerPage,\r\n        filterRequest: filtersPreference,\r\n      })\r\n    ).then(() => {\r\n      setSearchExpanded(false);\r\n    });\r\n  };\r\n\r\n  const handleChangePage = (newPage) => {\r\n    dispatch(\r\n      searchDmsDocuments(context, contextReferenceObject, {\r\n        ...searchFields,\r\n        page: newPage,\r\n        pageSize: searchRowsTotalPreference,\r\n        filterRequest: filtersPreference,\r\n        requestType: bothTypeCall,\r\n      })\r\n    ).then(() => {\r\n      setSearchExpanded(false);\r\n    });\r\n  };\r\n\r\n  const { setValue } = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n\r\n  const managedTableFilterFields = [\r\n    {\r\n      id: 'hdriveFolder',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.list.tasksGridColumns.hDriveFolders'),\r\n      value: [],\r\n      options: documentsList?.filters?.hdriveFolder,\r\n      content: <MultiSelect id=\"hdriveFolder\" search options={documentsList?.filters?.hdriveFolder} />,\r\n    },\r\n    {\r\n      id: 'documentTypeDescription',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.list.tasksGridColumns.docType'),\r\n      value: [],\r\n      options: documentsList?.filters?.documentTypeDescription,\r\n      content: <MultiSelect id=\"documentTypeDescription\" search options={documentsList?.filters?.documentTypeDescription} />,\r\n    },\r\n    {\r\n      id: 'createdBy',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.list.tasksGridColumns.createdBy'),\r\n      value: [],\r\n      options: documentsList?.filters?.createdBy,\r\n      content: <MultiSelect id=\"createdBy\" search options={documentsList?.filters?.createdBy} />,\r\n    },\r\n  ];\r\n\r\n  const resetFilter = () => {\r\n    setValue('hdriveFolder', null);\r\n    setValue('documentTypeDescription', null);\r\n    setValue('createdBy', null);\r\n    setFiltersPreference([]);\r\n    if (!Object.keys(searchFields).length) return;\r\n    dispatch(searchDmsDocuments(context, contextReferenceObject, { ...searchFields }));\r\n  };\r\n\r\n  const handleSearchFilter = ({ search, filters }) => {\r\n    setFiltersPreference(filters);\r\n\r\n    dispatch(\r\n      searchDmsDocuments(context, contextReferenceObject, {\r\n        ...searchFields,\r\n        pageSize: searchRowsTotalPreference,\r\n        requestType: bothTypeCall,\r\n        filterRequest: filters,\r\n      })\r\n    );\r\n  };\r\n\r\n  // TODO\r\n  const resetNotificationFilters = () => {};\r\n\r\n  return (\r\n    <DmsSearchView\r\n      cols={colsArray}\r\n      columnPropsFunc={columnProps}\r\n      rows={documentsList?.files?.data?.searchValue || []}\r\n      fields={fields}\r\n      buttons={{ cancel, submit }}\r\n      formProps={formProps}\r\n      searchExpanded={searchExpanded}\r\n      handlers={{\r\n        download: handleDownloadFile,\r\n        link: handleLinkFile,\r\n        sort: handleSort,\r\n        handleCheckboxClick: handleCheckboxClick,\r\n        showCheckboxesClick: showCheckboxesClick,\r\n        handleMultipleDownload: handleMultipleDownload,\r\n        handleMutiplelinking: handleMutiplelinking,\r\n        resetFilter,\r\n        handleSearchFilter,\r\n        resetNotificationFilters,\r\n      }}\r\n      resetKey={resetKey}\r\n      isMultiSelect={isMultiSelect}\r\n      selectedDocs={selectedDocs}\r\n      pagination={{\r\n        page: documentsList?.files?.pagination?.page || 0,\r\n        rowsTotal: documentsList?.files?.pagination?.totalElements || 0,\r\n        rowsPerPage: documentsList?.files?.pagination?.size || searchRowsTotalPreference,\r\n        handlers: {\r\n          handleChangePage: handleChangePage,\r\n          handleChangeRowsPerPage: handleChangeRowsPerPage,\r\n        },\r\n      }}\r\n      tableFilterFields={managedTableFilterFields}\r\n      isFetchingFilters={isFetchingFilters}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}