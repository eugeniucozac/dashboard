{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ClaimsUnderwritingGroups\\\\ClaimsUnderwritingGroups.view.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types'; // app\n\nimport styles from './ClaimsUnderwritingGroups.styles';\nimport { selectClaimsInformation } from 'stores';\nimport { FormAutocompleteMui, FormCheckbox, FormContainer, FormLabel, Overflow, TableHead, TableCell } from 'components';\nimport * as utils from 'utils';\nimport config from 'config';\nimport * as constants from 'consts'; // mui\n\nimport { makeStyles, Typography, Table, TableBody, TableRow, Box, Grid } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nClaimsUnderwritingGroupsView.prototypes = {\n  isSectionEnabled: PropTypes.bool.isRequired,\n  claimFields: PropTypes.array.isRequired,\n  claimForm: PropTypes.object,\n  uwResetKey: PropTypes.number,\n  underWritingGroups: PropTypes.object.isRequired,\n  sortingUnderwritingGroups: PropTypes.func.isRequired,\n  facilityKeys: PropTypes.array.isRequired,\n  cols: PropTypes.array.isRequired,\n  sort: PropTypes.object.isRequired\n};\nexport function ClaimsUnderwritingGroupsView(_ref) {\n  _s();\n\n  var _claimForm$errors,\n      _this = this;\n\n  var isSectionEnabled = _ref.isSectionEnabled,\n      claimFields = _ref.claimFields,\n      claimForm = _ref.claimForm,\n      uwResetKey = _ref.uwResetKey,\n      underWritingGroups = _ref.underWritingGroups,\n      sortingUnderwritingGroups = _ref.sortingUnderwritingGroups,\n      facilityKeys = _ref.facilityKeys,\n      cols = _ref.cols,\n      sort = _ref.sort;\n  var classes = makeStyles(styles, {\n    name: 'ClaimsUnderwritingGroups'\n  })();\n  var dispatch = useDispatch();\n  var existingClaimUWGInfo = useSelector(selectClaimsInformation).policyUnderWritingGroupDtoList;\n  var sectionSelected = claimForm === null || claimForm === void 0 ? void 0 : claimForm.watch('ugSections');\n\n  var _useForm = useForm(),\n      control = _useForm.control,\n      register = _useForm.register,\n      watch = _useForm.watch,\n      setValue = _useForm.setValue;\n\n  var selectedGroups = (existingClaimUWGInfo === null || existingClaimUWGInfo === void 0 ? void 0 : existingClaimUWGInfo.map(function (item) {\n    return item === null || item === void 0 ? void 0 : item.groupRef;\n  })) || [];\n\n  var _useState = useState(!utils.generic.isInvalidOrEmptyArray(selectedGroups) ? selectedGroups : []),\n      _useState2 = _slicedToArray(_useState, 2),\n      groups = _useState2[0],\n      setGroups = _useState2[1];\n\n  var isunderWritingEmpty = utils.generic.isInvalidOrEmptyArray(underWritingGroups === null || underWritingGroups === void 0 ? void 0 : underWritingGroups.items);\n  var fields = utils.generic.isValidArray(underWritingGroups.items, true) ? underWritingGroups.items.map(function (field) {\n    return {\n      name: field.groupRef,\n      type: 'checkbox',\n      defaultValue: utils.generic.isValidArray(existingClaimUWGInfo, true) ? existingClaimUWGInfo.filter(function (item) {\n        return field.groupRef === item.groupRef;\n      }).length > 0 : sectionSelected === constants.CLAIM_POLICY_SECTION_DEFAULT ? true : field.selected\n    };\n  }) : [];\n\n  var checkedGroup = function checkedGroup(ug) {\n    ug.checked ? setGroups([].concat(_toConsumableArray(groups), [ug.id])) : setGroups(groups.filter(function (item) {\n      return item !== ug.id;\n    }));\n  };\n\n  useEffect(function () {\n    !utils.generic.isInvalidOrEmptyArray(groups) && dispatch(sortingUnderwritingGroups(groups));\n  }, [groups, isunderWritingEmpty]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if (sectionSelected) {\n      var _sectionSelected$id;\n\n      if ((sectionSelected === null || sectionSelected === void 0 ? void 0 : (_sectionSelected$id = sectionSelected.id) === null || _sectionSelected$id === void 0 ? void 0 : _sectionSelected$id.toString()) === constants.CLAIM_POLICY_SECTION_DEFAULT) {\n        var allFields = fields === null || fields === void 0 ? void 0 : fields.map(function (field) {\n          return field === null || field === void 0 ? void 0 : field.name;\n        });\n        setGroups(allFields);\n        allFields.forEach(function (grp) {\n          return setValue(grp, true);\n        });\n        dispatch(sortingUnderwritingGroups(allFields));\n      } else if (sectionSelected === null || sectionSelected === void 0 ? void 0 : sectionSelected.id) {\n        var findMatchingUgs = underWritingGroups.items.filter(function (eachUg) {\n          return (eachUg === null || eachUg === void 0 ? void 0 : eachUg.policySectionID) === Number(sectionSelected === null || sectionSelected === void 0 ? void 0 : sectionSelected.id);\n        }).map(function (eachUgData) {\n          return eachUgData === null || eachUgData === void 0 ? void 0 : eachUgData.groupRef;\n        });\n        setGroups([].concat(_toConsumableArray(findMatchingUgs), _toConsumableArray(groups)));\n        var selectedGrp = [].concat(_toConsumableArray(findMatchingUgs), _toConsumableArray(groups));\n        selectedGrp.forEach(function (grp) {\n          return setValue(grp, true);\n        });\n        dispatch(sortingUnderwritingGroups(selectedGrp));\n      }\n    }\n  }, [sectionSelected]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var resetUG = function resetUG() {\n    dispatch(sortingUnderwritingGroups([]));\n    setGroups([]);\n    fields.forEach(function (field) {\n      setValue(field.name, false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    \"data-testid\": \"claims-search-table\",\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      children: /*#__PURE__*/_jsxDEV(FormContainer, {\n        nestedClasses: {\n          root: classes.formContainer\n        },\n        children: /*#__PURE__*/_jsxDEV(Overflow, {\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                children: isSectionEnabled && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 2,\n                    className: classes.ugSelectLabel,\n                    children: /*#__PURE__*/_jsxDEV(FormLabel, {\n                      label: \"\".concat(utils.string.t('claims.underWritingGroups.section'), \" *\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 111,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    className: classes.ugSelectField,\n                    children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(claimFields, 'ugSections', claimForm === null || claimForm === void 0 ? void 0 : claimForm.control)), {}, {\n                      error: claimForm === null || claimForm === void 0 ? void 0 : (_claimForm$errors = claimForm.errors) === null || _claimForm$errors === void 0 ? void 0 : _claimForm$errors.ugSections,\n                      callback: function callback(e, data) {\n                        return !data && resetUG();\n                      }\n                    }), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 114,\n                      columnNumber: 25\n                    }, this)\n                  }, uwResetKey, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              \"data-testid\": \"claims-under-writing-groups-table\",\n              className: classes.tableWrap,\n              children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                columns: cols,\n                sorting: sort,\n                nestedClasses: {\n                  tableHead: classes.tableHead\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                \"data-testid\": \"claims-list\",\n                children: utils.generic.isValidArray(underWritingGroups.items, true) && underWritingGroups.items.map(function (row, i) {\n                  return /*#__PURE__*/_jsxDEV(TableRow, {\n                    \"data-testid\": \"claims-under-writing-groups-row-\".concat(row.facilityRef),\n                    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"row-col-\".concat(row.facilityRef),\n                      children: /*#__PURE__*/_jsxDEV(FormCheckbox, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, row.groupRef)), {}, {\n                        control: control,\n                        register: register,\n                        watch: watch,\n                        muiComponentProps: {\n                          onChange: function onChange(id, checked) {\n                            return checkedGroup({\n                              id: id,\n                              checked: checked\n                            });\n                          }\n                        }\n                      }), void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 133,\n                        columnNumber: 27\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.groupRef),\n                      children: row.groupRef\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.percentage),\n                      children: row.percentage\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.facility),\n                      children: row.facility\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.facilityRef),\n                      children: row.facilityRef\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.slipLeader),\n                      children: row.slipLeader\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 155,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.narrative),\n                      children: row.narrative\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.dateValidFrom),\n                      children: utils.string.t('format.date', {\n                        value: {\n                          date: row.dateValidFrom,\n                          format: config.ui.format.date.text\n                        }\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      compact: true,\n                      \"data-testid\": \"claims-under-writing-groups-col-\".concat(row.dateValidTo),\n                      children: utils.string.t('format.date', {\n                        value: {\n                          date: row.dateValidTo,\n                          format: config.ui.format.date.text\n                        }\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 166,\n                      columnNumber: 25\n                    }, _this)]\n                  }, facilityKeys[i], true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 23\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClaimsUnderwritingGroupsView, \"XtNTxzlpS+fJVz5HAjgx99D99iQ=\", false, function () {\n  return [useDispatch, useSelector, useForm];\n});\n\n_c = ClaimsUnderwritingGroupsView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimsUnderwritingGroupsView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ClaimsUnderwritingGroups/ClaimsUnderwritingGroups.view.js"],"names":["React","useEffect","useState","useForm","useDispatch","useSelector","PropTypes","styles","selectClaimsInformation","FormAutocompleteMui","FormCheckbox","FormContainer","FormLabel","Overflow","TableHead","TableCell","utils","config","constants","makeStyles","Typography","Table","TableBody","TableRow","Box","Grid","ClaimsUnderwritingGroupsView","prototypes","isSectionEnabled","bool","isRequired","claimFields","array","claimForm","object","uwResetKey","number","underWritingGroups","sortingUnderwritingGroups","func","facilityKeys","cols","sort","classes","name","dispatch","existingClaimUWGInfo","policyUnderWritingGroupDtoList","sectionSelected","watch","control","register","setValue","selectedGroups","map","item","groupRef","generic","isInvalidOrEmptyArray","groups","setGroups","isunderWritingEmpty","items","fields","isValidArray","field","type","defaultValue","filter","length","CLAIM_POLICY_SECTION_DEFAULT","selected","checkedGroup","ug","checked","id","toString","allFields","forEach","grp","findMatchingUgs","eachUg","policySectionID","Number","eachUgData","selectedGrp","resetUG","root","formContainer","ugSelectLabel","string","t","ugSelectField","form","getFieldProps","errors","ugSections","e","data","tableWrap","tableHead","row","i","facilityRef","onChange","percentage","facility","slipLeader","narrative","dateValidFrom","value","date","format","ui","text","dateValidTo"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// app\r\nimport styles from './ClaimsUnderwritingGroups.styles';\r\nimport { selectClaimsInformation } from 'stores';\r\nimport { FormAutocompleteMui, FormCheckbox, FormContainer, FormLabel, Overflow, TableHead, TableCell } from 'components';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport * as constants from 'consts';\r\n\r\n// mui\r\nimport { makeStyles, Typography, Table, TableBody, TableRow, Box, Grid } from '@material-ui/core';\r\n\r\nClaimsUnderwritingGroupsView.prototypes = {\r\n  isSectionEnabled: PropTypes.bool.isRequired,\r\n  claimFields: PropTypes.array.isRequired,\r\n  claimForm: PropTypes.object,\r\n  uwResetKey: PropTypes.number,\r\n  underWritingGroups: PropTypes.object.isRequired,\r\n  sortingUnderwritingGroups: PropTypes.func.isRequired,\r\n  facilityKeys: PropTypes.array.isRequired,\r\n  cols: PropTypes.array.isRequired,\r\n  sort: PropTypes.object.isRequired,\r\n};\r\nexport function ClaimsUnderwritingGroupsView({\r\n  isSectionEnabled,\r\n  claimFields,\r\n  claimForm,\r\n  uwResetKey,\r\n  underWritingGroups,\r\n  sortingUnderwritingGroups,\r\n  facilityKeys,\r\n  cols,\r\n  sort,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'ClaimsUnderwritingGroups' })();\r\n  const dispatch = useDispatch();\r\n  const existingClaimUWGInfo = useSelector(selectClaimsInformation).policyUnderWritingGroupDtoList;\r\n  const sectionSelected = claimForm?.watch('ugSections');\r\n  const { control, register, watch, setValue } = useForm();\r\n  const selectedGroups = existingClaimUWGInfo?.map((item) => item?.groupRef) || [];\r\n  const [groups, setGroups] = useState(!utils.generic.isInvalidOrEmptyArray(selectedGroups) ? selectedGroups : []);\r\n  const isunderWritingEmpty = utils.generic.isInvalidOrEmptyArray(underWritingGroups?.items);\r\n\r\n  const fields =\r\n    utils.generic.isValidArray(underWritingGroups.items, true) ?\r\n    underWritingGroups.items.map((field) => ({\r\n      name: field.groupRef,\r\n      type: 'checkbox',\r\n      defaultValue: utils.generic.isValidArray(existingClaimUWGInfo, true)\r\n        ? existingClaimUWGInfo.filter((item) => field.groupRef === item.groupRef).length > 0\r\n        : sectionSelected === constants.CLAIM_POLICY_SECTION_DEFAULT\r\n        ? true\r\n        : field.selected,\r\n    })) : [];\r\n\r\n  const checkedGroup = (ug) => {\r\n    ug.checked ? setGroups([...groups, ug.id]) : setGroups(groups.filter((item) => item !== ug.id));\r\n  };\r\n\r\n  useEffect(() => {\r\n    !utils.generic.isInvalidOrEmptyArray(groups) && dispatch(sortingUnderwritingGroups(groups));\r\n  }, [groups, isunderWritingEmpty]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (sectionSelected) {\r\n      if (sectionSelected?.id?.toString() === constants.CLAIM_POLICY_SECTION_DEFAULT) {\r\n        let allFields = fields?.map((field) => field?.name);\r\n        setGroups(allFields);\r\n        allFields.forEach((grp) => setValue(grp, true));\r\n        dispatch(sortingUnderwritingGroups(allFields)); \r\n      } else if (sectionSelected?.id) {\r\n        const findMatchingUgs = underWritingGroups.items\r\n          .filter((eachUg) => eachUg?.policySectionID === Number(sectionSelected?.id))\r\n          .map((eachUgData) => eachUgData?.groupRef);\r\n        setGroups([...findMatchingUgs, ...groups]);\r\n        let selectedGrp = [...findMatchingUgs, ...groups];\r\n        selectedGrp.forEach((grp) => setValue(grp, true));\r\n        dispatch(sortingUnderwritingGroups(selectedGrp)); \r\n      }\r\n    }\r\n  }, [sectionSelected]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const resetUG = () => {\r\n    dispatch(sortingUnderwritingGroups([]));\r\n    setGroups([]);\r\n    fields.forEach((field) => {\r\n      setValue(field.name, false);\r\n    }); \r\n  };\r\n\r\n  return (\r\n    <Box data-testid=\"claims-search-table\" className={classes.root}>\r\n      <Grid container>\r\n        <FormContainer nestedClasses={{ root: classes.formContainer }}>\r\n          <Overflow>\r\n            <Grid container>\r\n              {/* <Grid item xs={3}>\r\n                <Typography variant=\"body2\" className={classes.title}>\r\n                  {utils.string.t('claims.underWritingGroups.title')}\r\n                </Typography>\r\n              </Grid> */}\r\n              <Grid item>\r\n                <Grid container>\r\n                  {isSectionEnabled && (\r\n                    <>\r\n                      <Grid item xs={2} className={classes.ugSelectLabel}>\r\n                        <FormLabel label={`${utils.string.t('claims.underWritingGroups.section')} *`} />\r\n                      </Grid>\r\n                      <Grid item xs={6} className={classes.ugSelectField} key={uwResetKey}>\r\n                        <FormAutocompleteMui\r\n                          {...utils.form.getFieldProps(claimFields, 'ugSections', claimForm?.control)}\r\n                          error={claimForm?.errors?.ugSections}\r\n                          callback={(e, data) => !data && resetUG()}\r\n                        />\r\n                      </Grid>\r\n                    </>\r\n                  )}\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n              <Table data-testid=\"claims-under-writing-groups-table\" className={classes.tableWrap}>\r\n                <TableHead columns={cols} sorting={sort} nestedClasses={{ tableHead: classes.tableHead }} />\r\n                <TableBody data-testid=\"claims-list\">\r\n                  {utils.generic.isValidArray(underWritingGroups.items, true) &&\r\n                    underWritingGroups.items.map((row, i) => (\r\n                      <TableRow key={facilityKeys[i]} data-testid={`claims-under-writing-groups-row-${row.facilityRef}`}>\r\n                        <TableCell compact data-testid={`row-col-${row.facilityRef}`}>\r\n                          <FormCheckbox\r\n                            {...utils.form.getFieldProps(fields, row.groupRef)}\r\n                            control={control}\r\n                            register={register}\r\n                            watch={watch}\r\n                            muiComponentProps={{\r\n                              onChange: (id, checked) => checkedGroup({ id, checked }),\r\n                            }}\r\n                          />\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.groupRef}`}>\r\n                          {row.groupRef}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.percentage}`}>\r\n                          {row.percentage}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.facility}`}>\r\n                          {row.facility}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.facilityRef}`}>\r\n                          {row.facilityRef}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.slipLeader}`}>\r\n                          {row.slipLeader}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.narrative}`}>\r\n                          {row.narrative}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.dateValidFrom}`}>\r\n                          {utils.string.t('format.date', {\r\n                            value: { date: row.dateValidFrom, format: config.ui.format.date.text },\r\n                          })}\r\n                        </TableCell>\r\n                        <TableCell compact data-testid={`claims-under-writing-groups-col-${row.dateValidTo}`}>\r\n                          {utils.string.t('format.date', {\r\n                            value: { date: row.dateValidTo, format: config.ui.format.date.text },\r\n                          })}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n              </Table>\r\n            </Grid>\r\n          </Overflow>\r\n        </FormContainer>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}