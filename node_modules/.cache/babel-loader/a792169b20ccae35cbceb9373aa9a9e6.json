{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as utils from 'utils';\nimport { authLogout } from 'stores';\nimport get from 'lodash/get';\nexport var getRfiHistoryDocuments = function getRfiHistoryDocuments(params) {\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint,\n        claims = _getState.claims;\n\n    var defaultError = {\n      file: 'stores/claims.actions.getRfiHistoryDocuments'\n    };\n    var rfiHistoryList = get(claims, 'rfiHistory');\n    var apiParams = params;\n    return utils.api.post({\n      token: auth.accessToken,\n      endpoint: endpoint.dmsService,\n      path: \"dms/document/list?srcApplication=BOTH\",\n      data: apiParams\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleNewData(json);\n    }).then(function (data) {\n      if (data === null || data === void 0 ? void 0 : data.data) {\n        var _rfiHistoryDetails$da;\n\n        var docList = _toConsumableArray(data === null || data === void 0 ? void 0 : data.data);\n\n        var docMap = new Map();\n        docList === null || docList === void 0 ? void 0 : docList.forEach(function (doc) {\n          if (!docMap.has(parseInt(doc === null || doc === void 0 ? void 0 : doc.referenceId))) {\n            docMap.set(parseInt(doc === null || doc === void 0 ? void 0 : doc.referenceId), [doc]);\n          } else {\n            var list = docMap.get(parseInt(doc === null || doc === void 0 ? void 0 : doc.referenceId));\n            list.push(doc);\n            docMap.set(parseInt(doc === null || doc === void 0 ? void 0 : doc.referenceId), list);\n          }\n        });\n\n        var rfiHistoryDetails = _objectSpread({}, rfiHistoryList);\n\n        var rfiHistoryDocList = rfiHistoryDetails === null || rfiHistoryDetails === void 0 ? void 0 : (_rfiHistoryDetails$da = rfiHistoryDetails.data) === null || _rfiHistoryDetails$da === void 0 ? void 0 : _rfiHistoryDetails$da.map(function (item) {\n          var rfiHistory = _objectSpread({}, item);\n\n          var documentList = docMap.get(rfiHistory === null || rfiHistory === void 0 ? void 0 : rfiHistory.caseIncidentNotesID);\n          rfiHistory.documentList = documentList;\n          return rfiHistory;\n        });\n        dispatch(getRfiHistoryDocumentsSuccess(rfiHistoryDocList));\n      }\n\n      return data;\n    }).catch(function (error) {\n      dispatch(getRfiHistoryDocumentsFailure(error, defaultError));\n      utils.api.handleUnauthorized(error, dispatch, authLogout);\n      return error;\n    });\n  };\n};\nexport var getRfiHistoryDocumentsRequest = function getRfiHistoryDocumentsRequest(payload) {\n  return {\n    type: 'CLAIMS_GET_RFI_HISTORY_DOCUMENTS_REQUEST',\n    payload: payload\n  };\n};\nexport var getRfiHistoryDocumentsSuccess = function getRfiHistoryDocumentsSuccess(data) {\n  return {\n    type: 'CLAIMS_GET_RFI_HISTORY_DOCUMENTS_SUCCESS',\n    payload: data\n  };\n};\nexport var getRfiHistoryDocumentsFailure = function getRfiHistoryDocumentsFailure(error) {\n  return {\n    type: 'CLAIMS_GET_RFI_HISTORY_DOCUMENTS_FAILURE',\n    payload: error\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/claims/claims.actions.getRfiHistoryDocuments.js"],"names":["utils","authLogout","get","getRfiHistoryDocuments","params","dispatch","getState","auth","user","endpoint","config","vars","claims","defaultError","file","rfiHistoryList","apiParams","api","post","token","accessToken","dmsService","path","data","then","response","handleResponse","json","handleNewData","docList","docMap","Map","forEach","doc","has","parseInt","referenceId","set","list","push","rfiHistoryDetails","rfiHistoryDocList","map","item","rfiHistory","documentList","caseIncidentNotesID","getRfiHistoryDocumentsSuccess","catch","error","getRfiHistoryDocumentsFailure","handleUnauthorized","getRfiHistoryDocumentsRequest","payload","type"],"mappings":"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","sourcesContent":["import * as utils from 'utils';\r\nimport { authLogout } from 'stores';\r\nimport get from 'lodash/get';\r\n\r\nexport const getRfiHistoryDocuments = (params) => (dispatch, getState) => {\r\n  // prettier-ignore\r\n  const { user: { auth }, config: { vars: { endpoint } }, claims } = getState();\r\n\r\n  const defaultError = {\r\n    file: 'stores/claims.actions.getRfiHistoryDocuments',\r\n  };\r\n  const rfiHistoryList = get(claims, 'rfiHistory');\r\n\r\n  const apiParams = params;\r\n\r\n  return utils.api\r\n    .post({\r\n      token: auth.accessToken,\r\n      endpoint: endpoint.dmsService,\r\n      path: `dms/document/list?srcApplication=BOTH`,\r\n      data: apiParams,\r\n    })\r\n    .then((response) => utils.api.handleResponse(response))\r\n    .then((json) => utils.api.handleNewData(json))\r\n    .then((data) => {\r\n      if (data?.data) {\r\n        const docList = [...data?.data];\r\n        const docMap = new Map();\r\n        docList?.forEach((doc) => {\r\n          if (!docMap.has(parseInt(doc?.referenceId))) {\r\n            docMap.set(parseInt(doc?.referenceId), [doc]);\r\n          } else {\r\n            const list = docMap.get(parseInt(doc?.referenceId));\r\n            list.push(doc);\r\n            docMap.set(parseInt(doc?.referenceId), list);\r\n          }\r\n        });\r\n\r\n        const rfiHistoryDetails = { ...rfiHistoryList };\r\n        const rfiHistoryDocList = rfiHistoryDetails?.data?.map((item) => {\r\n          const rfiHistory = { ...item };\r\n          const documentList = docMap.get(rfiHistory?.caseIncidentNotesID);\r\n          rfiHistory.documentList = documentList;\r\n          return rfiHistory;\r\n        });\r\n        dispatch(getRfiHistoryDocumentsSuccess(rfiHistoryDocList));\r\n      }\r\n      return data;\r\n    })\r\n    .catch((error) => {\r\n      dispatch(getRfiHistoryDocumentsFailure(error, defaultError));\r\n      utils.api.handleUnauthorized(error, dispatch, authLogout);\r\n      return error;\r\n    });\r\n};\r\n\r\nexport const getRfiHistoryDocumentsRequest = (payload) => {\r\n  return {\r\n    type: 'CLAIMS_GET_RFI_HISTORY_DOCUMENTS_REQUEST',\r\n    payload,\r\n  };\r\n};\r\n\r\nexport const getRfiHistoryDocumentsSuccess = (data) => {\r\n  return {\r\n    type: 'CLAIMS_GET_RFI_HISTORY_DOCUMENTS_SUCCESS',\r\n    payload: data,\r\n  };\r\n};\r\n\r\nexport const getRfiHistoryDocumentsFailure = (error) => {\r\n  return {\r\n    type: 'CLAIMS_GET_RFI_HISTORY_DOCUMENTS_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}