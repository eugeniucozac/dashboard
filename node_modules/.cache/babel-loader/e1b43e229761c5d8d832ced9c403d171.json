{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\AdvancedSearch\\\\AdvancedSearch.view.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport has from 'lodash/has';\nimport kebabCase from 'lodash/kebabCase';\nimport escapeRegExp from 'lodash/escapeRegExp'; // app\n\nimport styles from './AdvancedSearch.styles';\nimport { Loader } from 'components';\nimport * as utils from 'utils';\nimport config from 'config'; // mui\n\nimport { makeStyles, Box, Divider, List, ListItem, Paper, Typography } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nAdvancedSearchView.propTypes = {\n  results: PropTypes.shape({\n    clients: PropTypes.object,\n    clientOfficeParents: PropTypes.object,\n    insureds: PropTypes.object,\n    markets: PropTypes.object,\n    policies: PropTypes.object,\n    departments: PropTypes.object\n  }),\n  query: PropTypes.string,\n  loading: PropTypes.bool,\n  error: PropTypes.string,\n  handlers: PropTypes.shape({\n    onClick: PropTypes.func\n  }),\n  nestedClasses: PropTypes.shape({\n    root: PropTypes.string\n  })\n};\nAdvancedSearchView.defaultProps = {\n  results: {}\n};\nexport function AdvancedSearchView(_ref) {\n  var _this = this;\n\n  var results = _ref.results,\n      query = _ref.query,\n      loading = _ref.loading,\n      error = _ref.error,\n      handlers = _ref.handlers,\n      nestedClasses = _ref.nestedClasses;\n  var classes = makeStyles(styles, {\n    name: 'AdvancedSearch'\n  })();\n\n  var renderGroup = function renderGroup(type) {\n    var category = results[type] || {};\n    var _category$total = category.total,\n        total = _category$total === void 0 ? 0 : _category$total,\n        items = category.items;\n    var itemsFiltered = utils.generic.isValidArray(items) ? items.filter(function (item) {\n      return item.id && item.name;\n    }) : [];\n    var length = itemsFiltered.length;\n    return /*#__PURE__*/_jsxDEV(Box, {\n      mb: 3,\n      className: classes.category,\n      \"data-testid\": \"advanced-search-group-\".concat(type),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.categoryTitle,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.categoryName,\n          variant: \"subtitle2\",\n          children: utils.string.t(\"advancedSearch.categories.\".concat(type))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, _this), total > length && renderSeeAllLink(type)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, _this), itemsFiltered.length > 0 && /*#__PURE__*/_jsxDEV(List, {\n        children: itemsFiltered.map(function (item) {\n          return renderItem(_objectSpread(_objectSpread({}, item), {}, {\n            type: type\n          }));\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 38\n      }, _this), itemsFiltered.length <= 0 && /*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.noResult,\n        children: utils.string.t('advancedSearch.noResult')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 39\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderItem = function renderItem(_ref2) {\n    var type = _ref2.type,\n        id = _ref2.id,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? '' : _ref2$name,\n        image = _ref2.image;\n    var text = query ? name.replace(new RegExp(escapeRegExp(query), 'gi'), function (match) {\n      return \"<strong>\".concat(match, \"</strong>\");\n    }) : name;\n    var slug = name ? \"/\".concat(kebabCase(name)) : '';\n    var link;\n\n    switch (type) {\n      // case 'clients':\n      //   link = '/clients';\n      //   break;\n      case 'clientOfficeParents':\n        link = \"\".concat(config.routes.client.item, \"/\").concat(id).concat(slug);\n        break;\n      // case 'insureds':\n      //   link = '/insureds';\n      //   break;\n      // case 'markets':\n      //   link = '/markets';\n      //   break;\n\n      case 'policies':\n        link = \"\".concat(config.routes.policy.root, \"/\").concat(name);\n        break;\n\n      case 'departments':\n        link = \"\".concat(config.routes.department.root, \"/\").concat(id, \"/\").concat(kebabCase(name));\n        break;\n\n      default:\n        break;\n    }\n\n    var linkProps = _objectSpread(_objectSpread({}, link && {\n      component: Link\n    }), link && {\n      to: link\n    });\n\n    return /*#__PURE__*/_jsxDEV(ListItem, _objectSpread(_objectSpread({\n      button: true\n    }, linkProps), {}, {\n      dense: true,\n      className: classes.link,\n      onClick: handlers.onClick,\n      children: [image && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"\".concat(config.assets, \"/logo/\").concat(image),\n        alt: \"logo \".concat(name),\n        className: classes.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 19\n      }, _this), /*#__PURE__*/_jsxDEV(Typography, {\n        className: classes.linkText,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          dangerouslySetInnerHTML: {\n            __html: text\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, _this)]\n    }), id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderSeeAllLink = function renderSeeAllLink(group) {\n    // temporarily remove the link until we have pages to handle \"see all\" links\n    // let link = '';\n    //\n    // switch (group) {\n    //   case 'clients':\n    //     link = '/clients';\n    //     break;\n    //   case 'clientOfficeParents':\n    //     link = '/clients';\n    //     break;\n    //   case 'insureds':\n    //     link = '/insureds';\n    //     break;\n    //   case 'markets':\n    //     link = '/markets';\n    //     break;\n    //   case 'policies':\n    //     link = '/policies';\n    //     break;\n    //   case 'departments':\n    //     link = '/departments';\n    //     break;\n    //   default:\n    //     link = '/blank';\n    //     break;\n    // }\n    return /*#__PURE__*/_jsxDEV(Typography, {\n      className: classes.categorySeeAll,\n      children: [\"(\", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: utils.string.t('app.seeAll')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, _this), \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: nestedClasses.root,\n    \"data-testid\": \"advanced-search\",\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 10,\n      className: classes.paper,\n      children: [!error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.container,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          className: classes.group,\n          \"data-testid\": \"advanced-search-box-left\",\n          children: [has(results, 'clientOfficeParents') && renderGroup('clientOfficeParents'), has(results, 'clients') && renderGroup('clients'), has(results, 'markets') && renderGroup('markets')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          className: classes.group,\n          \"data-testid\": \"advanced-search-box-right\",\n          children: [has(results, 'insureds') && renderGroup('insureds'), has(results, 'departments') && renderGroup('departments'), has(results, 'policies') && renderGroup('policies')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        width: 1,\n        alignItems: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.error,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            dangerouslySetInnerHTML: {\n              __html: error\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Loader, {\n        absolute: true,\n        visible: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n}\n_c = AdvancedSearchView;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdvancedSearchView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/AdvancedSearch/AdvancedSearch.view.js"],"names":["React","PropTypes","Link","has","kebabCase","escapeRegExp","styles","Loader","utils","config","makeStyles","Box","Divider","List","ListItem","Paper","Typography","AdvancedSearchView","propTypes","results","shape","clients","object","clientOfficeParents","insureds","markets","policies","departments","query","string","loading","bool","error","handlers","onClick","func","nestedClasses","root","defaultProps","classes","name","renderGroup","type","category","total","items","itemsFiltered","generic","isValidArray","filter","item","id","length","categoryTitle","categoryName","t","renderSeeAllLink","map","renderItem","noResult","image","text","replace","RegExp","match","slug","link","routes","client","policy","department","linkProps","component","to","assets","logo","linkText","__html","group","categorySeeAll","paper","container"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport has from 'lodash/has';\r\nimport kebabCase from 'lodash/kebabCase';\r\nimport escapeRegExp from 'lodash/escapeRegExp';\r\n\r\n// app\r\nimport styles from './AdvancedSearch.styles';\r\nimport { Loader } from 'components';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\n\r\n// mui\r\nimport { makeStyles, Box, Divider, List, ListItem, Paper, Typography } from '@material-ui/core';\r\n\r\nAdvancedSearchView.propTypes = {\r\n  results: PropTypes.shape({\r\n    clients: PropTypes.object,\r\n    clientOfficeParents: PropTypes.object,\r\n    insureds: PropTypes.object,\r\n    markets: PropTypes.object,\r\n    policies: PropTypes.object,\r\n    departments: PropTypes.object,\r\n  }),\r\n  query: PropTypes.string,\r\n  loading: PropTypes.bool,\r\n  error: PropTypes.string,\r\n  handlers: PropTypes.shape({\r\n    onClick: PropTypes.func,\r\n  }),\r\n  nestedClasses: PropTypes.shape({\r\n    root: PropTypes.string,\r\n  }),\r\n};\r\n\r\nAdvancedSearchView.defaultProps = {\r\n  results: {},\r\n};\r\n\r\nexport function AdvancedSearchView({ results, query, loading, error, handlers, nestedClasses }) {\r\n  const classes = makeStyles(styles, { name: 'AdvancedSearch' })();\r\n\r\n  const renderGroup = (type) => {\r\n    const category = results[type] || {};\r\n    const { total = 0, items } = category;\r\n    const itemsFiltered = utils.generic.isValidArray(items) ? items.filter((item) => item.id && item.name) : [];\r\n    const length = itemsFiltered.length;\r\n\r\n    return (\r\n      <Box mb={3} className={classes.category} data-testid={`advanced-search-group-${type}`}>\r\n        <div className={classes.categoryTitle}>\r\n          <Typography className={classes.categoryName} variant=\"subtitle2\">\r\n            {utils.string.t(`advancedSearch.categories.${type}`)}\r\n          </Typography>\r\n          {total > length && renderSeeAllLink(type)}\r\n        </div>\r\n        <Divider />\r\n        {itemsFiltered.length > 0 && <List>{itemsFiltered.map((item) => renderItem({ ...item, type }))}</List>}\r\n        {itemsFiltered.length <= 0 && <Typography className={classes.noResult}>{utils.string.t('advancedSearch.noResult')}</Typography>}\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const renderItem = ({ type, id, name = '', image }) => {\r\n    const text = query ? name.replace(new RegExp(escapeRegExp(query), 'gi'), (match) => `<strong>${match}</strong>`) : name;\r\n    const slug = name ? `/${kebabCase(name)}` : '';\r\n    let link;\r\n\r\n    switch (type) {\r\n      // case 'clients':\r\n      //   link = '/clients';\r\n      //   break;\r\n      case 'clientOfficeParents':\r\n        link = `${config.routes.client.item}/${id}${slug}`;\r\n        break;\r\n      // case 'insureds':\r\n      //   link = '/insureds';\r\n      //   break;\r\n      // case 'markets':\r\n      //   link = '/markets';\r\n      //   break;\r\n      case 'policies':\r\n        link = `${config.routes.policy.root}/${name}`;\r\n        break;\r\n      case 'departments':\r\n        link = `${config.routes.department.root}/${id}/${kebabCase(name)}`;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const linkProps = {\r\n      ...(link && { component: Link }),\r\n      ...(link && { to: link }),\r\n    };\r\n\r\n    return (\r\n      <ListItem key={id} button {...linkProps} dense className={classes.link} onClick={handlers.onClick}>\r\n        {image && <img src={`${config.assets}/logo/${image}`} alt={`logo ${name}`} className={classes.logo} />}\r\n        <Typography className={classes.linkText}>\r\n          <span dangerouslySetInnerHTML={{ __html: text }} />\r\n        </Typography>\r\n      </ListItem>\r\n    );\r\n  };\r\n\r\n  const renderSeeAllLink = (group) => {\r\n    // temporarily remove the link until we have pages to handle \"see all\" links\r\n\r\n    // let link = '';\r\n    //\r\n    // switch (group) {\r\n    //   case 'clients':\r\n    //     link = '/clients';\r\n    //     break;\r\n    //   case 'clientOfficeParents':\r\n    //     link = '/clients';\r\n    //     break;\r\n    //   case 'insureds':\r\n    //     link = '/insureds';\r\n    //     break;\r\n    //   case 'markets':\r\n    //     link = '/markets';\r\n    //     break;\r\n    //   case 'policies':\r\n    //     link = '/policies';\r\n    //     break;\r\n    //   case 'departments':\r\n    //     link = '/departments';\r\n    //     break;\r\n    //   default:\r\n    //     link = '/blank';\r\n    //     break;\r\n    // }\r\n\r\n    return (\r\n      <Typography className={classes.categorySeeAll}>\r\n        ({/*<Link to={link} className={classes.categorySeeAllLink}>*/}\r\n        <span>{utils.string.t('app.seeAll')}</span>\r\n        {/*</Link>*/})\r\n      </Typography>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={nestedClasses.root} data-testid=\"advanced-search\">\r\n      <Paper elevation={10} className={classes.paper}>\r\n        {!error && (\r\n          <div className={classes.container}>\r\n            <Box className={classes.group} data-testid=\"advanced-search-box-left\">\r\n              {has(results, 'clientOfficeParents') && renderGroup('clientOfficeParents')}\r\n              {has(results, 'clients') && renderGroup('clients')}\r\n              {has(results, 'markets') && renderGroup('markets')}\r\n            </Box>\r\n\r\n            <Box className={classes.group} data-testid=\"advanced-search-box-right\">\r\n              {has(results, 'insureds') && renderGroup('insureds')}\r\n              {has(results, 'departments') && renderGroup('departments')}\r\n              {has(results, 'policies') && renderGroup('policies')}\r\n            </Box>\r\n          </div>\r\n        )}\r\n\r\n        {error && (\r\n          <Box display=\"flex\" width={1} alignItems=\"center\">\r\n            <Typography className={classes.error}>\r\n              <span dangerouslySetInnerHTML={{ __html: error }} />\r\n            </Typography>\r\n          </Box>\r\n        )}\r\n\r\n        <Loader absolute visible={loading} />\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}