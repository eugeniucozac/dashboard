{"ast":null,"code":"var _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\OpportunityTooltip\\\\OpportunityTooltip.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport { firstBy } from 'thenby';\nimport get from 'lodash/get'; // app\n\nimport { OpportunityTooltipView } from './OpportunityTooltip.view';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nOpportunityTooltip.propTypes = {\n  tooltip: PropTypes.shape({\n    client: PropTypes.shape({\n      id: PropTypes.number,\n      name: PropTypes.string\n    }),\n    outputAddress: PropTypes.string,\n    premiumSnapshots: PropTypes.array\n  })\n};\nexport default function OpportunityTooltip(_ref) {\n  _s();\n\n  var tooltip = _ref.tooltip;\n  var departments = useSelector(function (state) {\n    return get(state, 'referenceData.departments');\n  }); // abort\n\n  if (!tooltip) return null;\n  var title = get(tooltip, 'client.name');\n  var address = tooltip.outputAddress;\n  var previousYear = utils.app.getCurrentYear() - 1;\n  var premiums = get(tooltip, 'premiumSnapshots') || [];\n  var premiumsFiltered = premiums.filter(function (premium) {\n    return premium.year === previousYear && premium.premium > 0;\n  }).map(function (premium) {\n    var dept = utils.referenceData.departments.getById(departments, premium.departmentId);\n    premium.departmentName = dept && dept.name;\n    return premium;\n  }).sort(firstBy(utils.sort.array('numeric', 'premium', 'desc')));\n  return /*#__PURE__*/_jsxDEV(OpportunityTooltipView, {\n    title: title,\n    address: address,\n    year: previousYear,\n    premiums: premiumsFiltered\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 10\n  }, this);\n}\n\n_s(OpportunityTooltip, \"XLnbrGVtYH+88CwwjZ5wIjCqKmw=\", false, function () {\n  return [useSelector];\n});\n\n_c = OpportunityTooltip;\n\nvar _c;\n\n$RefreshReg$(_c, \"OpportunityTooltip\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/OpportunityTooltip/OpportunityTooltip.js"],"names":["React","PropTypes","useSelector","firstBy","get","OpportunityTooltipView","utils","OpportunityTooltip","propTypes","tooltip","shape","client","id","number","name","string","outputAddress","premiumSnapshots","array","departments","state","title","address","previousYear","app","getCurrentYear","premiums","premiumsFiltered","filter","premium","year","map","dept","referenceData","getById","departmentId","departmentName","sort"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,OAAT,QAAwB,QAAxB;AACA,OAAOC,GAAP,MAAgB,YAAhB,C,CAEA;;AACA,SAASC,sBAAT,QAAuC,2BAAvC;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;;AAEAC,kBAAkB,CAACC,SAAnB,GAA+B;AAC7BC,EAAAA,OAAO,EAAER,SAAS,CAACS,KAAV,CAAgB;AACvBC,IAAAA,MAAM,EAAEV,SAAS,CAACS,KAAV,CAAgB;AACtBE,MAAAA,EAAE,EAAEX,SAAS,CAACY,MADQ;AAEtBC,MAAAA,IAAI,EAAEb,SAAS,CAACc;AAFM,KAAhB,CADe;AAKvBC,IAAAA,aAAa,EAAEf,SAAS,CAACc,MALF;AAMvBE,IAAAA,gBAAgB,EAAEhB,SAAS,CAACiB;AANL,GAAhB;AADoB,CAA/B;AAWA,eAAe,SAASX,kBAAT,OAAyC;AAAA;;AAAA,MAAXE,OAAW,QAAXA,OAAW;AACtD,MAAMU,WAAW,GAAGjB,WAAW,CAAC,UAACkB,KAAD;AAAA,WAAWhB,GAAG,CAACgB,KAAD,EAAQ,2BAAR,CAAd;AAAA,GAAD,CAA/B,CADsD,CAGtD;;AACA,MAAI,CAACX,OAAL,EAAc,OAAO,IAAP;AAEd,MAAMY,KAAK,GAAGjB,GAAG,CAACK,OAAD,EAAU,aAAV,CAAjB;AACA,MAAMa,OAAO,GAAGb,OAAO,CAACO,aAAxB;AACA,MAAMO,YAAY,GAAGjB,KAAK,CAACkB,GAAN,CAAUC,cAAV,KAA6B,CAAlD;AACA,MAAMC,QAAQ,GAAGtB,GAAG,CAACK,OAAD,EAAU,kBAAV,CAAH,IAAoC,EAArD;AAEA,MAAMkB,gBAAgB,GAAGD,QAAQ,CAC9BE,MADsB,CACf,UAACC,OAAD,EAAa;AACnB,WAAOA,OAAO,CAACC,IAAR,KAAiBP,YAAjB,IAAiCM,OAAO,CAACA,OAAR,GAAkB,CAA1D;AACD,GAHsB,EAItBE,GAJsB,CAIlB,UAACF,OAAD,EAAa;AAChB,QAAMG,IAAI,GAAG1B,KAAK,CAAC2B,aAAN,CAAoBd,WAApB,CAAgCe,OAAhC,CAAwCf,WAAxC,EAAqDU,OAAO,CAACM,YAA7D,CAAb;AACAN,IAAAA,OAAO,CAACO,cAAR,GAAyBJ,IAAI,IAAIA,IAAI,CAAClB,IAAtC;AACA,WAAOe,OAAP;AACD,GARsB,EAStBQ,IATsB,CASjBlC,OAAO,CAACG,KAAK,CAAC+B,IAAN,CAAWnB,KAAX,CAAiB,SAAjB,EAA4B,SAA5B,EAAuC,MAAvC,CAAD,CATU,CAAzB;AAWA,sBAAO,QAAC,sBAAD;AAAwB,IAAA,KAAK,EAAEG,KAA/B;AAAsC,IAAA,OAAO,EAAEC,OAA/C;AAAwD,IAAA,IAAI,EAAEC,YAA9D;AAA4E,IAAA,QAAQ,EAAEI;AAAtF;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;GAvBuBpB,kB;UACFL,W;;;KADEK,kB","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport { firstBy } from 'thenby';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { OpportunityTooltipView } from './OpportunityTooltip.view';\r\nimport * as utils from 'utils';\r\n\r\nOpportunityTooltip.propTypes = {\r\n  tooltip: PropTypes.shape({\r\n    client: PropTypes.shape({\r\n      id: PropTypes.number,\r\n      name: PropTypes.string,\r\n    }),\r\n    outputAddress: PropTypes.string,\r\n    premiumSnapshots: PropTypes.array,\r\n  }),\r\n};\r\n\r\nexport default function OpportunityTooltip({ tooltip }) {\r\n  const departments = useSelector((state) => get(state, 'referenceData.departments'));\r\n\r\n  // abort\r\n  if (!tooltip) return null;\r\n\r\n  const title = get(tooltip, 'client.name');\r\n  const address = tooltip.outputAddress;\r\n  const previousYear = utils.app.getCurrentYear() - 1;\r\n  const premiums = get(tooltip, 'premiumSnapshots') || [];\r\n\r\n  const premiumsFiltered = premiums\r\n    .filter((premium) => {\r\n      return premium.year === previousYear && premium.premium > 0;\r\n    })\r\n    .map((premium) => {\r\n      const dept = utils.referenceData.departments.getById(departments, premium.departmentId);\r\n      premium.departmentName = dept && dept.name;\r\n      return premium;\r\n    })\r\n    .sort(firstBy(utils.sort.array('numeric', 'premium', 'desc')));\r\n\r\n  return <OpportunityTooltipView title={title} address={address} year={previousYear} premiums={premiumsFiltered} />;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}