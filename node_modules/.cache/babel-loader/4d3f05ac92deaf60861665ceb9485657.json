{"ast":null,"code":"import \"core-js/modules/es.promise.finally\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { addLoader, authLogout, removeLoader, storeProcessingInstruction, updatePiFinancialCheckList, storeProcessingInstructionDocuments } from 'stores';\nimport * as utils from 'utils';\nimport get from 'lodash/get';\nexport var saveRiskReferences = function saveRiskReferences(instruction) {\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        user = _getState.user,\n        endpoint = _getState.config.vars.endpoint,\n        processingInstructions = _getState.processingInstructions;\n\n    var defaultError = {\n      file: 'stores/processingInstructions.actions.saveRiskReferences'\n    };\n    var documents = get(processingInstructions, 'documents');\n    dispatch(saveRiskReferencesRequest(instruction));\n    dispatch(addLoader('saveRiskReferences'));\n    return utils.api.put({\n      token: user.auth.accessToken,\n      endpoint: endpoint.ppService,\n      path: 'instruction/saveRiskReferences',\n      data: _objectSpread(_objectSpread({}, instruction), {}, {\n        createdBy: user.id,\n        updatedBy: user.id\n      })\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleNewData(json);\n    }).then(function (data) {\n      var _data$data, _data$data$financialC;\n\n      dispatch(saveRiskReferencesSuccess(data.data));\n      dispatch(storeProcessingInstruction(data.data));\n\n      var updatedDocuments = _objectSpread(_objectSpread({}, documents), {}, {\n        riskReferences: data.data.riskReferences\n      });\n\n      dispatch(storeProcessingInstructionDocuments(updatedDocuments));\n      dispatch(updatePiFinancialCheckList((_data$data = data.data) === null || _data$data === void 0 ? void 0 : (_data$data$financialC = _data$data.financialChecklistDetails) === null || _data$data$financialC === void 0 ? void 0 : _data$data$financialC.map(function (element, index) {\n        return _objectSpread(_objectSpread({}, element), {}, {\n          id: index\n        });\n      })));\n      return data.data;\n    })[\"catch\"](function (err) {\n      utils.api.handleError(err, _objectSpread(_objectSpread({}, defaultError), {}, {\n        message: 'API put error (saveRiskReferences)'\n      }));\n      dispatch(saveRiskReferencesFailure(err));\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      return err;\n    })[\"finally\"](function () {\n      dispatch(removeLoader('saveRiskReferences'));\n    });\n  };\n};\nexport var saveRiskReferencesRequest = function saveRiskReferencesRequest(params) {\n  return {\n    type: 'PROCESSING_INSTRUCTIONS_SAVE_RISK_REFS_REQUEST',\n    payload: params\n  };\n};\nexport var saveRiskReferencesSuccess = function saveRiskReferencesSuccess(json) {\n  return {\n    type: 'PROCESSING_INSTRUCTIONS_SAVE_RISK_REFS_SUCCESS',\n    payload: json\n  };\n};\nexport var saveRiskReferencesFailure = function saveRiskReferencesFailure(error) {\n  return {\n    type: 'PROCESSING_INSTRUCTIONS_SAVE_RISK_REFS_FAILURE',\n    payload: error\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/processingInstructions/processingInstructions.actions.saveRiskReferences.js"],"names":["addLoader","authLogout","removeLoader","storeProcessingInstruction","updatePiFinancialCheckList","storeProcessingInstructionDocuments","utils","get","saveRiskReferences","instruction","dispatch","getState","user","endpoint","config","vars","processingInstructions","defaultError","file","documents","saveRiskReferencesRequest","api","put","token","auth","accessToken","ppService","path","data","createdBy","id","updatedBy","then","response","handleResponse","json","handleNewData","saveRiskReferencesSuccess","updatedDocuments","riskReferences","financialChecklistDetails","map","element","index","err","handleError","message","saveRiskReferencesFailure","handleUnauthorized","params","type","payload","error"],"mappings":"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","sourcesContent":["import {\r\n  addLoader,\r\n  authLogout,\r\n  removeLoader,\r\n  storeProcessingInstruction,\r\n  updatePiFinancialCheckList,\r\n  storeProcessingInstructionDocuments,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport get from 'lodash/get';\r\n\r\nexport const saveRiskReferences = (instruction) => (dispatch, getState) => {\r\n  // prettier-ignore\r\n  const { user, config: { vars: { endpoint }}, processingInstructions} = getState();\r\n  const defaultError = {\r\n    file: 'stores/processingInstructions.actions.saveRiskReferences',\r\n  };\r\n\r\n  const documents = get(processingInstructions, 'documents');\r\n\r\n  dispatch(saveRiskReferencesRequest(instruction));\r\n  dispatch(addLoader('saveRiskReferences'));\r\n\r\n  return utils.api\r\n    .put({\r\n      token: user.auth.accessToken,\r\n      endpoint: endpoint.ppService,\r\n      path: 'instruction/saveRiskReferences',\r\n      data: {\r\n        ...instruction,\r\n        createdBy: user.id,\r\n        updatedBy: user.id,\r\n      },\r\n    })\r\n    .then((response) => utils.api.handleResponse(response))\r\n    .then((json) => utils.api.handleNewData(json))\r\n    .then((data) => {\r\n      dispatch(saveRiskReferencesSuccess(data.data));\r\n      dispatch(storeProcessingInstruction(data.data));\r\n      const updatedDocuments = {\r\n        ...documents,\r\n        riskReferences: data.data.riskReferences,\r\n      };\r\n\r\n      dispatch(storeProcessingInstructionDocuments(updatedDocuments));\r\n      dispatch(\r\n        updatePiFinancialCheckList(\r\n          data.data?.financialChecklistDetails?.map((element, index) => {\r\n            return {\r\n              ...element,\r\n              id: index,\r\n            };\r\n          })\r\n        )\r\n      );\r\n      return data.data;\r\n    })\r\n    .catch((err) => {\r\n      utils.api.handleError(err, { ...defaultError, message: 'API put error (saveRiskReferences)' });\r\n      dispatch(saveRiskReferencesFailure(err));\r\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n      return err;\r\n    })\r\n    .finally(() => {\r\n      dispatch(removeLoader('saveRiskReferences'));\r\n    });\r\n};\r\n\r\nexport const saveRiskReferencesRequest = (params) => {\r\n  return {\r\n    type: 'PROCESSING_INSTRUCTIONS_SAVE_RISK_REFS_REQUEST',\r\n    payload: params,\r\n  };\r\n};\r\n\r\nexport const saveRiskReferencesSuccess = (json) => {\r\n  return {\r\n    type: 'PROCESSING_INSTRUCTIONS_SAVE_RISK_REFS_SUCCESS',\r\n    payload: json,\r\n  };\r\n};\r\n\r\nexport const saveRiskReferencesFailure = (error) => {\r\n  return {\r\n    type: 'PROCESSING_INSTRUCTIONS_SAVE_RISK_REFS_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}