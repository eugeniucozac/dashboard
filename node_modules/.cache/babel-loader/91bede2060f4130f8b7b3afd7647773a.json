{"ast":null,"code":"// app\nimport { addLoader, authLogout, enqueueNotification, hideModal, removeLoader } from 'stores';\nimport * as utils from 'utils';\nexport var deleteDocument = function deleteDocument(id) {\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint;\n\n    dispatch(addLoader('deleteDocument'));\n    utils.api.delete({\n      token: auth.accessToken,\n      endpoint: endpoint.document,\n      path: \"api/document/\".concat(id)\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleData(json);\n    }).then(function () {\n      dispatch(deleteDocumentSuccess({\n        id: id\n      }));\n      dispatch(enqueueNotification('notification.document.deleteSuccess', 'success'));\n    }).catch(function (err) {\n      dispatch(enqueueNotification('notification.document.deleteFail', 'error'));\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      utils.api.handleError(err, {\n        file: 'stores/document.actions',\n        message: 'API multipart post error (document)'\n      });\n    }).finally(function () {\n      dispatch(removeLoader('deleteDocument'));\n      dispatch(hideModal());\n    });\n  };\n};\n\nvar deleteDocumentSuccess = function deleteDocumentSuccess(payload) {\n  return {\n    type: 'DELETE_DOCUMENT_SUCCESS',\n    payload: payload\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/document/document.actions.delete.js"],"names":["addLoader","authLogout","enqueueNotification","hideModal","removeLoader","utils","deleteDocument","id","dispatch","getState","auth","user","endpoint","config","vars","api","delete","token","accessToken","document","path","then","response","handleResponse","json","handleData","deleteDocumentSuccess","catch","err","handleUnauthorized","handleError","file","message","finally","payload","type"],"mappings":"AAAA;AACA,SAASA,SAAT,EAAoBC,UAApB,EAAgCC,mBAAhC,EAAqDC,SAArD,EAAgEC,YAAhE,QAAoF,QAApF;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD;AAAA,SAAQ,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC5D;AAD4D,oBAEHA,QAAQ,EAFL;AAAA,QAE5CC,IAF4C,aAEpDC,IAFoD,CAE5CD,IAF4C;AAAA,QAElBE,QAFkB,aAEpCC,MAFoC,CAE1BC,IAF0B,CAElBF,QAFkB;;AAI5DJ,IAAAA,QAAQ,CAACR,SAAS,CAAC,gBAAD,CAAV,CAAR;AAEAK,IAAAA,KAAK,CAACU,GAAN,CACGC,MADH,CACU;AACNC,MAAAA,KAAK,EAAEP,IAAI,CAACQ,WADN;AAENN,MAAAA,QAAQ,EAAEA,QAAQ,CAACO,QAFb;AAGNC,MAAAA,IAAI,yBAAkBb,EAAlB;AAHE,KADV,EAMGc,IANH,CAMQ,UAACC,QAAD;AAAA,aAAcjB,KAAK,CAACU,GAAN,CAAUQ,cAAV,CAAyBD,QAAzB,CAAd;AAAA,KANR,EAOGD,IAPH,CAOQ,UAACG,IAAD;AAAA,aAAUnB,KAAK,CAACU,GAAN,CAAUU,UAAV,CAAqBD,IAArB,CAAV;AAAA,KAPR,EAQGH,IARH,CAQQ,YAAM;AACVb,MAAAA,QAAQ,CAACkB,qBAAqB,CAAC;AAAEnB,QAAAA,EAAE,EAAFA;AAAF,OAAD,CAAtB,CAAR;AACAC,MAAAA,QAAQ,CAACN,mBAAmB,CAAC,qCAAD,EAAwC,SAAxC,CAApB,CAAR;AACD,KAXH,EAYGyB,KAZH,CAYS,UAACC,GAAD,EAAS;AACdpB,MAAAA,QAAQ,CAACN,mBAAmB,CAAC,kCAAD,EAAqC,OAArC,CAApB,CAAR;AACAG,MAAAA,KAAK,CAACU,GAAN,CAAUc,kBAAV,CAA6BD,GAA7B,EAAkCpB,QAAlC,EAA4CP,UAA5C;AACAI,MAAAA,KAAK,CAACU,GAAN,CAAUe,WAAV,CAAsBF,GAAtB,EAA2B;AACzBG,QAAAA,IAAI,EAAE,yBADmB;AAEzBC,QAAAA,OAAO,EAAE;AAFgB,OAA3B;AAID,KAnBH,EAoBGC,OApBH,CAoBW,YAAM;AACbzB,MAAAA,QAAQ,CAACJ,YAAY,CAAC,gBAAD,CAAb,CAAR;AACAI,MAAAA,QAAQ,CAACL,SAAS,EAAV,CAAR;AACD,KAvBH;AAwBD,GA9B6B;AAAA,CAAvB;;AAgCP,IAAMuB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACQ,OAAD,EAAa;AACzC,SAAO;AACLC,IAAAA,IAAI,EAAE,yBADD;AAELD,IAAAA,OAAO,EAAPA;AAFK,GAAP;AAID,CALD","sourcesContent":["// app\r\nimport { addLoader, authLogout, enqueueNotification, hideModal, removeLoader } from 'stores';\r\nimport * as utils from 'utils';\r\n\r\nexport const deleteDocument = (id) => (dispatch, getState) => {\r\n  // prettier-ignore\r\n  const { user: { auth }, config: { vars: { endpoint }}} = getState();\r\n\r\n  dispatch(addLoader('deleteDocument'));\r\n\r\n  utils.api\r\n    .delete({\r\n      token: auth.accessToken,\r\n      endpoint: endpoint.document,\r\n      path: `api/document/${id}`,\r\n    })\r\n    .then((response) => utils.api.handleResponse(response))\r\n    .then((json) => utils.api.handleData(json))\r\n    .then(() => {\r\n      dispatch(deleteDocumentSuccess({ id }));\r\n      dispatch(enqueueNotification('notification.document.deleteSuccess', 'success'));\r\n    })\r\n    .catch((err) => {\r\n      dispatch(enqueueNotification('notification.document.deleteFail', 'error'));\r\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n      utils.api.handleError(err, {\r\n        file: 'stores/document.actions',\r\n        message: 'API multipart post error (document)',\r\n      });\r\n    })\r\n    .finally(() => {\r\n      dispatch(removeLoader('deleteDocument'));\r\n      dispatch(hideModal());\r\n    });\r\n};\r\n\r\nconst deleteDocumentSuccess = (payload) => {\r\n  return {\r\n    type: 'DELETE_DOCUMENT_SUCCESS',\r\n    payload,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}