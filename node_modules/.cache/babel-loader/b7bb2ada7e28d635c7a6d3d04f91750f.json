{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\TripSummary\\\\TripSummary.view.js\";\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Formik, Field } from 'formik';\nimport * as Yup from 'yup';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty'; // app\n\nimport styles from './TripSummary.styles';\nimport { AvatarGroup, Button, Empty, FormDateFormik, FormTextFormik, Info, InlineEdit, MapBox, MapBoxTooltip, PopoverMenu, Ratio, SeparatedList, Summary, TableCell, TableHead, Translate, Warning } from 'components';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { ReactComponent as EarthPinFile } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/line-icon-earth-pin.svg\"; // mui\n\nimport { makeStyles, Box, Collapse, Fade, Table, TableBody, TableRow, Typography } from '@material-ui/core';\nimport TodayIcon from '@material-ui/icons/Today';\nimport EventIcon from '@material-ui/icons/Event';\nimport PeopleIcon from '@material-ui/icons/People';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nTripSummaryView.propTypes = {\n  trip: PropTypes.object,\n  visits: PropTypes.array,\n  map: PropTypes.object,\n  isExisting: PropTypes.bool,\n  inlineEditMode: PropTypes.bool,\n  inlineEditingFields: PropTypes.object,\n  mobile: PropTypes.bool,\n  tablet: PropTypes.bool,\n  desktop: PropTypes.bool,\n  wide: PropTypes.bool,\n  handleClickLead: PropTypes.func,\n  handleClickMarker: PropTypes.func,\n  handleEditVisit: PropTypes.func,\n  handleClickRemoveVisit: PropTypes.func,\n  handleEditBrokersClick: PropTypes.func,\n  handleClickEditTitle: PropTypes.func,\n  handleClickAwayEditTitle: PropTypes.func,\n  handleSaveTrip: PropTypes.func,\n  handleSubmit: PropTypes.func\n};\nexport function TripSummaryView(_ref) {\n  var _this = this;\n\n  var _ref$trip = _ref.trip,\n      trip = _ref$trip === void 0 ? {} : _ref$trip,\n      visits = _ref.visits,\n      map = _ref.map,\n      isExisting = _ref.isExisting,\n      inlineEditMode = _ref.inlineEditMode,\n      inlineEditingFields = _ref.inlineEditingFields,\n      mobile = _ref.mobile,\n      tablet = _ref.tablet,\n      desktop = _ref.desktop,\n      wide = _ref.wide,\n      handleClickLead = _ref.handleClickLead,\n      handleClickMarker = _ref.handleClickMarker,\n      handleEditVisit = _ref.handleEditVisit,\n      handleClickRemoveVisit = _ref.handleClickRemoveVisit,\n      handleEditBrokersClick = _ref.handleEditBrokersClick,\n      handleClickEditTitle = _ref.handleClickEditTitle,\n      handleClickAwayEditTitle = _ref.handleClickAwayEditTitle,\n      handleSaveTrip = _ref.handleSaveTrip,\n      handleSubmit = _ref.handleSubmit,\n      handleOnLoad = _ref.handleOnLoad,\n      handleOnChange = _ref.handleOnChange;\n  var classes = makeStyles(styles, {\n    name: 'TripSummary'\n  })();\n  var hasVisits = utils.generic.isValidArray(visits, true);\n  var showSummary = Boolean(trip.id || hasVisits);\n  var dateFrom = utils.trip.getDateFrom(visits);\n  var dateTo = utils.trip.getDateTo(visits);\n  var brokers = utils.trip.getBrokers(visits);\n  var cols = [{\n    id: 'visits',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"app.visit_plural\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 28\n    }, this)\n  }, {\n    id: 'date',\n    label: /*#__PURE__*/_jsxDEV(Translate, {\n      label: \"app.date\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 26\n    }, this),\n    align: 'center'\n  }, {\n    id: 'actions',\n    empty: true\n  }];\n  var formFields = [{\n    name: 'title',\n    type: 'text',\n    value: trip.title || '',\n    label: utils.string.t('form.title.label'),\n    placeholder: utils.string.t('opportunity.addTripTitle'),\n    validation: Yup.string().trim().required(utils.string.t('form.title.required'))\n  }].concat(_toConsumableArray(visits.map(function (visit) {\n    return {\n      id: visit.id,\n      name: \"date-\".concat(visit.id),\n      type: 'datepicker',\n      value: visit.visitingDate || null,\n      validation: Yup.mixed().required(),\n      plainText: true,\n      muiPickerProps: {\n        disableToolbar: true,\n        variant: 'inline',\n        format: config.ui.format.date.text\n      },\n      nestedClasses: {\n        input: visit.visitingDate ? classes.dateInput : classes.dateAddLink\n      }\n    };\n  })));\n\n  var customTooltipComponent = function customTooltipComponent(_ref2) {\n    var tooltip = _ref2.tooltip;\n    return /*#__PURE__*/_jsxDEV(MapBoxTooltip, {\n      title: get(tooltip, 'client.name'),\n      list: [{\n        icon: /*#__PURE__*/_jsxDEV(LocationOnIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 78\n        }, _this),\n        title: tooltip.outputAddress\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 12\n    }, _this);\n  };\n\n  var FormDateComponent = function FormDateComponent(_ref3) {\n    var field = _ref3.field,\n        form = _ref3.form,\n        rest = _objectWithoutProperties(_ref3, [\"field\", \"form\"]);\n\n    return /*#__PURE__*/_jsxDEV(FormDateFormik, _objectSpread(_objectSpread({}, rest), {}, {\n      name: field.name,\n      value: field.value,\n      handleUpdate: function handleUpdate(name, value) {\n        var date = value ? utils.string.t('format.date', {\n          value: {\n            date: value,\n            format: 'YYYY-MM-DD'\n          }\n        }) : null;\n        form.setFieldValue(name, date);\n        handleEditVisit({\n          id: rest.id,\n          visitingDate: date\n        }, inlineEditMode);\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Fade, {\n      in: showSummary,\n      children: /*#__PURE__*/_jsxDEV(Collapse, {\n        in: showSummary,\n        children: showSummary && /*#__PURE__*/_jsxDEV(Summary, {\n          commentsOptions: {\n            id: trip.id ? \"broker/trip/\".concat(trip.id) : null,\n            title: utils.string.t('trips.commentsTitle'),\n            placeholder: utils.string.t('trips.commentsPlaceholder')\n          },\n          testid: \"trip\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.wrapper,\n            children: [isExisting && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classnames(classes.info),\n              children: [/*#__PURE__*/_jsxDEV(Info, {\n                title: utils.string.t('app.leadUser'),\n                avatarIcon: PersonIcon,\n                content: /*#__PURE__*/_jsxDEV(AvatarGroup, {\n                  users: [trip.user],\n                  max: 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 32\n                }, this),\n                nestedClasses: {\n                  root: classnames(classes.boxes)\n                },\n                \"data-testid\": \"trip-summary-lead-user\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this), hasVisits && /*#__PURE__*/_jsxDEV(Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Info, {\n                  title: utils.string.t('app.broker', {\n                    count: brokers.length\n                  }),\n                  avatarIcon: PeopleIcon,\n                  content: /*#__PURE__*/_jsxDEV(AvatarGroup, {\n                    users: brokers,\n                    max: 3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 36\n                  }, this),\n                  nestedClasses: {\n                    root: classnames(classes.boxes)\n                  },\n                  \"data-testid\": \"trip-summary-brokers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Info, {\n                  title: utils.string.t('app.dateFrom'),\n                  avatarIcon: TodayIcon,\n                  description: /*#__PURE__*/_jsxDEV(Translate, {\n                    label: \"format.date\",\n                    options: {\n                      value: {\n                        date: dateFrom,\n                        format: config.ui.format.date.text,\n                        default: '-'\n                      }\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 29\n                  }, this),\n                  nestedClasses: {\n                    root: classnames(classes.boxes)\n                  },\n                  \"data-testid\": \"trip-summary-date-from\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Info, {\n                  title: utils.string.t('app.dateTo'),\n                  avatarIcon: EventIcon,\n                  description: /*#__PURE__*/_jsxDEV(Translate, {\n                    label: \"format.date\",\n                    options: {\n                      value: {\n                        date: dateFrom !== dateTo && dateTo,\n                        format: config.ui.format.date.text,\n                        default: '-'\n                      }\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 29\n                  }, this),\n                  nestedClasses: {\n                    root: classnames(classes.boxes)\n                  },\n                  \"data-testid\": \"trip-summary-date-to\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 19\n            }, this), isExisting && /*#__PURE__*/_jsxDEV(Box, {\n              mt: 4,\n              mb: 1,\n              \"data-testid\": \"trip-summary-map\",\n              children: /*#__PURE__*/_jsxDEV(Ratio, {\n                w: mobile ? 1.25 : tablet ? 1.5 : desktop ? 1.25 : wide ? 1.5 : 1.75,\n                h: 1,\n                children: /*#__PURE__*/_jsxDEV(MapBox, {\n                  id: \"visits-summary\",\n                  responsive: true,\n                  center: map.center,\n                  zoom: map.zoom,\n                  markerMaxZoom: map.maxZoom,\n                  allowSatelliteView: false,\n                  fitBounds: true,\n                  locations: visits,\n                  activeMarkers: map.activeMarkers,\n                  onClickMarker: handleClickMarker,\n                  onLoad: handleOnLoad,\n                  onChange: handleOnChange,\n                  tooltipComponent: customTooltipComponent\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Formik, {\n              // we use a key to keep track of how/when to force a form re-initialization\n              initialValues: utils.form.getInitialValues(formFields),\n              validationSchema: utils.form.getValidationSchema(formFields),\n              onSubmit: function onSubmit() {\n                handleSaveTrip(isExisting);\n              },\n              children: function children(_ref4) {\n                var values = _ref4.values,\n                    errors = _ref4.errors,\n                    dirty = _ref4.dirty,\n                    validateForm = _ref4.validateForm,\n                    submitForm = _ref4.submitForm,\n                    setFieldValue = _ref4.setFieldValue;\n                var isMissingDates = !isEmpty(errors) && Object.entries(errors).find(function (error) {\n                  return error[0].includes('date-');\n                });\n                var isMissingUsers = visits.find(function (visit) {\n                  return !visit.users || visit.users.length <= 0;\n                });\n                return /*#__PURE__*/_jsxDEV(Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: classes.titleWrapper,\n                    \"data-testid\": \"trip-summary-title\",\n                    children: [isExisting && inlineEditMode && /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h2\",\n                      className: classes.title,\n                      children: /*#__PURE__*/_jsxDEV(InlineEdit, {\n                        name: \"title\",\n                        value: values['title'],\n                        error: Boolean(errors['title']),\n                        editing: inlineEditingFields.title,\n                        multiline: true,\n                        onClick: handleClickEditTitle,\n                        onClickAway: handleClickAwayEditTitle(values['title'], errors['title'], dirty, validateForm, submitForm, setFieldValue, true)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 256,\n                        columnNumber: 31\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 255,\n                      columnNumber: 29\n                    }, _this), !(isExisting && inlineEditMode) && /*#__PURE__*/_jsxDEV(FormTextFormik, _objectSpread(_objectSpread({}, utils.form.getFieldProps(formFields, 'title')), {}, {\n                      muiComponentProps: {\n                        multiline: true,\n                        InputProps: {\n                          onBlur: function onBlur(event) {\n                            var prevValue = utils.form.getFieldProps(formFields, 'title').value;\n                            var newValue = values['title'];\n\n                            if (prevValue !== newValue) {\n                              handleClickAwayEditTitle(newValue, errors['title'], dirty, validateForm, submitForm, setFieldValue, false)(event);\n                            }\n                          }\n                        }\n                      }\n                    }), void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 277,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 25\n                  }, _this), hasVisits && /*#__PURE__*/_jsxDEV(Table, {\n                    size: \"small\",\n                    \"data-testid\": \"visits-table\",\n                    children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                      columns: cols\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 306,\n                      columnNumber: 29\n                    }, _this), /*#__PURE__*/_jsxDEV(TableBody, {\n                      \"data-testid\": \"visits-list\",\n                      children: visits.map(function (visit) {\n                        return /*#__PURE__*/_jsxDEV(TableRow, {\n                          hover: isExisting,\n                          onClick: isExisting ? handleClickLead(visit) : undefined,\n                          className: isExisting ? classnames(classes.row, _defineProperty({}, classes.rowSelected, map.activeMarkers.includes(visit.id))) : undefined,\n                          \"data-testid\": \"visit-row-\".concat(visit.id),\n                          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                            \"data-testid\": \"visit-cell-name-\".concat(visit.id),\n                            children: [get(visit, 'client.name'), utils.generic.isValidArray(visit.users, true) && /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: classes.users,\n                              children: /*#__PURE__*/_jsxDEV(SeparatedList, {\n                                list: visit.users.map(function (user) {\n                                  user.name = utils.user.fullname(user);\n                                  return user;\n                                })\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 329,\n                                columnNumber: 43\n                              }, _this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 328,\n                              columnNumber: 41\n                            }, _this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 324,\n                            columnNumber: 37\n                          }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            minimal: true,\n                            narrow: true,\n                            nowrap: true,\n                            center: true,\n                            onClick: function onClick(event) {\n                              return event.stopPropagation();\n                            } // prevent map flyTo animation when clicking on DatePicker\n                            ,\n                            \"data-testid\": \"visit-cell-date-\".concat(visit.id),\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: classes.dateWrapper,\n                              children: /*#__PURE__*/_jsxDEV(Field, _objectSpread(_objectSpread({}, utils.form.getFieldProps(formFields, \"date-\".concat(visit.id))), {}, {\n                                component: FormDateComponent\n                              }), void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 348,\n                                columnNumber: 41\n                              }, _this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 347,\n                              columnNumber: 39\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 339,\n                            columnNumber: 37\n                          }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            menu: true,\n                            \"data-testid\": \"visit-cell-menu-\".concat(visit.id),\n                            children: /*#__PURE__*/_jsxDEV(PopoverMenu, {\n                              id: \"visit-menu\",\n                              data: {\n                                visit: visit,\n                                inlineEditMode: inlineEditMode\n                              },\n                              items: [{\n                                id: 'add-remove-brokers',\n                                label: 'opportunity.addRemoveBrokers',\n                                callback: handleEditBrokersClick\n                              }, {\n                                id: 'remove',\n                                label: 'app.remove',\n                                callback: handleClickRemoveVisit\n                              }]\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 356,\n                              columnNumber: 39\n                            }, _this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 355,\n                            columnNumber: 37\n                          }, _this)]\n                        }, visit.id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 311,\n                          columnNumber: 35\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 308,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 27\n                  }, _this), !inlineEditMode && (isMissingDates || isMissingUsers) && /*#__PURE__*/_jsxDEV(Box, {\n                    mt: 2,\n                    children: [isMissingDates && /*#__PURE__*/_jsxDEV(Warning, {\n                      type: \"error\",\n                      text: utils.string.t('trips.validation.dates'),\n                      icon: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 385,\n                      columnNumber: 48\n                    }, _this), isMissingUsers && /*#__PURE__*/_jsxDEV(Warning, {\n                      type: \"error\",\n                      text: utils.string.t('trips.validation.users'),\n                      icon: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 48\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 27\n                  }, _this), !inlineEditMode && /*#__PURE__*/_jsxDEV(Box, {\n                    mt: 2,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      color: \"primary\",\n                      text: utils.string.t('opportunity.saveTrip'),\n                      onClick: handleSubmit(submitForm, validateForm)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 392,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 27\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 23\n                }, _this);\n              }\n            }, \"\".concat(trip.id, \"-\").concat(visits.map(function (visit) {\n              return visit.id;\n            }).join('-')), false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fade, {\n      timeout: 400,\n      in: !showSummary,\n      children: /*#__PURE__*/_jsxDEV(Collapse, {\n        timeout: 400,\n        in: !showSummary,\n        children: /*#__PURE__*/_jsxDEV(Empty, {\n          title: utils.string.t(isExisting ? 'trips.summaryHintTitle' : 'opportunity.summaryHintTitle'),\n          text: utils.string.t(isExisting ? 'trips.summaryHintText' : 'opportunity.summaryHintText'),\n          icon: /*#__PURE__*/_jsxDEV(EarthPinFile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 19\n          }, this),\n          padding: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n}\n_c = TripSummaryView;\n\nvar _c;\n\n$RefreshReg$(_c, \"TripSummaryView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/TripSummary/TripSummary.view.js"],"names":["React","Fragment","PropTypes","classnames","Formik","Field","Yup","get","isEmpty","styles","AvatarGroup","Button","Empty","FormDateFormik","FormTextFormik","Info","InlineEdit","MapBox","MapBoxTooltip","PopoverMenu","Ratio","SeparatedList","Summary","TableCell","TableHead","Translate","Warning","utils","config","makeStyles","Box","Collapse","Fade","Table","TableBody","TableRow","Typography","TodayIcon","EventIcon","PeopleIcon","PersonIcon","LocationOnIcon","TripSummaryView","propTypes","trip","object","visits","array","map","isExisting","bool","inlineEditMode","inlineEditingFields","mobile","tablet","desktop","wide","handleClickLead","func","handleClickMarker","handleEditVisit","handleClickRemoveVisit","handleEditBrokersClick","handleClickEditTitle","handleClickAwayEditTitle","handleSaveTrip","handleSubmit","handleOnLoad","handleOnChange","classes","name","hasVisits","generic","isValidArray","showSummary","Boolean","id","dateFrom","getDateFrom","dateTo","getDateTo","brokers","getBrokers","cols","label","align","empty","formFields","type","value","title","string","t","placeholder","validation","trim","required","visit","visitingDate","mixed","plainText","muiPickerProps","disableToolbar","variant","format","ui","date","text","nestedClasses","input","dateInput","dateAddLink","customTooltipComponent","tooltip","icon","outputAddress","FormDateComponent","field","form","rest","setFieldValue","wrapper","info","user","root","boxes","count","length","default","center","zoom","maxZoom","activeMarkers","getInitialValues","getValidationSchema","values","errors","dirty","validateForm","submitForm","isMissingDates","Object","entries","find","error","includes","isMissingUsers","users","titleWrapper","getFieldProps","multiline","InputProps","onBlur","event","prevValue","newValue","undefined","row","rowSelected","fullname","stopPropagation","dateWrapper","callback","join"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport { Formik, Field } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport get from 'lodash/get';\r\nimport isEmpty from 'lodash/isEmpty';\r\n\r\n// app\r\nimport styles from './TripSummary.styles';\r\nimport {\r\n  AvatarGroup,\r\n  Button,\r\n  Empty,\r\n  FormDateFormik,\r\n  FormTextFormik,\r\n  Info,\r\n  InlineEdit,\r\n  MapBox,\r\n  MapBoxTooltip,\r\n  PopoverMenu,\r\n  Ratio,\r\n  SeparatedList,\r\n  Summary,\r\n  TableCell,\r\n  TableHead,\r\n  Translate,\r\n  Warning,\r\n} from 'components';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport { ReactComponent as EarthPinFile } from '../../assets/svg/line-icon-earth-pin.svg';\r\n\r\n// mui\r\nimport { makeStyles, Box, Collapse, Fade, Table, TableBody, TableRow, Typography } from '@material-ui/core';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport EventIcon from '@material-ui/icons/Event';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\n\r\nTripSummaryView.propTypes = {\r\n  trip: PropTypes.object,\r\n  visits: PropTypes.array,\r\n  map: PropTypes.object,\r\n  isExisting: PropTypes.bool,\r\n  inlineEditMode: PropTypes.bool,\r\n  inlineEditingFields: PropTypes.object,\r\n  mobile: PropTypes.bool,\r\n  tablet: PropTypes.bool,\r\n  desktop: PropTypes.bool,\r\n  wide: PropTypes.bool,\r\n  handleClickLead: PropTypes.func,\r\n  handleClickMarker: PropTypes.func,\r\n  handleEditVisit: PropTypes.func,\r\n  handleClickRemoveVisit: PropTypes.func,\r\n  handleEditBrokersClick: PropTypes.func,\r\n  handleClickEditTitle: PropTypes.func,\r\n  handleClickAwayEditTitle: PropTypes.func,\r\n  handleSaveTrip: PropTypes.func,\r\n  handleSubmit: PropTypes.func,\r\n};\r\n\r\nexport function TripSummaryView({\r\n  trip = {},\r\n  visits,\r\n  map,\r\n  isExisting,\r\n  inlineEditMode,\r\n  inlineEditingFields,\r\n  mobile,\r\n  tablet,\r\n  desktop,\r\n  wide,\r\n  handleClickLead,\r\n  handleClickMarker,\r\n  handleEditVisit,\r\n  handleClickRemoveVisit,\r\n  handleEditBrokersClick,\r\n  handleClickEditTitle,\r\n  handleClickAwayEditTitle,\r\n  handleSaveTrip,\r\n  handleSubmit,\r\n  handleOnLoad,\r\n  handleOnChange,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'TripSummary' })();\r\n  const hasVisits = utils.generic.isValidArray(visits, true);\r\n  const showSummary = Boolean(trip.id || hasVisits);\r\n\r\n  const dateFrom = utils.trip.getDateFrom(visits);\r\n  const dateTo = utils.trip.getDateTo(visits);\r\n  const brokers = utils.trip.getBrokers(visits);\r\n\r\n  const cols = [\r\n    { id: 'visits', label: <Translate label=\"app.visit_plural\" /> },\r\n    { id: 'date', label: <Translate label=\"app.date\" />, align: 'center' },\r\n    { id: 'actions', empty: true },\r\n  ];\r\n\r\n  const formFields = [\r\n    {\r\n      name: 'title',\r\n      type: 'text',\r\n      value: trip.title || '',\r\n      label: utils.string.t('form.title.label'),\r\n      placeholder: utils.string.t('opportunity.addTripTitle'),\r\n      validation: Yup.string().trim().required(utils.string.t('form.title.required')),\r\n    },\r\n    ...visits.map((visit) => {\r\n      return {\r\n        id: visit.id,\r\n        name: `date-${visit.id}`,\r\n        type: 'datepicker',\r\n        value: visit.visitingDate || null,\r\n        validation: Yup.mixed().required(),\r\n        plainText: true,\r\n        muiPickerProps: {\r\n          disableToolbar: true,\r\n          variant: 'inline',\r\n          format: config.ui.format.date.text,\r\n        },\r\n        nestedClasses: {\r\n          input: visit.visitingDate ? classes.dateInput : classes.dateAddLink,\r\n        },\r\n      };\r\n    }),\r\n  ];\r\n\r\n  const customTooltipComponent = ({ tooltip }) => {\r\n    return <MapBoxTooltip title={get(tooltip, 'client.name')} list={[{ icon: <LocationOnIcon />, title: tooltip.outputAddress }]} />;\r\n  };\r\n\r\n  const FormDateComponent = ({ field, form, ...rest }) => {\r\n    return (\r\n      <FormDateFormik\r\n        {...rest}\r\n        name={field.name}\r\n        value={field.value}\r\n        handleUpdate={(name, value) => {\r\n          const date = value ? utils.string.t('format.date', { value: { date: value, format: 'YYYY-MM-DD' } }) : null;\r\n\r\n          form.setFieldValue(name, date);\r\n          handleEditVisit({ id: rest.id, visitingDate: date }, inlineEditMode);\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Fade in={showSummary}>\r\n        <Collapse in={showSummary}>\r\n          {showSummary && (\r\n            <Summary\r\n              commentsOptions={{\r\n                id: trip.id ? `broker/trip/${trip.id}` : null,\r\n                title: utils.string.t('trips.commentsTitle'),\r\n                placeholder: utils.string.t('trips.commentsPlaceholder'),\r\n              }}\r\n              testid=\"trip\"\r\n            >\r\n              <div className={classes.wrapper}>\r\n                {isExisting && (\r\n                  <div className={classnames(classes.info)}>\r\n                    <Info\r\n                      title={utils.string.t('app.leadUser')}\r\n                      avatarIcon={PersonIcon}\r\n                      content={<AvatarGroup users={[trip.user]} max={1} />}\r\n                      nestedClasses={{ root: classnames(classes.boxes) }}\r\n                      data-testid=\"trip-summary-lead-user\"\r\n                    />\r\n                    {hasVisits && (\r\n                      <Fragment>\r\n                        <Info\r\n                          title={utils.string.t('app.broker', { count: brokers.length })}\r\n                          avatarIcon={PeopleIcon}\r\n                          content={<AvatarGroup users={brokers} max={3} />}\r\n                          nestedClasses={{ root: classnames(classes.boxes) }}\r\n                          data-testid=\"trip-summary-brokers\"\r\n                        />\r\n                        <Info\r\n                          title={utils.string.t('app.dateFrom')}\r\n                          avatarIcon={TodayIcon}\r\n                          description={\r\n                            <Translate\r\n                              label=\"format.date\"\r\n                              options={{ value: { date: dateFrom, format: config.ui.format.date.text, default: '-' } }}\r\n                            />\r\n                          }\r\n                          nestedClasses={{ root: classnames(classes.boxes) }}\r\n                          data-testid=\"trip-summary-date-from\"\r\n                        />\r\n                        <Info\r\n                          title={utils.string.t('app.dateTo')}\r\n                          avatarIcon={EventIcon}\r\n                          description={\r\n                            <Translate\r\n                              label=\"format.date\"\r\n                              options={{\r\n                                value: {\r\n                                  date: dateFrom !== dateTo && dateTo,\r\n                                  format: config.ui.format.date.text,\r\n                                  default: '-',\r\n                                },\r\n                              }}\r\n                            />\r\n                          }\r\n                          nestedClasses={{ root: classnames(classes.boxes) }}\r\n                          data-testid=\"trip-summary-date-to\"\r\n                        />\r\n                      </Fragment>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {isExisting && (\r\n                  <Box mt={4} mb={1} data-testid=\"trip-summary-map\">\r\n                    <Ratio w={mobile ? 1.25 : tablet ? 1.5 : desktop ? 1.25 : wide ? 1.5 : 1.75} h={1}>\r\n                      <MapBox\r\n                        id=\"visits-summary\"\r\n                        responsive\r\n                        center={map.center}\r\n                        zoom={map.zoom}\r\n                        markerMaxZoom={map.maxZoom}\r\n                        allowSatelliteView={false}\r\n                        fitBounds\r\n                        locations={visits}\r\n                        activeMarkers={map.activeMarkers}\r\n                        onClickMarker={handleClickMarker}\r\n                        onLoad={handleOnLoad}\r\n                        onChange={handleOnChange}\r\n                        tooltipComponent={customTooltipComponent}\r\n                      />\r\n                    </Ratio>\r\n                  </Box>\r\n                )}\r\n\r\n                <Formik\r\n                  key={`${trip.id}-${visits.map((visit) => visit.id).join('-')}`} // we use a key to keep track of how/when to force a form re-initialization\r\n                  initialValues={utils.form.getInitialValues(formFields)}\r\n                  validationSchema={utils.form.getValidationSchema(formFields)}\r\n                  onSubmit={() => {\r\n                    handleSaveTrip(isExisting);\r\n                  }}\r\n                >\r\n                  {({ values, errors, dirty, validateForm, submitForm, setFieldValue }) => {\r\n                    const isMissingDates = !isEmpty(errors) && Object.entries(errors).find((error) => error[0].includes('date-'));\r\n                    const isMissingUsers = visits.find((visit) => !visit.users || visit.users.length <= 0);\r\n\r\n                    return (\r\n                      <Fragment>\r\n                        <div className={classes.titleWrapper} data-testid=\"trip-summary-title\">\r\n                          {isExisting && inlineEditMode && (\r\n                            <Typography variant=\"h2\" className={classes.title}>\r\n                              <InlineEdit\r\n                                name=\"title\"\r\n                                value={values['title']}\r\n                                error={Boolean(errors['title'])}\r\n                                editing={inlineEditingFields.title}\r\n                                multiline\r\n                                onClick={handleClickEditTitle}\r\n                                onClickAway={handleClickAwayEditTitle(\r\n                                  values['title'],\r\n                                  errors['title'],\r\n                                  dirty,\r\n                                  validateForm,\r\n                                  submitForm,\r\n                                  setFieldValue,\r\n                                  true\r\n                                )}\r\n                              />\r\n                            </Typography>\r\n                          )}\r\n\r\n                          {!(isExisting && inlineEditMode) && (\r\n                            <FormTextFormik\r\n                              {...utils.form.getFieldProps(formFields, 'title')}\r\n                              muiComponentProps={{\r\n                                multiline: true,\r\n                                InputProps: {\r\n                                  onBlur: (event) => {\r\n                                    const prevValue = utils.form.getFieldProps(formFields, 'title').value;\r\n                                    const newValue = values['title'];\r\n\r\n                                    if (prevValue !== newValue) {\r\n                                      handleClickAwayEditTitle(\r\n                                        newValue,\r\n                                        errors['title'],\r\n                                        dirty,\r\n                                        validateForm,\r\n                                        submitForm,\r\n                                        setFieldValue,\r\n                                        false\r\n                                      )(event);\r\n                                    }\r\n                                  },\r\n                                },\r\n                              }}\r\n                            />\r\n                          )}\r\n                        </div>\r\n\r\n                        {hasVisits && (\r\n                          <Table size=\"small\" data-testid=\"visits-table\">\r\n                            <TableHead columns={cols} />\r\n\r\n                            <TableBody data-testid=\"visits-list\">\r\n                              {visits.map((visit) => {\r\n                                return (\r\n                                  <TableRow\r\n                                    key={visit.id}\r\n                                    hover={isExisting}\r\n                                    onClick={isExisting ? handleClickLead(visit) : undefined}\r\n                                    className={\r\n                                      isExisting\r\n                                        ? classnames(classes.row, {\r\n                                            [classes.rowSelected]: map.activeMarkers.includes(visit.id),\r\n                                          })\r\n                                        : undefined\r\n                                    }\r\n                                    data-testid={`visit-row-${visit.id}`}\r\n                                  >\r\n                                    <TableCell data-testid={`visit-cell-name-${visit.id}`}>\r\n                                      {get(visit, 'client.name')}\r\n\r\n                                      {utils.generic.isValidArray(visit.users, true) && (\r\n                                        <div className={classes.users}>\r\n                                          <SeparatedList\r\n                                            list={visit.users.map((user) => {\r\n                                              user.name = utils.user.fullname(user);\r\n                                              return user;\r\n                                            })}\r\n                                          />\r\n                                        </div>\r\n                                      )}\r\n                                    </TableCell>\r\n\r\n                                    <TableCell\r\n                                      minimal\r\n                                      narrow\r\n                                      nowrap\r\n                                      center\r\n                                      onClick={(event) => event.stopPropagation()} // prevent map flyTo animation when clicking on DatePicker\r\n                                      data-testid={`visit-cell-date-${visit.id}`}\r\n                                    >\r\n                                      <div className={classes.dateWrapper}>\r\n                                        <Field\r\n                                          {...utils.form.getFieldProps(formFields, `date-${visit.id}`)}\r\n                                          component={FormDateComponent}\r\n                                        />\r\n                                      </div>\r\n                                    </TableCell>\r\n\r\n                                    <TableCell menu data-testid={`visit-cell-menu-${visit.id}`}>\r\n                                      <PopoverMenu\r\n                                        id=\"visit-menu\"\r\n                                        data={{\r\n                                          visit,\r\n                                          inlineEditMode,\r\n                                        }}\r\n                                        items={[\r\n                                          {\r\n                                            id: 'add-remove-brokers',\r\n                                            label: 'opportunity.addRemoveBrokers',\r\n                                            callback: handleEditBrokersClick,\r\n                                          },\r\n                                          {\r\n                                            id: 'remove',\r\n                                            label: 'app.remove',\r\n                                            callback: handleClickRemoveVisit,\r\n                                          },\r\n                                        ]}\r\n                                      />\r\n                                    </TableCell>\r\n                                  </TableRow>\r\n                                );\r\n                              })}\r\n                            </TableBody>\r\n                          </Table>\r\n                        )}\r\n\r\n                        {!inlineEditMode && (isMissingDates || isMissingUsers) && (\r\n                          <Box mt={2}>\r\n                            {isMissingDates && <Warning type=\"error\" text={utils.string.t('trips.validation.dates')} icon />}\r\n                            {isMissingUsers && <Warning type=\"error\" text={utils.string.t('trips.validation.users')} icon />}\r\n                          </Box>\r\n                        )}\r\n\r\n                        {!inlineEditMode && (\r\n                          <Box mt={2}>\r\n                            <Button\r\n                              color=\"primary\"\r\n                              text={utils.string.t('opportunity.saveTrip')}\r\n                              onClick={handleSubmit(submitForm, validateForm)}\r\n                            />\r\n                          </Box>\r\n                        )}\r\n                      </Fragment>\r\n                    );\r\n                  }}\r\n                </Formik>\r\n              </div>\r\n            </Summary>\r\n          )}\r\n        </Collapse>\r\n      </Fade>\r\n\r\n      <Fade timeout={400} in={!showSummary}>\r\n        <Collapse timeout={400} in={!showSummary}>\r\n          <Empty\r\n            title={utils.string.t(isExisting ? 'trips.summaryHintTitle' : 'opportunity.summaryHintTitle')}\r\n            text={utils.string.t(isExisting ? 'trips.summaryHintText' : 'opportunity.summaryHintText')}\r\n            icon={<EarthPinFile />}\r\n            padding\r\n          />\r\n        </Collapse>\r\n      </Fade>\r\n    </Fragment>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}