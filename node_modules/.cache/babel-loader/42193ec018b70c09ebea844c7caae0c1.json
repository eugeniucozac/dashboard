{"ast":null,"code":"import _regeneratorRuntime from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\RiskQuotes\\\\QuoteCard.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport get from 'lodash/get';\nimport isNumber from 'lodash/isNumber'; // app\n\nimport styles from './QuoteCard.style';\nimport { RiskIssues } from 'modules';\nimport { Avatar, Button, FormGrid, Translate, Restricted, Status } from 'components';\nimport { putQuoteRates } from 'stores';\nimport CommissionSlider from './CommissionSlider';\nimport { QUOTE_PREMIUM_PRECISION, RISK_QUOTE_STATUS_DRAFT, RISK_QUOTE_STATUS_QUOTED, RISK_QUOTE_STATUS_REFERRED, RISK_QUOTE_STATUS_BLOCKED, RISK_QUOTE_STATUS_REJECTED, ROLE_BROKER, ROLE_UNDERWRITER, ROLE_COBROKER } from 'consts';\nimport * as utils from 'utils'; // mui\n\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { makeStyles, Box, Card, CardHeader, CardActions, CardContent, Drawer, Typography, Popover } from '@material-ui/core';\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CheckIcon from '@material-ui/icons/Check';\nimport BlockIcon from '@material-ui/icons/Block';\nimport DoneIcon from '@material-ui/icons/Done';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: 'auto',\n      width: '100%',\n      minHeight: 262\n    },\n    title: {\n      color: 'black!important'\n    },\n    value: {\n      color: 'black!important',\n      fontWeight: 600\n    }\n  };\n});\n\nvar QuoteLine = function QuoteLine(_ref) {\n  _s();\n\n  var title = _ref.title,\n      value = _ref.value;\n  var classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FormGrid, {\n      item: true,\n      xs: 5,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        className: classes.title,\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(FormGrid, {\n      item: true,\n      xs: 7,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        className: classes.value,\n        children: value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(QuoteLine, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c = QuoteLine;\n\nvar QuoteCard = function QuoteCard(_ref2) {\n  _s2();\n\n  var _quoteState$commissio, _quoteState$commissio2, _quoteState$facility, _quoteState$facility$, _quoteState$facility2, _quoteState$facility3, _quoteState$commissio3, _quoteState$commissio4, _quoteState$facility4, _issuesData$issues, _issuesData$quoteIssu;\n\n  var quote = _ref2.quote,\n      riskInsuredId = _ref2.riskInsuredId,\n      riskStatus = _ref2.riskStatus,\n      parties = _ref2.parties,\n      issuesData = _ref2.issuesData,\n      handlePatchRiskQuote = _ref2.handlePatchRiskQuote,\n      handleDeclineRiskQuote = _ref2.handleDeclineRiskQuote,\n      handleAcceptRiskQuote = _ref2.handleAcceptRiskQuote,\n      handleBindRiskQuote = _ref2.handleBindRiskQuote,\n      handleDownloadQuote = _ref2.handleDownloadQuote,\n      handleRiskRefresh = _ref2.handleRiskRefresh,\n      handleRequestToBind = _ref2.handleRequestToBind,\n      handlePreBind = _ref2.handlePreBind,\n      handleRequestDismissIssues = _ref2.handleRequestDismissIssues;\n  var classes = makeStyles(styles, {\n    name: 'QuoteCard'\n  })();\n  var dispatch = useDispatch();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      height = _useState2[0],\n      setHeight = _useState2[1];\n\n  var ref = useRef(null);\n\n  var _useState3 = useState(quote),\n      _useState4 = _slicedToArray(_useState3, 2),\n      quoteState = _useState4[0],\n      setQuoteState = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      anchorEl = _useState8[0],\n      setAnchorEl = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      drawerOpen = _useState10[0],\n      setDrawerOpen = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      commissionIsChanged = _useState12[0],\n      setCommissionIsChanged = _useState12[1];\n\n  var _useState13 = useState({\n    commissionRatioClient: quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio = quoteState.commission) === null || _quoteState$commissio === void 0 ? void 0 : _quoteState$commissio.clientCommissionRatio,\n    netDownClientCommission: quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio2 = quoteState.commission) === null || _quoteState$commissio2 === void 0 ? void 0 : _quoteState$commissio2.clientCommissionRate\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      commission = _useState14[0],\n      setCommission = _useState14[1];\n\n  var _useState15 = useState(new Date().getTime()),\n      _useState16 = _slicedToArray(_useState15, 2),\n      uuid = _useState16[0],\n      setUuid = _useState16[1];\n\n  var _useState17 = useState(quoteState === null || quoteState === void 0 ? void 0 : quoteState.premium),\n      _useState18 = _slicedToArray(_useState17, 2),\n      quotePremium = _useState18[0],\n      setQuotePremium = _useState18[1];\n\n  var createdAt = utils.string.t('format.date', {\n    value: {\n      date: quoteState.createdAt,\n      format: 'lll'\n    }\n  });\n  var carrierName = get(quoteState, 'carrierName');\n  var quoteStatus = quoteState.response ? quoteState.response.responseStatus : quoteState.status;\n  var quoteStatusString = quoteStatus ? utils.string.t(\"status.\".concat(quoteStatus.toLowerCase())) : '-';\n  quoteStatusString = quoteStatusString === 'Quoted' ? utils.string.t('status.quote') : quoteStatusString;\n  var isQuoteBlocked = quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\n  var isBlocked = riskStatus === RISK_QUOTE_STATUS_BLOCKED || quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\n  var isExpired = quoteState.validUntil && moment(quoteState.validUntil).isBefore(new Date());\n  var isQuoted = quoteStatus === RISK_QUOTE_STATUS_QUOTED;\n  var isDraftOrReferred = [RISK_QUOTE_STATUS_DRAFT, RISK_QUOTE_STATUS_REFERRED].includes(quoteStatus);\n  var isReferred = quoteStatus === RISK_QUOTE_STATUS_REFERRED;\n  var isRejected = quoteStatus === RISK_QUOTE_STATUS_REJECTED;\n  var hasTemplate = quoteState.hasTemplate;\n  var defaultClientCommissionRate = quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$facility = quoteState.facility) === null || _quoteState$facility === void 0 ? void 0 : (_quoteState$facility$ = _quoteState$facility.commissionRates) === null || _quoteState$facility$ === void 0 ? void 0 : _quoteState$facility$.clientCommissionRate;\n  var defaultBrokerCommissionRate = quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$facility2 = quoteState.facility) === null || _quoteState$facility2 === void 0 ? void 0 : (_quoteState$facility3 = _quoteState$facility2.commissionRates) === null || _quoteState$facility3 === void 0 ? void 0 : _quoteState$facility3.brokerCommissionRate;\n  var clientCommissionRatio = (quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio3 = quoteState.commission) === null || _quoteState$commissio3 === void 0 ? void 0 : _quoteState$commissio3.clientCommissionRatio) || defaultClientCommissionRate;\n  var clientCommissionRate = (quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio4 = quoteState.commission) === null || _quoteState$commissio4 === void 0 ? void 0 : _quoteState$commissio4.clientCommissionRate) || defaultClientCommissionRate;\n  var isQuoteCommission = isNumber(clientCommissionRate) && isNumber(clientCommissionRatio);\n  var isFacilityCommission = isNumber(defaultClientCommissionRate) && isNumber(defaultBrokerCommissionRate);\n  var grossPremium = quoteState === null || quoteState === void 0 ? void 0 : quoteState.grossPremium;\n  var premiumValue = \"\".concat((quoteState === null || quoteState === void 0 ? void 0 : quoteState.currency) ? utils.string.t(quoteState.currency) : '', \" \").concat(utils.string.t('format.number', {\n    value: {\n      number: quotePremium,\n      \"default\": '-'\n    }\n  }));\n  var canCurrentUserBind = quoteState === null || quoteState === void 0 ? void 0 : quoteState.canCurrentUserBind;\n  var requestedToBind = quoteState === null || quoteState === void 0 ? void 0 : quoteState.requestedToBind;\n  var displayPreBind = quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$facility4 = quoteState.facility) === null || _quoteState$facility4 === void 0 ? void 0 : _quoteState$facility4.preBind;\n  var canCurrentUserDismissIssues = quoteState === null || quoteState === void 0 ? void 0 : quoteState.canCurrentUserDismissIssues;\n  var requestedToDismissIssues = quoteState === null || quoteState === void 0 ? void 0 : quoteState.requestedToDismissIssues;\n  useEffect(function () {\n    setHeight(ref.current.clientHeight);\n  }, []);\n  useEffect(function () {\n    setQuoteState(quote);\n  }, [quote]);\n\n  var handleUpdateCommission = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var rates, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              rates = {\n                clientCommissionRatio: commission.commissionRatioClient,\n                clientCommissionRate: commission.netDownClientCommission,\n                scale: QUOTE_PREMIUM_PRECISION\n              };\n              _context.next = 4;\n              return dispatch(putQuoteRates(rates, quoteState.id));\n\n            case 4:\n              result = _context.sent;\n\n              if (result) {\n                setQuoteState(result);\n              }\n\n              setIsLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleUpdateCommission() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleCommissionChange = function handleCommissionChange(newCommission, isChanged) {\n    setCommissionIsChanged(isChanged);\n    setCommission(newCommission);\n    var commissionRatioClient = isNumber(newCommission === null || newCommission === void 0 ? void 0 : newCommission.commissionRatioClient) ? newCommission === null || newCommission === void 0 ? void 0 : newCommission.commissionRatioClient : defaultClientCommissionRate;\n    var commissionRate = commissionRatioClient === newCommission.netDownClientCommission ? 1 : (1 - commissionRatioClient * 0.01) / (1 - newCommission.netDownClientCommission * 0.01);\n    var newPremium = parseFloat((grossPremium * commissionRate).toFixed(QUOTE_PREMIUM_PRECISION));\n    setQuotePremium(Math.ceil(newPremium));\n  };\n\n  var resetCommission = function resetCommission() {\n    setUuid(new Date().getTime());\n    setCommissionIsChanged(false);\n    setQuotePremium(quoteState.premium);\n  };\n\n  var handleIssuesPopoverClick = function handleIssuesPopoverClick(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClosePopover = function handleClosePopover() {\n    setAnchorEl(null);\n  };\n\n  var toggleDrawer = function toggleDrawer(value) {\n    setDrawerOpen(value);\n  };\n\n  var open = Boolean(anchorEl);\n  var id = open ? 'simple-popover' : undefined;\n\n  var subheader = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: requestedToBind && isQuoted ? /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Status, {\n        size: \"xs\",\n        text: /*#__PURE__*/_jsxDEV(Translate, {\n          label: utils.string.t('risks.requestToBindStatus')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 19\n        }, _this),\n        status: \"quoted\",\n        \"data-testid\": \"quote-status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Status, {\n        size: \"xs\",\n        text: /*#__PURE__*/_jsxDEV(Translate, {\n          label: \"\".concat(quoteStatusString)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 19\n        }, _this),\n        status: quoteStatus.toLowerCase(),\n        \"data-testid\": \"quote-status\",\n        statusOverrides: {\n          quoted: 'info'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false);\n\n  return isLoading ? /*#__PURE__*/_jsxDEV(QuoteCardSkeleton, {\n    height: height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 5\n  }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isBlocked || isRejected ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Drawer, {\n        anchor: \"right\",\n        open: drawerOpen,\n        style: {\n          zIndex: 10000\n        },\n        onClose: function onClose() {\n          return toggleDrawer(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          p: 2,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            value: \"issues\",\n            \"data-testid\": \"tab-content-issues\",\n            children: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.hasIssues) && /*#__PURE__*/_jsxDEV(RiskIssues, {\n              riskIssues: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.issues) || [],\n              quoteIssues: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.quoteIssues) || [],\n              insuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.insuredSanctionsCheckResult,\n              reInsuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.reInsuredSanctionsCheckResult,\n              canCurrentUserDismissIssues: canCurrentUserDismissIssues,\n              handleRiskRefresh: handleRiskRefresh,\n              quoteId: quote === null || quote === void 0 ? void 0 : quote.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false) : null, /*#__PURE__*/_jsxDEV(Card, {\n      ref: ref,\n      classes: {\n        root: classes.card\n      },\n      children: [carrierName || createdAt ? /*#__PURE__*/_jsxDEV(CardHeader, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          icon: HowToVoteIcon,\n          size: 32,\n          border: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }, _this),\n        title: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          className: classes.cardFacility,\n          style: {\n            textAlign: 'left'\n          },\n          children: carrierName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }, _this),\n        subheader: subheader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, _this) : null, /*#__PURE__*/_jsxDEV(CardContent, {\n        classes: {\n          root: classes.cardContent\n        },\n        children: /*#__PURE__*/_jsxDEV(FormGrid, {\n          container: true,\n          spacing: 1,\n          children: [/*#__PURE__*/_jsxDEV(QuoteLine, {\n            title: isReferred ? \"\" : utils.string.t('risks.grossPremium'),\n            value: isReferred ? utils.string.t('risks.referral') : premiumValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(QuoteLine, {\n            title: utils.string.t('app.createdAt'),\n            value: utils.string.t('format.date', {\n              value: {\n                date: quoteState.createdAt,\n                format: 'lll',\n                \"default\": '-'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(QuoteLine, {\n            title: utils.string.t('app.validUntil'),\n            value: utils.string.t('format.date', {\n              value: {\n                date: quoteState.validUntil,\n                format: 'lll',\n                \"default\": '-'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, _this), isQuoted && isQuoteCommission && isFacilityCommission ? /*#__PURE__*/_jsxDEV(Restricted, {\n        include: [ROLE_BROKER, ROLE_COBROKER],\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          classes: {\n            root: classes.cardContentCommission\n          },\n          children: /*#__PURE__*/_jsxDEV(CommissionSlider, {\n            defaultClientCommission: defaultClientCommissionRate,\n            defaultBrokerCommission: defaultBrokerCommissionRate,\n            netDownClientCommission: clientCommissionRate,\n            commissionRatioClient: clientCommissionRatio,\n            handleChangedValues: handleCommissionChange,\n            isSliderDisabled: requestedToBind\n          }, uuid, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, _this) : null, commissionIsChanged ? /*#__PURE__*/_jsxDEV(CardActions, {\n        disableSpacing: true,\n        classes: {\n          root: classes.cardActions\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          px: 1,\n          pb: 0.5,\n          mb: 1,\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          width: \"100%\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            width: \"100%\",\n            flexDirection: \"row\",\n            justifyContent: \"flex-end\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"xsmall\",\n              icon: DoneIcon,\n              color: \"primary\",\n              nestedClasses: {\n                icon: classes.icon\n              },\n              onClick: handleUpdateCommission\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"xsmall\",\n              icon: ClearIcon,\n              color: \"default\",\n              nestedClasses: {\n                btn: classes.btnMarginLeft,\n                icon: classes.icon\n              },\n              onClick: resetCommission\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [isQuoted ? /*#__PURE__*/_jsxDEV(CardActions, {\n          disableSpacing: true,\n          classes: {\n            root: classes.cardActions\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            px: 1,\n            pb: 0.5,\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            width: \"100%\",\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              width: \"100%\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              children: hasTemplate ? /*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: PictureAsPdfIcon,\n                  color: \"secondary\",\n                  text: utils.string.t('risks.download'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: handleDownloadQuote({\n                    quote: quoteState,\n                    insureds: utils.risk.getPartyValues('insureds', parties, riskInsuredId)\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 23\n              }, _this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              flexDirection: \"row\",\n              ml: \"auto\",\n              flexWrap: canCurrentUserBind ? 'no-wrap' : 'wrap',\n              justifyContent: \"flex-end\",\n              children: [canCurrentUserBind ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Restricted, {\n                  include: [ROLE_BROKER],\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    mr: 1,\n                    mb: 1,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"xsmall\",\n                      style: {\n                        backgroundColor: 'rgb(44, 198, 171)'\n                      },\n                      icon: CheckIcon,\n                      color: \"primary\",\n                      text: utils.string.t('risks.bind'),\n                      nestedClasses: {\n                        icon: classes.icon\n                      },\n                      onClick: displayPreBind ? handlePreBind(quoteState, true) : handleBindRiskQuote(quoteState),\n                      disabled: isBlocked\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 25\n                }, _this), /*#__PURE__*/_jsxDEV(Restricted, {\n                  include: [ROLE_UNDERWRITER],\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    mr: 1,\n                    mb: 1,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"xsmall\",\n                      style: {\n                        backgroundColor: 'rgb(44, 198, 171)'\n                      },\n                      icon: CheckIcon,\n                      color: \"primary\",\n                      text: utils.string.t('risks.bind'),\n                      nestedClasses: {\n                        icon: classes.icon\n                      },\n                      onClick: handleBindRiskQuote(quoteState),\n                      disabled: isBlocked\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 368,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 25\n                }, _this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: !requestedToBind ? /*#__PURE__*/_jsxDEV(Box, {\n                  whiteSpace: \"nowrap\",\n                  mr: 1,\n                  mb: 1,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"xsmall\",\n                    style: {\n                      backgroundColor: 'rgb(44, 198, 171)'\n                    },\n                    icon: CheckIcon,\n                    color: \"primary\",\n                    text: utils.string.t('risks.requestToBind'),\n                    nestedClasses: {\n                      icon: classes.icon\n                    },\n                    onClick: handleRequestToBind(quoteState, displayPreBind),\n                    disabled: isBlocked\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 29\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 27\n                }, _this) : null\n              }, void 0, false), isExpired && /*#__PURE__*/_jsxDEV(Button, {\n                size: \"xsmall\",\n                color: \"default\",\n                text: utils.string.t('app.expired'),\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 35\n              }, _this), /*#__PURE__*/_jsxDEV(Restricted, {\n                include: [ROLE_BROKER, ROLE_UNDERWRITER],\n                children: !isExpired && !isBlocked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    mr: 1,\n                    mb: 1,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"xsmall\",\n                      icon: BlockIcon,\n                      color: \"primary\",\n                      danger: true,\n                      text: utils.string.t('risks.decline'),\n                      nestedClasses: {\n                        icon: classes.icon\n                      },\n                      onClick: handleDeclineRiskQuote(quoteState.id),\n                      disabled: isBlocked\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 403,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }, _this) : null, isDraftOrReferred && !isBlocked ? /*#__PURE__*/_jsxDEV(Restricted, {\n          include: [ROLE_BROKER, ROLE_UNDERWRITER],\n          children: /*#__PURE__*/_jsxDEV(CardActions, {\n            disableSpacing: true,\n            classes: {\n              root: classes.cardActions\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              px: 1,\n              pb: 0.5,\n              ml: \"auto\",\n              display: \"flex\",\n              flexWrap: \"wrap\",\n              justifyContent: \"flex-end\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: BlockIcon,\n                  color: \"primary\",\n                  danger: true,\n                  text: utils.string.t('risks.decline'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: handleDeclineRiskQuote(quoteState.id),\n                  disabled: isBlocked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: EditIcon,\n                  color: \"secondary\",\n                  text: utils.string.t('risks.update'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: handlePatchRiskQuote({\n                    quote: quoteState\n                  }),\n                  disabled: isBlocked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: CheckIcon,\n                  color: \"primary\",\n                  text: utils.string.t('risks.accept'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: handleAcceptRiskQuote(quoteState.id),\n                  disabled: isBlocked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 15\n        }, _this) : null, isBlocked || isRejected ? /*#__PURE__*/_jsxDEV(CardActions, {\n          disableSpacing: true,\n          classes: {\n            root: classes.cardActions\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            px: 1,\n            pb: 0.5,\n            ml: \"auto\",\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            justifyContent: \"flex-end\",\n            children: [!canCurrentUserDismissIssues && !requestedToDismissIssues && isQuoteBlocked && (quoteState === null || quoteState === void 0 ? void 0 : quoteState.id) ? /*#__PURE__*/_jsxDEV(Box, {\n              mr: 1,\n              mb: 1,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                size: \"xsmall\",\n                style: {\n                  backgroundColor: 'rgb(237, 172, 0)',\n                  color: 'white'\n                },\n                icon: ForwardIcon,\n                color: \"primary\",\n                text: utils.string.t('risks.refer'),\n                nestedClasses: {\n                  icon: classes.icon\n                },\n                onClick: handleRequestDismissIssues(quoteState)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 23\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 21\n            }, _this) : null, (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$issues = issuesData.issues) === null || _issuesData$issues === void 0 ? void 0 : _issuesData$issues.length) + (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$quoteIssu = issuesData.quoteIssues) === null || _issuesData$quoteIssu === void 0 ? void 0 : _issuesData$quoteIssu.length) > 0 ? /*#__PURE__*/_jsxDEV(Box, {\n              mr: 1,\n              mb: 1,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"xsmall\",\n                icon: InfoOutlinedIcon,\n                color: \"primary\",\n                danger: true,\n                text: utils.string.t('risks.issues'),\n                nestedClasses: {\n                  icon: classes.icon\n                },\n                onClick: function onClick(e) {\n                  var _issuesData$issues2, _issuesData$quoteIssu2;\n\n                  return (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$issues2 = issuesData.issues) === null || _issuesData$issues2 === void 0 ? void 0 : _issuesData$issues2.length) + (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$quoteIssu2 = issuesData.quoteIssues) === null || _issuesData$quoteIssu2 === void 0 ? void 0 : _issuesData$quoteIssu2.length) > 1 ? toggleDrawer(true) : handleIssuesPopoverClick(e);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 23\n              }, _this), /*#__PURE__*/_jsxDEV(Popover, {\n                id: id,\n                open: open,\n                anchorEl: anchorEl,\n                onClose: handleClosePopover,\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'center'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'center'\n                },\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  p: 2,\n                  maxWidth: 340,\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    value: \"issues\",\n                    \"data-testid\": \"tab-content-issues\",\n                    children: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.hasIssues) && /*#__PURE__*/_jsxDEV(RiskIssues, {\n                      riskIssues: issuesData === null || issuesData === void 0 ? void 0 : issuesData.issues,\n                      quoteIssues: issuesData === null || issuesData === void 0 ? void 0 : issuesData.quoteIssues,\n                      insuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.insuredSanctionsCheckResult,\n                      reInsuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.reInsuredSanctionsCheckResult,\n                      canCurrentUserDismissIssues: canCurrentUserDismissIssues,\n                      handleRiskRefresh: handleRiskRefresh,\n                      quoteId: quote === null || quote === void 0 ? void 0 : quote.id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 515,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 23\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 21\n            }, _this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 15\n        }, _this) : null]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s2(QuoteCard, \"5SRGJIVdXwsT7xDQJuYd0I5CqT0=\", false, function () {\n  return [useDispatch];\n});\n\n_c2 = QuoteCard;\nexport var QuoteCardSkeleton = function QuoteCardSkeleton(_ref4) {\n  _s3();\n\n  var _ref4$height = _ref4.height,\n      height = _ref4$height === void 0 ? 'auto' : _ref4$height;\n  var classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(Card, {\n    \"data-testid\": \"skeleton-quote-card\",\n    classes: {\n      root: classes.root\n    },\n    style: {\n      height: height\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      avatar: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        variant: \"circle\",\n        width: 40,\n        height: 40\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 17\n      }, _this),\n      title: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 10,\n        width: \"80%\",\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 16\n      }, _this),\n      subheader: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 10,\n        width: \"40%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 20\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20,\n          style: {\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20,\n          style: {\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n      classes: {\n        root: classes.cardContentCommission\n      },\n      children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20,\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20,\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 544,\n    columnNumber: 5\n  }, _this);\n};\n\n_s3(QuoteCardSkeleton, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\nQuoteCardSkeleton.displayName = \"QuoteCardSkeleton\";\n_c3 = QuoteCardSkeleton;\nQuoteCard.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"QuoteCard\"\n};\nexport default QuoteCard;\nQuoteCardSkeleton.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"QuoteCardSkeleton\",\n  \"props\": {\n    \"height\": {\n      \"defaultValue\": {\n        \"value\": \"'auto'\",\n        \"computed\": false\n      },\n      \"required\": false\n    }\n  }\n};\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\modules\\\\RiskQuotes\\\\QuoteCard.js\"] = {\n    name: \"QuoteCardSkeleton\",\n    docgenInfo: QuoteCardSkeleton.__docgenInfo,\n    path: \"src\\\\modules\\\\RiskQuotes\\\\QuoteCard.js\"\n  };\n}\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\modules\\\\RiskQuotes\\\\QuoteCard.js\"] = {\n    name: \"QuoteCard\",\n    docgenInfo: QuoteCard.__docgenInfo,\n    path: \"src\\\\modules\\\\RiskQuotes\\\\QuoteCard.js\"\n  };\n}\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"QuoteLine\");\n$RefreshReg$(_c2, \"QuoteCard\");\n$RefreshReg$(_c3, \"QuoteCardSkeleton\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/RiskQuotes/QuoteCard.js"],"names":["useState","useEffect","useRef","useDispatch","moment","get","isNumber","styles","RiskIssues","Avatar","Button","FormGrid","Translate","Restricted","Status","putQuoteRates","CommissionSlider","QUOTE_PREMIUM_PRECISION","RISK_QUOTE_STATUS_DRAFT","RISK_QUOTE_STATUS_QUOTED","RISK_QUOTE_STATUS_REFERRED","RISK_QUOTE_STATUS_BLOCKED","RISK_QUOTE_STATUS_REJECTED","ROLE_BROKER","ROLE_UNDERWRITER","ROLE_COBROKER","utils","Skeleton","makeStyles","Box","Card","CardHeader","CardActions","CardContent","Drawer","Typography","Popover","HowToVoteIcon","InfoOutlinedIcon","PictureAsPdfIcon","EditIcon","CheckIcon","BlockIcon","DoneIcon","ClearIcon","ForwardIcon","useStyles","theme","root","margin","width","minHeight","title","color","value","fontWeight","QuoteLine","classes","QuoteCard","quote","riskInsuredId","riskStatus","parties","issuesData","handlePatchRiskQuote","handleDeclineRiskQuote","handleAcceptRiskQuote","handleBindRiskQuote","handleDownloadQuote","handleRiskRefresh","handleRequestToBind","handlePreBind","handleRequestDismissIssues","name","dispatch","height","setHeight","ref","quoteState","setQuoteState","isLoading","setIsLoading","anchorEl","setAnchorEl","drawerOpen","setDrawerOpen","commissionIsChanged","setCommissionIsChanged","commissionRatioClient","commission","clientCommissionRatio","netDownClientCommission","clientCommissionRate","setCommission","Date","getTime","uuid","setUuid","premium","quotePremium","setQuotePremium","createdAt","string","t","date","format","carrierName","quoteStatus","response","responseStatus","status","quoteStatusString","toLowerCase","isQuoteBlocked","isBlocked","isExpired","validUntil","isBefore","isQuoted","isDraftOrReferred","includes","isReferred","isRejected","hasTemplate","defaultClientCommissionRate","facility","commissionRates","defaultBrokerCommissionRate","brokerCommissionRate","isQuoteCommission","isFacilityCommission","grossPremium","premiumValue","currency","number","canCurrentUserBind","requestedToBind","displayPreBind","preBind","canCurrentUserDismissIssues","requestedToDismissIssues","current","clientHeight","handleUpdateCommission","rates","scale","id","result","handleCommissionChange","newCommission","isChanged","commissionRate","newPremium","parseFloat","toFixed","Math","ceil","resetCommission","handleIssuesPopoverClick","event","currentTarget","handleClosePopover","toggleDrawer","open","Boolean","undefined","subheader","display","alignItems","quoted","zIndex","hasIssues","issues","quoteIssues","insuredSanctionsCheckResult","reInsuredSanctionsCheckResult","card","cardFacility","textAlign","cardContent","cardContentCommission","cardActions","icon","btn","btnMarginLeft","insureds","risk","getPartyValues","backgroundColor","length","e","vertical","horizontal","QuoteCardSkeleton","marginBottom"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport moment from 'moment';\r\nimport get from 'lodash/get';\r\nimport isNumber from 'lodash/isNumber';\r\n\r\n// app\r\nimport styles from './QuoteCard.style';\r\nimport { RiskIssues } from 'modules';\r\nimport { Avatar, Button, FormGrid, Translate, Restricted, Status } from 'components';\r\nimport { putQuoteRates } from 'stores';\r\nimport CommissionSlider from './CommissionSlider';\r\nimport {\r\n  QUOTE_PREMIUM_PRECISION,\r\n  RISK_QUOTE_STATUS_DRAFT,\r\n  RISK_QUOTE_STATUS_QUOTED,\r\n  RISK_QUOTE_STATUS_REFERRED,\r\n  RISK_QUOTE_STATUS_BLOCKED,\r\n  RISK_QUOTE_STATUS_REJECTED,\r\n  ROLE_BROKER,\r\n  ROLE_UNDERWRITER,\r\n  ROLE_COBROKER,\r\n} from 'consts';\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { makeStyles, Box, Card, CardHeader, CardActions, CardContent, Drawer, Typography, Popover } from '@material-ui/core';\r\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport BlockIcon from '@material-ui/icons/Block';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport ForwardIcon from '@material-ui/icons/Forward';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: 'auto',\r\n    width: '100%',\r\n    minHeight: 262,\r\n  },\r\n\r\n  title: {\r\n    color: 'black!important',\r\n  },\r\n  value: {\r\n    color: 'black!important',\r\n    fontWeight: 600,\r\n  },\r\n}));\r\n\r\nconst QuoteLine = ({ title, value }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <FormGrid item xs={5}>\r\n        <Typography variant=\"body2\" className={classes.title}>\r\n          {title}\r\n        </Typography>\r\n      </FormGrid>\r\n      <FormGrid item xs={7}>\r\n        <Typography variant=\"body2\" className={classes.value}>\r\n          {value}\r\n        </Typography>\r\n      </FormGrid>\r\n    </>\r\n  );\r\n};\r\n\r\nconst QuoteCard = ({\r\n  quote,\r\n  riskInsuredId,\r\n  riskStatus,\r\n  parties,\r\n  issuesData,\r\n  handlePatchRiskQuote,\r\n  handleDeclineRiskQuote,\r\n  handleAcceptRiskQuote,\r\n  handleBindRiskQuote,\r\n  handleDownloadQuote,\r\n  handleRiskRefresh,\r\n  handleRequestToBind,\r\n  handlePreBind,\r\n  handleRequestDismissIssues,\r\n}) => {\r\n  const classes = makeStyles(styles, { name: 'QuoteCard' })();\r\n  const dispatch = useDispatch();\r\n\r\n  const [height, setHeight] = useState(0);\r\n  const ref = useRef(null);\r\n\r\n  const [quoteState, setQuoteState] = useState(quote);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [commissionIsChanged, setCommissionIsChanged] = useState(false);\r\n  const [commission, setCommission] = useState({\r\n    commissionRatioClient: quoteState?.commission?.clientCommissionRatio,\r\n    netDownClientCommission: quoteState?.commission?.clientCommissionRate,\r\n  });\r\n  const [uuid, setUuid] = useState(new Date().getTime());\r\n  const [quotePremium, setQuotePremium] = useState(quoteState?.premium);\r\n\r\n  const createdAt = utils.string.t('format.date', {\r\n    value: { date: quoteState.createdAt, format: 'lll' },\r\n  });\r\n  const carrierName = get(quoteState, 'carrierName');\r\n  const quoteStatus = quoteState.response ? quoteState.response.responseStatus : quoteState.status;\r\n  let quoteStatusString = quoteStatus ? utils.string.t(`status.${quoteStatus.toLowerCase()}`) : '-';\r\n  quoteStatusString = quoteStatusString === 'Quoted' ? utils.string.t('status.quote') : quoteStatusString;\r\n  const isQuoteBlocked = quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\r\n  const isBlocked = riskStatus === RISK_QUOTE_STATUS_BLOCKED || quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\r\n  const isExpired = quoteState.validUntil && moment(quoteState.validUntil).isBefore(new Date());\r\n  const isQuoted = quoteStatus === RISK_QUOTE_STATUS_QUOTED;\r\n  const isDraftOrReferred = [RISK_QUOTE_STATUS_DRAFT, RISK_QUOTE_STATUS_REFERRED].includes(quoteStatus);\r\n  const isReferred = quoteStatus === RISK_QUOTE_STATUS_REFERRED;\r\n  const isRejected = quoteStatus === RISK_QUOTE_STATUS_REJECTED;\r\n  const hasTemplate = quoteState.hasTemplate;\r\n\r\n  const defaultClientCommissionRate = quoteState?.facility?.commissionRates?.clientCommissionRate;\r\n  const defaultBrokerCommissionRate = quoteState?.facility?.commissionRates?.brokerCommissionRate;\r\n\r\n  const clientCommissionRatio = quoteState?.commission?.clientCommissionRatio || defaultClientCommissionRate;\r\n  const clientCommissionRate = quoteState?.commission?.clientCommissionRate || defaultClientCommissionRate;\r\n\r\n  const isQuoteCommission = isNumber(clientCommissionRate) && isNumber(clientCommissionRatio);\r\n  const isFacilityCommission = isNumber(defaultClientCommissionRate) && isNumber(defaultBrokerCommissionRate);\r\n\r\n  const grossPremium = quoteState?.grossPremium;\r\n\r\n  const premiumValue = `${quoteState?.currency ? utils.string.t(quoteState.currency) : ''} ${utils.string.t('format.number', {\r\n    value: { number: quotePremium, default: '-' },\r\n  })}`;\r\n  const canCurrentUserBind = quoteState?.canCurrentUserBind;\r\n  const requestedToBind = quoteState?.requestedToBind;\r\n  const displayPreBind = quoteState?.facility?.preBind;\r\n  const canCurrentUserDismissIssues = quoteState?.canCurrentUserDismissIssues;\r\n  const requestedToDismissIssues = quoteState?.requestedToDismissIssues;\r\n\r\n  useEffect(() => {\r\n    setHeight(ref.current.clientHeight);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setQuoteState(quote);\r\n  }, [quote]);\r\n\r\n  const handleUpdateCommission = async () => {\r\n    setIsLoading(true);\r\n    const rates = {\r\n      clientCommissionRatio: commission.commissionRatioClient,\r\n      clientCommissionRate: commission.netDownClientCommission,\r\n      scale: QUOTE_PREMIUM_PRECISION,\r\n    };\r\n    const result = await dispatch(putQuoteRates(rates, quoteState.id));\r\n    if (result) {\r\n      setQuoteState(result);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleCommissionChange = (newCommission, isChanged) => {\r\n    setCommissionIsChanged(isChanged);\r\n    setCommission(newCommission);\r\n    const commissionRatioClient = isNumber(newCommission?.commissionRatioClient)\r\n      ? newCommission?.commissionRatioClient\r\n      : defaultClientCommissionRate;\r\n    const commissionRate =\r\n      commissionRatioClient === newCommission.netDownClientCommission\r\n        ? 1\r\n        : (1 - commissionRatioClient * 0.01) / (1 - newCommission.netDownClientCommission * 0.01);\r\n\r\n    const newPremium = parseFloat((grossPremium * commissionRate).toFixed(QUOTE_PREMIUM_PRECISION));\r\n    setQuotePremium(Math.ceil(newPremium));\r\n  };\r\n\r\n  const resetCommission = () => {\r\n    setUuid(new Date().getTime());\r\n    setCommissionIsChanged(false);\r\n    setQuotePremium(quoteState.premium);\r\n  };\r\n  const handleIssuesPopoverClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClosePopover = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const toggleDrawer = (value) => {\r\n    setDrawerOpen(value);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n\r\n  const subheader = (\r\n    <>\r\n      {requestedToBind && isQuoted ? (\r\n        <Box style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Status\r\n            size=\"xs\"\r\n            text={<Translate label={utils.string.t('risks.requestToBindStatus')} />}\r\n            status=\"quoted\"\r\n            data-testid=\"quote-status\"\r\n          />\r\n        </Box>\r\n      ) : (\r\n        <Box style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Status\r\n            size=\"xs\"\r\n            text={<Translate label={`${quoteStatusString}`} />}\r\n            status={quoteStatus.toLowerCase()}\r\n            data-testid=\"quote-status\"\r\n            statusOverrides={{\r\n              quoted: 'info',\r\n            }}\r\n          />\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n  return isLoading ? (\r\n    <QuoteCardSkeleton height={height} />\r\n  ) : (\r\n    <>\r\n      {isBlocked || isRejected ? (\r\n        <>\r\n          <Drawer anchor=\"right\" open={drawerOpen} style={{ zIndex: 10000 }} onClose={() => toggleDrawer(false)}>\r\n            <Box p={2}>\r\n              <Box value=\"issues\" data-testid=\"tab-content-issues\">\r\n                {issuesData?.hasIssues && (\r\n                  <RiskIssues\r\n                    riskIssues={issuesData?.issues || []}\r\n                    quoteIssues={issuesData?.quoteIssues || []}\r\n                    insuredSanctionsCheckResult={issuesData?.insuredSanctionsCheckResult}\r\n                    reInsuredSanctionsCheckResult={issuesData?.reInsuredSanctionsCheckResult}\r\n                    canCurrentUserDismissIssues={canCurrentUserDismissIssues}\r\n                    handleRiskRefresh={handleRiskRefresh}\r\n                    quoteId={quote?.id}\r\n                  />\r\n                )}\r\n              </Box>\r\n            </Box>\r\n          </Drawer>\r\n        </>\r\n      ) : null}\r\n      <Card ref={ref} classes={{ root: classes.card }}>\r\n        {carrierName || createdAt ? (\r\n          <CardHeader\r\n            avatar={<Avatar icon={HowToVoteIcon} size={32} border />}\r\n            title={\r\n              <Typography variant=\"h3\" className={classes.cardFacility} style={{ textAlign: 'left' }}>\r\n                {carrierName}\r\n              </Typography>\r\n            }\r\n            subheader={subheader}\r\n          />\r\n        ) : null}\r\n        <CardContent classes={{ root: classes.cardContent }}>\r\n          <FormGrid container spacing={1}>\r\n            <QuoteLine\r\n              title={isReferred ? `` : utils.string.t('risks.grossPremium')}\r\n              value={isReferred ? utils.string.t('risks.referral') : premiumValue}\r\n            />\r\n            <QuoteLine\r\n              title={utils.string.t('app.createdAt')}\r\n              value={utils.string.t('format.date', {\r\n                value: { date: quoteState.createdAt, format: 'lll', default: '-' },\r\n              })}\r\n            />\r\n\r\n            <QuoteLine\r\n              title={utils.string.t('app.validUntil')}\r\n              value={utils.string.t('format.date', {\r\n                value: { date: quoteState.validUntil, format: 'lll', default: '-' },\r\n              })}\r\n            />\r\n          </FormGrid>\r\n        </CardContent>\r\n        {isQuoted && isQuoteCommission && isFacilityCommission ? (\r\n          <Restricted include={[ROLE_BROKER, ROLE_COBROKER]}>\r\n            <CardContent classes={{ root: classes.cardContentCommission }}>\r\n              <CommissionSlider\r\n                key={uuid}\r\n                defaultClientCommission={defaultClientCommissionRate}\r\n                defaultBrokerCommission={defaultBrokerCommissionRate}\r\n                netDownClientCommission={clientCommissionRate}\r\n                commissionRatioClient={clientCommissionRatio}\r\n                handleChangedValues={handleCommissionChange}\r\n                isSliderDisabled={requestedToBind}\r\n              />\r\n            </CardContent>\r\n          </Restricted>\r\n        ) : null}\r\n        {commissionIsChanged ? (\r\n          <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n            <Box px={1} pb={0.5} mb={1} display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" width=\"100%\">\r\n              <Box display=\"flex\" width=\"100%\" flexDirection=\"row\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  size=\"xsmall\"\r\n                  icon={DoneIcon}\r\n                  color=\"primary\"\r\n                  nestedClasses={{ icon: classes.icon }}\r\n                  onClick={handleUpdateCommission}\r\n                />\r\n                <Button\r\n                  size=\"xsmall\"\r\n                  icon={ClearIcon}\r\n                  color=\"default\"\r\n                  nestedClasses={{ btn: classes.btnMarginLeft, icon: classes.icon }}\r\n                  onClick={resetCommission}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </CardActions>\r\n        ) : (\r\n          <>\r\n            {isQuoted ? (\r\n              <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n                <Box px={1} pb={0.5} display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" width=\"100%\">\r\n                  <Box display=\"flex\" width=\"100%\" flexDirection=\"row\" justifyContent=\"space-between\">\r\n                    {hasTemplate ? (\r\n                      <Box mr={1} mb={1}>\r\n                        <Button\r\n                          size=\"xsmall\"\r\n                          icon={PictureAsPdfIcon}\r\n                          color=\"secondary\"\r\n                          text={utils.string.t('risks.download')}\r\n                          nestedClasses={{ icon: classes.icon }}\r\n                          onClick={handleDownloadQuote({\r\n                            quote: quoteState,\r\n                            insureds: utils.risk.getPartyValues('insureds', parties, riskInsuredId),\r\n                          })}\r\n                        />\r\n                      </Box>\r\n                    ) : null}\r\n                  </Box>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    flexDirection=\"row\"\r\n                    ml=\"auto\"\r\n                    flexWrap={canCurrentUserBind ? 'no-wrap' : 'wrap'}\r\n                    justifyContent=\"flex-end\"\r\n                  >\r\n                    {canCurrentUserBind ? (\r\n                      <>\r\n                        <Restricted include={[ROLE_BROKER]}>\r\n                          <Box mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              style={{ backgroundColor: 'rgb(44, 198, 171)' }}\r\n                              icon={CheckIcon}\r\n                              color=\"primary\"\r\n                              text={utils.string.t('risks.bind')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={displayPreBind ? handlePreBind(quoteState, true) : handleBindRiskQuote(quoteState)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        </Restricted>\r\n                        <Restricted include={[ROLE_UNDERWRITER]}>\r\n                          <Box mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              style={{ backgroundColor: 'rgb(44, 198, 171)' }}\r\n                              icon={CheckIcon}\r\n                              color=\"primary\"\r\n                              text={utils.string.t('risks.bind')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={handleBindRiskQuote(quoteState)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        </Restricted>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        {!requestedToBind ? (\r\n                          <Box whiteSpace=\"nowrap\" mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              style={{ backgroundColor: 'rgb(44, 198, 171)' }}\r\n                              icon={CheckIcon}\r\n                              color=\"primary\"\r\n                              text={utils.string.t('risks.requestToBind')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={handleRequestToBind(quoteState, displayPreBind)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        ) : null}\r\n                      </>\r\n                    )}\r\n                    {isExpired && <Button size=\"xsmall\" color=\"default\" text={utils.string.t('app.expired')} disabled />}\r\n                    <Restricted include={[ROLE_BROKER, ROLE_UNDERWRITER]}>\r\n                      {!isExpired && !isBlocked ? (\r\n                        <>\r\n                          <Box mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              icon={BlockIcon}\r\n                              color=\"primary\"\r\n                              danger\r\n                              text={utils.string.t('risks.decline')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={handleDeclineRiskQuote(quoteState.id)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        </>\r\n                      ) : null}\r\n                    </Restricted>\r\n                  </Box>\r\n                </Box>\r\n              </CardActions>\r\n            ) : null}\r\n            {isDraftOrReferred && !isBlocked ? (\r\n              <Restricted include={[ROLE_BROKER, ROLE_UNDERWRITER]}>\r\n                <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n                  <Box px={1} pb={0.5} ml=\"auto\" display=\"flex\" flexWrap=\"wrap\" justifyContent=\"flex-end\">\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={BlockIcon}\r\n                        color=\"primary\"\r\n                        danger\r\n                        text={utils.string.t('risks.decline')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={handleDeclineRiskQuote(quoteState.id)}\r\n                        disabled={isBlocked}\r\n                      />\r\n                    </Box>\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={EditIcon}\r\n                        color=\"secondary\"\r\n                        text={utils.string.t('risks.update')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={handlePatchRiskQuote({\r\n                          quote: quoteState,\r\n                        })}\r\n                        disabled={isBlocked}\r\n                      />\r\n                    </Box>\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={CheckIcon}\r\n                        color=\"primary\"\r\n                        text={utils.string.t('risks.accept')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={handleAcceptRiskQuote(quoteState.id)}\r\n                        disabled={isBlocked}\r\n                      />\r\n                    </Box>\r\n                  </Box>\r\n                </CardActions>\r\n              </Restricted>\r\n            ) : null}\r\n\r\n            {isBlocked || isRejected ? (\r\n              <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n                <Box px={1} pb={0.5} ml=\"auto\" display=\"flex\" flexWrap=\"wrap\" justifyContent=\"flex-end\">\r\n                  {!canCurrentUserDismissIssues && !requestedToDismissIssues && isQuoteBlocked && quoteState?.id ? (\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        style={{ backgroundColor: 'rgb(237, 172, 0)', color: 'white' }}\r\n                        icon={ForwardIcon}\r\n                        color=\"primary\"\r\n                        text={utils.string.t('risks.refer')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={handleRequestDismissIssues(quoteState)}\r\n                      />\r\n                    </Box>\r\n                  ) : null}\r\n                  {issuesData?.issues?.length + issuesData?.quoteIssues?.length > 0 ? (\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={InfoOutlinedIcon}\r\n                        color=\"primary\"\r\n                        danger\r\n                        text={utils.string.t('risks.issues')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={(e) =>\r\n                          issuesData?.issues?.length + issuesData?.quoteIssues?.length > 1\r\n                            ? toggleDrawer(true)\r\n                            : handleIssuesPopoverClick(e)\r\n                        }\r\n                      />\r\n                      <Popover\r\n                        id={id}\r\n                        open={open}\r\n                        anchorEl={anchorEl}\r\n                        onClose={handleClosePopover}\r\n                        anchorOrigin={{\r\n                          vertical: 'bottom',\r\n                          horizontal: 'center',\r\n                        }}\r\n                        transformOrigin={{\r\n                          vertical: 'top',\r\n                          horizontal: 'center',\r\n                        }}\r\n                      >\r\n                        <Box p={2} maxWidth={340}>\r\n                          <Box value=\"issues\" data-testid=\"tab-content-issues\">\r\n                            {issuesData?.hasIssues && (\r\n                              <RiskIssues\r\n                                riskIssues={issuesData?.issues}\r\n                                quoteIssues={issuesData?.quoteIssues}\r\n                                insuredSanctionsCheckResult={issuesData?.insuredSanctionsCheckResult}\r\n                                reInsuredSanctionsCheckResult={issuesData?.reInsuredSanctionsCheckResult}\r\n                                canCurrentUserDismissIssues={canCurrentUserDismissIssues}\r\n                                handleRiskRefresh={handleRiskRefresh}\r\n                                quoteId={quote?.id}\r\n                              />\r\n                            )}\r\n                          </Box>\r\n                        </Box>\r\n                      </Popover>\r\n                    </Box>\r\n                  ) : null}\r\n                </Box>\r\n              </CardActions>\r\n            ) : null}\r\n          </>\r\n        )}\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const QuoteCardSkeleton = ({ height = 'auto' }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card data-testid=\"skeleton-quote-card\" classes={{ root: classes.root }} style={{ height }}>\r\n      <CardHeader\r\n        avatar={<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />}\r\n        title={<Skeleton animation=\"wave\" height={10} width=\"80%\" style={{ marginBottom: 6 }} />}\r\n        subheader={<Skeleton animation=\"wave\" height={10} width=\"40%\" />}\r\n      />\r\n\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={20} />\r\n        </>\r\n      </CardContent>\r\n      <CardContent classes={{ root: classes.cardContentCommission }}>\r\n        <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n        <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n        <Skeleton animation=\"wave\" height={20} />\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default QuoteCard;\r\n"]},"metadata":{},"sourceType":"module"}