{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\Search\\\\Search.view.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup'; // app\n\nimport styles from './Search.styles';\nimport { Button, FormContainer, FormText, Translate } from 'components'; // mui\n\nimport { makeStyles, InputAdornment } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SearchIcon from '@material-ui/icons/Search';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nSearchView.propTypes = {\n  query: PropTypes.string,\n  fields: PropTypes.array,\n  submitButton: PropTypes.bool,\n  submitButtonProps: PropTypes.object,\n  isSearchByNull: PropTypes.bool,\n  isSearchByChanged: PropTypes.bool,\n  handlers: PropTypes.shape({\n    clear: PropTypes.func.isRequired,\n    search: PropTypes.func.isRequired\n  }).isRequired,\n  nestedClasses: PropTypes.shape({\n    root: PropTypes.string,\n    btn: PropTypes.string\n  })\n};\nSearchView.defaultProps = {\n  nestedClasses: {}\n};\nexport function SearchView(_ref) {\n  _s();\n\n  var _watch;\n\n  var query = _ref.query,\n      minChars = _ref.minChars,\n      fields = _ref.fields,\n      submitButton = _ref.submitButton,\n      submitButtonProps = _ref.submitButtonProps,\n      isSearchByNull = _ref.isSearchByNull,\n      isSearchByChanged = _ref.isSearchByChanged,\n      handlers = _ref.handlers,\n      nestedClasses = _ref.nestedClasses;\n  var classes = makeStyles(styles, {\n    name: 'Search'\n  })();\n  var validationSchema = utils.form.getValidationSchema(fields);\n\n  var _useForm = useForm(_objectSpread({}, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      control = _useForm.control,\n      watch = _useForm.watch,\n      reset = _useForm.reset,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit,\n      formState = _useForm.formState;\n\n  var watchQuery = ((_watch = watch('query')) === null || _watch === void 0 ? void 0 : _watch.trim()) || '';\n\n  var ClearBtn = /*#__PURE__*/_jsxDEV(Button, {\n    size: \"small\",\n    variant: \"text\",\n    icon: CloseIcon,\n    onClick: handlers.clear(reset),\n    nestedClasses: {\n      btn: classes.inputBtn\n    },\n    \"data-testid\": \"search-button-clear\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    className: classnames(classes.root, nestedClasses.root),\n    onSubmit: handleSubmit(handlers.search),\n    \"data-testid\": \"form-search\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.form,\n      children: /*#__PURE__*/_jsxDEV(FormText, _objectSpread(_objectSpread({}, fields[0]), {}, {\n        control: control,\n        error: errors[fields[0].name],\n        muiComponentProps: _objectSpread(_objectSpread({}, fields[0].muiComponentProps), {}, {\n          InputProps: _objectSpread({\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              classes: {\n                root: classes.adornmentStart\n              },\n              children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this),\n            endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"end\",\n              classes: {\n                root: classes.adornmentEnd\n              },\n              children: watch('query') ? ClearBtn : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 48\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this)\n          }, fields[0].muiComponentProps.InputProps)\n        })\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), submitButton && /*#__PURE__*/_jsxDEV(Button, {\n      text: /*#__PURE__*/_jsxDEV(Translate, {\n        label: \"app.go\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this),\n      color: \"primary\",\n      type: \"submit\",\n      size: submitButtonProps === null || submitButtonProps === void 0 ? void 0 : submitButtonProps.size,\n      disabled: formState.isSubmitting || formState.isSubmitted && !formState.isValid && !isSearchByChanged || watchQuery === (!isSearchByChanged ? query : '') || watchQuery.length < minChars || isSearchByNull,\n      nestedClasses: {\n        btn: classnames(classes.btn, _defineProperty({}, nestedClasses.btn, nestedClasses.btn))\n      },\n      \"data-testid\": \"search-button-go\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this)]\n  }, query, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchView, \"MYmRJXyYjh5uZlmwUHs1x7WqrY0=\", false, function () {\n  return [useForm];\n});\n\n_c = SearchView;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/Search/Search.view.js"],"names":["React","PropTypes","classnames","useForm","yupResolver","styles","Button","FormContainer","FormText","Translate","makeStyles","InputAdornment","CloseIcon","SearchIcon","utils","SearchView","propTypes","query","string","fields","array","submitButton","bool","submitButtonProps","object","isSearchByNull","isSearchByChanged","handlers","shape","clear","func","isRequired","search","nestedClasses","root","btn","defaultProps","minChars","classes","name","validationSchema","form","getValidationSchema","resolver","control","watch","reset","errors","handleSubmit","formState","watchQuery","trim","ClearBtn","inputBtn","muiComponentProps","InputProps","startAdornment","adornmentStart","endAdornment","adornmentEnd","size","isSubmitting","isSubmitted","isValid","length"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\n// app\r\nimport styles from './Search.styles';\r\nimport { Button, FormContainer, FormText, Translate } from 'components';\r\n\r\n// mui\r\nimport { makeStyles, InputAdornment } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport * as utils from 'utils';\r\n\r\nSearchView.propTypes = {\r\n  query: PropTypes.string,\r\n  fields: PropTypes.array,\r\n  submitButton: PropTypes.bool,\r\n  submitButtonProps: PropTypes.object,\r\n  isSearchByNull: PropTypes.bool,\r\n  isSearchByChanged: PropTypes.bool,\r\n  handlers: PropTypes.shape({\r\n    clear: PropTypes.func.isRequired,\r\n    search: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  nestedClasses: PropTypes.shape({\r\n    root: PropTypes.string,\r\n    btn: PropTypes.string,\r\n  }),\r\n};\r\n\r\nSearchView.defaultProps = {\r\n  nestedClasses: {},\r\n};\r\n\r\nexport function SearchView({\r\n  query,\r\n  minChars,\r\n  fields,\r\n  submitButton,\r\n  submitButtonProps,\r\n  isSearchByNull,\r\n  isSearchByChanged,\r\n  handlers,\r\n  nestedClasses,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'Search' })();\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n\r\n  const { control, watch, reset, errors, handleSubmit, formState } = useForm({\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n\r\n  const watchQuery = watch('query')?.trim() || '';\r\n\r\n  const ClearBtn = (\r\n    <Button\r\n      size=\"small\"\r\n      variant=\"text\"\r\n      icon={CloseIcon}\r\n      onClick={handlers.clear(reset)}\r\n      nestedClasses={{ btn: classes.inputBtn }}\r\n      data-testid=\"search-button-clear\"\r\n    />\r\n  );\r\n\r\n  return (\r\n    <FormContainer\r\n      key={query}\r\n      className={classnames(classes.root, nestedClasses.root)}\r\n      onSubmit={handleSubmit(handlers.search)}\r\n      data-testid=\"form-search\"\r\n    >\r\n      <div className={classes.form}>\r\n        <FormText\r\n          {...fields[0]}\r\n          control={control}\r\n          error={errors[fields[0].name]}\r\n          muiComponentProps={{\r\n            ...fields[0].muiComponentProps,\r\n            InputProps: {\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\" classes={{ root: classes.adornmentStart }}>\r\n                  <SearchIcon />\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\" classes={{ root: classes.adornmentEnd }}>\r\n                  {watch('query') ? ClearBtn : <span />}\r\n                </InputAdornment>\r\n              ),\r\n              ...fields[0].muiComponentProps.InputProps,\r\n            },\r\n          }}\r\n        />\r\n      </div>\r\n      {submitButton && (\r\n        <Button\r\n          text={<Translate label=\"app.go\" />}\r\n          color=\"primary\"\r\n          type=\"submit\"\r\n          size={submitButtonProps?.size}\r\n          disabled={\r\n            formState.isSubmitting ||\r\n            (formState.isSubmitted && !formState.isValid && !isSearchByChanged) ||\r\n            watchQuery === (!isSearchByChanged ? query : '') ||\r\n            watchQuery.length < minChars ||\r\n            isSearchByNull\r\n          }\r\n          nestedClasses={{ btn: classnames(classes.btn, { [nestedClasses.btn]: nestedClasses.btn }) }}\r\n          data-testid=\"search-button-go\"\r\n        />\r\n      )}\r\n    </FormContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}