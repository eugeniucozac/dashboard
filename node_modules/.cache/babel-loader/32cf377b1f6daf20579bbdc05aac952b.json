{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t(require(\"powerbi-client\"), require(\"react\"), require(\"lodash.isequal\")) : \"function\" == typeof define && define.amd ? define([\"powerbi-client\", \"react\", \"lodash.isequal\"], t) : \"object\" == typeof exports ? exports[\"powerbi-client-react\"] = t(require(\"powerbi-client\"), require(\"react\"), require(\"lodash.isequal\")) : e[\"powerbi-client-react\"] = t(e[\"powerbi-client\"], e.react, e[\"lodash.isequal\"]);\n}(window, function (e, t, r) {\n  return function (e) {\n    var t = {};\n\n    function r(n) {\n      if (t[n]) return t[n].exports;\n      var o = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(o.exports, o, o.exports, r), o.l = !0, o.exports;\n    }\n\n    return r.m = e, r.c = t, r.d = function (e, t, n) {\n      r.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (e, t) {\n      if (1 & t && (e = r(e)), 8 & t) return e;\n      if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var o in e) {\n        r.d(n, o, function (t) {\n          return e[t];\n        }.bind(null, o));\n      }\n      return n;\n    }, r.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return r.d(t, \"a\", t), t;\n    }, r.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, r.p = \"\", r(r.s = 3);\n  }([function (t, r) {\n    t.exports = e;\n  }, function (e, r) {\n    e.exports = t;\n  }, function (e, t) {\n    e.exports = r;\n  }, function (e, t, r) {\n    \"use strict\";\n\n    r.r(t), r.d(t, \"EmbedType\", function () {\n      return c;\n    }), r.d(t, \"PowerBIEmbed\", function () {\n      return f;\n    });\n    var n = r(1),\n        o = r(0),\n        i = r(2),\n        s = r.n(i);\n\n    var _a,\n        c,\n        p = (_a = function a(e, t) {\n      return (_a = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (e, t) {\n        e.__proto__ = t;\n      } || function (e, t) {\n        for (var r in t) {\n          t.hasOwnProperty(r) && (e[r] = t[r]);\n        }\n      })(e, t);\n    }, function (e, t) {\n      function r() {\n        this.constructor = e;\n      }\n\n      _a(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r());\n    }),\n        u = function u(e, t, r, n) {\n      return new (r || (r = Promise))(function (o, i) {\n        function s(e) {\n          try {\n            c(n.next(e));\n          } catch (e) {\n            i(e);\n          }\n        }\n\n        function a(e) {\n          try {\n            c(n.throw(e));\n          } catch (e) {\n            i(e);\n          }\n        }\n\n        function c(e) {\n          var t;\n          e.done ? o(e.value) : (t = e.value, t instanceof r ? t : new r(function (e) {\n            e(t);\n          })).then(s, a);\n        }\n\n        c((n = n.apply(e, t || [])).next());\n      });\n    },\n        l = function l(e, t) {\n      var r,\n          n,\n          o,\n          i,\n          s = {\n        label: 0,\n        sent: function sent() {\n          if (1 & o[0]) throw o[1];\n          return o[1];\n        },\n        trys: [],\n        ops: []\n      };\n      return i = {\n        next: a(0),\n        throw: a(1),\n        return: a(2)\n      }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n        return this;\n      }), i;\n\n      function a(i) {\n        return function (a) {\n          return function (i) {\n            if (r) throw new TypeError(\"Generator is already executing.\");\n\n            for (; s;) {\n              try {\n                if (r = 1, n && (o = 2 & i[0] ? n.return : i[0] ? n.throw || ((o = n.return) && o.call(n), 0) : n.next) && !(o = o.call(n, i[1])).done) return o;\n\n                switch (n = 0, o && (i = [2 & i[0], o.value]), i[0]) {\n                  case 0:\n                  case 1:\n                    o = i;\n                    break;\n\n                  case 4:\n                    return s.label++, {\n                      value: i[1],\n                      done: !1\n                    };\n\n                  case 5:\n                    s.label++, n = i[1], i = [0];\n                    continue;\n\n                  case 7:\n                    i = s.ops.pop(), s.trys.pop();\n                    continue;\n\n                  default:\n                    if (!(o = s.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== i[0] && 2 !== i[0])) {\n                      s = 0;\n                      continue;\n                    }\n\n                    if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) {\n                      s.label = i[1];\n                      break;\n                    }\n\n                    if (6 === i[0] && s.label < o[1]) {\n                      s.label = o[1], o = i;\n                      break;\n                    }\n\n                    if (o && s.label < o[2]) {\n                      s.label = o[2], s.ops.push(i);\n                      break;\n                    }\n\n                    o[2] && s.ops.pop(), s.trys.pop();\n                    continue;\n                }\n\n                i = t.call(e, s);\n              } catch (e) {\n                i = [6, e], n = 0;\n              } finally {\n                r = o = 0;\n              }\n            }\n\n            if (5 & i[0]) throw i[1];\n            return {\n              value: i[0] ? i[1] : void 0,\n              done: !0\n            };\n          }([i, a]);\n        };\n      }\n    },\n        d = function d() {\n      for (var e = 0, t = 0, r = arguments.length; t < r; t++) {\n        e += arguments[t].length;\n      }\n\n      var n = Array(e),\n          o = 0;\n\n      for (t = 0; t < r; t++) {\n        for (var i = arguments[t], s = 0, a = i.length; s < a; s++, o++) {\n          n[o] = i[s];\n        }\n      }\n\n      return n;\n    };\n\n    !function (e) {\n      e.Report = \"report\", e.Dashboard = \"dashboard\", e.Tile = \"tile\", e.Qna = \"qna\", e.Visual = \"visual\";\n    }(c || (c = {}));\n\n    var f = function (e) {\n      function t(t) {\n        var r = e.call(this, t) || this;\n        return r.containerRef = n.createRef(), r.prevEventHandlerMapString = \"\", r.props.service ? r.powerbi = r.props.service : r.powerbi = new o.service.Service(o.factories.hpmFactory, o.factories.wpmpFactory, o.factories.routerFactory), r;\n      }\n\n      return p(t, e), Object.defineProperty(t.prototype, \"embed\", {\n        get: function get() {\n          return this._embed;\n        },\n        set: function set(e) {\n          this._embed = e, this.invokeGetEmbedCallback();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), t.prototype.componentDidMount = function () {\n        this.containerRef.current && (this.props.embedConfig.accessToken && this.props.embedConfig.embedUrl ? this.embedEntity() : this.embed = this.powerbi.bootstrap(this.containerRef.current, this.props.embedConfig)), this.props.eventHandlers && this.embed && this.setEventHandlers(this.embed, this.props.eventHandlers);\n      }, t.prototype.componentDidUpdate = function (e) {\n        return u(this, void 0, void 0, function () {\n          var t, r, n, o;\n          return l(this, function (i) {\n            switch (i.label) {\n              case 0:\n                return this.embedOrUpdateAccessToken(e), this.props.eventHandlers && this.embed && this.setEventHandlers(this.embed, this.props.eventHandlers), s()(this.props.embedConfig.settings, e.embedConfig.settings) ? [3, 2] : [4, this.updateSettings()];\n\n              case 1:\n                i.sent(), i.label = 2;\n\n              case 2:\n                if (this.props.embedConfig.type !== c.Report) return [3, 11];\n                i.label = 3;\n\n              case 3:\n                return i.trys.push([3, 10,, 11]), t = this.props.embedConfig, r = t.filters, n = e.embedConfig, t.pageName && t.pageName !== n.pageName ? [4, this.embed.setPage(t.pageName)] : [3, 5];\n\n              case 4:\n                i.sent(), i.label = 5;\n\n              case 5:\n                return !r || s()(r, n.filters) ? [3, 7] : [4, this.embed.setFilters(r)];\n\n              case 6:\n                return i.sent(), [3, 9];\n\n              case 7:\n                return r || !n.filters ? [3, 9] : [4, this.embed.removeFilters()];\n\n              case 8:\n                i.sent(), i.label = 9;\n\n              case 9:\n                return [3, 11];\n\n              case 10:\n                return o = i.sent(), console.error(o), [3, 11];\n\n              case 11:\n                return [2];\n            }\n          });\n        });\n      }, t.prototype.componentWillUnmount = function () {\n        this.containerRef.current && this.powerbi.reset(this.containerRef.current);\n      }, t.prototype.render = function () {\n        return n.createElement(\"div\", {\n          ref: this.containerRef,\n          className: this.props.cssClassName\n        });\n      }, t.prototype.embedEntity = function () {\n        this.containerRef.current && (this.props.phasedEmbedding && this.props.embedConfig.type === c.Report ? this.embed = this.powerbi.load(this.containerRef.current, this.props.embedConfig) : (this.props.phasedEmbedding && console.error(\"Phased embedding is not supported for type \" + this.props.embedConfig.type), this.embed = this.powerbi.embed(this.containerRef.current, this.props.embedConfig)));\n      }, t.prototype.embedOrUpdateAccessToken = function (e) {\n        this.props.embedConfig.accessToken && this.props.embedConfig.embedUrl && (!this.containerRef.current || e.embedConfig.accessToken && this.props.embedConfig.embedUrl === e.embedConfig.embedUrl ? this.props.embedConfig.accessToken !== e.embedConfig.accessToken && this.props.embedConfig.embedUrl === e.embedConfig.embedUrl && this.embed && this.embed.setAccessToken(this.props.embedConfig.accessToken).catch(function (e) {\n          console.error(\"setAccessToken error: \" + e);\n        }) : this.embedEntity());\n      }, t.prototype.setEventHandlers = function (e, t) {\n        var r = this,\n            n = function (e) {\n          if (!e) return \"\";\n          var t = Array.from(e);\n          return JSON.stringify(t.map(function (e) {\n            return [e[0], e[1] ? e[1].toString() : \"\"];\n          }));\n        }(this.props.eventHandlers);\n\n        if (this.prevEventHandlerMapString !== n) {\n          this.prevEventHandlerMapString = n;\n          var i = o.Embed.allowedEvents,\n              s = e.embedtype;\n\n          switch (s) {\n            case c.Report:\n              i = d(i, o.Report.allowedEvents);\n              break;\n\n            case c.Dashboard:\n              i = d(i, o.Dashboard.allowedEvents);\n              break;\n\n            case c.Tile:\n              i = d(i, o.Tile.allowedEvents);\n              break;\n\n            case c.Qna:\n              i = d(i, o.Qna.allowedEvents);\n              break;\n\n            case c.Visual:\n              i = d(i, o.Visual.allowedEvents);\n              break;\n\n            default:\n              console.error(\"Invalid embed type \" + s);\n          }\n\n          var a = [];\n          t.forEach(function (t, n) {\n            i.includes(n) ? (e.off(n), t && e.on(n, function (e) {\n              t(e, r.embed);\n            })) : a.push(n);\n          }), a.length && console.error(\"Following events are invalid: \" + a.join(\",\"));\n        }\n      }, t.prototype.invokeGetEmbedCallback = function () {\n        this.props.getEmbeddedComponent && this.embed && this.props.getEmbeddedComponent(this.embed);\n      }, t.prototype.updateSettings = function () {\n        return u(this, void 0, void 0, function () {\n          var e, t;\n          return l(this, function (r) {\n            switch (r.label) {\n              case 0:\n                if (!this.embed || !this.props.embedConfig.settings) return [2];\n\n                switch (this.props.embedConfig.type) {\n                  case c.Report:\n                    return [3, 1];\n\n                  case c.Dashboard:\n                  case c.Tile:\n                  case c.Qna:\n                  case c.Visual:\n                    return [3, 6];\n                }\n\n                return [3, 7];\n\n              case 1:\n                e = this.props.embedConfig.settings, r.label = 2;\n\n              case 2:\n                return r.trys.push([2, 4,, 5]), [4, this.embed.updateSettings(e)];\n\n              case 3:\n                return r.sent(), [3, 5];\n\n              case 4:\n                return t = r.sent(), console.error(\"Error in method updateSettings: \" + t), [3, 5];\n\n              case 5:\n              case 6:\n                return [3, 8];\n\n              case 7:\n                console.error(\"Invalid embed type \" + this.props.embedConfig.type), r.label = 8;\n\n              case 8:\n                return [2];\n            }\n          });\n        });\n      }, t;\n    }(n.Component);\n  }]);\n});","map":{"version":3,"sources":["webpack://powerbi-client-react/webpack/universalModuleDefinition","webpack://powerbi-client-react/webpack/bootstrap","webpack:/powerbi-client-react/external \"powerbi-client\"","webpack:/powerbi-client-react/external \"react\"","webpack:/powerbi-client-react/external \"lodash.isequal\"","webpack://powerbi-client-react/src/PowerBIEmbed.tsx","webpack://powerbi-client-react/src/utils.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EmbedType","this","_embed","newEmbedInstance","invokeGetEmbedCallback","props","service","powerbi","Service","hpmFactory","wpmpFactory","routerFactory","containerRef","current","embedConfig","accessToken","embedUrl","embedEntity","embed","bootstrap","eventHandlers","setEventHandlers","prevProps","embedOrUpdateAccessToken","settings","updateSettings","type","Report","filters","prevEmbedConfig","pageName","setPage","setFilters","removeFilters","console","error","reset","ref","className","cssClassName","phasedEmbedding","load","setAccessToken","catch","eventHandlerMap","eventHandlerMapString","stringifyMap","prevEventHandlerMapString","allowedEvents","entityType","embedtype","Dashboard","Tile","Qna","Visual","invalidEvents","forEach","eventHandlerMethod","eventName","includes","off","on","event","push","length","join","getEmbeddedComponent","map","mapEntries","Array","from","JSON","stringify","mapEntry","toString"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"powerbi-client\"), require(\"react\"), require(\"lodash.isequal\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"powerbi-client\", \"react\", \"lodash.isequal\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"powerbi-client-react\"] = factory(require(\"powerbi-client\"), require(\"react\"), require(\"lodash.isequal\"));\n\telse\n\t\troot[\"powerbi-client-react\"] = factory(root[\"powerbi-client\"], root[\"react\"], root[\"lodash.isequal\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","// Copyright (c) Microsoft Corporation.\r\n// Licensed under the MIT License.\r\n\r\nimport * as React from 'react';\r\nimport {\r\n\tservice,\r\n\tfactories,\r\n\tReport,\r\n\tEmbed,\r\n\tDashboard,\r\n\tTile,\r\n\tQna,\r\n\tVisual,\r\n\tIEmbedSettings,\r\n\tIEmbedConfiguration,\r\n\tIQnaEmbedConfiguration,\r\n\tIVisualEmbedConfiguration,\r\n\tIReportEmbedConfiguration,\r\n\tIDashboardEmbedConfiguration,\r\n\tITileEmbedConfiguration,\r\n} from 'powerbi-client';\r\nimport { ReportLevelFilters } from 'powerbi-models';\r\nimport isEqual from 'lodash.isequal';\r\nimport { stringifyMap } from './utils';\r\n\r\n/**\r\n * Type for event handler function of embedded entity\r\n */\r\nexport type EventHandler = {\r\n\t(event?: service.ICustomEvent<any>, embeddedEntity?: Embed): void | null;\r\n};\r\n\r\n/**\r\n * Props interface for PowerBIEmbed component\r\n */\r\nexport interface EmbedProps {\r\n\r\n\t// Configuration for embedding the PowerBI entity (Required)\r\n\tembedConfig:\r\n\t\t| IReportEmbedConfiguration\r\n\t\t| IDashboardEmbedConfiguration\r\n\t\t| ITileEmbedConfiguration\r\n\t\t| IQnaEmbedConfiguration\r\n\t\t| IVisualEmbedConfiguration\r\n\t\t| IEmbedConfiguration;\r\n\r\n\t// Callback method to get the embedded PowerBI entity object (Optional)\r\n\tgetEmbeddedComponent?: { (embeddedComponent: Embed): void };\r\n\r\n\t// Map of pair of event name and its handler method to be triggered on the event (Optional)\r\n\teventHandlers?: Map<string, EventHandler>;\r\n\r\n\t// CSS class to be set on the embedding container (Optional)\r\n\tcssClassName?: string;\r\n\r\n\t// Phased embedding flag (Optional)\r\n\tphasedEmbedding?: boolean;\r\n\r\n\t// Provide a custom implementation of PowerBI service (Optional)\r\n\tservice?: service.Service;\r\n}\r\n\r\nexport enum EmbedType {\r\n\tReport = 'report',\r\n\tDashboard = 'dashboard',\r\n\tTile = 'tile',\r\n\tQna = 'qna',\r\n\tVisual = 'visual'\r\n}\r\n\r\n/**\r\n * Base react component to embed Power BI entities like: reports, dashboards, tiles, visual and qna containers.\r\n */\r\nexport class PowerBIEmbed extends React.Component<EmbedProps> {\r\n\r\n\t// Embedded entity\r\n\t// Note: Do not read or assign to this member variable directly, instead use the getter and setter\r\n\tprivate _embed?: Embed;\r\n\r\n\t// Powerbi service\r\n\tprivate powerbi: service.Service;\r\n\r\n\t// Ref to the HTML div element\r\n\tprivate containerRef = React.createRef<HTMLDivElement>();\r\n\r\n\t// JSON stringify of prev event handler map\r\n\tprivate prevEventHandlerMapString = '';\r\n\r\n\t// Getter for this._embed\r\n\tprivate get embed(): Embed | undefined {\r\n\t\treturn this._embed;\r\n\t};\r\n\r\n\t// Setter for this._embed\r\n\tprivate set embed(newEmbedInstance: Embed | undefined) {\r\n\t\tthis._embed = newEmbedInstance;\r\n\r\n\t\t// Invoke callback method in props to return this embed instance\r\n\t\tthis.invokeGetEmbedCallback();\r\n\t};\r\n\r\n\tconstructor(props: EmbedProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tif (this.props.service) {\r\n\t\t\tthis.powerbi = this.props.service;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.powerbi = new service.Service(\r\n\t\t\t\tfactories.hpmFactory,\r\n\t\t\t\tfactories.wpmpFactory,\r\n\t\t\t\tfactories.routerFactory);\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentDidMount(): void {\r\n\r\n\t\t// Check if HTML container is available\r\n\t\tif (this.containerRef.current) {\r\n\r\n\t\t\t// Decide to embed, load or bootstrap\r\n\t\t\tif (this.props.embedConfig.accessToken && this.props.embedConfig.embedUrl) {\r\n\t\t\t\tthis.embedEntity();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.embed = this.powerbi.bootstrap(this.containerRef.current, this.props.embedConfig);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Set event handlers if available\r\n\t\tif (this.props.eventHandlers && this.embed) {\r\n\t\t\tthis.setEventHandlers(this.embed, this.props.eventHandlers);\r\n\t\t}\r\n\t};\r\n\r\n\tasync componentDidUpdate(prevProps: EmbedProps): Promise<void> {\r\n\r\n\t\tthis.embedOrUpdateAccessToken(prevProps);\r\n\r\n\t\t// Set event handlers if available\r\n\t\tif (this.props.eventHandlers && this.embed) {\r\n\t\t\tthis.setEventHandlers(this.embed, this.props.eventHandlers);\r\n\t\t}\r\n\r\n\t\t// Allow settings update only when settings object in embedConfig of current and previous props is different\r\n\t\tif (!isEqual(this.props.embedConfig.settings, prevProps.embedConfig.settings)) {\r\n\t\t\tawait this.updateSettings();\r\n\t\t}\r\n\r\n\t\t// Update pageName and filters for a report\r\n\t\tif (this.props.embedConfig.type === EmbedType.Report) {\r\n\t\t\ttry {\r\n\t\t\t\t// Typecasting to IReportEmbedConfiguration\r\n\t\t\t\tconst embedConfig = this.props.embedConfig as IReportEmbedConfiguration;\r\n\t\t\t\tconst filters = embedConfig.filters as ReportLevelFilters[];\r\n\t\t\t\tconst prevEmbedConfig = prevProps.embedConfig as IReportEmbedConfiguration;\r\n\r\n\t\t\t\t// Set new page if available and different from the previous page\r\n\t\t\t\tif (embedConfig.pageName && embedConfig.pageName !== prevEmbedConfig.pageName) {\r\n\t\t\t\t\t// Upcast to Report and call setPage\r\n\t\t\t\t\tawait (this.embed as Report).setPage(embedConfig.pageName);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set filters on the embedded report if available and different from the previous filter\r\n\t\t\t\tif (filters && !isEqual(filters, prevEmbedConfig.filters)) {\r\n\t\t\t\t\t// Upcast to Report and call setFilters\r\n\t\t\t\t\tawait (this.embed as Report).setFilters(filters);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Remove filters on the embedded report, if previously applied\r\n\t\t\t\telse if (!filters && prevEmbedConfig.filters) {\r\n\t\t\t\t\t// Upcast to Report and call removeFilters\r\n\t\t\t\t\tawait (this.embed as Report).removeFilters();\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentWillUnmount(): void {\r\n\t\t// Clean Up\r\n\t\tif (this.containerRef.current) {\r\n\t\t\tthis.powerbi.reset(this.containerRef.current);\r\n\t\t}\r\n\t};\r\n\r\n\trender(): JSX.Element {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={this.containerRef}\r\n\t\t\t\tclassName={this.props.cssClassName}>\r\n\t\t\t</div>\r\n\t\t)\r\n\t};\r\n\r\n\t/**\r\n\t * Embed the powerbi entity (Load for phased embedding)\r\n\t */\r\n\tprivate embedEntity(): void {\r\n\t\t// Check if the HTML container is rendered and available\r\n\t\tif (!this.containerRef.current) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Load when props.phasedEmbedding is true and embed type is report, embed otherwise\r\n\t\tif (this.props.phasedEmbedding && this.props.embedConfig.type === EmbedType.Report) {\r\n\t\t\tthis.embed = this.powerbi.load(this.containerRef.current, this.props.embedConfig);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.props.phasedEmbedding) {\r\n\t\t\t\tconsole.error(`Phased embedding is not supported for type ${this.props.embedConfig.type}`)\r\n\t\t\t}\r\n\t\t\tthis.embed = this.powerbi.embed(this.containerRef.current, this.props.embedConfig);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * When component updates, choose to _embed_ the powerbi entity or _update the accessToken_ in the embedded entity \r\n\t * or do nothing if the embedUrl and accessToken did not update in the new props\r\n\t * \r\n\t * @param prevProps EmbedProps\r\n\t * @returns void\r\n\t */\r\n\tprivate embedOrUpdateAccessToken(prevProps: EmbedProps): void {\r\n\r\n\t\t// Check if Embed URL and Access Token are present in current props\r\n\t\tif (!this.props.embedConfig.accessToken || !this.props.embedConfig.embedUrl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Embed or load in the following scenarios\r\n\t\t//\t\t1. AccessToken was not provided in prev props (E.g. Report was bootstrapped earlier)\r\n\t\t//\t\t2. Embed URL is updated (E.g. New report is to be embedded)\r\n\t\tif (\r\n\t\t\tthis.containerRef.current &&\r\n\t\t\t(!prevProps.embedConfig.accessToken ||\r\n\t\t\t\tthis.props.embedConfig.embedUrl !== prevProps.embedConfig.embedUrl)\r\n\t\t) {\r\n\t\t\tthis.embedEntity();\r\n\t\t}\r\n\r\n\t\t// Set new access token,\r\n\t\t// when access token is updated but embed Url is same\r\n\t\telse if (\r\n\t\t\tthis.props.embedConfig.accessToken !== prevProps.embedConfig.accessToken &&\r\n\t\t\tthis.props.embedConfig.embedUrl === prevProps.embedConfig.embedUrl &&\r\n\t\t\tthis.embed\r\n\t\t) {\r\n\t\t\tthis.embed.setAccessToken(this.props.embedConfig.accessToken)\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.error(`setAccessToken error: ${error}`);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets all event handlers from the props on the embedded entity\r\n\t * \r\n\t * @param embed Embedded object\r\n\t * @param eventHandlers Array of eventhandlers to be set on embedded entity\r\n\t * @returns void\r\n\t */\r\n\tprivate setEventHandlers(\r\n\t\tembed: Embed,\r\n\t\teventHandlerMap: Map<string, EventHandler>\r\n\t): void {\r\n\t\t// Get string representation of eventHandlerMap\r\n\t\tconst eventHandlerMapString = stringifyMap(this.props.eventHandlers);\r\n\r\n\t\t// Check if event handler map changed\r\n\t\tif (this.prevEventHandlerMapString === eventHandlerMapString) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update prev string representation of event handler map\r\n\t\tthis.prevEventHandlerMapString = eventHandlerMapString;\r\n\r\n\t\t// List of allowed events\r\n\t\tlet allowedEvents = Embed.allowedEvents;\r\n\r\n\t\tconst entityType = embed.embedtype;\r\n\r\n\t\t// Append entity specific events\r\n\t\tswitch (entityType) {\r\n\t\t\tcase EmbedType.Report:\r\n\t\t\t\tallowedEvents = [...allowedEvents, ...Report.allowedEvents]\r\n\t\t\t\tbreak;\r\n\t\t\tcase EmbedType.Dashboard:\r\n\t\t\t\tallowedEvents = [...allowedEvents, ...Dashboard.allowedEvents]\r\n\t\t\t\tbreak;\r\n\t\t\tcase EmbedType.Tile:\r\n\t\t\t\tallowedEvents = [...allowedEvents, ...Tile.allowedEvents]\r\n\t\t\t\tbreak;\r\n\t\t\tcase EmbedType.Qna:\r\n\t\t\t\tallowedEvents = [...allowedEvents, ...Qna.allowedEvents]\r\n\t\t\t\tbreak;\r\n\t\t\tcase EmbedType.Visual:\r\n\t\t\t\tallowedEvents = [...allowedEvents, ...Visual.allowedEvents]\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error(`Invalid embed type ${entityType}`);\r\n\t\t}\r\n\r\n\t\t// Holds list of events which are not allowed\r\n\t\tconst invalidEvents: Array<string> = [];\r\n\r\n\t\t// Apply all provided event handlers\r\n\t\teventHandlerMap.forEach((eventHandlerMethod, eventName) => {\r\n\t\t\t// Check if this event is allowed\r\n\t\t\tif (allowedEvents.includes(eventName)) {\r\n\r\n\t\t\t\t// Removes event handler for this event\r\n\t\t\t\tembed.off(eventName);\r\n\r\n\t\t\t\t// Event handler is effectively removed for this event when eventHandlerMethod is null\r\n\t\t\t\tif (eventHandlerMethod) {\r\n\r\n\t\t\t\t\t// Set single event handler\r\n\t\t\t\t\tembed.on(eventName, (event: service.ICustomEvent<any>): void => {\r\n\t\t\t\t\t\teventHandlerMethod(event, this.embed);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t// Add this event name to the list of invalid events\r\n\t\t\t\tinvalidEvents.push(eventName);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Handle invalid events\r\n\t\tif (invalidEvents.length) {\r\n\t\t\tconsole.error(`Following events are invalid: ${invalidEvents.join(',')}`);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the embedded object via _getEmbed_ callback method provided in props\r\n\t * \r\n\t * @returns void\r\n\t */\r\n\tprivate invokeGetEmbedCallback(): void {\r\n\t\tif (this.props.getEmbeddedComponent && this.embed) {\r\n\t\t\tthis.props.getEmbeddedComponent(this.embed);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Update settings from props of the embedded artifact\r\n\t * \r\n\t * @returns void\r\n\t */\r\n\tprivate async updateSettings(): Promise<void> {\r\n\t\tif (!this.embed || !this.props.embedConfig.settings) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch (this.props.embedConfig.type) {\r\n\t\t\tcase EmbedType.Report: {\r\n\t\t\t\t// Typecasted to IEmbedSettings as props.embedConfig.settings can be ISettings via IQnaEmbedConfiguration\r\n\t\t\t\tconst settings = this.props.embedConfig.settings as IEmbedSettings;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Upcast to Report and call updateSettings\r\n\t\t\t\t\tawait (this.embed as Report).updateSettings(settings);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(`Error in method updateSettings: ${error}`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase EmbedType.Dashboard:\r\n\t\t\tcase EmbedType.Tile:\r\n\t\t\tcase EmbedType.Qna:\r\n\t\t\tcase EmbedType.Visual:\r\n\t\t\t\t// updateSettings not applicable for these embedding types\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.error(`Invalid embed type ${this.props.embedConfig.type}`);\r\n\t\t}\r\n\t};\r\n}\r\n","// Copyright (c) Microsoft Corporation.\r\n// Licensed under the MIT License.\r\n\r\nimport { EmbedProps } from \"./PowerBIEmbed\";\r\n\r\n/**\r\n * Get JSON string representation of the given map.\r\n * \r\n * @param map Map of event and corresponding handler method\r\n * \r\n * For example:\r\n * Input:\r\n * ```\r\n *  Map([\r\n\t\t['loaded', null],\r\n\t\t['rendered', function () { console.log('Rendered'); }]\r\n\t]);\r\n * ```\r\n * Output:\r\n * ```\r\n * `[[\"loaded\",\"\"],[\"rendered\",\"function () { console.log('Rendered'); }\"]]`\r\n * ```\r\n */\r\nexport function stringifyMap(map: EmbedProps['eventHandlers']): string {\r\n\r\n\t// Return empty string for empty/null map\r\n\tif (!map) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\t// Get entries of map as array\r\n\tconst mapEntries = Array.from(map);\r\n\t\r\n\t// Return JSON string\r\n\treturn JSON.stringify(mapEntries.map((mapEntry) => {\r\n\t\t\r\n\t\t// Convert event handler method to a string containing its source code for comparison\r\n\t\treturn [\r\n\t\t\tmapEntry[0], \r\n\t\t\tmapEntry[1] ? mapEntry[1].toString() : ''\r\n\t\t]; \r\n\t}));\r\n};"],"sourceRoot":""},"metadata":{},"sourceType":"script"}