{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\RiskPolicy\\\\PolicyCard.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport get from 'lodash/get'; // app\n\nimport styles from './PolicyCard.style';\nimport { Avatar, Button, FormGrid } from 'components';\nimport * as utils from 'utils'; // mui\n\nimport { makeStyles, withStyles, Box, Card, CardHeader, CardActions, CardContent, Typography, LinearProgress } from '@material-ui/core';\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: 'auto',\n      width: '100%',\n      minHeight: 262\n    },\n    title: {\n      color: 'black!important'\n    },\n    value: {\n      color: 'black!important',\n      fontWeight: 600,\n      margin: 0\n    }\n  };\n});\n\nvar QuoteLine = function QuoteLine(_ref) {\n  _s();\n\n  var title = _ref.title,\n      value = _ref.value,\n      _ref$titleVariant = _ref.titleVariant,\n      titleVariant = _ref$titleVariant === void 0 ? 'body2' : _ref$titleVariant;\n  var classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FormGrid, {\n      item: true,\n      xs: 4,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        className: classes.title,\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(FormGrid, {\n      item: true,\n      xs: 8,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: titleVariant,\n        className: classes.value,\n        children: value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(QuoteLine, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c = QuoteLine;\nvar BorderLinearProgress = withStyles(function (theme) {\n  return {\n    root: {\n      height: 20\n    },\n    colorPrimary: {\n      backgroundColor: theme.palette.success.main\n    },\n    bar: {\n      backgroundColor: theme.palette.success.dark\n    }\n  };\n})(LinearProgress);\n\nvar PolicyCard = function PolicyCard(_ref2) {\n  _s2();\n\n  var policy = _ref2.policy,\n      riskInsuredId = _ref2.riskInsuredId,\n      parties = _ref2.parties,\n      handleDownloadQuote = _ref2.handleDownloadQuote;\n  var classes = makeStyles(styles, {\n    name: 'PolicyCard'\n  })();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      height = _useState2[0],\n      setHeight = _useState2[1];\n\n  var ref = useRef(null);\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 1),\n      isLoading = _useState4[0];\n\n  var carrierName = get(policy, 'carrierName');\n  var quotePremium = policy === null || policy === void 0 ? void 0 : policy.premium;\n  var hasTemplate = policy === null || policy === void 0 ? void 0 : policy.hasTemplate;\n  var policyResponse = policy === null || policy === void 0 ? void 0 : policy.response;\n  var policyNumber = policy.facility.brokerCode && policy.declarationNumber ? \"\".concat(policy.facility.brokerCode).concat(policy.declarationNumber) : '';\n  var premiumValue = \"\".concat((policy === null || policy === void 0 ? void 0 : policy.currency) ? utils.string.t(policy.currency) : '', \" \").concat(utils.string.t('format.number', {\n    value: {\n      number: quotePremium,\n      default: '-'\n    }\n  }));\n  var today = utils.date.today();\n  var effectivePastPercent = utils.date.datePercent(policyResponse.effectiveFrom, policyResponse.effectiveTo, today);\n  useEffect(function () {\n    setHeight(ref.current.clientHeight);\n  }, []);\n\n  var subheader = /*#__PURE__*/_jsxDEV(Box, {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    children: carrierName\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 21\n  }, _this);\n\n  return isLoading ? /*#__PURE__*/_jsxDEV(PolicyCardSkeleton, {\n    height: height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      ref: ref,\n      classes: {\n        root: classes.card\n      },\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          icon: HowToVoteIcon,\n          size: 32,\n          border: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 19\n        }, _this),\n        title: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          className: classes.cardFacility,\n          style: {\n            textAlign: 'left'\n          },\n          children: \"\".concat(policyNumber)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, _this),\n        subheader: subheader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n        classes: {\n          root: classes.cardContent\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          pb: 2,\n          children: /*#__PURE__*/_jsxDEV(BorderLinearProgress, {\n            variant: \"determinate\",\n            value: effectivePastPercent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Box, {\n          p: 2,\n          children: /*#__PURE__*/_jsxDEV(FormGrid, {\n            container: true,\n            spacing: 1,\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(QuoteLine, {\n              title: utils.string.t('app.premium'),\n              value: premiumValue,\n              titleVariant: \"h5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(QuoteLine, {\n              title: utils.string.t('risks.effectiveFrom'),\n              value: utils.string.t('format.date', {\n                value: {\n                  date: policyResponse.effectiveFrom,\n                  format: 'll',\n                  default: '-'\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(QuoteLine, {\n              title: utils.string.t('risks.effectiveTo'),\n              value: utils.string.t('format.date', {\n                value: {\n                  date: policyResponse.effectiveTo,\n                  format: 'll',\n                  default: '-'\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, _this), hasTemplate ? /*#__PURE__*/_jsxDEV(CardActions, {\n        disableSpacing: true,\n        classes: {\n          root: classes.cardActions\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          px: 1,\n          pb: 0.5,\n          ml: \"auto\",\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          justifyContent: \"flex-end\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            mr: 1,\n            mb: 1,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"xsmall\",\n              icon: PictureAsPdfIcon,\n              color: \"secondary\",\n              text: utils.string.t('risks.downloadPolicy'),\n              nestedClasses: {\n                icon: classes.icon\n              },\n              onClick: handleDownloadQuote({\n                quote: policy,\n                insureds: utils.risk.getPartyValues('insureds', parties, riskInsuredId)\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, _this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_s2(PolicyCard, \"T1TdNyGuG8VWTBhT2g6ByPwKCmY=\");\n\n_c2 = PolicyCard;\nexport var PolicyCardSkeleton = function PolicyCardSkeleton(_ref3) {\n  _s3();\n\n  var _ref3$height = _ref3.height,\n      height = _ref3$height === void 0 ? 'auto' : _ref3$height;\n  var classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(Card, {\n    \"data-testid\": \"skeleton-policy-card\",\n    classes: {\n      root: classes.root\n    },\n    style: {\n      height: height\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      avatar: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        variant: \"circle\",\n        width: 40,\n        height: 40\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, _this),\n      title: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 10,\n        width: \"80%\",\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 16\n      }, _this),\n      subheader: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 10,\n        width: \"40%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 20\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20,\n          style: {\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20,\n          style: {\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n      classes: {\n        root: classes.cardContentCommission\n      },\n      children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20,\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20,\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, _this);\n};\n\n_s3(PolicyCardSkeleton, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c3 = PolicyCardSkeleton;\nexport default PolicyCard;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"QuoteLine\");\n$RefreshReg$(_c2, \"PolicyCard\");\n$RefreshReg$(_c3, \"PolicyCardSkeleton\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/RiskPolicy/PolicyCard.js"],"names":["useState","useEffect","useRef","get","styles","Avatar","Button","FormGrid","utils","makeStyles","withStyles","Box","Card","CardHeader","CardActions","CardContent","Typography","LinearProgress","HowToVoteIcon","PictureAsPdfIcon","Skeleton","useStyles","theme","root","margin","width","minHeight","title","color","value","fontWeight","QuoteLine","titleVariant","classes","BorderLinearProgress","height","colorPrimary","backgroundColor","palette","success","main","bar","dark","PolicyCard","policy","riskInsuredId","parties","handleDownloadQuote","name","setHeight","ref","isLoading","carrierName","quotePremium","premium","hasTemplate","policyResponse","response","policyNumber","facility","brokerCode","declarationNumber","premiumValue","currency","string","t","number","default","today","date","effectivePastPercent","datePercent","effectiveFrom","effectiveTo","current","clientHeight","subheader","display","alignItems","card","cardFacility","textAlign","cardContent","format","cardActions","icon","quote","insureds","risk","getPartyValues","PolicyCardSkeleton","marginBottom","cardContentCommission"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport styles from './PolicyCard.style';\r\nimport { Avatar, Button, FormGrid } from 'components';\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport { makeStyles, withStyles, Box, Card, CardHeader, CardActions, CardContent, Typography, LinearProgress } from '@material-ui/core';\r\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: 'auto',\r\n    width: '100%',\r\n    minHeight: 262,\r\n  },\r\n\r\n  title: {\r\n    color: 'black!important',\r\n  },\r\n  value: {\r\n    color: 'black!important',\r\n    fontWeight: 600,\r\n    margin: 0,\r\n  },\r\n}));\r\n\r\nconst QuoteLine = ({ title, value, titleVariant = 'body2' }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <FormGrid item xs={4}>\r\n        <Typography variant=\"body2\" className={classes.title}>\r\n          {title}\r\n        </Typography>\r\n      </FormGrid>\r\n      <FormGrid item xs={8}>\r\n        <Typography variant={titleVariant} className={classes.value}>\r\n          {value}\r\n        </Typography>\r\n      </FormGrid>\r\n    </>\r\n  );\r\n};\r\n\r\nconst BorderLinearProgress = withStyles((theme) => ({\r\n  root: {\r\n    height: 20,\r\n  },\r\n  colorPrimary: {\r\n    backgroundColor: theme.palette.success.main,\r\n  },\r\n  bar: {\r\n    backgroundColor: theme.palette.success.dark,\r\n  },\r\n}))(LinearProgress);\r\n\r\nconst PolicyCard = ({ policy, riskInsuredId, parties, handleDownloadQuote }) => {\r\n  const classes = makeStyles(styles, { name: 'PolicyCard' })();\r\n\r\n  const [height, setHeight] = useState(0);\r\n  const ref = useRef(null);\r\n\r\n  const [isLoading] = useState(false);\r\n\r\n  const carrierName = get(policy, 'carrierName');\r\n  const quotePremium = policy?.premium;\r\n  const hasTemplate = policy?.hasTemplate;\r\n  const policyResponse = policy?.response;\r\n  const policyNumber =\r\n    policy.facility.brokerCode && policy.declarationNumber ? `${policy.facility.brokerCode}${policy.declarationNumber}` : '';\r\n\r\n  const premiumValue = `${policy?.currency ? utils.string.t(policy.currency) : ''} ${utils.string.t('format.number', {\r\n    value: { number: quotePremium, default: '-' },\r\n  })}`;\r\n\r\n  const today = utils.date.today();\r\n  const effectivePastPercent = utils.date.datePercent(policyResponse.effectiveFrom, policyResponse.effectiveTo, today);\r\n\r\n  useEffect(() => {\r\n    setHeight(ref.current.clientHeight);\r\n  }, []);\r\n\r\n  const subheader = <Box style={{ display: 'flex', alignItems: 'center' }}>{carrierName}</Box>;\r\n  return isLoading ? (\r\n    <PolicyCardSkeleton height={height} />\r\n  ) : (\r\n    <>\r\n      <Card ref={ref} classes={{ root: classes.card }}>\r\n        <CardHeader\r\n          avatar={<Avatar icon={HowToVoteIcon} size={32} border />}\r\n          title={\r\n            <Typography variant=\"h3\" className={classes.cardFacility} style={{ textAlign: 'left' }}>\r\n              {`${policyNumber}`}\r\n            </Typography>\r\n          }\r\n          subheader={subheader}\r\n        />\r\n        <CardContent classes={{ root: classes.cardContent }}>\r\n          <Box pb={2}>\r\n            <BorderLinearProgress variant=\"determinate\" value={effectivePastPercent} />\r\n          </Box>\r\n          <Box p={2}>\r\n            <FormGrid container spacing={1} alignItems=\"center\">\r\n              <QuoteLine title={utils.string.t('app.premium')} value={premiumValue} titleVariant=\"h5\" />\r\n              <QuoteLine\r\n                title={utils.string.t('risks.effectiveFrom')}\r\n                value={utils.string.t('format.date', {\r\n                  value: { date: policyResponse.effectiveFrom, format: 'll', default: '-' },\r\n                })}\r\n              />\r\n\r\n              <QuoteLine\r\n                title={utils.string.t('risks.effectiveTo')}\r\n                value={utils.string.t('format.date', {\r\n                  value: { date: policyResponse.effectiveTo, format: 'll', default: '-' },\r\n                })}\r\n              />\r\n            </FormGrid>\r\n          </Box>\r\n        </CardContent>\r\n\r\n        {hasTemplate ? (\r\n          <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n            <Box px={1} pb={0.5} ml=\"auto\" display=\"flex\" flexWrap=\"wrap\" justifyContent=\"flex-end\">\r\n              <Box mr={1} mb={1}>\r\n                <Button\r\n                  size=\"xsmall\"\r\n                  icon={PictureAsPdfIcon}\r\n                  color=\"secondary\"\r\n                  text={utils.string.t('risks.downloadPolicy')}\r\n                  nestedClasses={{ icon: classes.icon }}\r\n                  onClick={handleDownloadQuote({\r\n                    quote: policy,\r\n                    insureds: utils.risk.getPartyValues('insureds', parties, riskInsuredId),\r\n                  })}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </CardActions>\r\n        ) : null}\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const PolicyCardSkeleton = ({ height = 'auto' }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card data-testid=\"skeleton-policy-card\" classes={{ root: classes.root }} style={{ height }}>\r\n      <CardHeader\r\n        avatar={<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />}\r\n        title={<Skeleton animation=\"wave\" height={10} width=\"80%\" style={{ marginBottom: 6 }} />}\r\n        subheader={<Skeleton animation=\"wave\" height={10} width=\"40%\" />}\r\n      />\r\n\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={20} />\r\n        </>\r\n      </CardContent>\r\n      <CardContent classes={{ root: classes.cardContentCommission }}>\r\n        <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n        <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n        <Skeleton animation=\"wave\" height={20} />\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default PolicyCard;\r\n"]},"metadata":{},"sourceType":"module"}