{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport get from 'lodash/get'; // app\n\nimport * as utils from 'utils';\nimport config from 'config';\nimport { authLogout } from 'stores';\nexport var getReportListExtended = function getReportListExtended() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var reportGroupId = arguments.length > 1 ? arguments[1] : undefined;\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint,\n        reportListExtended = _getState.reportingExtended.reportListExtended;\n\n    var page = params.page,\n        size = params.size,\n        sortBy = params.sortBy,\n        direction = params.direction,\n        searchBy = params.searchBy;\n    var defaultError = {\n      file: 'stores/reportingExtended.actions.getReportListExtended'\n    };\n    var prevQuery = get(reportListExtended, 'query') || '';\n    var newQuery = params.hasOwnProperty('searchBy') ? searchBy : prevQuery;\n\n    var apiParams = _objectSpread({\n      page: page || 1,\n      pageSize: size || (reportListExtended === null || reportListExtended === void 0 ? void 0 : reportListExtended.pageSize),\n      sortBy: sortBy || (reportListExtended === null || reportListExtended === void 0 ? void 0 : reportListExtended.sortBy),\n      direction: direction || (reportListExtended === null || reportListExtended === void 0 ? void 0 : reportListExtended.sortDirection) || ''\n    }, newQuery && {\n      query: newQuery\n    });\n\n    dispatch(getReportListExtendedRequest(params));\n\n    if (!reportGroupId) {\n      dispatch(getReportListExtendedFailure(defaultError));\n      return;\n    }\n\n    return utils.api.get({\n      token: auth.accessToken,\n      endpoint: endpoint.odsService,\n      path: \"reports/group/\".concat(reportGroupId),\n      params: apiParams\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleNewData(json);\n    }).then(function (data) {\n      dispatch(getReportListExtendedSuccess(data));\n    })[\"catch\"](function (err) {\n      utils.api.handleError(err, defaultError);\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      dispatch(getReportListExtendedFailure(err));\n      return err;\n    });\n  };\n};\nexport var getReportListExtendedRequest = function getReportListExtendedRequest(params) {\n  return {\n    type: 'REPORTING_EXTENDED_GET_REPORT_LIST_REQUEST',\n    payload: params\n  };\n};\nexport var getReportListExtendedSuccess = function getReportListExtendedSuccess(data) {\n  var _data$data, _data$pagination, _data$pagination2, _data$pagination3, _data$pagination4, _data$pagination5, _data$data2, _data$data3, _data$data4, _data$pagination6, _data$pagination7;\n\n  return {\n    type: 'REPORTING_EXTENDED_GET_REPORT_LIST_SUCCESS',\n    payload: {\n      content: data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.reports,\n      pagination: {\n        itemsTotal: (data === null || data === void 0 ? void 0 : (_data$pagination = data.pagination) === null || _data$pagination === void 0 ? void 0 : _data$pagination.totalElements) || 0,\n        page: (data === null || data === void 0 ? void 0 : (_data$pagination2 = data.pagination) === null || _data$pagination2 === void 0 ? void 0 : _data$pagination2.page) || 1,\n        pageSize: (data === null || data === void 0 ? void 0 : (_data$pagination3 = data.pagination) === null || _data$pagination3 === void 0 ? void 0 : _data$pagination3.size) || config.ui.pagination[\"default\"],\n        pageTotal: (data === null || data === void 0 ? void 0 : (_data$pagination4 = data.pagination) === null || _data$pagination4 === void 0 ? void 0 : _data$pagination4.totalPages) || 0,\n        query: (data === null || data === void 0 ? void 0 : (_data$pagination5 = data.pagination) === null || _data$pagination5 === void 0 ? void 0 : _data$pagination5.searchBy) || ''\n      },\n      selectedReportGroup: {\n        description: data === null || data === void 0 ? void 0 : (_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : _data$data2.description,\n        id: data === null || data === void 0 ? void 0 : (_data$data3 = data.data) === null || _data$data3 === void 0 ? void 0 : _data$data3.id,\n        name: data === null || data === void 0 ? void 0 : (_data$data4 = data.data) === null || _data$data4 === void 0 ? void 0 : _data$data4.name\n      },\n      sort: {\n        sortBy: data === null || data === void 0 ? void 0 : (_data$pagination6 = data.pagination) === null || _data$pagination6 === void 0 ? void 0 : _data$pagination6.orderBy,\n        sortDirection: (data === null || data === void 0 ? void 0 : (_data$pagination7 = data.pagination) === null || _data$pagination7 === void 0 ? void 0 : _data$pagination7.direction) || ''\n      }\n    }\n  };\n};\nexport var getReportListExtendedFailure = function getReportListExtendedFailure(err) {\n  return {\n    type: 'REPORTING_EXTENDED_GET_REPORT_LIST_FAILURE',\n    payload: err\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/reportingExtended/reportingExtended.actions.getReportListExtended.js"],"names":["get","utils","config","authLogout","getReportListExtended","params","reportGroupId","dispatch","getState","auth","user","endpoint","vars","reportListExtended","reportingExtended","page","size","sortBy","direction","searchBy","defaultError","file","prevQuery","newQuery","hasOwnProperty","apiParams","pageSize","sortDirection","query","getReportListExtendedRequest","getReportListExtendedFailure","api","token","accessToken","odsService","path","then","response","handleResponse","json","handleNewData","data","getReportListExtendedSuccess","err","handleError","handleUnauthorized","type","payload","content","reports","pagination","itemsTotal","totalElements","ui","pageTotal","totalPages","selectedReportGroup","description","id","name","sort","orderBy"],"mappings":"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","sourcesContent":["import get from 'lodash/get';\r\n\r\n// app\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport { authLogout } from 'stores';\r\n\r\nexport const getReportListExtended =\r\n  (params = {}, reportGroupId) =>\r\n  (dispatch, getState) => {\r\n    // prettier-ignore\r\n    const { user: { auth }, config: { vars: { endpoint } }, reportingExtended: { reportListExtended } } = getState();\r\n\r\n    const { page, size, sortBy, direction, searchBy } = params;\r\n\r\n    const defaultError = {\r\n      file: 'stores/reportingExtended.actions.getReportListExtended',\r\n    };\r\n\r\n    const prevQuery = get(reportListExtended, 'query') || '';\r\n    const newQuery = params.hasOwnProperty('searchBy') ? searchBy : prevQuery;\r\n\r\n    const apiParams = {\r\n      page: page || 1,\r\n      pageSize: size || reportListExtended?.pageSize,\r\n      sortBy: sortBy || reportListExtended?.sortBy,\r\n      direction: direction || reportListExtended?.sortDirection || '',\r\n      ...(newQuery && { query: newQuery }),\r\n    };\r\n\r\n    dispatch(getReportListExtendedRequest(params));\r\n\r\n    if (!reportGroupId) {\r\n      dispatch(getReportListExtendedFailure(defaultError));\r\n      return;\r\n    }\r\n\r\n    return utils.api\r\n      .get({\r\n        token: auth.accessToken,\r\n        endpoint: endpoint.odsService,\r\n        path: `reports/group/${reportGroupId}`,\r\n        params: apiParams,\r\n      })\r\n      .then((response) => utils.api.handleResponse(response))\r\n      .then((json) => utils.api.handleNewData(json))\r\n      .then((data) => {\r\n        dispatch(getReportListExtendedSuccess(data));\r\n      })\r\n      .catch((err) => {\r\n        utils.api.handleError(err, defaultError);\r\n        utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n        dispatch(getReportListExtendedFailure(err));\r\n        return err;\r\n      });\r\n  };\r\n\r\nexport const getReportListExtendedRequest = (params) => {\r\n  return {\r\n    type: 'REPORTING_EXTENDED_GET_REPORT_LIST_REQUEST',\r\n    payload: params,\r\n  };\r\n};\r\n\r\nexport const getReportListExtendedSuccess = (data) => {\r\n  return {\r\n    type: 'REPORTING_EXTENDED_GET_REPORT_LIST_SUCCESS',\r\n    payload: {\r\n      content: data?.data?.reports,\r\n      pagination: {\r\n        itemsTotal: data?.pagination?.totalElements || 0,\r\n        page: data?.pagination?.page || 1,\r\n        pageSize: data?.pagination?.size || config.ui.pagination.default,\r\n        pageTotal: data?.pagination?.totalPages || 0,\r\n        query: data?.pagination?.searchBy || '',\r\n      },\r\n      selectedReportGroup: {\r\n        description: data?.data?.description,\r\n        id: data?.data?.id,\r\n        name: data?.data?.name,\r\n      },\r\n      sort: {\r\n        sortBy: data?.pagination?.orderBy,\r\n        sortDirection: data?.pagination?.direction || '',\r\n      },\r\n    },\r\n  };\r\n};\r\n\r\nexport const getReportListExtendedFailure = (err) => {\r\n  return {\r\n    type: 'REPORTING_EXTENDED_GET_REPORT_LIST_FAILURE',\r\n    payload: err,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}