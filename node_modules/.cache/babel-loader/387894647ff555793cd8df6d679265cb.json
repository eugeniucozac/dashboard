{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\RfiQueryForm\\\\RfiQueryForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport * as Yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { useHistory } from 'react-router';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux'; //app\n\nimport * as utils from 'utils';\nimport { RfiQueryFormView } from './RfiQueryForm.view';\nimport { Loader } from 'components';\nimport config from 'config';\nimport { CREATE_RFI_FORM, TASK_TAB_COMPLETED_STATUS } from 'consts';\nimport { getUsersByOrg, selectClaimsAssignedToUsers, postSendRFI, postCloseRFI, showModal, selectUserEmail, resetClaimsAssignedToUsers, setDmsTaskContextType, selectDmsClientSideUploadFiles, postDmsDocuments, resetDmsClientSideUploadedDocuments, removeDmsClientSideUploadedDocuments } from 'stores';\nimport * as constants from 'consts'; // mui\n\nimport { Box } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RfiQueryForm(props) {\n  _s();\n\n  var _useSelector, _rfiTask$requestedBy3;\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var assignedToUsers = ((_useSelector = useSelector(selectClaimsAssignedToUsers)) === null || _useSelector === void 0 ? void 0 : _useSelector.items) || null;\n  var userEmail = useSelector(selectUserEmail);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      resetKey = _useState2[0],\n      setResetKey = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isDataReady = _useState4[0],\n      setIsDataReady = _useState4[1];\n\n  var clientUploadedFiles = useSelector(selectDmsClientSideUploadFiles);\n  var documentNameList = clientUploadedFiles === null || clientUploadedFiles === void 0 ? void 0 : clientUploadedFiles.documentNameList;\n  var rfiTask = props.rfiTask;\n\n  var defaultAssignedUser = function defaultAssignedUser() {\n    var _rfiTask$requestedBy;\n\n    return (userEmail === null || userEmail === void 0 ? void 0 : userEmail.toLowerCase()) === (rfiTask === null || rfiTask === void 0 ? void 0 : (_rfiTask$requestedBy = rfiTask.requestedBy) === null || _rfiTask$requestedBy === void 0 ? void 0 : _rfiTask$requestedBy.toLowerCase()) ? assignedToUsers === null || assignedToUsers === void 0 ? void 0 : assignedToUsers.find(function (_ref) {\n      var _rfiTask$rfiSentTo;\n\n      var email = _ref.email;\n      return (email === null || email === void 0 ? void 0 : email.toLowerCase()) === (rfiTask === null || rfiTask === void 0 ? void 0 : (_rfiTask$rfiSentTo = rfiTask.rfiSentTo) === null || _rfiTask$rfiSentTo === void 0 ? void 0 : _rfiTask$rfiSentTo.toLowerCase());\n    }) : utils.generic.isValidArray(assignedToUsers, true) ? assignedToUsers === null || assignedToUsers === void 0 ? void 0 : assignedToUsers.find(function (_ref2) {\n      var _rfiTask$requestedBy2;\n\n      var email = _ref2.email;\n      return (email === null || email === void 0 ? void 0 : email.toLowerCase()) === (rfiTask === null || rfiTask === void 0 ? void 0 : (_rfiTask$requestedBy2 = rfiTask.requestedBy) === null || _rfiTask$requestedBy2 === void 0 ? void 0 : _rfiTask$requestedBy2.toLowerCase());\n    }) : null;\n  };\n\n  var fields = [{\n    name: 'sendTo',\n    type: 'autocompletemui',\n    value: defaultAssignedUser(),\n    options: utils.generic.isValidArray(assignedToUsers, true) ? assignedToUsers : [],\n    optionKey: 'email',\n    optionLabel: 'fullName',\n    muiComponentProps: {\n      disabled: (rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.status) === TASK_TAB_COMPLETED_STATUS\n    },\n    validation: Yup.object().required(utils.string.t('validation.required'))\n  }, {\n    name: 'description',\n    type: 'textarea',\n    hint: utils.string.t('claims.processing.validation.rfiHistoryMaxDesc', {\n      char: 1000\n    }),\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 1000\n      },\n      multiline: true,\n      rows: 3,\n      rowsMax: 3,\n      'data-testid': 'details'\n    },\n    validation: Yup.string().required(utils.string.t('validation.required')).max(1000, utils.string.t('claims.processing.validation.rfiHistoryMaxDesc', {\n      char: 1000\n    }))\n  }];\n  var actions = [{\n    name: 'secondary',\n    label: utils.string.t('app.close'),\n    disabled: userEmail.toLowerCase() !== (rfiTask === null || rfiTask === void 0 ? void 0 : (_rfiTask$requestedBy3 = rfiTask.requestedBy) === null || _rfiTask$requestedBy3 === void 0 ? void 0 : _rfiTask$requestedBy3.toLowerCase()),\n    handler: function handler() {\n      handleCloseRFI();\n    }\n  }, {\n    name: 'submit',\n    label: utils.string.t('app.reply'),\n    handler: function handler(values) {\n      handleRFISend(values);\n    }\n  }];\n\n  var handleRFISend = function handleRFISend(values) {\n    if (values) {\n      var _values2, _props$selectedQueryC;\n\n      var sendToObj = assignedToUsers.find(function (user) {\n        var _values, _values$sendTo;\n\n        return user.email === ((_values = values) === null || _values === void 0 ? void 0 : (_values$sendTo = _values.sendTo) === null || _values$sendTo === void 0 ? void 0 : _values$sendTo.email);\n      });\n      var rfiSendData = {\n        assignedTo: sendToObj === null || sendToObj === void 0 ? void 0 : sendToObj.email,\n        bpmTaskID: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.taskId,\n        caseIncidentID: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.caseIncidentID,\n        notes: (_values2 = values) === null || _values2 === void 0 ? void 0 : _values2.description,\n        team: sendToObj === null || sendToObj === void 0 ? void 0 : sendToObj.organisationName,\n        queryCodeDescription: props === null || props === void 0 ? void 0 : (_props$selectedQueryC = props.selectedQueryCode) === null || _props$selectedQueryC === void 0 ? void 0 : _props$selectedQueryC.queryCodeDescription\n      };\n      dispatch(postSendRFI(rfiSendData)).then(function (data) {\n        if (data.status === constants.API_RESPONSE_OK) {\n          var _data$data = data.data,\n              caseIncidentID = _data$data.caseIncidentID,\n              caseIncidentNotesID = _data$data.caseIncidentNotesID;\n\n          if (caseIncidentID && caseIncidentNotesID) {\n            dispatch(setDmsTaskContextType({\n              caseIncidentID: caseIncidentID,\n              caseIncidentNotesID: caseIncidentNotesID\n            }));\n            var uploadedFileDetails = clientUploadedFiles === null || clientUploadedFiles === void 0 ? void 0 : clientUploadedFiles.fileDetails;\n            var documentTypeKey = uploadedFileDetails.documentTypeKey,\n                submitData = uploadedFileDetails.submitData,\n                submitFiles = uploadedFileDetails.submitFiles;\n            dispatch(postDmsDocuments({\n              context: constants.DMS_CONTEXT_CASE,\n              documentTypeKey: documentTypeKey,\n              submitData: submitData,\n              submitFiles: submitFiles\n            })).then(function (data) {\n              if (data.status === constants.API_RESPONSE_OK) {\n                var _props$handlers;\n\n                values = null;\n                dispatch(resetDmsClientSideUploadedDocuments());\n                (_props$handlers = props.handlers) === null || _props$handlers === void 0 ? void 0 : _props$handlers.getRfiHistoryDetails();\n              }\n            });\n          }\n        }\n      });\n    }\n  };\n\n  var handleCloseRFI = function handleCloseRFI() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('status.alert'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('app.yes'),\n          cancelLabel: utils.string.t('app.no'),\n          confirmMessage: utils.string.t('claims.processing.modal.rfiCloseConfirm'),\n          buttonColors: {\n            confirm: 'secondary',\n            cancel: 'default'\n          },\n          submitHandler: function submitHandler() {\n            dispatch(postCloseRFI(rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.taskId, history)).then(function (data) {\n              if (data.status === 'OK') {\n                setTimeout(function () {\n                  return history.replace(config.routes.claimsProcessing.root);\n                }, 1000);\n              }\n            });\n          }\n        }\n      }\n    }));\n  };\n\n  var handleAttachDocuments = function handleAttachDocuments() {\n    dispatch(showModal({\n      component: 'DMS_UPLOAD_FILES_CLIENT_SIDE',\n      props: {\n        title: utils.string.t('claims.rfiDashboard.attachDocuments'),\n        fullWidth: true,\n        maxWidth: 'xl',\n        componentProps: {\n          referenceId: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.taskId,\n          sourceId: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.sourceID,\n          documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.claim\n        }\n      }\n    }));\n  };\n\n  var confirmDocumentDelete = function confirmDocumentDelete(index) {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('dms.view.deleteDocument.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('dms.view.deleteDocument.confirmLabel'),\n          submitHandler: function submitHandler() {\n            return removeDocument(index);\n          }\n        }\n      }\n    }));\n  };\n\n  var removeDocument = function removeDocument(index) {\n    var _uploadedFiles$docume, _uploadedFiles$fileDe, _uploadedFiles$fileDe2, _uploadedFiles$fileDe3, _uploadedFiles$fileDe4, _uploadedFiles$fileDe5, _uploadedFiles$fileDe6;\n\n    var uploadedFiles = _objectSpread({}, clientUploadedFiles);\n\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles === null || uploadedFiles === void 0 ? void 0 : uploadedFiles.documentList) && (uploadedFiles === null || uploadedFiles === void 0 ? void 0 : (_uploadedFiles$docume = uploadedFiles.documentList) === null || _uploadedFiles$docume === void 0 ? void 0 : _uploadedFiles$docume.splice(index, 1));\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles === null || uploadedFiles === void 0 ? void 0 : uploadedFiles.documentNameList) && (uploadedFiles === null || uploadedFiles === void 0 ? void 0 : uploadedFiles.documentNameList.splice(index, 1));\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles === null || uploadedFiles === void 0 ? void 0 : (_uploadedFiles$fileDe = uploadedFiles.fileDetails) === null || _uploadedFiles$fileDe === void 0 ? void 0 : _uploadedFiles$fileDe.submitFiles) && (uploadedFiles === null || uploadedFiles === void 0 ? void 0 : (_uploadedFiles$fileDe2 = uploadedFiles.fileDetails) === null || _uploadedFiles$fileDe2 === void 0 ? void 0 : _uploadedFiles$fileDe2.submitFiles.splice(index, 1));\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles === null || uploadedFiles === void 0 ? void 0 : (_uploadedFiles$fileDe3 = uploadedFiles.fileDetails) === null || _uploadedFiles$fileDe3 === void 0 ? void 0 : (_uploadedFiles$fileDe4 = _uploadedFiles$fileDe3.submitData) === null || _uploadedFiles$fileDe4 === void 0 ? void 0 : _uploadedFiles$fileDe4.documentDto) && (uploadedFiles === null || uploadedFiles === void 0 ? void 0 : (_uploadedFiles$fileDe5 = uploadedFiles.fileDetails) === null || _uploadedFiles$fileDe5 === void 0 ? void 0 : (_uploadedFiles$fileDe6 = _uploadedFiles$fileDe5.submitData) === null || _uploadedFiles$fileDe6 === void 0 ? void 0 : _uploadedFiles$fileDe6.documentDto.splice(index, 1));\n    dispatch(removeDmsClientSideUploadedDocuments({\n      uploadedFiles: uploadedFiles\n    }));\n  };\n\n  useEffect(function () {\n    dispatch(getUsersByOrg('', [rfiTask], CREATE_RFI_FORM, false));\n    dispatch(resetClaimsAssignedToUsers());\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if ((assignedToUsers === null || assignedToUsers === void 0 ? void 0 : assignedToUsers.length) > 0) {\n      setResetKey(new Date().getTime());\n      setIsDataReady(true);\n    }\n  }, [assignedToUsers]);\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n\n  var _useForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      control = _useForm.control,\n      reset = _useForm.reset,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit,\n      formState = _useForm.formState,\n      setValue = _useForm.setValue;\n\n  if (!isDataReady) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      height: \"300px\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        visible: true,\n        absolute: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(RfiQueryFormView, _objectSpread(_objectSpread({}, props), {}, {\n    fields: fields,\n    actions: actions,\n    formProps: {\n      control: control,\n      handleSubmit: handleSubmit,\n      setValue: setValue,\n      errors: errors,\n      formState: formState,\n      reset: reset\n    },\n    resetKey: resetKey,\n    documentNameList: documentNameList,\n    handlers: {\n      handleAttachDocuments: handleAttachDocuments,\n      confirmDocumentDelete: confirmDocumentDelete\n    }\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RfiQueryForm, \"pAz1UTENkAwMd6WRpA5Ia/y/UaE=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector, useForm];\n});\n\n_c = RfiQueryForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"RfiQueryForm\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/RfiQueryForm/RfiQueryForm.js"],"names":["React","useEffect","useState","Yup","yupResolver","useHistory","useForm","useDispatch","useSelector","utils","RfiQueryFormView","Loader","config","CREATE_RFI_FORM","TASK_TAB_COMPLETED_STATUS","getUsersByOrg","selectClaimsAssignedToUsers","postSendRFI","postCloseRFI","showModal","selectUserEmail","resetClaimsAssignedToUsers","setDmsTaskContextType","selectDmsClientSideUploadFiles","postDmsDocuments","resetDmsClientSideUploadedDocuments","removeDmsClientSideUploadedDocuments","constants","Box","RfiQueryForm","props","dispatch","history","assignedToUsers","items","userEmail","resetKey","setResetKey","isDataReady","setIsDataReady","clientUploadedFiles","documentNameList","rfiTask","defaultAssignedUser","toLowerCase","requestedBy","find","email","rfiSentTo","generic","isValidArray","fields","name","type","value","options","optionKey","optionLabel","muiComponentProps","disabled","status","validation","object","required","string","t","hint","char","inputProps","maxLength","multiline","rows","rowsMax","max","actions","label","handler","handleCloseRFI","values","handleRFISend","sendToObj","user","sendTo","rfiSendData","assignedTo","bpmTaskID","taskId","caseIncidentID","notes","description","team","organisationName","queryCodeDescription","selectedQueryCode","then","data","API_RESPONSE_OK","caseIncidentNotesID","uploadedFileDetails","fileDetails","documentTypeKey","submitData","submitFiles","context","DMS_CONTEXT_CASE","handlers","getRfiHistoryDetails","component","fullWidth","title","maxWidth","componentProps","confirmLabel","cancelLabel","confirmMessage","buttonColors","confirm","cancel","submitHandler","setTimeout","replace","routes","claimsProcessing","root","handleAttachDocuments","referenceId","sourceId","sourceID","DMS_DOCUMENT_TYPE_SECTION_KEYS","claim","confirmDocumentDelete","index","removeDocument","uploadedFiles","isInvalidOrEmptyArray","documentList","splice","documentDto","length","Date","getTime","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","resolver","control","reset","errors","handleSubmit","formState","setValue"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport * as Yup from 'yup';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { useHistory } from 'react-router';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n//app\r\nimport * as utils from 'utils';\r\nimport { RfiQueryFormView } from './RfiQueryForm.view';\r\nimport { Loader } from 'components';\r\nimport config from 'config';\r\nimport { CREATE_RFI_FORM, TASK_TAB_COMPLETED_STATUS } from 'consts';\r\nimport {\r\n  getUsersByOrg,\r\n  selectClaimsAssignedToUsers,\r\n  postSendRFI,\r\n  postCloseRFI,\r\n  showModal,\r\n  selectUserEmail,\r\n  resetClaimsAssignedToUsers,\r\n  setDmsTaskContextType,\r\n  selectDmsClientSideUploadFiles,\r\n  postDmsDocuments,\r\n  resetDmsClientSideUploadedDocuments,\r\n  removeDmsClientSideUploadedDocuments,\r\n} from 'stores';\r\nimport * as constants from 'consts';\r\n\r\n// mui\r\nimport { Box } from '@material-ui/core';\r\n\r\nexport default function RfiQueryForm(props) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const assignedToUsers = useSelector(selectClaimsAssignedToUsers)?.items || null;\r\n  const userEmail = useSelector(selectUserEmail);\r\n  const [resetKey, setResetKey] = useState();\r\n  const [isDataReady, setIsDataReady] = useState(false);\r\n\r\n  const clientUploadedFiles = useSelector(selectDmsClientSideUploadFiles);\r\n  const documentNameList = clientUploadedFiles?.documentNameList;\r\n  const { rfiTask } = props;\r\n\r\n  const defaultAssignedUser = () =>\r\n    userEmail?.toLowerCase() === rfiTask?.requestedBy?.toLowerCase()\r\n      ? assignedToUsers?.find(({ email }) => email?.toLowerCase() === rfiTask?.rfiSentTo?.toLowerCase())\r\n      : utils.generic.isValidArray(assignedToUsers, true)\r\n      ? assignedToUsers?.find(({ email }) => email?.toLowerCase() === rfiTask?.requestedBy?.toLowerCase())\r\n      : null;\r\n\r\n  const fields = [\r\n    {\r\n      name: 'sendTo',\r\n      type: 'autocompletemui',\r\n      value: defaultAssignedUser(),\r\n      options: utils.generic.isValidArray(assignedToUsers, true) ? assignedToUsers : [],\r\n      optionKey: 'email',\r\n      optionLabel: 'fullName',\r\n      muiComponentProps: {\r\n        disabled: rfiTask?.status === TASK_TAB_COMPLETED_STATUS,\r\n      },\r\n      validation: Yup.object().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      name: 'description',\r\n      type: 'textarea',\r\n      hint: utils.string.t('claims.processing.validation.rfiHistoryMaxDesc', { char: 1000 }),\r\n      muiComponentProps: {\r\n        inputProps: { maxLength: 1000 },\r\n        multiline: true,\r\n        rows: 3,\r\n        rowsMax: 3,\r\n        'data-testid': 'details',\r\n      },\r\n      validation: Yup.string()\r\n        .required(utils.string.t('validation.required'))\r\n        .max(1000, utils.string.t('claims.processing.validation.rfiHistoryMaxDesc', { char: 1000 })),\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'secondary',\r\n      label: utils.string.t('app.close'),\r\n      disabled: userEmail.toLowerCase() !== rfiTask?.requestedBy?.toLowerCase(),\r\n      handler: () => {\r\n        handleCloseRFI();\r\n      },\r\n    },\r\n    {\r\n      name: 'submit',\r\n      label: utils.string.t('app.reply'),\r\n      handler: (values) => {\r\n        handleRFISend(values);\r\n      },\r\n    },\r\n  ];\r\n\r\n  const handleRFISend = (values) => {\r\n    if (values) {\r\n      const sendToObj = assignedToUsers.find((user) => user.email === values?.sendTo?.email);\r\n      const rfiSendData = {\r\n        assignedTo: sendToObj?.email,\r\n        bpmTaskID: rfiTask?.taskId,\r\n        caseIncidentID: rfiTask?.caseIncidentID,\r\n        notes: values?.description,\r\n        team: sendToObj?.organisationName,\r\n        queryCodeDescription: props?.selectedQueryCode?.queryCodeDescription,\r\n      };\r\n\r\n      dispatch(postSendRFI(rfiSendData)).then((data) => {\r\n        if (data.status === constants.API_RESPONSE_OK) {\r\n          const { caseIncidentID, caseIncidentNotesID } = data.data;\r\n          if (caseIncidentID && caseIncidentNotesID) {\r\n            dispatch(setDmsTaskContextType({ caseIncidentID, caseIncidentNotesID }));\r\n\r\n            const uploadedFileDetails = clientUploadedFiles?.fileDetails;\r\n            const { documentTypeKey, submitData, submitFiles } = uploadedFileDetails;\r\n            dispatch(postDmsDocuments({ context: constants.DMS_CONTEXT_CASE, documentTypeKey, submitData, submitFiles })).then((data) => {\r\n              if (data.status === constants.API_RESPONSE_OK) {\r\n                values = null;\r\n                dispatch(resetDmsClientSideUploadedDocuments());\r\n                props.handlers?.getRfiHistoryDetails();\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCloseRFI = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('status.alert'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('app.yes'),\r\n            cancelLabel: utils.string.t('app.no'),\r\n            confirmMessage: utils.string.t('claims.processing.modal.rfiCloseConfirm'),\r\n            buttonColors: { confirm: 'secondary', cancel: 'default' },\r\n            submitHandler: () => {\r\n              dispatch(postCloseRFI(rfiTask?.taskId, history)).then((data) => {\r\n                if (data.status === 'OK') {\r\n                  setTimeout(() => history.replace(config.routes.claimsProcessing.root), 1000);\r\n                }\r\n              });\r\n            },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleAttachDocuments = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'DMS_UPLOAD_FILES_CLIENT_SIDE',\r\n        props: {\r\n          title: utils.string.t('claims.rfiDashboard.attachDocuments'),\r\n          fullWidth: true,\r\n          maxWidth: 'xl',\r\n          componentProps: {\r\n            referenceId: rfiTask?.taskId,\r\n            sourceId: rfiTask?.sourceID,\r\n            documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.claim,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const confirmDocumentDelete = (index) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('dms.view.deleteDocument.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('dms.view.deleteDocument.confirmLabel'),\r\n            submitHandler: () => removeDocument(index),\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const removeDocument = (index) => {\r\n    const uploadedFiles = { ...clientUploadedFiles };\r\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles?.documentList) && uploadedFiles?.documentList?.splice(index, 1);\r\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles?.documentNameList) && uploadedFiles?.documentNameList.splice(index, 1);\r\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles?.fileDetails?.submitFiles) &&\r\n      uploadedFiles?.fileDetails?.submitFiles.splice(index, 1);\r\n    !utils.generic.isInvalidOrEmptyArray(uploadedFiles?.fileDetails?.submitData?.documentDto) &&\r\n      uploadedFiles?.fileDetails?.submitData?.documentDto.splice(index, 1);\r\n\r\n    dispatch(removeDmsClientSideUploadedDocuments({ uploadedFiles: uploadedFiles }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(getUsersByOrg('', [rfiTask], CREATE_RFI_FORM, false));\r\n    dispatch(resetClaimsAssignedToUsers());\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (assignedToUsers?.length > 0) {\r\n      setResetKey(new Date().getTime());\r\n      setIsDataReady(true);\r\n    }\r\n  }, [assignedToUsers]);\r\n\r\n  const defaultValues = utils.form.getInitialValues(fields);\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n\r\n  const { control, reset, errors, handleSubmit, formState, setValue } = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n\r\n  if (!isDataReady) {\r\n    return (\r\n      <Box height=\"300px\">\r\n        <Loader visible absolute />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <RfiQueryFormView\r\n      {...props}\r\n      fields={fields}\r\n      actions={actions}\r\n      formProps={{ control, handleSubmit, setValue, errors, formState, reset }}\r\n      resetKey={resetKey}\r\n      documentNameList={documentNameList}\r\n      handlers={{ handleAttachDocuments: handleAttachDocuments, confirmDocumentDelete: confirmDocumentDelete }}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}