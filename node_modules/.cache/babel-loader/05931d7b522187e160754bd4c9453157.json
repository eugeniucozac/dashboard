{"ast":null,"code":"var _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\TasksProcessingTable\\\\TasksProcessingTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport get from 'lodash/get';\nimport xorBy from 'lodash/xorBy'; // app\n\nimport { TasksProcessingTableView } from './TasksProcessingTable.view';\nimport { showModal, hideModal, selectClaimsTasksProcessingPagination, selectPremiumProcessingPagination, expandSidebar, collapseSidebar, resetAdhocTaskStatus, selectClaimsTasksProcessingSelected, selectClaimsProcessingTasksSelected, getClaimsTasksProcessing, postSanctionsCheck, updateMultiSelectedRows, selectMultiSelectedCase, selectTaskGridLoadingFlag, selectTaskGridDataFetchingError } from 'stores';\nimport { useSort, usePagination } from 'hooks';\nimport * as utils from 'utils';\nimport { RFI_ON_TASKS, API_RESPONSE_OK, TASK_TEAM_TYPE, CLAIM_PROCESSING_REQ_TYPES } from 'consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nTasksProcessingTable.propTypes = {\n  isTaskTeam: PropTypes.bool.isRequired,\n  tasks: PropTypes.object.isRequired,\n  cols: PropTypes.array.isRequired,\n  columnProps: PropTypes.func.isRequired,\n  handleUpdateTaskPriority: PropTypes.func.isRequired,\n  sort: PropTypes.object.isRequired,\n  handleSort: PropTypes.func.isRequired,\n  handleChangePage: PropTypes.func.isRequired,\n  handleChangeRowsPerPage: PropTypes.func.isRequired,\n  refreshTasksGrid: PropTypes.func.isRequired,\n  premiumProcessingSaveAssignee: PropTypes.func,\n  isPremiumProcessing: PropTypes.bool\n};\nexport default function TasksProcessingTable(_ref) {\n  _s();\n\n  var isTaskTeam = _ref.isTaskTeam,\n      tasks = _ref.tasks,\n      colsArr = _ref.cols,\n      columnProps = _ref.columnProps,\n      sortObj = _ref.sort,\n      handleSort = _ref.handleSort,\n      handleChangePage = _ref.handleChangePage,\n      handleChangeRowsPerPage = _ref.handleChangeRowsPerPage,\n      handleUpdateTaskPriority = _ref.handleUpdateTaskPriority,\n      refreshTasksGrid = _ref.refreshTasksGrid,\n      premiumProcessingSaveAssignee = _ref.premiumProcessingSaveAssignee,\n      isPremiumProcessing = _ref.isPremiumProcessing;\n  var dispatch = useDispatch();\n  var uiSidebarExpanded = useSelector(function (state) {\n    return get(state, 'ui.sidebar.expanded');\n  });\n  var tasksProcessingSelected = useSelector(selectClaimsTasksProcessingSelected);\n  var tasksProcessingPagination = useSelector(selectClaimsTasksProcessingPagination);\n  var premiumProcessingPagination = useSelector(selectPremiumProcessingPagination);\n  var isTaskGridLoading = useSelector(selectTaskGridLoadingFlag);\n  var isTaskGridDataFetchingError = useSelector(selectTaskGridDataFetchingError);\n\n  var _useSort = useSort(colsArr, sortObj, handleSort),\n      cols = _useSort.cols,\n      sort = _useSort.sort;\n\n  var pagination = usePagination((tasks === null || tasks === void 0 ? void 0 : tasks.items) || [], isPremiumProcessing ? premiumProcessingPagination : tasksProcessingPagination, handleChangePage, handleChangeRowsPerPage);\n  var taskItems = (tasks === null || tasks === void 0 ? void 0 : tasks.items) || [];\n  var hasTasks = utils.generic.isValidArray(taskItems, true);\n  var premiumProcessSelectedTaskList = useSelector(selectMultiSelectedCase);\n  var tasksProcessingSelectedLength = (tasksProcessingSelected === null || tasksProcessingSelected === void 0 ? void 0 : tasksProcessingSelected.length) || 0;\n  useEffect(function () {\n    if (tasksProcessingSelectedLength !== 1) {\n      dispatch(collapseSidebar());\n    }\n  }, [tasksProcessingSelectedLength]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var selectTask = function selectTask(taskObj) {\n    return function () {\n      if (isPremiumProcessing) {\n        var selectedPpTasksArray = xorBy(premiumProcessSelectedTaskList, [taskObj], (taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) ? 'taskId' : 'processId');\n\n        if ((taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) || (taskObj === null || taskObj === void 0 ? void 0 : taskObj.processId)) {\n          dispatch(updateMultiSelectedRows(selectedPpTasksArray));\n\n          if (!uiSidebarExpanded && (selectedPpTasksArray === null || selectedPpTasksArray === void 0 ? void 0 : selectedPpTasksArray.length) === 1) {\n            dispatch(expandSidebar());\n          }\n\n          if ((selectedPpTasksArray === null || selectedPpTasksArray === void 0 ? void 0 : selectedPpTasksArray.length) > 1) {\n            dispatch(collapseSidebar());\n          }\n        }\n      } else {\n        var selectedTasksArray = xorBy(tasksProcessingSelected, [taskObj], 'taskId');\n\n        if (taskObj === null || taskObj === void 0 ? void 0 : taskObj.taskId) {\n          dispatch(selectClaimsProcessingTasksSelected(taskObj, true));\n\n          if (!uiSidebarExpanded && (selectedTasksArray === null || selectedTasksArray === void 0 ? void 0 : selectedTasksArray.length) === 1) {\n            dispatch(expandSidebar());\n          }\n        }\n      }\n    };\n  };\n\n  var handleEditAdhoc = function handleEditAdhoc(claim) {\n    dispatch(resetAdhocTaskStatus());\n    dispatch(showModal({\n      component: 'CREATE_AD_HOC_TASK',\n      props: {\n        title: utils.string.t('claims.processing.taskFunction.editTask'),\n        hideCompOnBlur: false,\n        fullWidth: true,\n        maxWidth: 'md',\n        disableAutoFocus: true,\n        componentProps: {\n          claim: claim,\n          cancelHandler: function cancelHandler() {\n            dispatch(hideModal());\n          }\n        }\n      }\n    }));\n  };\n\n  var handleCreateRFITaskLevel = function handleCreateRFITaskLevel(claim) {\n    dispatch(showModal({\n      component: 'CREATE_RFI',\n      props: {\n        title: utils.string.t('claims.processing.taskFunction.createRFI'),\n        hideCompOnBlur: false,\n        fullWidth: true,\n        maxWidth: 'md',\n        disableAutoFocus: true,\n        componentProps: {\n          claim: claim,\n          type: RFI_ON_TASKS,\n          cancelHandler: function cancelHandler() {\n            dispatch(hideModal());\n          }\n        }\n      }\n    }));\n  };\n\n  var createSanctionsCheck = function createSanctionsCheck(selectedTask) {\n    if (selectedTask) {\n      dispatch(showModal({\n        component: 'CONFIRM',\n        props: {\n          title: utils.string.t('status.alert'),\n          hint: utils.string.t('claims.processing.sanctionsChecksNotification.conformationAlert'),\n          fullWidth: true,\n          maxWidth: 'xs',\n          componentProps: {\n            cancelLabel: utils.string.t('app.no'),\n            confirmLabel: utils.string.t('app.yes'),\n            submitHandler: function submitHandler() {\n              dispatch(postSanctionsCheck({\n                taskId: selectedTask === null || selectedTask === void 0 ? void 0 : selectedTask.taskId,\n                rootProcessId: selectedTask === null || selectedTask === void 0 ? void 0 : selectedTask.rootProcessId\n              })).then(function (response) {\n                dispatch(hideModal());\n\n                if (response.status === API_RESPONSE_OK) {\n                  dispatch(getClaimsTasksProcessing({\n                    requestType: CLAIM_PROCESSING_REQ_TYPES.search,\n                    taskType: TASK_TEAM_TYPE.myTask\n                  }));\n                }\n              });\n            },\n            cancelHandler: function cancelHandler() {}\n          }\n        }\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(TasksProcessingTableView, {\n    isTaskTeam: isTaskTeam,\n    hasTasks: hasTasks,\n    taskItems: taskItems,\n    tasksSelected: tasksProcessingSelected,\n    cols: cols,\n    columnProps: columnProps,\n    handleUpdateTaskPriority: handleUpdateTaskPriority,\n    sort: sort,\n    pagination: pagination,\n    handleSort: handleSort,\n    isPremiumProcessing: isPremiumProcessing,\n    premiumProcessSelectedTaskList: premiumProcessSelectedTaskList,\n    handlers: {\n      selectTask: selectTask,\n      handleEditAdhoc: handleEditAdhoc,\n      handleCreateRFITaskLevel: handleCreateRFITaskLevel,\n      createSanctionsCheck: createSanctionsCheck\n    },\n    refreshTasksGrid: refreshTasksGrid,\n    premiumProcessingSaveAssignee: premiumProcessingSaveAssignee,\n    isTaskGridLoading: isTaskGridLoading,\n    isTaskGridDataFetchingError: isTaskGridDataFetchingError\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TasksProcessingTable, \"aP8l04ObgJqitcDZa/QJ+V4whvo=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSort, usePagination, useSelector];\n});\n\n_c = TasksProcessingTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"TasksProcessingTable\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/TasksProcessingTable/TasksProcessingTable.js"],"names":["React","useEffect","PropTypes","useSelector","useDispatch","get","xorBy","TasksProcessingTableView","showModal","hideModal","selectClaimsTasksProcessingPagination","selectPremiumProcessingPagination","expandSidebar","collapseSidebar","resetAdhocTaskStatus","selectClaimsTasksProcessingSelected","selectClaimsProcessingTasksSelected","getClaimsTasksProcessing","postSanctionsCheck","updateMultiSelectedRows","selectMultiSelectedCase","selectTaskGridLoadingFlag","selectTaskGridDataFetchingError","useSort","usePagination","utils","RFI_ON_TASKS","API_RESPONSE_OK","TASK_TEAM_TYPE","CLAIM_PROCESSING_REQ_TYPES","TasksProcessingTable","propTypes","isTaskTeam","bool","isRequired","tasks","object","cols","array","columnProps","func","handleUpdateTaskPriority","sort","handleSort","handleChangePage","handleChangeRowsPerPage","refreshTasksGrid","premiumProcessingSaveAssignee","isPremiumProcessing","colsArr","sortObj","dispatch","uiSidebarExpanded","state","tasksProcessingSelected","tasksProcessingPagination","premiumProcessingPagination","isTaskGridLoading","isTaskGridDataFetchingError","pagination","items","taskItems","hasTasks","generic","isValidArray","premiumProcessSelectedTaskList","tasksProcessingSelectedLength","length","selectTask","taskObj","selectedPpTasksArray","taskId","processId","selectedTasksArray","handleEditAdhoc","claim","component","props","title","string","t","hideCompOnBlur","fullWidth","maxWidth","disableAutoFocus","componentProps","cancelHandler","handleCreateRFITaskLevel","type","createSanctionsCheck","selectedTask","hint","cancelLabel","confirmLabel","submitHandler","rootProcessId","then","response","status","requestType","search","taskType","myTask"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport get from 'lodash/get';\r\nimport xorBy from 'lodash/xorBy';\r\n\r\n// app\r\nimport { TasksProcessingTableView } from './TasksProcessingTable.view';\r\nimport {\r\n  showModal,\r\n  hideModal,\r\n  selectClaimsTasksProcessingPagination,\r\n  selectPremiumProcessingPagination,\r\n  expandSidebar,\r\n  collapseSidebar,\r\n  resetAdhocTaskStatus,\r\n  selectClaimsTasksProcessingSelected,\r\n  selectClaimsProcessingTasksSelected,\r\n  getClaimsTasksProcessing,\r\n  postSanctionsCheck,\r\n  updateMultiSelectedRows,\r\n  selectMultiSelectedCase,\r\n  selectTaskGridLoadingFlag,\r\n  selectTaskGridDataFetchingError,\r\n} from 'stores';\r\nimport { useSort, usePagination } from 'hooks';\r\nimport * as utils from 'utils';\r\nimport { RFI_ON_TASKS, API_RESPONSE_OK, TASK_TEAM_TYPE, CLAIM_PROCESSING_REQ_TYPES } from 'consts';\r\n\r\nTasksProcessingTable.propTypes = {\r\n  isTaskTeam: PropTypes.bool.isRequired,\r\n  tasks: PropTypes.object.isRequired,\r\n  cols: PropTypes.array.isRequired,\r\n  columnProps: PropTypes.func.isRequired,\r\n  handleUpdateTaskPriority: PropTypes.func.isRequired,\r\n  sort: PropTypes.object.isRequired,\r\n  handleSort: PropTypes.func.isRequired,\r\n  handleChangePage: PropTypes.func.isRequired,\r\n  handleChangeRowsPerPage: PropTypes.func.isRequired,\r\n  refreshTasksGrid: PropTypes.func.isRequired,\r\n  premiumProcessingSaveAssignee: PropTypes.func,\r\n  isPremiumProcessing: PropTypes.bool,\r\n};\r\n\r\nexport default function TasksProcessingTable({\r\n  isTaskTeam,\r\n  tasks,\r\n  cols: colsArr,\r\n  columnProps,\r\n  sort: sortObj,\r\n  handleSort,\r\n  handleChangePage,\r\n  handleChangeRowsPerPage,\r\n  handleUpdateTaskPriority,\r\n  refreshTasksGrid,\r\n  premiumProcessingSaveAssignee,\r\n  isPremiumProcessing,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const uiSidebarExpanded = useSelector((state) => get(state, 'ui.sidebar.expanded'));\r\n  const tasksProcessingSelected = useSelector(selectClaimsTasksProcessingSelected);\r\n  const tasksProcessingPagination = useSelector(selectClaimsTasksProcessingPagination);\r\n  const premiumProcessingPagination = useSelector(selectPremiumProcessingPagination);\r\n  const isTaskGridLoading = useSelector(selectTaskGridLoadingFlag);\r\n  const isTaskGridDataFetchingError = useSelector(selectTaskGridDataFetchingError);\r\n\r\n  const { cols, sort } = useSort(colsArr, sortObj, handleSort);\r\n  const pagination = usePagination(\r\n    tasks?.items || [],\r\n    isPremiumProcessing ? premiumProcessingPagination : tasksProcessingPagination,\r\n    handleChangePage,\r\n    handleChangeRowsPerPage\r\n  );\r\n  const taskItems = tasks?.items || [];\r\n  const hasTasks = utils.generic.isValidArray(taskItems, true);\r\n  const premiumProcessSelectedTaskList = useSelector(selectMultiSelectedCase);\r\n\r\n  const tasksProcessingSelectedLength = tasksProcessingSelected?.length || 0;\r\n\r\n  useEffect(() => {\r\n    if (tasksProcessingSelectedLength !== 1) {\r\n      dispatch(collapseSidebar());\r\n    }\r\n  }, [tasksProcessingSelectedLength]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const selectTask = (taskObj) => () => {\r\n    if (isPremiumProcessing) {\r\n      const selectedPpTasksArray = xorBy(premiumProcessSelectedTaskList, [taskObj], taskObj?.taskId ? 'taskId' : 'processId');\r\n      if (taskObj?.taskId || taskObj?.processId) {\r\n        dispatch(updateMultiSelectedRows(selectedPpTasksArray));\r\n        if (!uiSidebarExpanded && selectedPpTasksArray?.length === 1) {\r\n          dispatch(expandSidebar());\r\n        }\r\n        if (selectedPpTasksArray?.length > 1) {\r\n          dispatch(collapseSidebar());\r\n        }\r\n      }\r\n    } else {\r\n      const selectedTasksArray = xorBy(tasksProcessingSelected, [taskObj], 'taskId');\r\n\r\n      if (taskObj?.taskId) {\r\n        dispatch(selectClaimsProcessingTasksSelected(taskObj, true));\r\n        if (!uiSidebarExpanded && selectedTasksArray?.length === 1) {\r\n          dispatch(expandSidebar());\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleEditAdhoc = (claim) => {\r\n    dispatch(resetAdhocTaskStatus());\r\n    dispatch(\r\n      showModal({\r\n        component: 'CREATE_AD_HOC_TASK',\r\n        props: {\r\n          title: utils.string.t('claims.processing.taskFunction.editTask'),\r\n          hideCompOnBlur: false,\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          disableAutoFocus: true,\r\n          componentProps: {\r\n            claim,\r\n            cancelHandler: () => {\r\n              dispatch(hideModal());\r\n            },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCreateRFITaskLevel = (claim) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CREATE_RFI',\r\n        props: {\r\n          title: utils.string.t('claims.processing.taskFunction.createRFI'),\r\n          hideCompOnBlur: false,\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          disableAutoFocus: true,\r\n          componentProps: {\r\n            claim,\r\n            type: RFI_ON_TASKS,\r\n            cancelHandler: () => {\r\n              dispatch(hideModal());\r\n            },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const createSanctionsCheck = (selectedTask) => {\r\n    if (selectedTask) {\r\n      dispatch(\r\n        showModal({\r\n          component: 'CONFIRM',\r\n          props: {\r\n            title: utils.string.t('status.alert'),\r\n            hint: utils.string.t('claims.processing.sanctionsChecksNotification.conformationAlert'),\r\n            fullWidth: true,\r\n            maxWidth: 'xs',\r\n            componentProps: {\r\n              cancelLabel: utils.string.t('app.no'),\r\n              confirmLabel: utils.string.t('app.yes'),\r\n              submitHandler: () => {\r\n                dispatch(postSanctionsCheck({ taskId: selectedTask?.taskId, rootProcessId: selectedTask?.rootProcessId })).then(\r\n                  (response) => {\r\n                    dispatch(hideModal());\r\n                    if (response.status === API_RESPONSE_OK) {\r\n                      dispatch(\r\n                        getClaimsTasksProcessing({ requestType: CLAIM_PROCESSING_REQ_TYPES.search, taskType: TASK_TEAM_TYPE.myTask })\r\n                      );\r\n                    }\r\n                  }\r\n                );\r\n              },\r\n              cancelHandler: () => {},\r\n            },\r\n          },\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TasksProcessingTableView\r\n      isTaskTeam={isTaskTeam}\r\n      hasTasks={hasTasks}\r\n      taskItems={taskItems}\r\n      tasksSelected={tasksProcessingSelected}\r\n      cols={cols}\r\n      columnProps={columnProps}\r\n      handleUpdateTaskPriority={handleUpdateTaskPriority}\r\n      sort={sort}\r\n      pagination={pagination}\r\n      handleSort={handleSort}\r\n      isPremiumProcessing={isPremiumProcessing}\r\n      premiumProcessSelectedTaskList={premiumProcessSelectedTaskList}\r\n      handlers={{\r\n        selectTask,\r\n        handleEditAdhoc,\r\n        handleCreateRFITaskLevel,\r\n        createSanctionsCheck,\r\n      }}\r\n      refreshTasksGrid={refreshTasksGrid}\r\n      premiumProcessingSaveAssignee={premiumProcessingSaveAssignee}\r\n      isTaskGridLoading={isTaskGridLoading}\r\n      isTaskGridDataFetchingError={isTaskGridDataFetchingError}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}