{"ast":null,"code":"import _regeneratorRuntime from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\RiskQuotes\\\\QuoteCard.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport get from 'lodash/get';\nimport isNumber from 'lodash/isNumber'; // app\n\nimport styles from './QuoteCard.style';\nimport { RiskIssues } from 'modules';\nimport { Avatar, Button, FormGrid, Translate, Restricted, Status } from 'components';\nimport { putQuoteRates } from 'stores';\nimport { useTheme } from '@material-ui/core/styles';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { makeStyles, Box, Card, CardHeader, CardActions, CardContent, Drawer, Typography, Popover } from '@material-ui/core';\nimport CommissionSlider from './CommissionSlider';\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CheckIcon from '@material-ui/icons/Check';\nimport BlockIcon from '@material-ui/icons/Block';\nimport DoneIcon from '@material-ui/icons/Done';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport ForwardIcon from '@material-ui/icons/Forward';\nimport { QUOTE_PREMIUM_PRECISION, RISK_QUOTE_STATUS_DRAFT, RISK_QUOTE_STATUS_QUOTED, RISK_QUOTE_STATUS_REFERRED, RISK_QUOTE_STATUS_BLOCKED, RISK_QUOTE_STATUS_REJECTED, ROLE_BROKER, ROLE_UNDERWRITER, ROLE_COBROKER } from 'consts';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: 'auto',\n      width: '100%',\n      minHeight: 262\n    },\n    title: {\n      color: 'black!important'\n    },\n    value: {\n      color: 'black!important',\n      fontWeight: 600\n    }\n  };\n});\n\nvar QuoteLine = function QuoteLine(_ref) {\n  _s();\n\n  var title = _ref.title,\n      value = _ref.value;\n  var classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FormGrid, {\n      item: true,\n      xs: 5,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        className: classes.title,\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(FormGrid, {\n      item: true,\n      xs: 7,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        className: classes.value,\n        children: value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(QuoteLine, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c = QuoteLine;\n\nvar QuoteCard = function QuoteCard(_ref2) {\n  _s2();\n\n  var _quoteState$commissio, _quoteState$commissio2, _quoteState$facility, _quoteState$facility$, _quoteState$facility2, _quoteState$facility3, _quoteState$commissio3, _quoteState$commissio4, _quoteState$facility4, _issuesData$issues, _issuesData$quoteIssu;\n\n  var quote = _ref2.quote,\n      riskInsuredId = _ref2.riskInsuredId,\n      riskStatus = _ref2.riskStatus,\n      parties = _ref2.parties,\n      issuesData = _ref2.issuesData,\n      handlePatchRiskQuote = _ref2.handlePatchRiskQuote,\n      handleDeclineRiskQuote = _ref2.handleDeclineRiskQuote,\n      handleAcceptRiskQuote = _ref2.handleAcceptRiskQuote,\n      handleBindRiskQuote = _ref2.handleBindRiskQuote,\n      handleDownloadQuote = _ref2.handleDownloadQuote,\n      handleRiskRefresh = _ref2.handleRiskRefresh,\n      handleRequestToBind = _ref2.handleRequestToBind,\n      handlePreBind = _ref2.handlePreBind,\n      handleRequestDismissIssues = _ref2.handleRequestDismissIssues;\n  var classes = makeStyles(styles, {\n    name: 'QuoteCard'\n  })();\n  var theme = useTheme();\n  var dispatch = useDispatch();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      height = _useState2[0],\n      setHeight = _useState2[1];\n\n  var ref = useRef(null);\n\n  var _useState3 = useState(quote),\n      _useState4 = _slicedToArray(_useState3, 2),\n      quoteState = _useState4[0],\n      setQuoteState = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      anchorEl = _useState8[0],\n      setAnchorEl = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      drawerOpen = _useState10[0],\n      setDrawerOpen = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      commissionIsChanged = _useState12[0],\n      setCommissionIsChanged = _useState12[1];\n\n  var _useState13 = useState({\n    commissionRatioClient: quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio = quoteState.commission) === null || _quoteState$commissio === void 0 ? void 0 : _quoteState$commissio.clientCommissionRatio,\n    netDownClientCommission: quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio2 = quoteState.commission) === null || _quoteState$commissio2 === void 0 ? void 0 : _quoteState$commissio2.clientCommissionRate\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      commission = _useState14[0],\n      setCommission = _useState14[1];\n\n  var _useState15 = useState(new Date().getTime()),\n      _useState16 = _slicedToArray(_useState15, 2),\n      uuid = _useState16[0],\n      setUuid = _useState16[1];\n\n  var _useState17 = useState(quoteState === null || quoteState === void 0 ? void 0 : quoteState.premium),\n      _useState18 = _slicedToArray(_useState17, 2),\n      quotePremium = _useState18[0],\n      setQuotePremium = _useState18[1];\n\n  var createdAt = utils.string.t('format.date', {\n    value: {\n      date: quoteState.createdAt,\n      format: 'lll'\n    }\n  });\n  var carrierName = get(quoteState, 'carrierName');\n  var quoteStatus = quoteState.response ? quoteState.response.responseStatus : quoteState.status;\n  var quoteStatusString = quoteStatus ? utils.string.t(\"QBstatus.\".concat(quoteStatus.toLowerCase())) : '-';\n  quoteStatusString = quoteStatusString === 'Quoted' ? utils.string.t('status.quote') : quoteStatusString;\n  var isQuoteBlocked = quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\n  var isBlocked = riskStatus === RISK_QUOTE_STATUS_BLOCKED || quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\n  var isExpired = quoteState.validUntil && utils.date.isBefore(quoteState.validUntil);\n  var isQuoted = quoteStatus === RISK_QUOTE_STATUS_QUOTED;\n  var isDraftOrReferred = [RISK_QUOTE_STATUS_DRAFT, RISK_QUOTE_STATUS_REFERRED].includes(quoteStatus);\n  var isReferred = quoteStatus === RISK_QUOTE_STATUS_REFERRED;\n  var isRejected = quoteStatus === RISK_QUOTE_STATUS_REJECTED;\n  var hasTemplate = quoteState.hasTemplate;\n  var defaultClientCommissionRate = quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$facility = quoteState.facility) === null || _quoteState$facility === void 0 ? void 0 : (_quoteState$facility$ = _quoteState$facility.commissionRates) === null || _quoteState$facility$ === void 0 ? void 0 : _quoteState$facility$.clientCommissionRate;\n  var defaultBrokerCommissionRate = quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$facility2 = quoteState.facility) === null || _quoteState$facility2 === void 0 ? void 0 : (_quoteState$facility3 = _quoteState$facility2.commissionRates) === null || _quoteState$facility3 === void 0 ? void 0 : _quoteState$facility3.brokerCommissionRate;\n  var clientCommissionRatio = (quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio3 = quoteState.commission) === null || _quoteState$commissio3 === void 0 ? void 0 : _quoteState$commissio3.clientCommissionRatio) || defaultClientCommissionRate;\n  var clientCommissionRate = (quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$commissio4 = quoteState.commission) === null || _quoteState$commissio4 === void 0 ? void 0 : _quoteState$commissio4.clientCommissionRate) || defaultClientCommissionRate;\n  var isQuoteCommission = isNumber(clientCommissionRate) && isNumber(clientCommissionRatio);\n  var isFacilityCommission = isNumber(defaultClientCommissionRate) && isNumber(defaultBrokerCommissionRate);\n  var grossPremium = quoteState === null || quoteState === void 0 ? void 0 : quoteState.grossPremium;\n  var premiumValue = \"\".concat((quoteState === null || quoteState === void 0 ? void 0 : quoteState.currency) ? utils.string.t(quoteState.currency) : '', \" \").concat(utils.string.t('format.number', {\n    value: {\n      number: quotePremium,\n      default: '-'\n    }\n  }));\n  var canCurrentUserBind = quoteState === null || quoteState === void 0 ? void 0 : quoteState.canCurrentUserBind;\n  var requestedToBind = quoteState === null || quoteState === void 0 ? void 0 : quoteState.requestedToBind;\n  var displayPreBind = quoteState === null || quoteState === void 0 ? void 0 : (_quoteState$facility4 = quoteState.facility) === null || _quoteState$facility4 === void 0 ? void 0 : _quoteState$facility4.preBind;\n  var canCurrentUserDismissIssues = quoteState === null || quoteState === void 0 ? void 0 : quoteState.canCurrentUserDismissIssues;\n  var requestedToDismissIssues = quoteState === null || quoteState === void 0 ? void 0 : quoteState.requestedToDismissIssues;\n  useEffect(function () {\n    setHeight(ref.current.clientHeight);\n  }, []);\n  useEffect(function () {\n    setQuoteState(quote);\n  }, [quote]);\n\n  var handleUpdateCommission = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var rates, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              rates = {\n                clientCommissionRatio: commission.commissionRatioClient,\n                clientCommissionRate: commission.netDownClientCommission,\n                scale: QUOTE_PREMIUM_PRECISION\n              };\n              _context.next = 4;\n              return dispatch(putQuoteRates(rates, quoteState.id));\n\n            case 4:\n              result = _context.sent;\n\n              if (result) {\n                setQuoteState(result);\n              }\n\n              setIsLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleUpdateCommission() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleCommissionChange = function handleCommissionChange(newCommission, isChanged) {\n    setCommissionIsChanged(isChanged);\n    setCommission(newCommission);\n    var commissionRatioClient = isNumber(newCommission === null || newCommission === void 0 ? void 0 : newCommission.commissionRatioClient) ? newCommission === null || newCommission === void 0 ? void 0 : newCommission.commissionRatioClient : defaultClientCommissionRate;\n    var commissionRate = commissionRatioClient === newCommission.netDownClientCommission ? 1 : (1 - commissionRatioClient * 0.01) / (1 - newCommission.netDownClientCommission * 0.01);\n    var newPremium = parseFloat((grossPremium * commissionRate).toFixed(QUOTE_PREMIUM_PRECISION));\n    setQuotePremium(Math.round(newPremium));\n  };\n\n  var resetCommission = function resetCommission() {\n    setUuid(new Date().getTime());\n    setCommissionIsChanged(false);\n    setQuotePremium(quoteState.premium);\n  };\n\n  var handleIssuesPopoverClick = function handleIssuesPopoverClick(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClosePopover = function handleClosePopover() {\n    setAnchorEl(null);\n  };\n\n  var toggleDrawer = function toggleDrawer(value) {\n    setDrawerOpen(value);\n  };\n\n  var open = Boolean(anchorEl);\n  var id = open ? 'simple-popover' : undefined;\n  var statusBackgroundColor = theme.palette.status[quoteStatus === null || quoteStatus === void 0 ? void 0 : quoteStatus.toLowerCase()] ? theme.palette.status[quoteStatus.toLowerCase()] : theme.palette.status.default;\n  var statusColor = utils.color.contrast(statusBackgroundColor, 0.6);\n\n  var subheader = /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: requestedToBind && isQuoted ? /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Status, {\n        size: \"xs\",\n        text: /*#__PURE__*/_jsxDEV(Translate, {\n          label: utils.string.t('risks.requestToBindStatus')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 19\n        }, _this),\n        status: \"quoted\",\n        \"data-testid\": \"quote-status\",\n        style: {\n          backgroundColor: statusBackgroundColor,\n          color: statusColor\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Status, {\n        size: \"xs\",\n        text: /*#__PURE__*/_jsxDEV(Translate, {\n          label: \"\".concat(quoteStatusString)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 19\n        }, _this),\n        status: quoteStatus.toLowerCase(),\n        \"data-testid\": \"quote-status\",\n        style: {\n          backgroundColor: statusBackgroundColor,\n          color: statusColor\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false);\n\n  return isLoading ? /*#__PURE__*/_jsxDEV(QuoteCardSkeleton, {\n    height: height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 5\n  }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isBlocked || isRejected ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Drawer, {\n        anchor: \"right\",\n        open: drawerOpen,\n        style: {\n          zIndex: 10000\n        },\n        onClose: function onClose() {\n          return toggleDrawer(false);\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          p: 2,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            value: \"issues\",\n            \"data-testid\": \"tab-content-issues\",\n            children: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.hasIssues) && /*#__PURE__*/_jsxDEV(RiskIssues, {\n              riskIssues: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.issues) || [],\n              quoteIssues: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.quoteIssues) || [],\n              insuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.insuredSanctionsCheckResult,\n              reInsuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.reInsuredSanctionsCheckResult,\n              canCurrentUserDismissIssues: canCurrentUserDismissIssues,\n              handleRiskRefresh: handleRiskRefresh,\n              quoteId: quote === null || quote === void 0 ? void 0 : quote.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false) : null, /*#__PURE__*/_jsxDEV(Card, {\n      ref: ref,\n      classes: {\n        root: classes.card\n      },\n      children: [carrierName || createdAt ? /*#__PURE__*/_jsxDEV(CardHeader, {\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          icon: HowToVoteIcon,\n          size: 32,\n          border: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 21\n        }, _this),\n        title: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          className: classes.cardFacility,\n          style: {\n            textAlign: 'left'\n          },\n          children: carrierName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 15\n        }, _this),\n        subheader: subheader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, _this) : null, /*#__PURE__*/_jsxDEV(CardContent, {\n        classes: {\n          root: classes.cardContent\n        },\n        children: /*#__PURE__*/_jsxDEV(FormGrid, {\n          container: true,\n          spacing: 1,\n          children: [/*#__PURE__*/_jsxDEV(QuoteLine, {\n            title: isReferred ? \"\" : utils.string.t('risks.grossPremium'),\n            value: isReferred ? utils.string.t('risks.referral') : premiumValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(QuoteLine, {\n            title: utils.string.t('app.createdAt'),\n            value: utils.string.t('format.date', {\n              value: {\n                date: quoteState.createdAt,\n                format: 'lll',\n                default: '-'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(QuoteLine, {\n            title: utils.string.t('app.validUntil'),\n            value: utils.string.t('format.date', {\n              value: {\n                date: quoteState.validUntil,\n                format: 'lll',\n                default: '-'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, _this), isQuoted && isQuoteCommission && isFacilityCommission ? /*#__PURE__*/_jsxDEV(Restricted, {\n        include: [ROLE_BROKER, ROLE_COBROKER],\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          classes: {\n            root: classes.cardContentCommission\n          },\n          children: /*#__PURE__*/_jsxDEV(CommissionSlider, {\n            defaultClientCommission: defaultClientCommissionRate,\n            defaultBrokerCommission: defaultBrokerCommissionRate,\n            netDownClientCommission: clientCommissionRate,\n            commissionRatioClient: clientCommissionRatio,\n            handleChangedValues: handleCommissionChange,\n            isSliderDisabled: requestedToBind\n          }, uuid, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, _this) : null, commissionIsChanged ? /*#__PURE__*/_jsxDEV(CardActions, {\n        disableSpacing: true,\n        classes: {\n          root: classes.cardActions\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          px: 1,\n          pb: 0.5,\n          mb: 1,\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          width: \"100%\",\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            display: \"flex\",\n            width: \"100%\",\n            flexDirection: \"row\",\n            justifyContent: \"flex-end\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"xsmall\",\n              icon: DoneIcon,\n              color: \"primary\",\n              nestedClasses: {\n                icon: classes.icon\n              },\n              onClick: handleUpdateCommission\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"xsmall\",\n              icon: ClearIcon,\n              color: \"default\",\n              nestedClasses: {\n                btn: classes.btnMarginLeft,\n                icon: classes.icon\n              },\n              onClick: resetCommission\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [isQuoted ? /*#__PURE__*/_jsxDEV(CardActions, {\n          disableSpacing: true,\n          classes: {\n            root: classes.cardActions\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            px: 1,\n            pb: 0.5,\n            display: \"flex\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            width: \"100%\",\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              width: \"100%\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              children: hasTemplate ? /*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: PictureAsPdfIcon,\n                  color: \"secondary\",\n                  text: utils.string.t('risks.download'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: function onClick() {\n                    return handleDownloadQuote({\n                      quote: quoteState,\n                      insureds: utils.risk.getPartyValues('insureds', parties, riskInsuredId)\n                    });\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 23\n              }, _this) : null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 19\n            }, _this), /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              flexDirection: \"row\",\n              ml: \"auto\",\n              flexWrap: canCurrentUserBind ? 'no-wrap' : 'wrap',\n              justifyContent: \"flex-end\",\n              children: [canCurrentUserBind ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Restricted, {\n                  include: [ROLE_BROKER],\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    mr: 1,\n                    mb: 1,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"xsmall\",\n                      style: {\n                        backgroundColor: 'rgb(44, 198, 171)'\n                      },\n                      icon: CheckIcon,\n                      color: \"primary\",\n                      text: utils.string.t('risks.bind'),\n                      nestedClasses: {\n                        icon: classes.icon\n                      },\n                      onClick: function onClick() {\n                        return displayPreBind ? handlePreBind(quoteState, true) : handleBindRiskQuote(quoteState);\n                      },\n                      disabled: isBlocked\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 367,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 366,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 25\n                }, _this), /*#__PURE__*/_jsxDEV(Restricted, {\n                  include: [ROLE_UNDERWRITER],\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    mr: 1,\n                    mb: 1,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"xsmall\",\n                      style: {\n                        backgroundColor: 'rgb(44, 198, 171)'\n                      },\n                      icon: CheckIcon,\n                      color: \"primary\",\n                      text: utils.string.t('risks.bind'),\n                      nestedClasses: {\n                        icon: classes.icon\n                      },\n                      onClick: function onClick() {\n                        return handleBindRiskQuote(quoteState);\n                      },\n                      disabled: isBlocked\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 381,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 25\n                }, _this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: !requestedToBind ? /*#__PURE__*/_jsxDEV(Box, {\n                  whiteSpace: \"nowrap\",\n                  mr: 1,\n                  mb: 1,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    size: \"xsmall\",\n                    style: {\n                      backgroundColor: 'rgb(44, 198, 171)'\n                    },\n                    icon: CheckIcon,\n                    color: \"primary\",\n                    text: utils.string.t('risks.requestToBind'),\n                    nestedClasses: {\n                      icon: classes.icon\n                    },\n                    onClick: function onClick() {\n                      return handleRequestToBind(quoteState, displayPreBind);\n                    },\n                    disabled: isBlocked\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 398,\n                    columnNumber: 29\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 27\n                }, _this) : null\n              }, void 0, false), isExpired && /*#__PURE__*/_jsxDEV(Button, {\n                size: \"xsmall\",\n                color: \"default\",\n                text: utils.string.t('app.expired'),\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 35\n              }, _this), /*#__PURE__*/_jsxDEV(Restricted, {\n                include: [ROLE_BROKER, ROLE_UNDERWRITER],\n                children: !isExpired && !isBlocked ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    mr: 1,\n                    mb: 1,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      size: \"xsmall\",\n                      icon: BlockIcon,\n                      color: \"primary\",\n                      danger: true,\n                      text: utils.string.t('risks.decline'),\n                      nestedClasses: {\n                        icon: classes.icon\n                      },\n                      onClick: function onClick() {\n                        return handleDeclineRiskQuote(quoteState.id);\n                      },\n                      disabled: isBlocked\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 417,\n                      columnNumber: 29\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 416,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 15\n        }, _this) : null, isDraftOrReferred && !isBlocked ? /*#__PURE__*/_jsxDEV(Restricted, {\n          include: [ROLE_BROKER, ROLE_UNDERWRITER],\n          children: /*#__PURE__*/_jsxDEV(CardActions, {\n            disableSpacing: true,\n            classes: {\n              root: classes.cardActions\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              px: 1,\n              pb: 0.5,\n              ml: \"auto\",\n              display: \"flex\",\n              flexWrap: \"wrap\",\n              justifyContent: \"flex-end\",\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: BlockIcon,\n                  color: \"primary\",\n                  danger: true,\n                  text: utils.string.t('risks.decline'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: function onClick() {\n                    return handleDeclineRiskQuote(quoteState.id);\n                  },\n                  disabled: isBlocked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: EditIcon,\n                  color: \"secondary\",\n                  text: utils.string.t('risks.update'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: function onClick() {\n                    return handlePatchRiskQuote({\n                      quote: quoteState\n                    });\n                  },\n                  disabled: isBlocked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(Box, {\n                mr: 1,\n                mb: 1,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"xsmall\",\n                  icon: CheckIcon,\n                  color: \"primary\",\n                  text: utils.string.t('risks.accept'),\n                  nestedClasses: {\n                    icon: classes.icon\n                  },\n                  onClick: function onClick() {\n                    return handleAcceptRiskQuote(quoteState.id);\n                  },\n                  disabled: isBlocked\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 15\n        }, _this) : null, isBlocked || isRejected ? /*#__PURE__*/_jsxDEV(CardActions, {\n          disableSpacing: true,\n          classes: {\n            root: classes.cardActions\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            px: 1,\n            pb: 0.5,\n            ml: \"auto\",\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            justifyContent: \"flex-end\",\n            children: [!canCurrentUserDismissIssues && !requestedToDismissIssues && isQuoteBlocked && (quoteState === null || quoteState === void 0 ? void 0 : quoteState.id) ? /*#__PURE__*/_jsxDEV(Box, {\n              mr: 1,\n              mb: 1,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                size: \"xsmall\",\n                style: {\n                  backgroundColor: 'rgb(237, 172, 0)',\n                  color: 'white'\n                },\n                icon: ForwardIcon,\n                color: \"primary\",\n                text: utils.string.t('risks.refer'),\n                nestedClasses: {\n                  icon: classes.icon\n                },\n                onClick: function onClick() {\n                  return handleRequestDismissIssues(quoteState);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 23\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 21\n            }, _this) : null, (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$issues = issuesData.issues) === null || _issuesData$issues === void 0 ? void 0 : _issuesData$issues.length) + (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$quoteIssu = issuesData.quoteIssues) === null || _issuesData$quoteIssu === void 0 ? void 0 : _issuesData$quoteIssu.length) > 0 ? /*#__PURE__*/_jsxDEV(Box, {\n              mr: 1,\n              mb: 1,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"xsmall\",\n                icon: InfoOutlinedIcon,\n                color: \"primary\",\n                danger: true,\n                text: utils.string.t('risks.issues'),\n                nestedClasses: {\n                  icon: classes.icon\n                },\n                onClick: function onClick(e) {\n                  var _issuesData$issues2, _issuesData$quoteIssu2;\n\n                  return (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$issues2 = issuesData.issues) === null || _issuesData$issues2 === void 0 ? void 0 : _issuesData$issues2.length) + (issuesData === null || issuesData === void 0 ? void 0 : (_issuesData$quoteIssu2 = issuesData.quoteIssues) === null || _issuesData$quoteIssu2 === void 0 ? void 0 : _issuesData$quoteIssu2.length) > 1 ? toggleDrawer(true) : handleIssuesPopoverClick(e);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 23\n              }, _this), /*#__PURE__*/_jsxDEV(Popover, {\n                id: id,\n                open: open,\n                anchorEl: anchorEl,\n                onClose: handleClosePopover,\n                anchorOrigin: {\n                  vertical: 'bottom',\n                  horizontal: 'center'\n                },\n                transformOrigin: {\n                  vertical: 'top',\n                  horizontal: 'center'\n                },\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  p: 2,\n                  maxWidth: 340,\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    value: \"issues\",\n                    \"data-testid\": \"tab-content-issues\",\n                    children: (issuesData === null || issuesData === void 0 ? void 0 : issuesData.hasIssues) && /*#__PURE__*/_jsxDEV(RiskIssues, {\n                      riskIssues: issuesData === null || issuesData === void 0 ? void 0 : issuesData.issues,\n                      quoteIssues: issuesData === null || issuesData === void 0 ? void 0 : issuesData.quoteIssues,\n                      insuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.insuredSanctionsCheckResult,\n                      reInsuredSanctionsCheckResult: issuesData === null || issuesData === void 0 ? void 0 : issuesData.reInsuredSanctionsCheckResult,\n                      canCurrentUserDismissIssues: canCurrentUserDismissIssues,\n                      handleRiskRefresh: handleRiskRefresh,\n                      quoteId: quote === null || quote === void 0 ? void 0 : quote.id\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 530,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 528,\n                    columnNumber: 27\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 527,\n                  columnNumber: 25\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 23\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 21\n            }, _this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 15\n        }, _this) : null]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s2(QuoteCard, \"ZwV0IngTk+W+FwKKCwKwgf001rY=\", false, function () {\n  return [useTheme, useDispatch];\n});\n\n_c2 = QuoteCard;\nexport var QuoteCardSkeleton = function QuoteCardSkeleton(_ref4) {\n  _s3();\n\n  var _ref4$height = _ref4.height,\n      height = _ref4$height === void 0 ? 'auto' : _ref4$height;\n  var classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(Card, {\n    \"data-testid\": \"skeleton-quote-card\",\n    classes: {\n      root: classes.root\n    },\n    style: {\n      height: height\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      avatar: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        variant: \"circle\",\n        width: 40,\n        height: 40\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 17\n      }, _this),\n      title: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 10,\n        width: \"80%\",\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 16\n      }, _this),\n      subheader: /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 10,\n        width: \"40%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 20\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20,\n          style: {\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20,\n          style: {\n            marginBottom: 6\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n          animation: \"wave\",\n          height: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(CardContent, {\n      classes: {\n        root: classes.cardContentCommission\n      },\n      children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20,\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20,\n        style: {\n          marginBottom: 6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n        animation: \"wave\",\n        height: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 559,\n    columnNumber: 5\n  }, _this);\n};\n\n_s3(QuoteCardSkeleton, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c3 = QuoteCardSkeleton;\nexport default QuoteCard;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"QuoteLine\");\n$RefreshReg$(_c2, \"QuoteCard\");\n$RefreshReg$(_c3, \"QuoteCardSkeleton\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/RiskQuotes/QuoteCard.js"],"names":["useState","useEffect","useRef","useDispatch","get","isNumber","styles","RiskIssues","Avatar","Button","FormGrid","Translate","Restricted","Status","putQuoteRates","useTheme","Skeleton","makeStyles","Box","Card","CardHeader","CardActions","CardContent","Drawer","Typography","Popover","CommissionSlider","HowToVoteIcon","InfoOutlinedIcon","PictureAsPdfIcon","EditIcon","CheckIcon","BlockIcon","DoneIcon","ClearIcon","ForwardIcon","QUOTE_PREMIUM_PRECISION","RISK_QUOTE_STATUS_DRAFT","RISK_QUOTE_STATUS_QUOTED","RISK_QUOTE_STATUS_REFERRED","RISK_QUOTE_STATUS_BLOCKED","RISK_QUOTE_STATUS_REJECTED","ROLE_BROKER","ROLE_UNDERWRITER","ROLE_COBROKER","utils","useStyles","theme","root","margin","width","minHeight","title","color","value","fontWeight","QuoteLine","classes","QuoteCard","quote","riskInsuredId","riskStatus","parties","issuesData","handlePatchRiskQuote","handleDeclineRiskQuote","handleAcceptRiskQuote","handleBindRiskQuote","handleDownloadQuote","handleRiskRefresh","handleRequestToBind","handlePreBind","handleRequestDismissIssues","name","dispatch","height","setHeight","ref","quoteState","setQuoteState","isLoading","setIsLoading","anchorEl","setAnchorEl","drawerOpen","setDrawerOpen","commissionIsChanged","setCommissionIsChanged","commissionRatioClient","commission","clientCommissionRatio","netDownClientCommission","clientCommissionRate","setCommission","Date","getTime","uuid","setUuid","premium","quotePremium","setQuotePremium","createdAt","string","t","date","format","carrierName","quoteStatus","response","responseStatus","status","quoteStatusString","toLowerCase","isQuoteBlocked","isBlocked","isExpired","validUntil","isBefore","isQuoted","isDraftOrReferred","includes","isReferred","isRejected","hasTemplate","defaultClientCommissionRate","facility","commissionRates","defaultBrokerCommissionRate","brokerCommissionRate","isQuoteCommission","isFacilityCommission","grossPremium","premiumValue","currency","number","default","canCurrentUserBind","requestedToBind","displayPreBind","preBind","canCurrentUserDismissIssues","requestedToDismissIssues","current","clientHeight","handleUpdateCommission","rates","scale","id","result","handleCommissionChange","newCommission","isChanged","commissionRate","newPremium","parseFloat","toFixed","Math","round","resetCommission","handleIssuesPopoverClick","event","currentTarget","handleClosePopover","toggleDrawer","open","Boolean","undefined","statusBackgroundColor","palette","statusColor","contrast","subheader","display","alignItems","backgroundColor","zIndex","hasIssues","issues","quoteIssues","insuredSanctionsCheckResult","reInsuredSanctionsCheckResult","card","cardFacility","textAlign","cardContent","cardContentCommission","cardActions","icon","btn","btnMarginLeft","insureds","risk","getPartyValues","length","e","vertical","horizontal","QuoteCardSkeleton","marginBottom"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport get from 'lodash/get';\r\nimport isNumber from 'lodash/isNumber';\r\n\r\n// app\r\nimport styles from './QuoteCard.style';\r\nimport { RiskIssues } from 'modules';\r\nimport { Avatar, Button, FormGrid, Translate, Restricted, Status } from 'components';\r\nimport { putQuoteRates } from 'stores';\r\n\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { makeStyles, Box, Card, CardHeader, CardActions, CardContent, Drawer, Typography, Popover } from '@material-ui/core';\r\nimport CommissionSlider from './CommissionSlider';\r\n\r\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport BlockIcon from '@material-ui/icons/Block';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport ForwardIcon from '@material-ui/icons/Forward';\r\n\r\nimport {\r\n  QUOTE_PREMIUM_PRECISION,\r\n  RISK_QUOTE_STATUS_DRAFT,\r\n  RISK_QUOTE_STATUS_QUOTED,\r\n  RISK_QUOTE_STATUS_REFERRED,\r\n  RISK_QUOTE_STATUS_BLOCKED,\r\n  RISK_QUOTE_STATUS_REJECTED,\r\n  ROLE_BROKER,\r\n  ROLE_UNDERWRITER,\r\n  ROLE_COBROKER,\r\n} from 'consts';\r\nimport * as utils from 'utils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin: 'auto',\r\n    width: '100%',\r\n    minHeight: 262,\r\n  },\r\n\r\n  title: {\r\n    color: 'black!important',\r\n  },\r\n  value: {\r\n    color: 'black!important',\r\n    fontWeight: 600,\r\n  },\r\n}));\r\n\r\nconst QuoteLine = ({ title, value }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <FormGrid item xs={5}>\r\n        <Typography variant=\"body2\" className={classes.title}>\r\n          {title}\r\n        </Typography>\r\n      </FormGrid>\r\n      <FormGrid item xs={7}>\r\n        <Typography variant=\"body2\" className={classes.value}>\r\n          {value}\r\n        </Typography>\r\n      </FormGrid>\r\n    </>\r\n  );\r\n};\r\n\r\nconst QuoteCard = ({\r\n  quote,\r\n  riskInsuredId,\r\n  riskStatus,\r\n  parties,\r\n  issuesData,\r\n  handlePatchRiskQuote,\r\n  handleDeclineRiskQuote,\r\n  handleAcceptRiskQuote,\r\n  handleBindRiskQuote,\r\n  handleDownloadQuote,\r\n  handleRiskRefresh,\r\n  handleRequestToBind,\r\n  handlePreBind,\r\n  handleRequestDismissIssues,\r\n}) => {\r\n  const classes = makeStyles(styles, { name: 'QuoteCard' })();\r\n  const theme = useTheme();\r\n  const dispatch = useDispatch();\r\n\r\n  const [height, setHeight] = useState(0);\r\n  const ref = useRef(null);\r\n\r\n  const [quoteState, setQuoteState] = useState(quote);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [commissionIsChanged, setCommissionIsChanged] = useState(false);\r\n  const [commission, setCommission] = useState({\r\n    commissionRatioClient: quoteState?.commission?.clientCommissionRatio,\r\n    netDownClientCommission: quoteState?.commission?.clientCommissionRate,\r\n  });\r\n  const [uuid, setUuid] = useState(new Date().getTime());\r\n  const [quotePremium, setQuotePremium] = useState(quoteState?.premium);\r\n\r\n  const createdAt = utils.string.t('format.date', {\r\n    value: { date: quoteState.createdAt, format: 'lll' },\r\n  });\r\n  const carrierName = get(quoteState, 'carrierName');\r\n  const quoteStatus = quoteState.response ? quoteState.response.responseStatus : quoteState.status;\r\n  let quoteStatusString = quoteStatus ? utils.string.t(`QBstatus.${quoteStatus.toLowerCase()}`) : '-';\r\n  quoteStatusString = quoteStatusString === 'Quoted' ? utils.string.t('status.quote') : quoteStatusString;\r\n  const isQuoteBlocked = quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\r\n  const isBlocked = riskStatus === RISK_QUOTE_STATUS_BLOCKED || quoteStatus === RISK_QUOTE_STATUS_BLOCKED ? true : false;\r\n  const isExpired = quoteState.validUntil && utils.date.isBefore(quoteState.validUntil);\r\n  const isQuoted = quoteStatus === RISK_QUOTE_STATUS_QUOTED;\r\n  const isDraftOrReferred = [RISK_QUOTE_STATUS_DRAFT, RISK_QUOTE_STATUS_REFERRED].includes(quoteStatus);\r\n  const isReferred = quoteStatus === RISK_QUOTE_STATUS_REFERRED;\r\n  const isRejected = quoteStatus === RISK_QUOTE_STATUS_REJECTED;\r\n  const hasTemplate = quoteState.hasTemplate;\r\n\r\n  const defaultClientCommissionRate = quoteState?.facility?.commissionRates?.clientCommissionRate;\r\n  const defaultBrokerCommissionRate = quoteState?.facility?.commissionRates?.brokerCommissionRate;\r\n\r\n  const clientCommissionRatio = quoteState?.commission?.clientCommissionRatio || defaultClientCommissionRate;\r\n  const clientCommissionRate = quoteState?.commission?.clientCommissionRate || defaultClientCommissionRate;\r\n\r\n  const isQuoteCommission = isNumber(clientCommissionRate) && isNumber(clientCommissionRatio);\r\n  const isFacilityCommission = isNumber(defaultClientCommissionRate) && isNumber(defaultBrokerCommissionRate);\r\n\r\n  const grossPremium = quoteState?.grossPremium;\r\n\r\n  const premiumValue = `${quoteState?.currency ? utils.string.t(quoteState.currency) : ''} ${utils.string.t('format.number', {\r\n    value: { number: quotePremium, default: '-' },\r\n  })}`;\r\n  const canCurrentUserBind = quoteState?.canCurrentUserBind;\r\n  const requestedToBind = quoteState?.requestedToBind;\r\n  const displayPreBind = quoteState?.facility?.preBind;\r\n  const canCurrentUserDismissIssues = quoteState?.canCurrentUserDismissIssues;\r\n  const requestedToDismissIssues = quoteState?.requestedToDismissIssues;\r\n\r\n  useEffect(() => {\r\n    setHeight(ref.current.clientHeight);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setQuoteState(quote);\r\n  }, [quote]);\r\n\r\n  const handleUpdateCommission = async () => {\r\n    setIsLoading(true);\r\n    const rates = {\r\n      clientCommissionRatio: commission.commissionRatioClient,\r\n      clientCommissionRate: commission.netDownClientCommission,\r\n      scale: QUOTE_PREMIUM_PRECISION,\r\n    };\r\n    const result = await dispatch(putQuoteRates(rates, quoteState.id));\r\n    if (result) {\r\n      setQuoteState(result);\r\n    }\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleCommissionChange = (newCommission, isChanged) => {\r\n    setCommissionIsChanged(isChanged);\r\n    setCommission(newCommission);\r\n    const commissionRatioClient = isNumber(newCommission?.commissionRatioClient)\r\n      ? newCommission?.commissionRatioClient\r\n      : defaultClientCommissionRate;\r\n    const commissionRate =\r\n      commissionRatioClient === newCommission.netDownClientCommission\r\n        ? 1\r\n        : (1 - commissionRatioClient * 0.01) / (1 - newCommission.netDownClientCommission * 0.01);\r\n\r\n    const newPremium = parseFloat((grossPremium * commissionRate).toFixed(QUOTE_PREMIUM_PRECISION));\r\n    setQuotePremium(Math.round(newPremium));\r\n  };\r\n\r\n  const resetCommission = () => {\r\n    setUuid(new Date().getTime());\r\n    setCommissionIsChanged(false);\r\n    setQuotePremium(quoteState.premium);\r\n  };\r\n  const handleIssuesPopoverClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClosePopover = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const toggleDrawer = (value) => {\r\n    setDrawerOpen(value);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n  const statusBackgroundColor = theme.palette.status[quoteStatus?.toLowerCase()]\r\n    ? theme.palette.status[quoteStatus.toLowerCase()]\r\n    : theme.palette.status.default;\r\n  const statusColor = utils.color.contrast(statusBackgroundColor, 0.6);\r\n\r\n  const subheader = (\r\n    <>\r\n      {requestedToBind && isQuoted ? (\r\n        <Box style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Status\r\n            size=\"xs\"\r\n            text={<Translate label={utils.string.t('risks.requestToBindStatus')} />}\r\n            status=\"quoted\"\r\n            data-testid=\"quote-status\"\r\n            style={{\r\n              backgroundColor: statusBackgroundColor,\r\n              color: statusColor,\r\n            }}\r\n          />\r\n        </Box>\r\n      ) : (\r\n        <Box style={{ display: 'flex', alignItems: 'center' }}>\r\n          <Status\r\n            size=\"xs\"\r\n            text={<Translate label={`${quoteStatusString}`} />}\r\n            status={quoteStatus.toLowerCase()}\r\n            data-testid=\"quote-status\"\r\n            style={{\r\n              backgroundColor: statusBackgroundColor,\r\n              color: statusColor,\r\n            }}\r\n          />\r\n        </Box>\r\n      )}\r\n    </>\r\n  );\r\n  return isLoading ? (\r\n    <QuoteCardSkeleton height={height} />\r\n  ) : (\r\n    <>\r\n      {isBlocked || isRejected ? (\r\n        <>\r\n          <Drawer anchor=\"right\" open={drawerOpen} style={{ zIndex: 10000 }} onClose={() => toggleDrawer(false)}>\r\n            <Box p={2}>\r\n              <Box value=\"issues\" data-testid=\"tab-content-issues\">\r\n                {issuesData?.hasIssues && (\r\n                  <RiskIssues\r\n                    riskIssues={issuesData?.issues || []}\r\n                    quoteIssues={issuesData?.quoteIssues || []}\r\n                    insuredSanctionsCheckResult={issuesData?.insuredSanctionsCheckResult}\r\n                    reInsuredSanctionsCheckResult={issuesData?.reInsuredSanctionsCheckResult}\r\n                    canCurrentUserDismissIssues={canCurrentUserDismissIssues}\r\n                    handleRiskRefresh={handleRiskRefresh}\r\n                    quoteId={quote?.id}\r\n                  />\r\n                )}\r\n              </Box>\r\n            </Box>\r\n          </Drawer>\r\n        </>\r\n      ) : null}\r\n      <Card ref={ref} classes={{ root: classes.card }}>\r\n        {carrierName || createdAt ? (\r\n          <CardHeader\r\n            avatar={<Avatar icon={HowToVoteIcon} size={32} border />}\r\n            title={\r\n              <Typography variant=\"h3\" className={classes.cardFacility} style={{ textAlign: 'left' }}>\r\n                {carrierName}\r\n              </Typography>\r\n            }\r\n            subheader={subheader}\r\n          />\r\n        ) : null}\r\n        <CardContent classes={{ root: classes.cardContent }}>\r\n          <FormGrid container spacing={1}>\r\n            <QuoteLine\r\n              title={isReferred ? `` : utils.string.t('risks.grossPremium')}\r\n              value={isReferred ? utils.string.t('risks.referral') : premiumValue}\r\n            />\r\n            <QuoteLine\r\n              title={utils.string.t('app.createdAt')}\r\n              value={utils.string.t('format.date', {\r\n                value: { date: quoteState.createdAt, format: 'lll', default: '-' },\r\n              })}\r\n            />\r\n\r\n            <QuoteLine\r\n              title={utils.string.t('app.validUntil')}\r\n              value={utils.string.t('format.date', {\r\n                value: { date: quoteState.validUntil, format: 'lll', default: '-' },\r\n              })}\r\n            />\r\n          </FormGrid>\r\n        </CardContent>\r\n        {isQuoted && isQuoteCommission && isFacilityCommission ? (\r\n          <Restricted include={[ROLE_BROKER, ROLE_COBROKER]}>\r\n            <CardContent classes={{ root: classes.cardContentCommission }}>\r\n              <CommissionSlider\r\n                key={uuid}\r\n                defaultClientCommission={defaultClientCommissionRate}\r\n                defaultBrokerCommission={defaultBrokerCommissionRate}\r\n                netDownClientCommission={clientCommissionRate}\r\n                commissionRatioClient={clientCommissionRatio}\r\n                handleChangedValues={handleCommissionChange}\r\n                isSliderDisabled={requestedToBind}\r\n              />\r\n            </CardContent>\r\n          </Restricted>\r\n        ) : null}\r\n        {commissionIsChanged ? (\r\n          <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n            <Box px={1} pb={0.5} mb={1} display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" width=\"100%\">\r\n              <Box display=\"flex\" width=\"100%\" flexDirection=\"row\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  size=\"xsmall\"\r\n                  icon={DoneIcon}\r\n                  color=\"primary\"\r\n                  nestedClasses={{ icon: classes.icon }}\r\n                  onClick={handleUpdateCommission}\r\n                />\r\n                <Button\r\n                  size=\"xsmall\"\r\n                  icon={ClearIcon}\r\n                  color=\"default\"\r\n                  nestedClasses={{ btn: classes.btnMarginLeft, icon: classes.icon }}\r\n                  onClick={resetCommission}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </CardActions>\r\n        ) : (\r\n          <>\r\n            {isQuoted ? (\r\n              <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n                <Box px={1} pb={0.5} display=\"flex\" flexDirection=\"row\" justifyContent=\"space-between\" width=\"100%\">\r\n                  <Box display=\"flex\" width=\"100%\" flexDirection=\"row\" justifyContent=\"space-between\">\r\n                    {hasTemplate ? (\r\n                      <Box mr={1} mb={1}>\r\n                        <Button\r\n                          size=\"xsmall\"\r\n                          icon={PictureAsPdfIcon}\r\n                          color=\"secondary\"\r\n                          text={utils.string.t('risks.download')}\r\n                          nestedClasses={{ icon: classes.icon }}\r\n                          onClick={() =>\r\n                            handleDownloadQuote({\r\n                              quote: quoteState,\r\n                              insureds: utils.risk.getPartyValues('insureds', parties, riskInsuredId),\r\n                            })\r\n                          }\r\n                        />\r\n                      </Box>\r\n                    ) : null}\r\n                  </Box>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    flexDirection=\"row\"\r\n                    ml=\"auto\"\r\n                    flexWrap={canCurrentUserBind ? 'no-wrap' : 'wrap'}\r\n                    justifyContent=\"flex-end\"\r\n                  >\r\n                    {canCurrentUserBind ? (\r\n                      <>\r\n                        <Restricted include={[ROLE_BROKER]}>\r\n                          <Box mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              style={{ backgroundColor: 'rgb(44, 198, 171)' }}\r\n                              icon={CheckIcon}\r\n                              color=\"primary\"\r\n                              text={utils.string.t('risks.bind')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={() => (displayPreBind ? handlePreBind(quoteState, true) : handleBindRiskQuote(quoteState))}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        </Restricted>\r\n                        <Restricted include={[ROLE_UNDERWRITER]}>\r\n                          <Box mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              style={{ backgroundColor: 'rgb(44, 198, 171)' }}\r\n                              icon={CheckIcon}\r\n                              color=\"primary\"\r\n                              text={utils.string.t('risks.bind')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={() => handleBindRiskQuote(quoteState)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        </Restricted>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        {!requestedToBind ? (\r\n                          <Box whiteSpace=\"nowrap\" mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              style={{ backgroundColor: 'rgb(44, 198, 171)' }}\r\n                              icon={CheckIcon}\r\n                              color=\"primary\"\r\n                              text={utils.string.t('risks.requestToBind')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={() => handleRequestToBind(quoteState, displayPreBind)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        ) : null}\r\n                      </>\r\n                    )}\r\n                    {isExpired && <Button size=\"xsmall\" color=\"default\" text={utils.string.t('app.expired')} disabled />}\r\n                    <Restricted include={[ROLE_BROKER, ROLE_UNDERWRITER]}>\r\n                      {!isExpired && !isBlocked ? (\r\n                        <>\r\n                          <Box mr={1} mb={1}>\r\n                            <Button\r\n                              size=\"xsmall\"\r\n                              icon={BlockIcon}\r\n                              color=\"primary\"\r\n                              danger\r\n                              text={utils.string.t('risks.decline')}\r\n                              nestedClasses={{ icon: classes.icon }}\r\n                              onClick={() => handleDeclineRiskQuote(quoteState.id)}\r\n                              disabled={isBlocked}\r\n                            />\r\n                          </Box>\r\n                        </>\r\n                      ) : null}\r\n                    </Restricted>\r\n                  </Box>\r\n                </Box>\r\n              </CardActions>\r\n            ) : null}\r\n            {isDraftOrReferred && !isBlocked ? (\r\n              <Restricted include={[ROLE_BROKER, ROLE_UNDERWRITER]}>\r\n                <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n                  <Box px={1} pb={0.5} ml=\"auto\" display=\"flex\" flexWrap=\"wrap\" justifyContent=\"flex-end\">\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={BlockIcon}\r\n                        color=\"primary\"\r\n                        danger\r\n                        text={utils.string.t('risks.decline')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={() => handleDeclineRiskQuote(quoteState.id)}\r\n                        disabled={isBlocked}\r\n                      />\r\n                    </Box>\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={EditIcon}\r\n                        color=\"secondary\"\r\n                        text={utils.string.t('risks.update')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={() =>\r\n                          handlePatchRiskQuote({\r\n                            quote: quoteState,\r\n                          })\r\n                        }\r\n                        disabled={isBlocked}\r\n                      />\r\n                    </Box>\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={CheckIcon}\r\n                        color=\"primary\"\r\n                        text={utils.string.t('risks.accept')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={() => handleAcceptRiskQuote(quoteState.id)}\r\n                        disabled={isBlocked}\r\n                      />\r\n                    </Box>\r\n                  </Box>\r\n                </CardActions>\r\n              </Restricted>\r\n            ) : null}\r\n\r\n            {isBlocked || isRejected ? (\r\n              <CardActions disableSpacing classes={{ root: classes.cardActions }}>\r\n                <Box px={1} pb={0.5} ml=\"auto\" display=\"flex\" flexWrap=\"wrap\" justifyContent=\"flex-end\">\r\n                  {!canCurrentUserDismissIssues && !requestedToDismissIssues && isQuoteBlocked && quoteState?.id ? (\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        style={{ backgroundColor: 'rgb(237, 172, 0)', color: 'white' }}\r\n                        icon={ForwardIcon}\r\n                        color=\"primary\"\r\n                        text={utils.string.t('risks.refer')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={() => handleRequestDismissIssues(quoteState)}\r\n                      />\r\n                    </Box>\r\n                  ) : null}\r\n                  {issuesData?.issues?.length + issuesData?.quoteIssues?.length > 0 ? (\r\n                    <Box mr={1} mb={1}>\r\n                      <Button\r\n                        size=\"xsmall\"\r\n                        icon={InfoOutlinedIcon}\r\n                        color=\"primary\"\r\n                        danger\r\n                        text={utils.string.t('risks.issues')}\r\n                        nestedClasses={{ icon: classes.icon }}\r\n                        onClick={(e) =>\r\n                          issuesData?.issues?.length + issuesData?.quoteIssues?.length > 1\r\n                            ? toggleDrawer(true)\r\n                            : handleIssuesPopoverClick(e)\r\n                        }\r\n                      />\r\n                      <Popover\r\n                        id={id}\r\n                        open={open}\r\n                        anchorEl={anchorEl}\r\n                        onClose={handleClosePopover}\r\n                        anchorOrigin={{\r\n                          vertical: 'bottom',\r\n                          horizontal: 'center',\r\n                        }}\r\n                        transformOrigin={{\r\n                          vertical: 'top',\r\n                          horizontal: 'center',\r\n                        }}\r\n                      >\r\n                        <Box p={2} maxWidth={340}>\r\n                          <Box value=\"issues\" data-testid=\"tab-content-issues\">\r\n                            {issuesData?.hasIssues && (\r\n                              <RiskIssues\r\n                                riskIssues={issuesData?.issues}\r\n                                quoteIssues={issuesData?.quoteIssues}\r\n                                insuredSanctionsCheckResult={issuesData?.insuredSanctionsCheckResult}\r\n                                reInsuredSanctionsCheckResult={issuesData?.reInsuredSanctionsCheckResult}\r\n                                canCurrentUserDismissIssues={canCurrentUserDismissIssues}\r\n                                handleRiskRefresh={handleRiskRefresh}\r\n                                quoteId={quote?.id}\r\n                              />\r\n                            )}\r\n                          </Box>\r\n                        </Box>\r\n                      </Popover>\r\n                    </Box>\r\n                  ) : null}\r\n                </Box>\r\n              </CardActions>\r\n            ) : null}\r\n          </>\r\n        )}\r\n      </Card>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const QuoteCardSkeleton = ({ height = 'auto' }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card data-testid=\"skeleton-quote-card\" classes={{ root: classes.root }} style={{ height }}>\r\n      <CardHeader\r\n        avatar={<Skeleton animation=\"wave\" variant=\"circle\" width={40} height={40} />}\r\n        title={<Skeleton animation=\"wave\" height={10} width=\"80%\" style={{ marginBottom: 6 }} />}\r\n        subheader={<Skeleton animation=\"wave\" height={10} width=\"40%\" />}\r\n      />\r\n\r\n      <CardContent>\r\n        <>\r\n          <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n          <Skeleton animation=\"wave\" height={20} />\r\n        </>\r\n      </CardContent>\r\n      <CardContent classes={{ root: classes.cardContentCommission }}>\r\n        <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n        <Skeleton animation=\"wave\" height={20} style={{ marginBottom: 6 }} />\r\n        <Skeleton animation=\"wave\" height={20} />\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default QuoteCard;\r\n"]},"metadata":{},"sourceType":"module"}