{"ast":null,"code":"import _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\PlacementSummaryTop\\\\PlacementSummaryTop.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport classnames from 'classnames';\nimport kebabCase from 'lodash/kebabCase';\nimport get from 'lodash/get'; // app\n\nimport styles from './PlacementSummaryTop.styles';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { AvatarGroup, SummaryTop, Info, SeparatedList, Translate } from 'components';\nimport { LayerAccordion, PolicyAccordion } from 'modules';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { showModal } from 'stores'; // mui\n\nimport { makeStyles, Collapse, Fade } from '@material-ui/core';\nimport ApartmentIcon from '@material-ui/icons/Apartment';\nimport TodayIcon from '@material-ui/icons/Today';\nimport PeopleIcon from '@material-ui/icons/People';\nimport AddIcon from '@material-ui/icons/Add';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport uniqBy from 'lodash/uniqBy';\nimport * as constants from '../../consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nPlacementSummaryTop.propTypes = {\n  placement: PropTypes.object,\n  users: PropTypes.array,\n  showActions: PropTypes.bool,\n  showToggle: PropTypes.bool,\n  expanded: PropTypes.bool,\n  expandedToggle: PropTypes.oneOf(['btn', 'card']),\n  collapseActions: PropTypes.bool,\n  collapseTitle: PropTypes.bool,\n  collapseSubtitle: PropTypes.bool,\n  collapseDescription: PropTypes.bool,\n  collapseContent: PropTypes.bool,\n  handleExpand: PropTypes.func,\n  handleClickExpand: PropTypes.func,\n  testid: PropTypes.string\n};\nexport function PlacementSummaryTop(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpenSummaryTop = _useState2[0],\n      setIsOpenSummaryTop = _useState2[1];\n\n  var classes = makeStyles(styles, {\n    name: 'PlacementSummary'\n  })(); // state\n\n  var referenceDataDepartments = useSelector(function (state) {\n    return get(state, 'referenceData.departments');\n  });\n  var referenceDataStatusesPlacement = useSelector(function (state) {\n    return get(state, 'referenceData.statuses.placement');\n  });\n  var dispatch = useDispatch();\n\n  var renderSummaryHeaderInfos = function renderSummaryHeaderInfos() {\n    var _classesBoxes;\n\n    var placement = props.placement;\n    var _placement$locations = placement.locations,\n        locations = _placement$locations === void 0 ? [] : _placement$locations;\n    var hasLocations = locations && locations.length > 0;\n    var clients = utils.placement.getClients(placement).slice(0, 2).map(function (client, index) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: classes.clients,\n        children: client\n      }, \"\".concat(kebabCase(client), \"-\").concat(index), false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, _this);\n    });\n    var classesBoxes = (_classesBoxes = {}, _defineProperty(_classesBoxes, classes.headerBoxes, true), _defineProperty(_classesBoxes, classes.boxesEmpty, !hasLocations), _classesBoxes);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classnames(classes.headerInfo),\n      children: [placement.clients && placement.clients.length > 0 && /*#__PURE__*/_jsxDEV(Info, {\n        title: clients,\n        avatarIcon: ApartmentIcon,\n        nestedClasses: {\n          root: classes.headerBoxes,\n          content: classes.infoContent\n        },\n        \"data-testid\": \"summary-clients\",\n        ellipsis: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, _this), placement.inceptionDate && /*#__PURE__*/_jsxDEV(Info, {\n        title: /*#__PURE__*/_jsxDEV(Translate, {\n          label: \"format.date\",\n          options: {\n            value: {\n              date: placement.inceptionDate,\n              format: config.ui.format.date.text\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, _this),\n        avatarIcon: TodayIcon,\n        nestedClasses: {\n          root: classes.headerBoxes,\n          details: classes.infoContent\n        },\n        \"data-testid\": \"summary-inceptiondate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, _this), hasLocations ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(classesBoxes),\n        children: /*#__PURE__*/_jsxDEV(Fade, {\n          in: hasLocations,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Collapse, {\n              in: hasLocations,\n              children: /*#__PURE__*/_jsxDEV(Info, {\n                title: /*#__PURE__*/_jsxDEV(Translate, {\n                  label: \"format.currency\",\n                  options: {\n                    value: {\n                      number: utils.location.getTiv(locations),\n                      currency: 'USD'\n                    }\n                  },\n                  nestedClasses: {\n                    details: classes.infoContent\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 23\n                }, _this),\n                avatarIcon: AddIcon,\n                \"data-testid\": \"summary-locations-tiv\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, _this) : null, hasLocations ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(classesBoxes),\n        children: /*#__PURE__*/_jsxDEV(Fade, {\n          in: hasLocations,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Collapse, {\n              in: hasLocations,\n              children: /*#__PURE__*/_jsxDEV(Info, {\n                title: locations.length,\n                avatarIcon: LocationOnIcon,\n                \"data-testid\": \"summary-locations-count\",\n                nestedClasses: {\n                  details: classes.infoContent\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, _this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var renderSummaryInfos = function renderSummaryInfos() {\n    var _classesBoxes2;\n\n    var placement = props.placement,\n        users = props.users;\n    var _placement$locations2 = placement.locations,\n        locations = _placement$locations2 === void 0 ? [] : _placement$locations2;\n    var hasLocations = locations && locations.length > 0;\n    var clients = utils.placement.getClients(placement).map(function (client, index) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: classes.clients,\n        children: client\n      }, \"\".concat(kebabCase(client), \"-\").concat(index), false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, _this);\n    });\n    var brokers = utils.users.getBrokers(users, {\n      gxbUsersIncluded: true\n    });\n    var cobrokersPlacement = utils.users.getCobrokers(users);\n    var cobrokersOffice = utils.placement.getOfficeCobrokers(placement);\n    var cobrokers = uniqBy([].concat(_toConsumableArray(cobrokersPlacement), _toConsumableArray(cobrokersOffice)));\n    var classesBoxes = (_classesBoxes2 = {}, _defineProperty(_classesBoxes2, classes.boxes, true), _defineProperty(_classesBoxes2, classes.boxesEmpty, !hasLocations), _classesBoxes2);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classnames(classes.info),\n      children: [placement.clients && placement.clients.length > 0 && /*#__PURE__*/_jsxDEV(Info, {\n        title: utils.string.t('app.client', {\n          count: placement.clients.length\n        }),\n        avatarIcon: ApartmentIcon,\n        description: clients,\n        nestedClasses: {\n          root: classes.boxes\n        },\n        \"data-testid\": \"summary-clients\",\n        ellipsis: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, _this), placement.inceptionDate && /*#__PURE__*/_jsxDEV(Info, {\n        title: utils.string.t('app.inceptionDate'),\n        avatarIcon: TodayIcon,\n        description: /*#__PURE__*/_jsxDEV(Translate, {\n          label: \"format.date\",\n          options: {\n            value: {\n              date: placement.inceptionDate,\n              format: config.ui.format.date.text\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }, _this),\n        nestedClasses: {\n          root: classes.boxes\n        },\n        \"data-testid\": \"summary-inceptiondate\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, _this), brokers && brokers.length > 0 && /*#__PURE__*/_jsxDEV(Info, {\n        title: utils.string.t('app.broker', {\n          count: brokers.length\n        }),\n        avatarIcon: PeopleIcon,\n        content: /*#__PURE__*/_jsxDEV(AvatarGroup, {\n          users: brokers,\n          max: 3,\n          testid: \"summary-brokers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 22\n        }, _this),\n        nestedClasses: {\n          root: classes.boxes\n        },\n        \"data-testid\": \"summary-brokers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, _this), cobrokers && cobrokers.length > 0 && /*#__PURE__*/_jsxDEV(Info, {\n        title: utils.string.t('app.cobroker', {\n          count: cobrokers.length\n        }),\n        avatarIcon: PeopleIcon,\n        content: /*#__PURE__*/_jsxDEV(AvatarGroup, {\n          users: cobrokers,\n          max: 3,\n          testid: \"summary-cobrokers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 22\n        }, _this),\n        nestedClasses: {\n          root: classes.boxes\n        },\n        \"data-testid\": \"summary-cobrokers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(classesBoxes),\n        children: /*#__PURE__*/_jsxDEV(Fade, {\n          in: hasLocations,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Collapse, {\n              in: hasLocations,\n              children: /*#__PURE__*/_jsxDEV(Info, {\n                title: utils.string.t('app.totalInsurableValue'),\n                avatarIcon: AddIcon,\n                description: /*#__PURE__*/_jsxDEV(Translate, {\n                  label: \"format.currency\",\n                  options: {\n                    value: {\n                      number: utils.location.getTiv(locations),\n                      currency: 'USD'\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 21\n                }, _this),\n                \"data-testid\": \"summary-locations-tiv\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(classesBoxes),\n        children: /*#__PURE__*/_jsxDEV(Fade, {\n          in: hasLocations,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Collapse, {\n              in: hasLocations,\n              children: /*#__PURE__*/_jsxDEV(Info, {\n                title: utils.string.t('app.locationsCount'),\n                avatarIcon: LocationOnIcon,\n                description: locations.length,\n                \"data-testid\": \"summary-locations-count\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var placement = props.placement,\n      showToggle = props.showToggle,\n      expanded = props.expanded,\n      expandToggle = props.expandToggle,\n      collapseActions = props.collapseActions,\n      collapseTitle = props.collapseTitle,\n      collapseSubtitle = props.collapseSubtitle,\n      collapseDescription = props.collapseDescription,\n      collapseContent = props.collapseContent,\n      handleExpand = props.handleExpand,\n      handleClickExpand = props.handleClickExpand,\n      testid = props.testid; // abort\n\n  if (!placement || !placement.id) return null;\n  var department = utils.referenceData.departments.getById(referenceDataDepartments, placement.departmentId) || {};\n  var statusBoundId = utils.referenceData.status.getIdByCode(referenceDataStatusesPlacement, constants.STATUS_PLACEMENT_BOUND);\n  var statusLabel = utils.referenceData.status.getLabelById(referenceDataStatusesPlacement, placement.statusId);\n  var isBound = utils.placement.isBound(placement, statusBoundId);\n\n  var handleSummaryTop = function handleSummaryTop() {\n    setIsOpenSummaryTop(function (prev) {\n      return !prev;\n    });\n  };\n\n  var handleEditPlacement = function handleEditPlacement() {\n    dispatch(showModal({\n      component: 'EDIT_PLACEMENT',\n      props: {\n        title: 'renewals.editPlacement',\n        subtitle: utils.string.t('renewals.editPlacementHint', {\n          placement: placement.insureds.map(function (insured) {\n            return insured.name;\n          })\n        }),\n        fullWidth: true,\n        maxWidth: 'md',\n        componentProps: {\n          placement: placement,\n          calendarView: false\n        }\n      }\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n      onClickAway: function onClickAway() {\n        isOpenSummaryTop && handleSummaryTop();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.summaryContainer,\n        children: /*#__PURE__*/_jsxDEV(SummaryTop, {\n          status: statusLabel,\n          title: /*#__PURE__*/_jsxDEV(SeparatedList, {\n            list: placement.insureds,\n            flag: \"isProvisional\",\n            flagSize: \"80%\",\n            flagIcon: InfoOutlinedIcon,\n            flagTooltip: /*#__PURE__*/_jsxDEV(Translate, {\n              label: \"renewals.provisionalInsuredTooltip\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 30\n            }, this),\n            hover: true,\n            hoverWeight: \"regular\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this),\n          subtitle: department.name,\n          description: placement.description,\n          infos: renderSummaryInfos(),\n          headerInfo: renderSummaryHeaderInfos(),\n          showToggle: showToggle,\n          expanded: expanded,\n          expandToggle: expandToggle,\n          collapseActions: collapseActions,\n          collapseTitle: collapseTitle,\n          collapseSubtitle: collapseSubtitle,\n          collapseDescription: collapseDescription,\n          collapseContent: collapseContent,\n          handleExpand: handleExpand,\n          handleClickExpand: handleClickExpand,\n          isOpen: isOpenSummaryTop,\n          handleSummaryTop: handleSummaryTop,\n          handleEditPlacement: handleEditPlacement,\n          testid: testid,\n          children: isBound ? /*#__PURE__*/_jsxDEV(PolicyAccordion, {\n            placement: placement,\n            nestedClasses: {\n              root: classes.accordion\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(LayerAccordion, {\n            placement: placement,\n            nestedClasses: {\n              root: classes.accordion\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(PlacementSummaryTop, \"Tr6upObpw2eZbjwatSWShESHQYM=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = PlacementSummaryTop;\nexport default PlacementSummaryTop;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlacementSummaryTop\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/PlacementSummaryTop/PlacementSummaryTop.js"],"names":["React","useState","PropTypes","useSelector","useDispatch","classnames","kebabCase","get","styles","ClickAwayListener","AvatarGroup","SummaryTop","Info","SeparatedList","Translate","LayerAccordion","PolicyAccordion","utils","config","showModal","makeStyles","Collapse","Fade","ApartmentIcon","TodayIcon","PeopleIcon","AddIcon","LocationOnIcon","InfoOutlinedIcon","uniqBy","constants","PlacementSummaryTop","propTypes","placement","object","users","array","showActions","bool","showToggle","expanded","expandedToggle","oneOf","collapseActions","collapseTitle","collapseSubtitle","collapseDescription","collapseContent","handleExpand","func","handleClickExpand","testid","string","props","isOpenSummaryTop","setIsOpenSummaryTop","classes","name","referenceDataDepartments","state","referenceDataStatusesPlacement","dispatch","renderSummaryHeaderInfos","locations","hasLocations","length","clients","getClients","slice","map","client","index","classesBoxes","headerBoxes","boxesEmpty","headerInfo","root","content","infoContent","inceptionDate","value","date","format","ui","text","details","number","location","getTiv","currency","renderSummaryInfos","brokers","getBrokers","gxbUsersIncluded","cobrokersPlacement","getCobrokers","cobrokersOffice","getOfficeCobrokers","cobrokers","boxes","info","t","count","expandToggle","id","department","referenceData","departments","getById","departmentId","statusBoundId","status","getIdByCode","STATUS_PLACEMENT_BOUND","statusLabel","getLabelById","statusId","isBound","handleSummaryTop","prev","handleEditPlacement","component","title","subtitle","insureds","insured","fullWidth","maxWidth","componentProps","calendarView","summaryContainer","description","accordion"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport classnames from 'classnames';\r\nimport kebabCase from 'lodash/kebabCase';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport styles from './PlacementSummaryTop.styles';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport { AvatarGroup, SummaryTop, Info, SeparatedList, Translate } from 'components';\r\nimport { LayerAccordion, PolicyAccordion } from 'modules';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport { showModal } from 'stores';\r\n\r\n// mui\r\nimport { makeStyles, Collapse, Fade } from '@material-ui/core';\r\nimport ApartmentIcon from '@material-ui/icons/Apartment';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport uniqBy from 'lodash/uniqBy';\r\nimport * as constants from '../../consts';\r\n\r\nPlacementSummaryTop.propTypes = {\r\n  placement: PropTypes.object,\r\n  users: PropTypes.array,\r\n  showActions: PropTypes.bool,\r\n  showToggle: PropTypes.bool,\r\n  expanded: PropTypes.bool,\r\n  expandedToggle: PropTypes.oneOf(['btn', 'card']),\r\n  collapseActions: PropTypes.bool,\r\n  collapseTitle: PropTypes.bool,\r\n  collapseSubtitle: PropTypes.bool,\r\n  collapseDescription: PropTypes.bool,\r\n  collapseContent: PropTypes.bool,\r\n  handleExpand: PropTypes.func,\r\n  handleClickExpand: PropTypes.func,\r\n  testid: PropTypes.string,\r\n};\r\n\r\nexport function PlacementSummaryTop(props) {\r\n  const [isOpenSummaryTop, setIsOpenSummaryTop] = useState(false);\r\n  const classes = makeStyles(styles, { name: 'PlacementSummary' })();\r\n  // state\r\n\r\n  const referenceDataDepartments = useSelector((state) => get(state, 'referenceData.departments'));\r\n  const referenceDataStatusesPlacement = useSelector((state) => get(state, 'referenceData.statuses.placement'));\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const renderSummaryHeaderInfos = () => {\r\n    const { placement } = props;\r\n    const { locations = [] } = placement;\r\n    const hasLocations = locations && locations.length > 0;\r\n\r\n    const clients = utils.placement\r\n      .getClients(placement)\r\n      .slice(0, 2)\r\n      .map((client, index) => {\r\n        return (\r\n          <span key={`${kebabCase(client)}-${index}`} className={classes.clients}>\r\n            {client}\r\n          </span>\r\n        );\r\n      });\r\n\r\n    const classesBoxes = {\r\n      [classes.headerBoxes]: true,\r\n      [classes.boxesEmpty]: !hasLocations,\r\n    };\r\n\r\n    return (\r\n      <div className={classnames(classes.headerInfo)}>\r\n        {placement.clients && placement.clients.length > 0 && (\r\n          <Info\r\n            title={clients}\r\n            avatarIcon={ApartmentIcon}\r\n            nestedClasses={{ root: classes.headerBoxes, content: classes.infoContent }}\r\n            data-testid=\"summary-clients\"\r\n            ellipsis={true}\r\n          />\r\n        )}\r\n\r\n        {placement.inceptionDate && (\r\n          <Info\r\n            title={\r\n              <Translate label=\"format.date\" options={{ value: { date: placement.inceptionDate, format: config.ui.format.date.text } }} />\r\n            }\r\n            avatarIcon={TodayIcon}\r\n            nestedClasses={{ root: classes.headerBoxes, details: classes.infoContent }}\r\n            data-testid=\"summary-inceptiondate\"\r\n          />\r\n        )}\r\n        {hasLocations ? (\r\n          <div className={classnames(classesBoxes)}>\r\n            <Fade in={hasLocations}>\r\n              <div>\r\n                <Collapse in={hasLocations}>\r\n                  <Info\r\n                    title={\r\n                      <Translate\r\n                        label=\"format.currency\"\r\n                        options={{ value: { number: utils.location.getTiv(locations), currency: 'USD' } }}\r\n                        nestedClasses={{ details: classes.infoContent }}\r\n                      />\r\n                    }\r\n                    avatarIcon={AddIcon}\r\n                    data-testid=\"summary-locations-tiv\"\r\n                  />\r\n                </Collapse>\r\n              </div>\r\n            </Fade>\r\n          </div>\r\n        ) : null}\r\n        {hasLocations ? (\r\n          <div className={classnames(classesBoxes)}>\r\n            <Fade in={hasLocations}>\r\n              <div>\r\n                <Collapse in={hasLocations}>\r\n                  <Info\r\n                    title={locations.length}\r\n                    avatarIcon={LocationOnIcon}\r\n                    data-testid=\"summary-locations-count\"\r\n                    nestedClasses={{ details: classes.infoContent }}\r\n                  />\r\n                </Collapse>\r\n              </div>\r\n            </Fade>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderSummaryInfos = () => {\r\n    const { placement, users } = props;\r\n    const { locations = [] } = placement;\r\n\r\n    const hasLocations = locations && locations.length > 0;\r\n\r\n    const clients = utils.placement.getClients(placement).map((client, index) => {\r\n      return (\r\n        <span key={`${kebabCase(client)}-${index}`} className={classes.clients}>\r\n          {client}\r\n        </span>\r\n      );\r\n    });\r\n\r\n    const brokers = utils.users.getBrokers(users, { gxbUsersIncluded: true });\r\n    const cobrokersPlacement = utils.users.getCobrokers(users);\r\n    const cobrokersOffice = utils.placement.getOfficeCobrokers(placement);\r\n    const cobrokers = uniqBy([...cobrokersPlacement, ...cobrokersOffice]);\r\n\r\n    const classesBoxes = {\r\n      [classes.boxes]: true,\r\n      [classes.boxesEmpty]: !hasLocations,\r\n    };\r\n\r\n    return (\r\n      <div className={classnames(classes.info)}>\r\n        {placement.clients && placement.clients.length > 0 && (\r\n          <Info\r\n            title={utils.string.t('app.client', { count: placement.clients.length })}\r\n            avatarIcon={ApartmentIcon}\r\n            description={clients}\r\n            nestedClasses={{ root: classes.boxes }}\r\n            data-testid=\"summary-clients\"\r\n            ellipsis\r\n          />\r\n        )}\r\n\r\n        {placement.inceptionDate && (\r\n          <Info\r\n            title={utils.string.t('app.inceptionDate')}\r\n            avatarIcon={TodayIcon}\r\n            description={\r\n              <Translate label=\"format.date\" options={{ value: { date: placement.inceptionDate, format: config.ui.format.date.text } }} />\r\n            }\r\n            nestedClasses={{ root: classes.boxes }}\r\n            data-testid=\"summary-inceptiondate\"\r\n          />\r\n        )}\r\n\r\n        {brokers && brokers.length > 0 && (\r\n          <Info\r\n            title={utils.string.t('app.broker', { count: brokers.length })}\r\n            avatarIcon={PeopleIcon}\r\n            content={<AvatarGroup users={brokers} max={3} testid=\"summary-brokers\" />}\r\n            nestedClasses={{ root: classes.boxes }}\r\n            data-testid=\"summary-brokers\"\r\n          />\r\n        )}\r\n\r\n        {cobrokers && cobrokers.length > 0 && (\r\n          <Info\r\n            title={utils.string.t('app.cobroker', { count: cobrokers.length })}\r\n            avatarIcon={PeopleIcon}\r\n            content={<AvatarGroup users={cobrokers} max={3} testid=\"summary-cobrokers\" />}\r\n            nestedClasses={{ root: classes.boxes }}\r\n            data-testid=\"summary-cobrokers\"\r\n          />\r\n        )}\r\n\r\n        <div className={classnames(classesBoxes)}>\r\n          <Fade in={hasLocations}>\r\n            <div>\r\n              <Collapse in={hasLocations}>\r\n                <Info\r\n                  title={utils.string.t('app.totalInsurableValue')}\r\n                  avatarIcon={AddIcon}\r\n                  description={\r\n                    <Translate label=\"format.currency\" options={{ value: { number: utils.location.getTiv(locations), currency: 'USD' } }} />\r\n                  }\r\n                  data-testid=\"summary-locations-tiv\"\r\n                />\r\n              </Collapse>\r\n            </div>\r\n          </Fade>\r\n        </div>\r\n\r\n        <div className={classnames(classesBoxes)}>\r\n          <Fade in={hasLocations}>\r\n            <div>\r\n              <Collapse in={hasLocations}>\r\n                <Info\r\n                  title={utils.string.t('app.locationsCount')}\r\n                  avatarIcon={LocationOnIcon}\r\n                  description={locations.length}\r\n                  data-testid=\"summary-locations-count\"\r\n                />\r\n              </Collapse>\r\n            </div>\r\n          </Fade>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const {\r\n    placement,\r\n    showToggle,\r\n    expanded,\r\n    expandToggle,\r\n    collapseActions,\r\n    collapseTitle,\r\n    collapseSubtitle,\r\n    collapseDescription,\r\n    collapseContent,\r\n    handleExpand,\r\n    handleClickExpand,\r\n    testid,\r\n  } = props;\r\n\r\n  // abort\r\n  if (!placement || !placement.id) return null;\r\n\r\n  const department = utils.referenceData.departments.getById(referenceDataDepartments, placement.departmentId) || {};\r\n  const statusBoundId = utils.referenceData.status.getIdByCode(referenceDataStatusesPlacement, constants.STATUS_PLACEMENT_BOUND);\r\n  const statusLabel = utils.referenceData.status.getLabelById(referenceDataStatusesPlacement, placement.statusId);\r\n  const isBound = utils.placement.isBound(placement, statusBoundId);\r\n\r\n  const handleSummaryTop = () => {\r\n    setIsOpenSummaryTop((prev) => !prev);\r\n  };\r\n\r\n  const handleEditPlacement = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'EDIT_PLACEMENT',\r\n        props: {\r\n          title: 'renewals.editPlacement',\r\n          subtitle: utils.string.t('renewals.editPlacementHint', { placement: placement.insureds.map((insured) => insured.name) }),\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          componentProps: {\r\n            placement: placement,\r\n            calendarView: false,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ClickAwayListener\r\n        onClickAway={() => {\r\n          isOpenSummaryTop && handleSummaryTop();\r\n        }}\r\n      >\r\n        <div className={classes.summaryContainer}>\r\n          <SummaryTop\r\n            status={statusLabel}\r\n            title={\r\n              <SeparatedList\r\n                list={placement.insureds}\r\n                flag=\"isProvisional\"\r\n                flagSize=\"80%\"\r\n                flagIcon={InfoOutlinedIcon}\r\n                flagTooltip={<Translate label=\"renewals.provisionalInsuredTooltip\" />}\r\n                hover\r\n                hoverWeight=\"regular\"\r\n              />\r\n            }\r\n            subtitle={department.name}\r\n            description={placement.description}\r\n            infos={renderSummaryInfos()}\r\n            headerInfo={renderSummaryHeaderInfos()}\r\n            showToggle={showToggle}\r\n            expanded={expanded}\r\n            expandToggle={expandToggle}\r\n            collapseActions={collapseActions}\r\n            collapseTitle={collapseTitle}\r\n            collapseSubtitle={collapseSubtitle}\r\n            collapseDescription={collapseDescription}\r\n            collapseContent={collapseContent}\r\n            handleExpand={handleExpand}\r\n            handleClickExpand={handleClickExpand}\r\n            isOpen={isOpenSummaryTop}\r\n            handleSummaryTop={handleSummaryTop}\r\n            handleEditPlacement={handleEditPlacement}\r\n            testid={testid}\r\n          >\r\n            {isBound ? (\r\n              <PolicyAccordion placement={placement} nestedClasses={{ root: classes.accordion }} />\r\n            ) : (\r\n              <LayerAccordion placement={placement} nestedClasses={{ root: classes.accordion }} />\r\n            )}\r\n          </SummaryTop>\r\n        </div>\r\n      </ClickAwayListener>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PlacementSummaryTop;\r\n"]},"metadata":{},"sourceType":"module"}