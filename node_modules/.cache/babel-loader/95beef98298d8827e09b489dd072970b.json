{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport * as utils from 'utils';\nimport { addLoader, removeLoader, authLogout } from 'stores';\nimport config from 'config';\nimport get from 'lodash/get';\nexport var getUsers = function getUsers() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint,\n        userList = _getState.administration.userList;\n\n    var page = params.page,\n        size = params.size,\n        sortBy = params.sortBy,\n        direction = params.direction,\n        searchBy = params.searchBy,\n        _params$filters = params.filters,\n        filters = _params$filters === void 0 ? {} : _params$filters;\n    var defaultError = {\n      file: 'stores/administration.actions.getUsers'\n    };\n    var prevQuery = get(userList, 'query') || '';\n    var newQuery = params.hasOwnProperty('searchBy') ? searchBy : prevQuery;\n    var prevFilters = get(userList, 'filters') || {};\n    var newFilters = params.hasOwnProperty('filters') ? filters : prevFilters;\n    var filtersObject = Object.entries(newFilters).reduce(function (acc, _ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n\n      var filterValues = value.map(function (v) {\n        return v.id;\n      }).join(',');\n      return filterValues ? _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, filterValues)) : acc;\n    }, {});\n    var businessProcessId = params.hasOwnProperty('businessProcessIds') ? {\n      businessProcessIds: params.businessProcessIds\n    } : null;\n\n    var apiParams = _objectSpread(_objectSpread(_objectSpread({\n      page: page || 1,\n      pageSize: size || (userList === null || userList === void 0 ? void 0 : userList.pageSize),\n      sortBy: sortBy || (userList === null || userList === void 0 ? void 0 : userList.sortBy),\n      direction: direction || (userList === null || userList === void 0 ? void 0 : userList.sortDirection) || ''\n    }, newQuery && {\n      searchBy: newQuery\n    }), filtersObject), businessProcessId);\n\n    dispatch(getUsersRequest(params));\n    dispatch(addLoader('getUsers'));\n    return utils.api.get({\n      token: auth.accessToken,\n      endpoint: endpoint.authService,\n      path: 'api/users',\n      params: apiParams\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleNewData(json);\n    }).then(function (json) {\n      dispatch(getUsersSuccess(json, newFilters));\n    }).catch(function (err) {\n      utils.api.handleError(err, defaultError);\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      dispatch(getUsersFailure(err));\n      return err;\n    }).finally(function () {\n      dispatch(removeLoader('getUsers'));\n    });\n  };\n};\nexport var getUsersRequest = function getUsersRequest(params) {\n  return {\n    type: 'ADMINISTRATION_USERS_GET_REQUEST',\n    payload: params\n  };\n};\nexport var getUsersSuccess = function getUsersSuccess(json, filters) {\n  var _json$pagination, _json$pagination2, _json$pagination3, _json$pagination4, _json$pagination5, _json$pagination6, _json$pagination7;\n\n  return {\n    type: 'ADMINISTRATION_USERS_GET_SUCCESS',\n    payload: {\n      content: json === null || json === void 0 ? void 0 : json.data,\n      pagination: {\n        itemsTotal: (json === null || json === void 0 ? void 0 : (_json$pagination = json.pagination) === null || _json$pagination === void 0 ? void 0 : _json$pagination.totalElements) || 0,\n        page: (json === null || json === void 0 ? void 0 : (_json$pagination2 = json.pagination) === null || _json$pagination2 === void 0 ? void 0 : _json$pagination2.page) || 1,\n        pageSize: (json === null || json === void 0 ? void 0 : (_json$pagination3 = json.pagination) === null || _json$pagination3 === void 0 ? void 0 : _json$pagination3.size) || config.ui.pagination.default,\n        pageTotal: (json === null || json === void 0 ? void 0 : (_json$pagination4 = json.pagination) === null || _json$pagination4 === void 0 ? void 0 : _json$pagination4.totalPages) || 0,\n        query: (json === null || json === void 0 ? void 0 : (_json$pagination5 = json.pagination) === null || _json$pagination5 === void 0 ? void 0 : _json$pagination5.searchBy) || ''\n      },\n      sort: {\n        sortBy: json === null || json === void 0 ? void 0 : (_json$pagination6 = json.pagination) === null || _json$pagination6 === void 0 ? void 0 : _json$pagination6.orderBy,\n        sortDirection: (json === null || json === void 0 ? void 0 : (_json$pagination7 = json.pagination) === null || _json$pagination7 === void 0 ? void 0 : _json$pagination7.direction) || ''\n      },\n      filters: filters || {}\n    }\n  };\n};\nexport var getUsersFailure = function getUsersFailure(data) {\n  return {\n    type: 'ADMINISTRATION_USERS_GET_FAILURE',\n    payload: data\n  };\n};\nexport var resetUsers = function resetUsers() {\n  return {\n    type: 'ADMINISTRATION_RESET_USERS'\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/administration/administration.actions.getUsers.js"],"names":["utils","addLoader","removeLoader","authLogout","config","get","getUsers","params","dispatch","getState","auth","user","endpoint","vars","userList","administration","page","size","sortBy","direction","searchBy","filters","defaultError","file","prevQuery","newQuery","hasOwnProperty","prevFilters","newFilters","filtersObject","Object","entries","reduce","acc","key","value","filterValues","map","v","id","join","businessProcessId","businessProcessIds","apiParams","pageSize","sortDirection","getUsersRequest","api","token","accessToken","authService","path","then","response","handleResponse","json","handleNewData","getUsersSuccess","catch","err","handleError","handleUnauthorized","getUsersFailure","finally","type","payload","content","data","pagination","itemsTotal","totalElements","ui","default","pageTotal","totalPages","query","sort","orderBy","resetUsers"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,SAAT,EAAoBC,YAApB,EAAkCC,UAAlC,QAAoD,QAApD;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AAEA,OAAO,IAAMC,QAAQ,GACnB,SADWA,QACX;AAAA,MAACC,MAAD,uEAAU,EAAV;AAAA,SACA,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACtB;AADsB,oBAEmEA,QAAQ,EAF3E;AAAA,QAENC,IAFM,aAEdC,IAFc,CAEND,IAFM;AAAA,QAEoBE,QAFpB,aAEER,MAFF,CAEYS,IAFZ,CAEoBD,QAFpB;AAAA,QAEoDE,QAFpD,aAEkCC,cAFlC,CAEoDD,QAFpD;;AAAA,QAGdE,IAHc,GAG4CT,MAH5C,CAGdS,IAHc;AAAA,QAGRC,IAHQ,GAG4CV,MAH5C,CAGRU,IAHQ;AAAA,QAGFC,MAHE,GAG4CX,MAH5C,CAGFW,MAHE;AAAA,QAGMC,SAHN,GAG4CZ,MAH5C,CAGMY,SAHN;AAAA,QAGiBC,QAHjB,GAG4Cb,MAH5C,CAGiBa,QAHjB;AAAA,0BAG4Cb,MAH5C,CAG2Bc,OAH3B;AAAA,QAG2BA,OAH3B,gCAGqC,EAHrC;AAKtB,QAAMC,YAAY,GAAG;AACnBC,MAAAA,IAAI,EAAE;AADa,KAArB;AAIA,QAAMC,SAAS,GAAGnB,GAAG,CAACS,QAAD,EAAW,OAAX,CAAH,IAA0B,EAA5C;AACA,QAAMW,QAAQ,GAAGlB,MAAM,CAACmB,cAAP,CAAsB,UAAtB,IAAoCN,QAApC,GAA+CI,SAAhE;AAEA,QAAMG,WAAW,GAAGtB,GAAG,CAACS,QAAD,EAAW,SAAX,CAAH,IAA4B,EAAhD;AACA,QAAMc,UAAU,GAAGrB,MAAM,CAACmB,cAAP,CAAsB,SAAtB,IAAmCL,OAAnC,GAA6CM,WAAhE;AAEA,QAAME,aAAa,GAAGC,MAAM,CAACC,OAAP,CAAeH,UAAf,EAA2BI,MAA3B,CAAkC,UAACC,GAAD,QAAuB;AAAA;AAAA,UAAhBC,GAAgB;AAAA,UAAXC,KAAW;;AAC7E,UAAMC,YAAY,GAAGD,KAAK,CAACE,GAAN,CAAU,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACC,EAAT;AAAA,OAAV,EAAuBC,IAAvB,CAA4B,GAA5B,CAArB;AAEA,aAAOJ,YAAY,mCAEVH,GAFU,2BAGZC,GAHY,EAGNE,YAHM,KAKfH,GALJ;AAMD,KATqB,EASnB,EATmB,CAAtB;AAWA,QAAMQ,iBAAiB,GAAGlC,MAAM,CAACmB,cAAP,CAAsB,oBAAtB,IAA8C;AAAEgB,MAAAA,kBAAkB,EAAEnC,MAAM,CAACmC;AAA7B,KAA9C,GAAkG,IAA5H;;AAEA,QAAMC,SAAS;AACb3B,MAAAA,IAAI,EAAEA,IAAI,IAAI,CADD;AAEb4B,MAAAA,QAAQ,EAAE3B,IAAI,KAAIH,QAAJ,aAAIA,QAAJ,uBAAIA,QAAQ,CAAE8B,QAAd,CAFD;AAGb1B,MAAAA,MAAM,EAAEA,MAAM,KAAIJ,QAAJ,aAAIA,QAAJ,uBAAIA,QAAQ,CAAEI,MAAd,CAHD;AAIbC,MAAAA,SAAS,EAAEA,SAAS,KAAIL,QAAJ,aAAIA,QAAJ,uBAAIA,QAAQ,CAAE+B,aAAd,CAAT,IAAwC;AAJtC,OAKTpB,QAAQ,IAAI;AAAEL,MAAAA,QAAQ,EAAEK;AAAZ,KALH,GAMVI,aANU,GAOVY,iBAPU,CAAf;;AAUAjC,IAAAA,QAAQ,CAACsC,eAAe,CAACvC,MAAD,CAAhB,CAAR;AACAC,IAAAA,QAAQ,CAACP,SAAS,CAAC,UAAD,CAAV,CAAR;AAEA,WAAOD,KAAK,CAAC+C,GAAN,CACJ1C,GADI,CACA;AACH2C,MAAAA,KAAK,EAAEtC,IAAI,CAACuC,WADT;AAEHrC,MAAAA,QAAQ,EAAEA,QAAQ,CAACsC,WAFhB;AAGHC,MAAAA,IAAI,EAAE,WAHH;AAIH5C,MAAAA,MAAM,EAAEoC;AAJL,KADA,EAOJS,IAPI,CAOC,UAACC,QAAD;AAAA,aAAcrD,KAAK,CAAC+C,GAAN,CAAUO,cAAV,CAAyBD,QAAzB,CAAd;AAAA,KAPD,EAQJD,IARI,CAQC,UAACG,IAAD;AAAA,aAAUvD,KAAK,CAAC+C,GAAN,CAAUS,aAAV,CAAwBD,IAAxB,CAAV;AAAA,KARD,EASJH,IATI,CASC,UAACG,IAAD,EAAU;AACd/C,MAAAA,QAAQ,CAACiD,eAAe,CAACF,IAAD,EAAO3B,UAAP,CAAhB,CAAR;AACD,KAXI,EAYJ8B,KAZI,CAYE,UAACC,GAAD,EAAS;AACd3D,MAAAA,KAAK,CAAC+C,GAAN,CAAUa,WAAV,CAAsBD,GAAtB,EAA2BrC,YAA3B;AACAtB,MAAAA,KAAK,CAAC+C,GAAN,CAAUc,kBAAV,CAA6BF,GAA7B,EAAkCnD,QAAlC,EAA4CL,UAA5C;AACAK,MAAAA,QAAQ,CAACsD,eAAe,CAACH,GAAD,CAAhB,CAAR;AACA,aAAOA,GAAP;AACD,KAjBI,EAkBJI,OAlBI,CAkBI,YAAM;AACbvD,MAAAA,QAAQ,CAACN,YAAY,CAAC,UAAD,CAAb,CAAR;AACD,KApBI,CAAP;AAqBD,GA/DD;AAAA,CADK;AAkEP,OAAO,IAAM4C,eAAe,GAAG,SAAlBA,eAAkB,CAACvC,MAAD,EAAY;AACzC,SAAO;AACLyD,IAAAA,IAAI,EAAE,kCADD;AAELC,IAAAA,OAAO,EAAE1D;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,IAAMkD,eAAe,GAAG,SAAlBA,eAAkB,CAACF,IAAD,EAAOlC,OAAP,EAAmB;AAAA;;AAChD,SAAO;AACL2C,IAAAA,IAAI,EAAE,kCADD;AAELC,IAAAA,OAAO,EAAE;AACPC,MAAAA,OAAO,EAAEX,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEY,IADR;AAEPC,MAAAA,UAAU,EAAE;AACVC,QAAAA,UAAU,EAAE,CAAAd,IAAI,SAAJ,IAAAA,IAAI,WAAJ,gCAAAA,IAAI,CAAEa,UAAN,sEAAkBE,aAAlB,KAAmC,CADrC;AAEVtD,QAAAA,IAAI,EAAE,CAAAuC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,iCAAAA,IAAI,CAAEa,UAAN,wEAAkBpD,IAAlB,KAA0B,CAFtB;AAGV4B,QAAAA,QAAQ,EAAE,CAAAW,IAAI,SAAJ,IAAAA,IAAI,WAAJ,iCAAAA,IAAI,CAAEa,UAAN,wEAAkBnD,IAAlB,KAA0Bb,MAAM,CAACmE,EAAP,CAAUH,UAAV,CAAqBI,OAH/C;AAIVC,QAAAA,SAAS,EAAE,CAAAlB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,iCAAAA,IAAI,CAAEa,UAAN,wEAAkBM,UAAlB,KAAgC,CAJjC;AAKVC,QAAAA,KAAK,EAAE,CAAApB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,iCAAAA,IAAI,CAAEa,UAAN,wEAAkBhD,QAAlB,KAA8B;AAL3B,OAFL;AASPwD,MAAAA,IAAI,EAAE;AACJ1D,QAAAA,MAAM,EAAEqC,IAAF,aAAEA,IAAF,4CAAEA,IAAI,CAAEa,UAAR,sDAAE,kBAAkBS,OADtB;AAEJhC,QAAAA,aAAa,EAAE,CAAAU,IAAI,SAAJ,IAAAA,IAAI,WAAJ,iCAAAA,IAAI,CAAEa,UAAN,wEAAkBjD,SAAlB,KAA+B;AAF1C,OATC;AAaPE,MAAAA,OAAO,EAAEA,OAAO,IAAI;AAbb;AAFJ,GAAP;AAkBD,CAnBM;AAqBP,OAAO,IAAMyC,eAAe,GAAG,SAAlBA,eAAkB,CAACK,IAAD,EAAU;AACvC,SAAO;AACLH,IAAAA,IAAI,EAAE,kCADD;AAELC,IAAAA,OAAO,EAAEE;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,IAAMW,UAAU,GAAG,SAAbA,UAAa,GAAM;AAC9B,SAAO;AACLd,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM","sourcesContent":["import * as utils from 'utils';\r\nimport { addLoader, removeLoader, authLogout } from 'stores';\r\nimport config from 'config';\r\nimport get from 'lodash/get';\r\n\r\nexport const getUsers =\r\n  (params = {}) =>\r\n  (dispatch, getState) => {\r\n    // prettier-ignore\r\n    const { user: { auth }, config: { vars: { endpoint } }, administration: { userList } } = getState();\r\n    const { page, size, sortBy, direction, searchBy, filters = {} } = params;\r\n\r\n    const defaultError = {\r\n      file: 'stores/administration.actions.getUsers',\r\n    };\r\n\r\n    const prevQuery = get(userList, 'query') || '';\r\n    const newQuery = params.hasOwnProperty('searchBy') ? searchBy : prevQuery;\r\n\r\n    const prevFilters = get(userList, 'filters') || {};\r\n    const newFilters = params.hasOwnProperty('filters') ? filters : prevFilters;\r\n\r\n    const filtersObject = Object.entries(newFilters).reduce((acc, [key, value]) => {\r\n      const filterValues = value.map((v) => v.id).join(',');\r\n\r\n      return filterValues\r\n        ? {\r\n            ...acc,\r\n            [key]: filterValues,\r\n          }\r\n        : acc;\r\n    }, {});\r\n\r\n    const businessProcessId = params.hasOwnProperty('businessProcessIds') ? { businessProcessIds: params.businessProcessIds } : null;\r\n\r\n    const apiParams = {\r\n      page: page || 1,\r\n      pageSize: size || userList?.pageSize,\r\n      sortBy: sortBy || userList?.sortBy,\r\n      direction: direction || userList?.sortDirection || '',\r\n      ...(newQuery && { searchBy: newQuery }),\r\n      ...filtersObject,\r\n      ...businessProcessId,\r\n    };\r\n\r\n    dispatch(getUsersRequest(params));\r\n    dispatch(addLoader('getUsers'));\r\n\r\n    return utils.api\r\n      .get({\r\n        token: auth.accessToken,\r\n        endpoint: endpoint.authService,\r\n        path: 'api/users',\r\n        params: apiParams,\r\n      })\r\n      .then((response) => utils.api.handleResponse(response))\r\n      .then((json) => utils.api.handleNewData(json))\r\n      .then((json) => {\r\n        dispatch(getUsersSuccess(json, newFilters));\r\n      })\r\n      .catch((err) => {\r\n        utils.api.handleError(err, defaultError);\r\n        utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n        dispatch(getUsersFailure(err));\r\n        return err;\r\n      })\r\n      .finally(() => {\r\n        dispatch(removeLoader('getUsers'));\r\n      });\r\n  };\r\n\r\nexport const getUsersRequest = (params) => {\r\n  return {\r\n    type: 'ADMINISTRATION_USERS_GET_REQUEST',\r\n    payload: params,\r\n  };\r\n};\r\n\r\nexport const getUsersSuccess = (json, filters) => {\r\n  return {\r\n    type: 'ADMINISTRATION_USERS_GET_SUCCESS',\r\n    payload: {\r\n      content: json?.data,\r\n      pagination: {\r\n        itemsTotal: json?.pagination?.totalElements || 0,\r\n        page: json?.pagination?.page || 1,\r\n        pageSize: json?.pagination?.size || config.ui.pagination.default,\r\n        pageTotal: json?.pagination?.totalPages || 0,\r\n        query: json?.pagination?.searchBy || '',\r\n      },\r\n      sort: {\r\n        sortBy: json?.pagination?.orderBy,\r\n        sortDirection: json?.pagination?.direction || '',\r\n      },\r\n      filters: filters || {},\r\n    },\r\n  };\r\n};\r\n\r\nexport const getUsersFailure = (data) => {\r\n  return {\r\n    type: 'ADMINISTRATION_USERS_GET_FAILURE',\r\n    payload: data,\r\n  };\r\n};\r\n\r\nexport const resetUsers = () => {\r\n  return {\r\n    type: 'ADMINISTRATION_RESET_USERS',\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}