{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ClaimRefNotes\\\\ClaimRefNotes.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux'; // app\n\nimport ClaimRefNotesView from './ClaimRefNotes.view';\nimport { MultiSelect, FormDate } from 'components';\nimport { getClaimNotes, resetClaimNotes, selectClaimNotes, selectClaimNotesFilters, selectClaimNotesQuery, selectClaimNotesPagination, selectClaimNotesSort, showModal } from 'stores';\nimport { useFlexiColumns, usePagination, useSort } from 'hooks';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nClaimRefNotes.propTypes = {\n  claim: PropTypes.object.isRequired\n};\nexport default function ClaimRefNotes(_ref) {\n  _s();\n\n  var claim = _ref.claim;\n  var dispatch = useDispatch();\n  var claimID = claim.claimID,\n      processState = claim.processState;\n  var claimNotes = useSelector(selectClaimNotes);\n  var users = useSelector(selectClaimNotesFilters);\n  var claimNotesQuery = useSelector(selectClaimNotesQuery);\n  var claimNotesPagination = useSelector(selectClaimNotesPagination);\n  var claimNotesSort = useSelector(selectClaimNotesSort);\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchText = _useState2[0],\n      setSearchText = _useState2[1];\n\n  useEffect(function () {\n    if (claimID) {\n      dispatch(getClaimNotes({\n        claimID: claimID\n      }));\n    } // cleanup\n\n\n    return function () {\n      dispatch(resetClaimNotes());\n    };\n  }, [claimID]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var addNote = function addNote() {\n    dispatch(showModal({\n      component: 'ADD_EDIT_CLAIM_REF_NOTES',\n      props: {\n        title: utils.string.t('claims.notes.addNote'),\n        fullWidth: true,\n        maxWidth: 'sm',\n        disableAutoFocus: true,\n        componentProps: {\n          claim: claim\n        }\n      }\n    }));\n  };\n\n  var editNote = function editNote(note) {\n    dispatch(showModal({\n      component: 'EDIT_CLAIMREF_NOTES_ROW',\n      props: {\n        title: utils.string.t('claims.notes.editNote'),\n        fullWidth: true,\n        hideCompOnBlur: false,\n        maxWidth: 'sm',\n        disableAutoFocus: true,\n        componentProps: {\n          note: note\n        }\n      }\n    }));\n  };\n\n  var searchSubmit = function searchSubmit(_ref2) {\n    var search = _ref2.search,\n        filters = _ref2.filters;\n    setSearchText(search);\n    dispatch(getClaimNotes({\n      claimID: claimID,\n      query: search,\n      filters: filters\n    }));\n  };\n\n  var resetSubmit = function resetSubmit() {\n    dispatch(getClaimNotes({\n      claimID: claimID,\n      filters: {}\n    }));\n    reset();\n  };\n\n  var sortColumn = function sortColumn(by, dir) {\n    dispatch(getClaimNotes({\n      claimID: claimID,\n      sortBy: by,\n      direction: dir,\n      query: searchText\n    }));\n  };\n\n  var changePage = function changePage(newPage) {\n    dispatch(getClaimNotes({\n      claimID: claimID,\n      page: newPage,\n      query: searchText\n    }));\n  };\n\n  var changeRowsPerPage = function changeRowsPerPage(rowsPerPage) {\n    dispatch(getClaimNotes({\n      claimID: claimID,\n      size: rowsPerPage,\n      query: searchText\n    }));\n  };\n\n  var cols = [{\n    id: 'createdDate',\n    sort: {\n      type: 'date',\n      direction: 'desc'\n    },\n    visible: true,\n    label: utils.string.t('claims.notes.columns.dateCreated')\n  }, {\n    id: 'createdBy',\n    sort: {\n      type: 'lexical',\n      direction: 'asc'\n    },\n    visible: true,\n    label: utils.string.t('claims.notes.columns.createdBy')\n  }, {\n    id: 'notesDescription',\n    sort: {\n      type: 'lexical',\n      direction: 'asc'\n    },\n    visible: true,\n    label: utils.string.t('claims.notes.columns.detail')\n  }, {\n    id: 'updatedDate',\n    sort: {\n      type: 'date',\n      direction: 'asc'\n    },\n    visible: true,\n    label: utils.string.t('claims.notes.columns.dateUpdated')\n  }, {\n    id: 'updatedBy',\n    sort: {\n      type: 'lexical',\n      direction: 'asc'\n    },\n    visible: true,\n    label: utils.string.t('claims.notes.columns.updatedBy')\n  }, {\n    id: 'menu',\n    menu: true,\n    visible: true\n  }];\n  var dateFields = [{\n    name: 'createdDate',\n    type: 'datepicker',\n    value: null\n  }, {\n    name: 'updatedDate',\n    type: 'datepicker',\n    value: null\n  }];\n  var defaultValues = utils.form.getInitialValues(dateFields);\n\n  var _useForm = useForm({\n    defaultValues: defaultValues\n  }),\n      control = _useForm.control,\n      reset = _useForm.reset;\n\n  var filtersArray = [{\n    id: 'createdDate',\n    type: 'datepicker',\n    label: utils.string.t('claims.notes.tableFilters.dateCreated'),\n    value: '',\n    content: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread(_objectSpread({\n      control: control\n    }, utils.form.getFieldProps(dateFields, 'createdDate')), {}, {\n      id: \"datepicker\",\n      label: '',\n      plainText: true,\n      plainTextIcon: true,\n      placeholder: utils.string.t('app.selectDate'),\n      muiComponentProps: {\n        fullWidth: false,\n        margin: 'dense'\n      },\n      muiPickerProps: {\n        clearable: false,\n        variant: 'inline',\n        format: 'DD-MM-YYYY'\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this)\n  }, {\n    id: 'createdBy',\n    type: 'multiSelect',\n    label: utils.string.t('claims.notes.columns.createdBy'),\n    value: [],\n    options: users === null || users === void 0 ? void 0 : users.createdBy,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"createdBy\",\n      search: true,\n      options: users === null || users === void 0 ? void 0 : users.createdBy\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 16\n    }, this)\n  }, {\n    id: 'updatedDate',\n    type: 'datepicker',\n    label: utils.string.t('claims.notes.tableFilters.lastUpdatedDate'),\n    value: '',\n    content: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread(_objectSpread({\n      control: control\n    }, utils.form.getFieldProps(dateFields, 'updatedDate')), {}, {\n      id: \"datepicker\",\n      label: '',\n      plainText: true,\n      plainTextIcon: true,\n      placeholder: utils.string.t('app.selectDate'),\n      muiComponentProps: {\n        fullWidth: false,\n        margin: 'dense'\n      },\n      muiPickerProps: {\n        clearable: false,\n        variant: 'inline',\n        format: 'DD-MM-YYYY'\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }, this)\n  }, {\n    id: 'lastUpdatedBy',\n    type: 'multiSelect',\n    label: utils.string.t('claims.notes.columns.updatedBy'),\n    value: [],\n    options: users === null || users === void 0 ? void 0 : users.updatedBy,\n    content: /*#__PURE__*/_jsxDEV(MultiSelect, {\n      id: \"lastUpdatedBy\",\n      search: true,\n      options: users === null || users === void 0 ? void 0 : users.updatedBy\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 16\n    }, this)\n  }];\n\n  var _useFlexiColumns = useFlexiColumns(cols),\n      columnsArray = _useFlexiColumns.columns,\n      columnProps = _useFlexiColumns.columnProps;\n\n  var _useSort = useSort(columnsArray, claimNotesSort, sortColumn),\n      colsSorted = _useSort.cols,\n      sort = _useSort.sort;\n\n  var pagination = usePagination(claimNotes, claimNotesPagination, changePage, changeRowsPerPage);\n  return /*#__PURE__*/_jsxDEV(ClaimRefNotesView, {\n    notes: claimNotes,\n    cols: colsSorted,\n    columnProps: columnProps,\n    filtersArray: filtersArray,\n    sort: sort,\n    pagination: pagination,\n    query: claimNotesQuery,\n    claimStatus: processState,\n    handlers: {\n      addNote: addNote,\n      editNote: editNote,\n      searchSubmit: searchSubmit,\n      resetSubmit: resetSubmit\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClaimRefNotes, \"yOT7awo1JLqa7Le6yNU0ttT4m9w=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useForm, useFlexiColumns, useSort, usePagination];\n});\n\n_c = ClaimRefNotes;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimRefNotes\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ClaimRefNotes/ClaimRefNotes.js"],"names":["React","useEffect","useState","useForm","PropTypes","useDispatch","useSelector","ClaimRefNotesView","MultiSelect","FormDate","getClaimNotes","resetClaimNotes","selectClaimNotes","selectClaimNotesFilters","selectClaimNotesQuery","selectClaimNotesPagination","selectClaimNotesSort","showModal","useFlexiColumns","usePagination","useSort","utils","ClaimRefNotes","propTypes","claim","object","isRequired","dispatch","claimID","processState","claimNotes","users","claimNotesQuery","claimNotesPagination","claimNotesSort","searchText","setSearchText","addNote","component","props","title","string","t","fullWidth","maxWidth","disableAutoFocus","componentProps","editNote","note","hideCompOnBlur","searchSubmit","search","filters","query","resetSubmit","reset","sortColumn","by","dir","sortBy","direction","changePage","newPage","page","changeRowsPerPage","rowsPerPage","size","cols","id","sort","type","visible","label","menu","dateFields","name","value","defaultValues","form","getInitialValues","control","filtersArray","content","getFieldProps","margin","clearable","variant","format","options","createdBy","updatedBy","columnsArray","columns","columnProps","colsSorted","pagination"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// app\r\nimport ClaimRefNotesView from './ClaimRefNotes.view';\r\nimport { MultiSelect, FormDate } from 'components';\r\nimport {\r\n  getClaimNotes,\r\n  resetClaimNotes,\r\n  selectClaimNotes,\r\n  selectClaimNotesFilters,\r\n  selectClaimNotesQuery,\r\n  selectClaimNotesPagination,\r\n  selectClaimNotesSort,\r\n  showModal,\r\n} from 'stores';\r\nimport { useFlexiColumns, usePagination, useSort } from 'hooks';\r\nimport * as utils from 'utils';\r\n\r\nClaimRefNotes.propTypes = {\r\n  claim: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default function ClaimRefNotes({ claim }) {\r\n  const dispatch = useDispatch();\r\n  const { claimID, processState } = claim;\r\n  const claimNotes = useSelector(selectClaimNotes);\r\n  const users = useSelector(selectClaimNotesFilters);\r\n  const claimNotesQuery = useSelector(selectClaimNotesQuery);\r\n  const claimNotesPagination = useSelector(selectClaimNotesPagination);\r\n  const claimNotesSort = useSelector(selectClaimNotesSort);\r\n\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (claimID) {\r\n      dispatch(getClaimNotes({ claimID }));\r\n    }\r\n\r\n    // cleanup\r\n    return () => {\r\n      dispatch(resetClaimNotes());\r\n    };\r\n  }, [claimID]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const addNote = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'ADD_EDIT_CLAIM_REF_NOTES',\r\n        props: {\r\n          title: utils.string.t('claims.notes.addNote'),\r\n          fullWidth: true,\r\n          maxWidth: 'sm',\r\n          disableAutoFocus: true,\r\n          componentProps: { claim },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const editNote = (note) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'EDIT_CLAIMREF_NOTES_ROW',\r\n        props: {\r\n          title: utils.string.t('claims.notes.editNote'),\r\n          fullWidth: true,\r\n          hideCompOnBlur: false,\r\n          maxWidth: 'sm',\r\n          disableAutoFocus: true,\r\n          componentProps: { note },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const searchSubmit = ({ search, filters }) => {\r\n    setSearchText(search);\r\n    dispatch(getClaimNotes({ claimID, query: search, filters }));\r\n  };\r\n\r\n  const resetSubmit = () => {\r\n    dispatch(getClaimNotes({ claimID, filters: {} }));\r\n    reset();\r\n  };\r\n\r\n  const sortColumn = (by, dir) => {\r\n    dispatch(getClaimNotes({ claimID, sortBy: by, direction: dir, query: searchText }));\r\n  };\r\n\r\n  const changePage = (newPage) => {\r\n    dispatch(getClaimNotes({ claimID, page: newPage, query: searchText }));\r\n  };\r\n\r\n  const changeRowsPerPage = (rowsPerPage) => {\r\n    dispatch(getClaimNotes({ claimID, size: rowsPerPage, query: searchText }));\r\n  };\r\n\r\n  const cols = [\r\n    {\r\n      id: 'createdDate',\r\n      sort: { type: 'date', direction: 'desc' },\r\n      visible: true,\r\n      label: utils.string.t('claims.notes.columns.dateCreated'),\r\n    },\r\n    {\r\n      id: 'createdBy',\r\n      sort: { type: 'lexical', direction: 'asc' },\r\n      visible: true,\r\n      label: utils.string.t('claims.notes.columns.createdBy'),\r\n    },\r\n    {\r\n      id: 'notesDescription',\r\n      sort: { type: 'lexical', direction: 'asc' },\r\n      visible: true,\r\n      label: utils.string.t('claims.notes.columns.detail'),\r\n    },\r\n    {\r\n      id: 'updatedDate',\r\n      sort: { type: 'date', direction: 'asc' },\r\n      visible: true,\r\n      label: utils.string.t('claims.notes.columns.dateUpdated'),\r\n    },\r\n    {\r\n      id: 'updatedBy',\r\n      sort: { type: 'lexical', direction: 'asc' },\r\n      visible: true,\r\n      label: utils.string.t('claims.notes.columns.updatedBy'),\r\n    },\r\n    { id: 'menu', menu: true, visible: true },\r\n  ];\r\n\r\n  const dateFields = [\r\n    {\r\n      name: 'createdDate',\r\n      type: 'datepicker',\r\n      value: null,\r\n    },\r\n    {\r\n      name: 'updatedDate',\r\n      type: 'datepicker',\r\n      value: null,\r\n    },\r\n  ];\r\n\r\n  const defaultValues = utils.form.getInitialValues(dateFields);\r\n  const { control, reset } = useForm({ defaultValues });\r\n\r\n  const filtersArray = [\r\n    {\r\n      id: 'createdDate',\r\n      type: 'datepicker',\r\n      label: utils.string.t('claims.notes.tableFilters.dateCreated'),\r\n      value: '',\r\n      content: (\r\n        <FormDate\r\n          control={control}\r\n          {...utils.form.getFieldProps(dateFields, 'createdDate')}\r\n          id=\"datepicker\"\r\n          label={''}\r\n          plainText\r\n          plainTextIcon\r\n          placeholder={utils.string.t('app.selectDate')}\r\n          muiComponentProps={{\r\n            fullWidth: false,\r\n            margin: 'dense',\r\n          }}\r\n          muiPickerProps={{\r\n            clearable: false,\r\n            variant: 'inline',\r\n            format: 'DD-MM-YYYY',\r\n          }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      id: 'createdBy',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.notes.columns.createdBy'),\r\n      value: [],\r\n      options: users?.createdBy,\r\n      content: <MultiSelect id=\"createdBy\" search options={users?.createdBy} />,\r\n    },\r\n    {\r\n      id: 'updatedDate',\r\n      type: 'datepicker',\r\n      label: utils.string.t('claims.notes.tableFilters.lastUpdatedDate'),\r\n      value: '',\r\n      content: (\r\n        <FormDate\r\n          control={control}\r\n          {...utils.form.getFieldProps(dateFields, 'updatedDate')}\r\n          id=\"datepicker\"\r\n          label={''}\r\n          plainText\r\n          plainTextIcon\r\n          placeholder={utils.string.t('app.selectDate')}\r\n          muiComponentProps={{\r\n            fullWidth: false,\r\n            margin: 'dense',\r\n          }}\r\n          muiPickerProps={{\r\n            clearable: false,\r\n            variant: 'inline',\r\n            format: 'DD-MM-YYYY',\r\n          }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      id: 'lastUpdatedBy',\r\n      type: 'multiSelect',\r\n      label: utils.string.t('claims.notes.columns.updatedBy'),\r\n      value: [],\r\n      options: users?.updatedBy,\r\n      content: <MultiSelect id=\"lastUpdatedBy\" search options={users?.updatedBy} />,\r\n    },\r\n  ];\r\n\r\n  const { columns: columnsArray, columnProps } = useFlexiColumns(cols);\r\n  const { cols: colsSorted, sort } = useSort(columnsArray, claimNotesSort, sortColumn);\r\n  const pagination = usePagination(claimNotes, claimNotesPagination, changePage, changeRowsPerPage);\r\n\r\n  return (\r\n    <ClaimRefNotesView\r\n      notes={claimNotes}\r\n      cols={colsSorted}\r\n      columnProps={columnProps}\r\n      filtersArray={filtersArray}\r\n      sort={sort}\r\n      pagination={pagination}\r\n      query={claimNotesQuery}\r\n      claimStatus={processState}\r\n      handlers={{\r\n        addNote,\r\n        editNote,\r\n        searchSubmit,\r\n        resetSubmit,\r\n      }}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}