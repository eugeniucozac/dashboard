{"ast":null,"code":"// This is a standalone file just to check if a file is downloadable or not before trying to view Ms office files\n// app\nimport { addLoader, removeLoader, enqueueNotification } from 'stores';\nimport * as utils from 'utils';\nexport var viewDmsFileCheckDownload = function viewDmsFileCheckDownload(doc) {\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint;\n\n    var documentId = doc.documentId,\n        documentName = doc.documentName;\n    dispatch(addLoader('viewDmsFileCheckDownload'));\n\n    if (!documentId || !documentName) {\n      dispatch(enqueueNotification('Missing or invalid params', 'error'));\n      return false;\n    }\n\n    return utils.api.get({\n      token: auth.accessToken,\n      endpoint: endpoint.dmsService,\n      path: \"dms/document/download/\".concat(documentId)\n    }).then(function (response) {\n      if (!response.ok) {\n        return false;\n      } else {\n        return response.blob();\n      }\n    }).then(function (blob) {\n      return blob && documentName;\n    }).catch(function () {\n      return false;\n    }).finally(function (result) {\n      dispatch(removeLoader('viewDmsFileCheckDownload'));\n      return result;\n    });\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/dms/dms.actions.viewDmsFileCheckDownload.js"],"names":["addLoader","removeLoader","enqueueNotification","utils","viewDmsFileCheckDownload","doc","dispatch","getState","auth","user","endpoint","config","vars","documentId","documentName","api","get","token","accessToken","dmsService","path","then","response","ok","blob","catch","finally","result"],"mappings":"AAAA;AAEA;AACA,SAASA,SAAT,EAAoBC,YAApB,EAAkCC,mBAAlC,QAA6D,QAA7D;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,OAAO,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,GAAD;AAAA,SAAS,UAACC,QAAD,EAAWC,QAAX,EAAwB;AACvE;AADuE,oBAEbA,QAAQ,EAFK;AAAA,QAEvDC,IAFuD,aAE/DC,IAF+D,CAEvDD,IAFuD;AAAA,QAE7BE,QAF6B,aAE/CC,MAF+C,CAErCC,IAFqC,CAE7BF,QAF6B;;AAAA,QAI/DG,UAJ+D,GAIlCR,GAJkC,CAI/DQ,UAJ+D;AAAA,QAInDC,YAJmD,GAIlCT,GAJkC,CAInDS,YAJmD;AAMvER,IAAAA,QAAQ,CAACN,SAAS,CAAC,0BAAD,CAAV,CAAR;;AAEA,QAAI,CAACa,UAAD,IAAe,CAACC,YAApB,EAAkC;AAChCR,MAAAA,QAAQ,CAACJ,mBAAmB,CAAC,2BAAD,EAA8B,OAA9B,CAApB,CAAR;AACA,aAAO,KAAP;AACD;;AAED,WAAOC,KAAK,CAACY,GAAN,CACJC,GADI,CACA;AACHC,MAAAA,KAAK,EAAET,IAAI,CAACU,WADT;AAEHR,MAAAA,QAAQ,EAAEA,QAAQ,CAACS,UAFhB;AAGHC,MAAAA,IAAI,kCAA2BP,UAA3B;AAHD,KADA,EAMJQ,IANI,CAMC,UAACC,QAAD,EAAc;AAClB,UAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,eAAO,KAAP;AACD,OAFD,MAEO;AACL,eAAOD,QAAQ,CAACE,IAAT,EAAP;AACD;AACF,KAZI,EAaJH,IAbI,CAaC,UAACG,IAAD;AAAA,aAAUA,IAAI,IAAIV,YAAlB;AAAA,KAbD,EAcJW,KAdI,CAcE;AAAA,aAAM,KAAN;AAAA,KAdF,EAeJC,OAfI,CAeI,UAACC,MAAD,EAAY;AACnBrB,MAAAA,QAAQ,CAACL,YAAY,CAAC,0BAAD,CAAb,CAAR;AACA,aAAO0B,MAAP;AACD,KAlBI,CAAP;AAmBD,GAhCuC;AAAA,CAAjC","sourcesContent":["// This is a standalone file just to check if a file is downloadable or not before trying to view Ms office files\r\n\r\n// app\r\nimport { addLoader, removeLoader, enqueueNotification } from 'stores';\r\nimport * as utils from 'utils';\r\n\r\nexport const viewDmsFileCheckDownload = (doc) => (dispatch, getState) => {\r\n  // prettier-ignore\r\n  const { user: { auth }, config: { vars: { endpoint } }} = getState();\r\n\r\n  const { documentId, documentName } = doc;\r\n\r\n  dispatch(addLoader('viewDmsFileCheckDownload'));\r\n\r\n  if (!documentId || !documentName) {\r\n    dispatch(enqueueNotification('Missing or invalid params', 'error'));\r\n    return false;\r\n  }\r\n\r\n  return utils.api\r\n    .get({\r\n      token: auth.accessToken,\r\n      endpoint: endpoint.dmsService,\r\n      path: `dms/document/download/${documentId}`,\r\n    })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        return false;\r\n      } else {\r\n        return response.blob();\r\n      }\r\n    })\r\n    .then((blob) => blob && documentName)\r\n    .catch(() => false)\r\n    .finally((result) => {\r\n      dispatch(removeLoader('viewDmsFileCheckDownload'));\r\n      return result;\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}