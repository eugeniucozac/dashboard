{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ProcessingInstructionsChecklist\\\\ProcessingInstructionsChecklist.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory, useParams } from 'react-router';\nimport get from 'lodash/get';\nimport * as Yup from 'yup'; // app\n\nimport ProcessingInstructionsChecklistView from './ProcessingInstructionsChecklist.view';\nimport { processingInstructionsSchema } from 'schemas';\nimport { enqueueNotification, checkListUpdate, selectUser, selectPiProducingBrokers, selectPiAccountExecutives, selectPiFacilityTypes, updateReferenceDocumentCountLoading, getRiskReferenceDocumentsCount, getRiskReferencesDocumentsCountList, getIsRiskReferenceDocumentCountLoading } from 'stores';\nimport * as utils from 'utils';\nimport config from 'config';\nimport * as constants from 'consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nProcessingInstructionsChecklist.propTypes = {\n  instruction: PropTypes.object.isRequired,\n  handlers: PropTypes.shape({\n    back: PropTypes.func.isRequired,\n    next: PropTypes.func.isRequired\n  }).isRequired\n};\nexport default function ProcessingInstructionsChecklist(_ref) {\n  _s();\n\n  var _instruction$riskRefe, _riskReferences$reduc, _riskReferences$reduc2, _instruction$details3, _instruction$details4, _instruction$details5, _instruction$details6, _instruction$details$, _instruction$details7, _instruction$details$2, _instruction$details8;\n\n  var instruction = _ref.instruction,\n      handlers = _ref.handlers,\n      childRef = _ref.childRef;\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      step = _useParams.step,\n      tab = _useParams.tab;\n\n  var riskReferencesDocumentsCountList = useSelector(getRiskReferencesDocumentsCountList);\n  var isRiskReferenceDocumentCountLoading = useSelector(getIsRiskReferenceDocumentCountLoading);\n  var documents = useSelector(function (state) {\n    return get(state, 'processingInstructions.documents');\n  }) || {};\n  var producingBrokersFromRoles = useSelector(selectPiProducingBrokers);\n  var accountExecutivesFromRoles = useSelector(selectPiAccountExecutives);\n  var facilityTypes = useSelector(selectPiFacilityTypes);\n  var user = useSelector(selectUser);\n  var columns = [{\n    id: 'detail',\n    label: utils.string.t('processingInstructions.checklist.cols.detail')\n  }, {\n    id: 'frontEndContact',\n    label: utils.string.t('processingInstructions.checklist.cols.frontEndContact'),\n    align: 'center'\n  }, {\n    id: 'authorisedSignatory',\n    label: utils.string.t('processingInstructions.checklist.cols.authorisedSignatory'),\n    align: 'center'\n  }];\n  var checklistTabs = [{\n    value: constants.GENERAL,\n    label: utils.string.t('processingInstructions.checklist.tabs.general.title')\n  }, {\n    value: constants.PRE_PLACING,\n    label: utils.string.t('processingInstructions.checklist.tabs.prePlacing.title')\n  }, {\n    value: constants.MRC,\n    label: utils.string.t('processingInstructions.checklist.tabs.mrc.title')\n  }, {\n    value: constants.OTHER_DETAILS,\n    label: utils.string.t('processingInstructions.checklist.tabs.otherDetails.title')\n  }, {\n    value: constants.RISK_REFERENCES,\n    label: utils.string.t('processingInstructions.checklist.tabs.riskRefs.title')\n  }];\n\n  var _useState = useState(checklistTabs),\n      _useState2 = _slicedToArray(_useState, 2),\n      tabs = _useState2[0],\n      setTabs = _useState2[1];\n\n  var isValidTab = tabs.map(function (item) {\n    return item.value;\n  }).includes(tab);\n\n  var _useState3 = useState(isValidTab ? tab : 'general'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedTab = _useState4[0],\n      setSelectedTab = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      defaultValues = _useState6[0],\n      setDefaultValues = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      schemaData = _useState8[0],\n      setSchemaData = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      resetKey = _useState10[0],\n      setResetKey = _useState10[1];\n\n  var _useState11 = useState(processingInstructionsSchema),\n      _useState12 = _slicedToArray(_useState11, 2),\n      piSchema = _useState12[0],\n      setPiSchema = _useState12[1];\n\n  var leadRef = instruction === null || instruction === void 0 ? void 0 : (_instruction$riskRefe = instruction.riskReferences) === null || _instruction$riskRefe === void 0 ? void 0 : _instruction$riskRefe.find(function (r) {\n    return r.leadPolicy;\n  });\n  var isFdo = utils.processingInstructions.isFdo(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isDraft = utils.processingInstructions.status.isDraft(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isRejectedDraft = utils.processingInstructions.status.isRejectedDraft(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isSubmittedAuthorisedSignatory = utils.processingInstructions.status.isSubmittedAuthorisedSignatory(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isReopened = utils.processingInstructions.status.isReopened(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var userHasWritePermission = utils.app.access.feature('processingInstructions.processingInstructions', ['create', 'update'], user);\n  var userHasApproverAccess = utils.app.access.feature('processingInstructions.approverChecklist', ['create', 'update'], user);\n  var isCheckboxesEditable = userHasApproverAccess && isSubmittedAuthorisedSignatory;\n  var isEditable = userHasWritePermission && (isDraft || isRejectedDraft || isReopened);\n  var isReadOnly = !isEditable;\n  var isEndorsement = utils.processingInstructions.isEndorsement(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isFeeAndAmendment = utils.processingInstructions.isFeeAndAmendment(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isBordereau = utils.processingInstructions.isBordereau(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var faBorderProcessType = isBordereau || isFeeAndAmendment;\n  var riskReferences = instruction === null || instruction === void 0 ? void 0 : instruction.riskReferences;\n  var gxbProducingBrokers = utils.generic.isValidArray(riskReferences, true) ? (riskReferences === null || riskReferences === void 0 ? void 0 : (_riskReferences$reduc = riskReferences.reduce(function (acc, curr) {\n    var _curr$gxbAttributeDef, _curr$gxbAttributeDef2, _curr$gxbAttributeDef3;\n\n    return [].concat(_toConsumableArray(acc), _toConsumableArray((_curr$gxbAttributeDef = curr === null || curr === void 0 ? void 0 : (_curr$gxbAttributeDef2 = curr.gxbAttributeDefaultValues) === null || _curr$gxbAttributeDef2 === void 0 ? void 0 : (_curr$gxbAttributeDef3 = _curr$gxbAttributeDef2.producingBrokers) === null || _curr$gxbAttributeDef3 === void 0 ? void 0 : _curr$gxbAttributeDef3.filter(function (gxbPbs) {\n      return gxbPbs === null || gxbPbs === void 0 ? void 0 : gxbPbs.gxbUseId;\n    })) !== null && _curr$gxbAttributeDef !== void 0 ? _curr$gxbAttributeDef : []));\n  }, [])) === null || _riskReferences$reduc === void 0 ? void 0 : _riskReferences$reduc.map(function (pb) {\n    return {\n      id: pb === null || pb === void 0 ? void 0 : pb.gxbUseId,\n      name: pb === null || pb === void 0 ? void 0 : pb.name,\n      emailId: pb === null || pb === void 0 ? void 0 : pb.emailId\n    };\n  })) || [] : [];\n  var gxbAccountExecutives = utils.generic.isValidArray(riskReferences, true) ? (riskReferences === null || riskReferences === void 0 ? void 0 : (_riskReferences$reduc2 = riskReferences.reduce(function (acc, curr) {\n    var _curr$gxbAttributeDef4, _curr$gxbAttributeDef5, _curr$gxbAttributeDef6;\n\n    return [].concat(_toConsumableArray(acc), _toConsumableArray((_curr$gxbAttributeDef4 = curr === null || curr === void 0 ? void 0 : (_curr$gxbAttributeDef5 = curr.gxbAttributeDefaultValues) === null || _curr$gxbAttributeDef5 === void 0 ? void 0 : (_curr$gxbAttributeDef6 = _curr$gxbAttributeDef5.accountExecutives) === null || _curr$gxbAttributeDef6 === void 0 ? void 0 : _curr$gxbAttributeDef6.filter(function (gxbAEs) {\n      return gxbAEs === null || gxbAEs === void 0 ? void 0 : gxbAEs.gxbUseId;\n    })) !== null && _curr$gxbAttributeDef4 !== void 0 ? _curr$gxbAttributeDef4 : []));\n  }, [])) === null || _riskReferences$reduc2 === void 0 ? void 0 : _riskReferences$reduc2.map(function (ae) {\n    return {\n      id: ae === null || ae === void 0 ? void 0 : ae.gxbUseId,\n      name: ae === null || ae === void 0 ? void 0 : ae.name,\n      emailId: ae === null || ae === void 0 ? void 0 : ae.emailId\n    };\n  })) || [] : [];\n  var producingBrokers = utils.generic.isValidArray(gxbProducingBrokers, true) ? gxbProducingBrokers : producingBrokersFromRoles;\n  var accountExecutives = utils.generic.isValidArray(gxbAccountExecutives, true) ? gxbAccountExecutives : accountExecutivesFromRoles;\n\n  var getFacilityTypeId = function getFacilityTypeId() {\n    var _instruction$details;\n\n    var facilityTypeId = instruction === null || instruction === void 0 ? void 0 : (_instruction$details = instruction.details) === null || _instruction$details === void 0 ? void 0 : _instruction$details.facilityTypeId;\n\n    if (!facilityTypeId && utils.generic.isValidArray(facilityTypes, true)) {\n      var item = facilityTypes.find(function (type) {\n        var _instruction$details2;\n\n        return type.facilityTypeID === (instruction === null || instruction === void 0 ? void 0 : (_instruction$details2 = instruction.details) === null || _instruction$details2 === void 0 ? void 0 : _instruction$details2.facilityTypeId);\n      });\n      facilityTypeId = item === null || item === void 0 ? void 0 : item.facilityTypeID;\n    }\n\n    return facilityTypeId || '';\n  };\n\n  var getRiskReferenceDocumentCount = function getRiskReferenceDocumentCount() {\n    if (utils.generic.isValidArray(documents === null || documents === void 0 ? void 0 : documents.riskReferences, true)) {\n      var _documents$riskRefere;\n\n      dispatch(updateReferenceDocumentCountLoading(true));\n      var referenceList = documents === null || documents === void 0 ? void 0 : (_documents$riskRefere = documents.riskReferences) === null || _documents$riskRefere === void 0 ? void 0 : _documents$riskRefere.map(function (refData) {\n        return {\n          endorsementId: refData.endorsementId,\n          endorsementNumber: refData.endorsementNumber,\n          riskRefId: refData.riskRefId,\n          xbInstanceId: refData.xbInstanceId,\n          xbPolicyId: refData.xbPolicyId\n        };\n      });\n      var documentTypeValue = isEndorsement ? constants.PI_ENDORSEMENT_TYPE_DOCUMENT.documentTypeDescription : faBorderProcessType ? constants.PI_FABORDER_TYPE_DOCUMENT.documentTypeDescription : constants.PI_CLOSING_FDO_TYPE_DOCUMENT.documentTypeDescription;\n      dispatch(getRiskReferenceDocumentsCount(referenceList, documentTypeValue));\n    }\n  };\n\n  useEffect(function () {\n    getRiskReferenceDocumentCount();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var getSelectedProducingBrokerName = function getSelectedProducingBrokerName(pbId) {\n    var _producingBrokers$fin;\n\n    var selectedProducingBrokerName = producingBrokers === null || producingBrokers === void 0 ? void 0 : (_producingBrokers$fin = producingBrokers.find(function (pb) {\n      return (pb === null || pb === void 0 ? void 0 : pb.id) === pbId;\n    })) === null || _producingBrokers$fin === void 0 ? void 0 : _producingBrokers$fin.name;\n    return selectedProducingBrokerName;\n  };\n\n  var getSelectedProducingBrokerEmail = function getSelectedProducingBrokerEmail(pbId) {\n    var _producingBrokers$fin2;\n\n    var selectedProducingBrokerEmail = producingBrokers === null || producingBrokers === void 0 ? void 0 : (_producingBrokers$fin2 = producingBrokers.find(function (pb) {\n      return (pb === null || pb === void 0 ? void 0 : pb.id) === pbId;\n    })) === null || _producingBrokers$fin2 === void 0 ? void 0 : _producingBrokers$fin2.emailId;\n    return selectedProducingBrokerEmail;\n  };\n\n  var getSelectedAccountExecutiveName = function getSelectedAccountExecutiveName(aeId) {\n    var _accountExecutives$fi;\n\n    var selectedAccountExecutiveName = accountExecutives === null || accountExecutives === void 0 ? void 0 : (_accountExecutives$fi = accountExecutives.find(function (ae) {\n      return (ae === null || ae === void 0 ? void 0 : ae.id) === aeId;\n    })) === null || _accountExecutives$fi === void 0 ? void 0 : _accountExecutives$fi.name;\n    return selectedAccountExecutiveName;\n  };\n\n  var getSelectedAccountExecutiveEmail = function getSelectedAccountExecutiveEmail(aeId) {\n    var _accountExecutives$fi2;\n\n    var selectedAccountExecutiveEmail = accountExecutives === null || accountExecutives === void 0 ? void 0 : (_accountExecutives$fi2 = accountExecutives.find(function (ae) {\n      return (ae === null || ae === void 0 ? void 0 : ae.id) === aeId;\n    })) === null || _accountExecutives$fi2 === void 0 ? void 0 : _accountExecutives$fi2.emailId;\n    return selectedAccountExecutiveEmail;\n  };\n\n  var fields = [{\n    name: 'invoicingClient',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.invoicingClient'),\n    value: (leadRef === null || leadRef === void 0 ? void 0 : leadRef.clientName) || '',\n    muiComponentProps: {\n      InputProps: {\n        readOnly: true,\n        disabled: true\n      }\n    }\n  }, {\n    name: 'contactName',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.contactName'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details3 = instruction.details) === null || _instruction$details3 === void 0 ? void 0 : _instruction$details3.contactName) || '',\n    validation: Yup.string().required(utils.string.t('validation.required')),\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'clientEmail',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.clientEmail'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details4 = instruction.details) === null || _instruction$details4 === void 0 ? void 0 : _instruction$details4.clientEmail) || '',\n    validation: Yup.string().email(utils.string.t('validation.email')).required(utils.string.t('validation.required')),\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'eocInvoiceContactName',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceContactName'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details5 = instruction.details) === null || _instruction$details5 === void 0 ? void 0 : _instruction$details5.eocInvoiceContactName) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'eocInvoiceMail',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceMail'),\n    validation: Yup.string().email(utils.string.t('validation.email')),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details6 = instruction.details) === null || _instruction$details6 === void 0 ? void 0 : _instruction$details6.eocInvoiceMail) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'producingBroker',\n    group: 'general',\n    type: 'select',\n    label: utils.string.t('processingInstructions.checklist.fields.producingBroker'),\n    value: (_instruction$details$ = instruction === null || instruction === void 0 ? void 0 : (_instruction$details7 = instruction.details) === null || _instruction$details7 === void 0 ? void 0 : _instruction$details7.producingBrokerId) !== null && _instruction$details$ !== void 0 ? _instruction$details$ : '',\n    options: producingBrokers,\n    optionKey: 'id',\n    optionLabel: 'name',\n    validation: Yup.string().required(utils.string.t('validation.required')),\n    muiComponentProps: {\n      disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(producingBrokers)\n    }\n  }, {\n    name: 'accountExecutive',\n    group: 'general',\n    type: 'select',\n    label: utils.string.t('processingInstructions.checklist.fields.accountExecutive'),\n    value: (_instruction$details$2 = instruction === null || instruction === void 0 ? void 0 : (_instruction$details8 = instruction.details) === null || _instruction$details8 === void 0 ? void 0 : _instruction$details8.accountExecutiveId) !== null && _instruction$details$2 !== void 0 ? _instruction$details$2 : '',\n    options: accountExecutives,\n    optionKey: 'id',\n    optionLabel: 'name',\n    validation: Yup.string().required(utils.string.t('validation.required')),\n    muiComponentProps: {\n      disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(accountExecutives)\n    }\n  }].concat(_toConsumableArray(isFdo ? [{\n    name: 'businessType',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.businessType'),\n    value: (leadRef === null || leadRef === void 0 ? void 0 : leadRef.businessType) || '',\n    muiComponentProps: {\n      InputProps: {\n        readOnly: true,\n        disabled: true\n      }\n    }\n  }, {\n    name: 'facilityType',\n    group: 'general',\n    type: 'select',\n    label: utils.string.t('processingInstructions.checklist.fields.facilityType'),\n    value: getFacilityTypeId(),\n    validation: Yup.string().required(utils.string.t('validation.required')),\n    options: facilityTypes,\n    optionKey: 'facilityTypeID',\n    optionLabel: 'facilityTypeDetails',\n    disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(facilityTypes)\n  }] : []));\n  useEffect(function () {\n    var _childRef$current, _childRef$current$pro;\n\n    var reset = childRef === null || childRef === void 0 ? void 0 : (_childRef$current = childRef.current) === null || _childRef$current === void 0 ? void 0 : (_childRef$current$pro = _childRef$current.props) === null || _childRef$current$pro === void 0 ? void 0 : _childRef$current$pro.resetFunc;\n    var schema = utils.schemas.parsePiChecklist(piSchema, instruction);\n\n    var updatedDefaultValues = _objectSpread({\n      checklist: utils.form.getNestedInitialValues(schema === null || schema === void 0 ? void 0 : schema.rows, 'columnName')\n    }, utils.form.getInitialValues(fields));\n\n    setSchemaData(schema);\n    setDefaultValues(updatedDefaultValues);\n\n    if (utils.generic.isFunction(reset)) {\n      reset(updatedDefaultValues, {\n        keepDirty: false\n      });\n    }\n  }, [instruction] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var validateChecklistDates = function validateChecklistDates(valuesChecklist) {\n    var _valuesChecklist$quot, _valuesChecklist$quot2, _valuesChecklist$duty, _valuesChecklist$duty2, _valuesChecklist$evid, _valuesChecklist$evid2;\n\n    if ((valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$quot = valuesChecklist.quotesPutUp) === null || _valuesChecklist$quot === void 0 ? void 0 : _valuesChecklist$quot.accountHandler) === 'YES' && (valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$quot2 = valuesChecklist.quotesPutUp) === null || _valuesChecklist$quot2 === void 0 ? void 0 : _valuesChecklist$quot2.signedDate) === null) {\n      return false;\n    }\n\n    if ((valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$duty = valuesChecklist.dutyOfDisclosure) === null || _valuesChecklist$duty === void 0 ? void 0 : _valuesChecklist$duty.accountHandler) === 'YES' && (valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$duty2 = valuesChecklist.dutyOfDisclosure) === null || _valuesChecklist$duty2 === void 0 ? void 0 : _valuesChecklist$duty2.signedDate) === null) {\n      return false;\n    }\n\n    if ((valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$evid = valuesChecklist.evidence) === null || _valuesChecklist$evid === void 0 ? void 0 : _valuesChecklist$evid.accountHandler) === 'YES' && (valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$evid2 = valuesChecklist.evidence) === null || _valuesChecklist$evid2 === void 0 ? void 0 : _valuesChecklist$evid2.signedDate) === null) {\n      return false;\n    }\n\n    return true;\n  };\n\n  var validateYesNoNaToggle = function validateYesNoNaToggle(valuesChecklist) {\n    return Object.values(valuesChecklist).every(function (c) {\n      return ['YES', 'NO', 'NA'].includes(c.accountHandler);\n    });\n  };\n\n  var validateChecklistTabs = function validateChecklistTabs(valuesChecklist) {\n    return validateYesNoNaToggle(valuesChecklist) && validateChecklistDates(valuesChecklist);\n  };\n\n  var validateAllChecklistSelected = function validateAllChecklistSelected(valuesChecklist) {\n    return validateYesNoNaToggle(valuesChecklist);\n  };\n\n  var validateMandateChecklistDates = function validateMandateChecklistDates(checklistRow) {\n    if ((checklistRow === null || checklistRow === void 0 ? void 0 : checklistRow.accountHandler) === 'YES' && (checklistRow === null || checklistRow === void 0 ? void 0 : checklistRow.signedDate) === null) {\n      return true;\n    }\n\n    return false;\n  };\n\n  var saveChecklist = function saveChecklist(_ref2) {\n    var _childRef$current$pro2;\n\n    var isNext = _ref2.isNext,\n        isSave = _ref2.isSave,\n        isSaveNext = _ref2.isSaveNext;\n    var formValues = (_childRef$current$pro2 = childRef.current.props) === null || _childRef$current$pro2 === void 0 ? void 0 : _childRef$current$pro2.values;\n\n    var updatedInstruction = _objectSpread(_objectSpread({}, instruction), {}, {\n      details: _objectSpread(_objectSpread({}, instruction.details), {}, {\n        accountExecutive: getSelectedAccountExecutiveName(formValues === null || formValues === void 0 ? void 0 : formValues.accountExecutive),\n        accountExecutiveId: formValues === null || formValues === void 0 ? void 0 : formValues.accountExecutive,\n        accountExecutiveEmailId: getSelectedAccountExecutiveEmail(formValues === null || formValues === void 0 ? void 0 : formValues.accountExecutive),\n        producingBrokerName: getSelectedProducingBrokerName(formValues === null || formValues === void 0 ? void 0 : formValues.producingBroker),\n        producingBrokerId: formValues === null || formValues === void 0 ? void 0 : formValues.producingBroker,\n        producingBrokerEmailId: getSelectedProducingBrokerEmail(formValues === null || formValues === void 0 ? void 0 : formValues.producingBroker)\n      })\n    });\n\n    if (isSaveNext || isSave) {\n      dispatch(checkListUpdate(formValues, updatedInstruction)).then(function (data) {\n        if (isSaveNext) {\n          if ((data === null || data === void 0 ? void 0 : data.status) === constants.API_RESPONSE_OK) {\n            handlers.next();\n          } else {\n            dispatch(enqueueNotification('app.somethingWentWrong', 'warning'));\n          }\n        }\n      });\n    } else if (isNext) {\n      handlers.next();\n    }\n  };\n\n  var handleSave = function handleSave(type) {\n    saveChecklist(type);\n  };\n\n  var handleNext = function handleNext(generalTabErrors, type) {\n    var _childRef$current$pro3, _Object$entries, _Object$entries2, _Object$entries3, _Object$entries4;\n\n    var formValues = (_childRef$current$pro3 = childRef.current.props) === null || _childRef$current$pro3 === void 0 ? void 0 : _childRef$current$pro3.values;\n    var isChecklistDatesSelected = validateChecklistDates(formValues === null || formValues === void 0 ? void 0 : formValues.checklist);\n    var updatedContent = (_Object$entries = Object.entries(piSchema === null || piSchema === void 0 ? void 0 : piSchema.content)) === null || _Object$entries === void 0 ? void 0 : _Object$entries.reduce(function (acc, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          key = _ref4[0],\n          value = _ref4[1];\n\n      var newValue = value === null || value === void 0 ? void 0 : value.map(function (contentValue) {\n        var _formValues$checklist;\n\n        contentValue.cells[0].isError = !Boolean(formValues === null || formValues === void 0 ? void 0 : (_formValues$checklist = formValues.checklist[contentValue === null || contentValue === void 0 ? void 0 : contentValue.rowKey]) === null || _formValues$checklist === void 0 ? void 0 : _formValues$checklist.accountHandler) || ['quotesPutUp', 'dutyOfDisclosure', 'evidence'].includes(contentValue === null || contentValue === void 0 ? void 0 : contentValue.rowKey) && validateMandateChecklistDates(formValues === null || formValues === void 0 ? void 0 : formValues.checklist[contentValue === null || contentValue === void 0 ? void 0 : contentValue.rowKey]);\n        return contentValue;\n      });\n      return _objectSpread(_objectSpread({}, acc), _defineProperty({}, key, newValue));\n    }, {});\n\n    var updatePiSchema = _objectSpread(_objectSpread({}, piSchema), {}, {\n      content: updatedContent\n    });\n\n    setPiSchema(updatePiSchema);\n    var schema = utils.schemas.parsePiChecklist(updatePiSchema, instruction);\n    setSchemaData(schema);\n    var prePlacingChcklist = (_Object$entries2 = Object.entries(formValues === null || formValues === void 0 ? void 0 : formValues.checklist)) === null || _Object$entries2 === void 0 ? void 0 : _Object$entries2.reduce(function (acc, _ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n          key = _ref6[0],\n          value = _ref6[1];\n\n      return _objectSpread(_objectSpread({}, acc), ['quotesPutUp', 'dutyOfDisclosure', 'demandsNeeds', 'slipsSigned', 'evidence', 'atlas', 'bars'].includes(key) && _defineProperty({}, key, value));\n    }, {});\n    var mrcChcklist = (_Object$entries3 = Object.entries(formValues === null || formValues === void 0 ? void 0 : formValues.checklist)) === null || _Object$entries3 === void 0 ? void 0 : _Object$entries3.reduce(function (acc, _ref8) {\n      var _ref9 = _slicedToArray(_ref8, 2),\n          key = _ref9[0],\n          value = _ref9[1];\n\n      return _objectSpread(_objectSpread({}, acc), ['allWrittenLines', 'allUnderwriter', 'informationClearlyStated', 'allMarketsApproved', 'paymentTerms', 'subscriptionAgreement', 'riskCodes'].includes(key) && _defineProperty({}, key, value));\n    }, {});\n    var otherDetailsChcklist = (_Object$entries4 = Object.entries(formValues === null || formValues === void 0 ? void 0 : formValues.checklist)) === null || _Object$entries4 === void 0 ? void 0 : _Object$entries4.reduce(function (acc, _ref11) {\n      var _ref12 = _slicedToArray(_ref11, 2),\n          key = _ref12[0],\n          value = _ref12[1];\n\n      return _objectSpread(_objectSpread({}, acc), ['marketSheet', 'confirmSanctioned', 'thirdParty', 'contractCertainty'].includes(key) && _defineProperty({}, key, value));\n    }, {});\n    var isChecklistCompleted = validateAllChecklistSelected(formValues === null || formValues === void 0 ? void 0 : formValues.checklist);\n    var isPrePlacingChecklistCompleted = validateChecklistTabs(prePlacingChcklist);\n    var isMrcChecklistCompleted = validateChecklistTabs(mrcChcklist);\n    var isOtherDetailsChecklistCompleted = validateChecklistTabs(otherDetailsChcklist);\n    var isAllRiskRefsHavingAtLeastADoc = !(utils.generic.isValidArray(riskReferencesDocumentsCountList, true) && (riskReferencesDocumentsCountList === null || riskReferencesDocumentsCountList === void 0 ? void 0 : riskReferencesDocumentsCountList.some(function (a) {\n      return Number(a === null || a === void 0 ? void 0 : a.documentCount) === 0;\n    })));\n    var updatedTabs = tabs === null || tabs === void 0 ? void 0 : tabs.map(function (tab) {\n      switch (tab.value) {\n        case constants.GENERAL:\n          return _objectSpread(_objectSpread({}, tab), {}, {\n            errors: generalTabErrors\n          });\n\n        case constants.PRE_PLACING:\n          return _objectSpread(_objectSpread({}, tab), {}, {\n            errors: Number(!isPrePlacingChecklistCompleted)\n          });\n\n        case constants.MRC:\n          return _objectSpread(_objectSpread({}, tab), {}, {\n            errors: Number(!isMrcChecklistCompleted)\n          });\n\n        case constants.OTHER_DETAILS:\n          return _objectSpread(_objectSpread({}, tab), {}, {\n            errors: Number(!isOtherDetailsChecklistCompleted)\n          });\n\n        case constants.RISK_REFERENCES:\n          return _objectSpread(_objectSpread({}, tab), {}, {\n            errors: Number(!isAllRiskRefsHavingAtLeastADoc)\n          });\n\n        default:\n          return {};\n      }\n    });\n    setTabs(updatedTabs);\n    var isAllMandatoryFieldsCompleted = !Boolean(generalTabErrors) && isChecklistCompleted;\n\n    if (isAllRiskRefsHavingAtLeastADoc && isAllMandatoryFieldsCompleted && isChecklistDatesSelected) {\n      saveChecklist(type);\n    } else if (!isAllMandatoryFieldsCompleted && !isAllRiskRefsHavingAtLeastADoc && !isChecklistDatesSelected) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFieldsDatesDocs', 'warning'));\n    } else if (!isAllRiskRefsHavingAtLeastADoc && !isChecklistDatesSelected) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredDatesDocs', 'warning'));\n    } else if (!isAllMandatoryFieldsCompleted && !isChecklistDatesSelected) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFieldsDates', 'warning'));\n    } else if (!isAllMandatoryFieldsCompleted && !isAllRiskRefsHavingAtLeastADoc) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFieldsDocs', 'warning'));\n    } else if (!isAllMandatoryFieldsCompleted) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFields', 'warning'));\n    } else if (!isAllRiskRefsHavingAtLeastADoc) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredDocs', 'warning'));\n    } else if (!isChecklistDatesSelected) {\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredDates', 'warning'));\n    }\n  };\n\n  var handleCancel = function handleCancel() {\n    var _childRef$current2, _childRef$current2$pr, _Object$entries5;\n\n    var reset = childRef === null || childRef === void 0 ? void 0 : (_childRef$current2 = childRef.current) === null || _childRef$current2 === void 0 ? void 0 : (_childRef$current2$pr = _childRef$current2.props) === null || _childRef$current2$pr === void 0 ? void 0 : _childRef$current2$pr.resetFunc;\n    setResetKey(new Date().getTime());\n    setTabs(checklistTabs);\n    var updatedContent = (_Object$entries5 = Object.entries(piSchema === null || piSchema === void 0 ? void 0 : piSchema.content)) === null || _Object$entries5 === void 0 ? void 0 : _Object$entries5.reduce(function (acc, _ref14) {\n      var _ref15 = _slicedToArray(_ref14, 2),\n          key = _ref15[0],\n          value = _ref15[1];\n\n      var newValue = value === null || value === void 0 ? void 0 : value.map(function (contentValue) {\n        contentValue.cells[0].isError = false;\n        return contentValue;\n      });\n      return _objectSpread(_objectSpread({}, acc), _defineProperty({}, key, newValue));\n    }, {});\n\n    var updatePiSchema = _objectSpread(_objectSpread({}, piSchema), {}, {\n      content: updatedContent\n    });\n\n    setPiSchema(updatePiSchema);\n    var schema = utils.schemas.parsePiChecklist(updatePiSchema, instruction);\n    setSchemaData(schema);\n\n    if (utils.generic.isFunction(reset)) {\n      reset(defaultValues, {\n        keepDirty: false\n      });\n    }\n  };\n\n  var toggleTab = function toggleTab(tab) {\n    setSelectedTab(tab);\n    history.replace(\"\".concat(config.routes.processingInstructions.steps, \"/\").concat(id).concat(step ? \"/\".concat(step) : '').concat(tab ? \"/\".concat(tab) : ''));\n  }; // abort if data is not ready/available\n\n\n  if (!defaultValues || !instruction) return null;\n  return /*#__PURE__*/_jsxDEV(ProcessingInstructionsChecklistView, {\n    instruction: instruction,\n    leadRef: leadRef,\n    defaultValues: defaultValues,\n    columns: columns,\n    tabs: tabs,\n    selectedTab: selectedTab,\n    fields: fields,\n    schemaData: schemaData,\n    isRiskReferenceDocumentCountLoading: isRiskReferenceDocumentCountLoading,\n    isFdo: isFdo,\n    isReadOnly: isReadOnly,\n    isEditable: isEditable,\n    isCheckboxesEditable: isCheckboxesEditable,\n    resetKey: resetKey,\n    handlers: _objectSpread(_objectSpread({}, handlers), {}, {\n      cancel: handleCancel,\n      save: handleSave,\n      next: handleNext,\n      toggleTab: toggleTab,\n      setTabs: setTabs\n    }),\n    ref: childRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 537,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProcessingInstructionsChecklist, \"pNJ+zP3WZhhMLKThRgqMvfoccjo=\", false, function () {\n  return [useDispatch, useHistory, useParams, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ProcessingInstructionsChecklist;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProcessingInstructionsChecklist\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ProcessingInstructionsChecklist/ProcessingInstructionsChecklist.js"],"names":["React","useEffect","useState","PropTypes","useSelector","useDispatch","useHistory","useParams","get","Yup","ProcessingInstructionsChecklistView","processingInstructionsSchema","enqueueNotification","checkListUpdate","selectUser","selectPiProducingBrokers","selectPiAccountExecutives","selectPiFacilityTypes","updateReferenceDocumentCountLoading","getRiskReferenceDocumentsCount","getRiskReferencesDocumentsCountList","getIsRiskReferenceDocumentCountLoading","utils","config","constants","ProcessingInstructionsChecklist","propTypes","instruction","object","isRequired","handlers","shape","back","func","next","childRef","dispatch","history","id","step","tab","riskReferencesDocumentsCountList","isRiskReferenceDocumentCountLoading","documents","state","producingBrokersFromRoles","accountExecutivesFromRoles","facilityTypes","user","columns","label","string","t","align","checklistTabs","value","GENERAL","PRE_PLACING","MRC","OTHER_DETAILS","RISK_REFERENCES","tabs","setTabs","isValidTab","map","item","includes","selectedTab","setSelectedTab","defaultValues","setDefaultValues","schemaData","setSchemaData","resetKey","setResetKey","piSchema","setPiSchema","leadRef","riskReferences","find","r","leadPolicy","isFdo","processingInstructions","processTypeId","isDraft","status","statusId","isRejectedDraft","isSubmittedAuthorisedSignatory","isReopened","userHasWritePermission","app","access","feature","userHasApproverAccess","isCheckboxesEditable","isEditable","isReadOnly","isEndorsement","isFeeAndAmendment","isBordereau","faBorderProcessType","gxbProducingBrokers","generic","isValidArray","reduce","acc","curr","gxbAttributeDefaultValues","producingBrokers","filter","gxbPbs","gxbUseId","pb","name","emailId","gxbAccountExecutives","accountExecutives","gxbAEs","ae","getFacilityTypeId","facilityTypeId","details","type","facilityTypeID","getRiskReferenceDocumentCount","referenceList","refData","endorsementId","endorsementNumber","riskRefId","xbInstanceId","xbPolicyId","documentTypeValue","PI_ENDORSEMENT_TYPE_DOCUMENT","documentTypeDescription","PI_FABORDER_TYPE_DOCUMENT","PI_CLOSING_FDO_TYPE_DOCUMENT","getSelectedProducingBrokerName","pbId","selectedProducingBrokerName","getSelectedProducingBrokerEmail","selectedProducingBrokerEmail","getSelectedAccountExecutiveName","aeId","selectedAccountExecutiveName","getSelectedAccountExecutiveEmail","selectedAccountExecutiveEmail","fields","group","clientName","muiComponentProps","InputProps","readOnly","disabled","contactName","validation","required","inputProps","maxLength","clientEmail","email","eocInvoiceContactName","eocInvoiceMail","producingBrokerId","options","optionKey","optionLabel","isInvalidOrEmptyArray","accountExecutiveId","businessType","reset","current","props","resetFunc","schema","schemas","parsePiChecklist","updatedDefaultValues","checklist","form","getNestedInitialValues","rows","getInitialValues","isFunction","keepDirty","validateChecklistDates","valuesChecklist","quotesPutUp","accountHandler","signedDate","dutyOfDisclosure","evidence","validateYesNoNaToggle","Object","values","every","c","validateChecklistTabs","validateAllChecklistSelected","validateMandateChecklistDates","checklistRow","saveChecklist","isNext","isSave","isSaveNext","formValues","updatedInstruction","accountExecutive","accountExecutiveEmailId","producingBrokerName","producingBroker","producingBrokerEmailId","then","data","API_RESPONSE_OK","handleSave","handleNext","generalTabErrors","isChecklistDatesSelected","updatedContent","entries","content","key","newValue","contentValue","cells","isError","Boolean","rowKey","updatePiSchema","prePlacingChcklist","mrcChcklist","otherDetailsChcklist","isChecklistCompleted","isPrePlacingChecklistCompleted","isMrcChecklistCompleted","isOtherDetailsChecklistCompleted","isAllRiskRefsHavingAtLeastADoc","some","a","Number","documentCount","updatedTabs","errors","isAllMandatoryFieldsCompleted","handleCancel","Date","getTime","toggleTab","replace","routes","steps","cancel","save"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport get from 'lodash/get';\r\nimport * as Yup from 'yup';\r\n\r\n// app\r\nimport ProcessingInstructionsChecklistView from './ProcessingInstructionsChecklist.view';\r\nimport { processingInstructionsSchema } from 'schemas';\r\nimport {\r\n  enqueueNotification,\r\n  checkListUpdate,\r\n  selectUser,\r\n  selectPiProducingBrokers,\r\n  selectPiAccountExecutives,\r\n  selectPiFacilityTypes,\r\n  updateReferenceDocumentCountLoading,\r\n  getRiskReferenceDocumentsCount,\r\n  getRiskReferencesDocumentsCountList,\r\n  getIsRiskReferenceDocumentCountLoading,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport * as constants from 'consts';\r\n\r\nProcessingInstructionsChecklist.propTypes = {\r\n  instruction: PropTypes.object.isRequired,\r\n  handlers: PropTypes.shape({\r\n    back: PropTypes.func.isRequired,\r\n    next: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default function ProcessingInstructionsChecklist({ instruction, handlers, childRef }) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { id, step, tab } = useParams();\r\n  const riskReferencesDocumentsCountList = useSelector(getRiskReferencesDocumentsCountList);\r\n  const isRiskReferenceDocumentCountLoading = useSelector(getIsRiskReferenceDocumentCountLoading);\r\n  const documents = useSelector((state) => get(state, 'processingInstructions.documents')) || {};\r\n  const producingBrokersFromRoles = useSelector(selectPiProducingBrokers);\r\n  const accountExecutivesFromRoles = useSelector(selectPiAccountExecutives);\r\n  const facilityTypes = useSelector(selectPiFacilityTypes);\r\n  const user = useSelector(selectUser);\r\n\r\n  const columns = [\r\n    { id: 'detail', label: utils.string.t('processingInstructions.checklist.cols.detail') },\r\n    { id: 'frontEndContact', label: utils.string.t('processingInstructions.checklist.cols.frontEndContact'), align: 'center' },\r\n    { id: 'authorisedSignatory', label: utils.string.t('processingInstructions.checklist.cols.authorisedSignatory'), align: 'center' },\r\n  ];\r\n\r\n  const checklistTabs = [\r\n    { value: constants.GENERAL, label: utils.string.t('processingInstructions.checklist.tabs.general.title') },\r\n    { value: constants.PRE_PLACING, label: utils.string.t('processingInstructions.checklist.tabs.prePlacing.title') },\r\n    { value: constants.MRC, label: utils.string.t('processingInstructions.checklist.tabs.mrc.title') },\r\n    { value: constants.OTHER_DETAILS, label: utils.string.t('processingInstructions.checklist.tabs.otherDetails.title') },\r\n    { value: constants.RISK_REFERENCES, label: utils.string.t('processingInstructions.checklist.tabs.riskRefs.title') },\r\n  ];\r\n\r\n  const [tabs, setTabs] = useState(checklistTabs);\r\n\r\n  const isValidTab = tabs.map((item) => item.value).includes(tab);\r\n\r\n  const [selectedTab, setSelectedTab] = useState(isValidTab ? tab : 'general');\r\n  const [defaultValues, setDefaultValues] = useState();\r\n  const [schemaData, setSchemaData] = useState({});\r\n  const [resetKey, setResetKey] = useState();\r\n  const [piSchema, setPiSchema] = useState(processingInstructionsSchema);\r\n\r\n  const leadRef = instruction?.riskReferences?.find((r) => r.leadPolicy);\r\n  const isFdo = utils.processingInstructions.isFdo(instruction?.processTypeId);\r\n  const isDraft = utils.processingInstructions.status.isDraft(instruction?.statusId);\r\n  const isRejectedDraft = utils.processingInstructions.status.isRejectedDraft(instruction?.statusId);\r\n  const isSubmittedAuthorisedSignatory = utils.processingInstructions.status.isSubmittedAuthorisedSignatory(instruction?.statusId);\r\n  const isReopened = utils.processingInstructions.status.isReopened(instruction?.statusId);\r\n  const userHasWritePermission = utils.app.access.feature('processingInstructions.processingInstructions', ['create', 'update'], user);\r\n  const userHasApproverAccess = utils.app.access.feature('processingInstructions.approverChecklist', ['create', 'update'], user);\r\n  const isCheckboxesEditable = userHasApproverAccess && isSubmittedAuthorisedSignatory;\r\n  const isEditable = userHasWritePermission && (isDraft || isRejectedDraft || isReopened);\r\n  const isReadOnly = !isEditable;\r\n\r\n  const isEndorsement = utils.processingInstructions.isEndorsement(instruction?.processTypeId);\r\n  const isFeeAndAmendment = utils.processingInstructions.isFeeAndAmendment(instruction?.processTypeId);\r\n  const isBordereau = utils.processingInstructions.isBordereau(instruction?.processTypeId);\r\n  const faBorderProcessType = isBordereau || isFeeAndAmendment;\r\n  const riskReferences = instruction?.riskReferences;\r\n  const gxbProducingBrokers = utils.generic.isValidArray(riskReferences, true)\r\n    ? riskReferences\r\n        ?.reduce((acc, curr) => {\r\n          return [...acc, ...(curr?.gxbAttributeDefaultValues?.producingBrokers?.filter((gxbPbs) => gxbPbs?.gxbUseId) ?? [])];\r\n        }, [])\r\n        ?.map((pb) => ({ id: pb?.gxbUseId, name: pb?.name, emailId: pb?.emailId })) || []\r\n    : [];\r\n\r\n  const gxbAccountExecutives = utils.generic.isValidArray(riskReferences, true)\r\n    ? riskReferences\r\n        ?.reduce((acc, curr) => {\r\n          return [...acc, ...(curr?.gxbAttributeDefaultValues?.accountExecutives?.filter((gxbAEs) => gxbAEs?.gxbUseId) ?? [])];\r\n        }, [])\r\n        ?.map((ae) => ({ id: ae?.gxbUseId, name: ae?.name, emailId: ae?.emailId })) || []\r\n    : [];\r\n  const producingBrokers = utils.generic.isValidArray(gxbProducingBrokers, true) ? gxbProducingBrokers : producingBrokersFromRoles;\r\n  const accountExecutives = utils.generic.isValidArray(gxbAccountExecutives, true) ? gxbAccountExecutives : accountExecutivesFromRoles;\r\n\r\n  const getFacilityTypeId = () => {\r\n    let facilityTypeId = instruction?.details?.facilityTypeId;\r\n\r\n    if (!facilityTypeId && utils.generic.isValidArray(facilityTypes, true)) {\r\n      const item = facilityTypes.find((type) => type.facilityTypeID === instruction?.details?.facilityTypeId);\r\n      facilityTypeId = item?.facilityTypeID;\r\n    }\r\n\r\n    return facilityTypeId || '';\r\n  };\r\n\r\n  const getRiskReferenceDocumentCount = () => {\r\n    if (utils.generic.isValidArray(documents?.riskReferences, true)) {\r\n      dispatch(updateReferenceDocumentCountLoading(true));\r\n      const referenceList = documents?.riskReferences?.map((refData) => {\r\n        return {\r\n          endorsementId: refData.endorsementId,\r\n          endorsementNumber: refData.endorsementNumber,\r\n          riskRefId: refData.riskRefId,\r\n          xbInstanceId: refData.xbInstanceId,\r\n          xbPolicyId: refData.xbPolicyId,\r\n        };\r\n      });\r\n      const documentTypeValue = isEndorsement\r\n        ? constants.PI_ENDORSEMENT_TYPE_DOCUMENT.documentTypeDescription\r\n        : faBorderProcessType\r\n        ? constants.PI_FABORDER_TYPE_DOCUMENT.documentTypeDescription\r\n        : constants.PI_CLOSING_FDO_TYPE_DOCUMENT.documentTypeDescription;\r\n      dispatch(getRiskReferenceDocumentsCount(referenceList, documentTypeValue));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getRiskReferenceDocumentCount();\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const getSelectedProducingBrokerName = (pbId) => {\r\n    const selectedProducingBrokerName = producingBrokers?.find((pb) => pb?.id === pbId)?.name;\r\n    return selectedProducingBrokerName;\r\n  };\r\n\r\n  const getSelectedProducingBrokerEmail = (pbId) => {\r\n    const selectedProducingBrokerEmail = producingBrokers?.find((pb) => pb?.id === pbId)?.emailId;\r\n    return selectedProducingBrokerEmail;\r\n  };\r\n\r\n  const getSelectedAccountExecutiveName = (aeId) => {\r\n    const selectedAccountExecutiveName = accountExecutives?.find((ae) => ae?.id === aeId)?.name;\r\n    return selectedAccountExecutiveName;\r\n  };\r\n\r\n  const getSelectedAccountExecutiveEmail = (aeId) => {\r\n    const selectedAccountExecutiveEmail = accountExecutives?.find((ae) => ae?.id === aeId)?.emailId;\r\n    return selectedAccountExecutiveEmail;\r\n  };\r\n\r\n  const fields = [\r\n    {\r\n      name: 'invoicingClient',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.invoicingClient'),\r\n      value: leadRef?.clientName || '',\r\n      muiComponentProps: {\r\n        InputProps: {\r\n          readOnly: true,\r\n          disabled: true,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'contactName',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.contactName'),\r\n      value: instruction?.details?.contactName || '',\r\n      validation: Yup.string().required(utils.string.t('validation.required')),\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'clientEmail',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.clientEmail'),\r\n      value: instruction?.details?.clientEmail || '',\r\n      validation: Yup.string().email(utils.string.t('validation.email')).required(utils.string.t('validation.required')),\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'eocInvoiceContactName',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceContactName'),\r\n      value: instruction?.details?.eocInvoiceContactName || '',\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'eocInvoiceMail',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceMail'),\r\n      validation: Yup.string().email(utils.string.t('validation.email')),\r\n      value: instruction?.details?.eocInvoiceMail || '',\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'producingBroker',\r\n      group: 'general',\r\n      type: 'select',\r\n      label: utils.string.t('processingInstructions.checklist.fields.producingBroker'),\r\n      value: instruction?.details?.producingBrokerId ?? '',\r\n      options: producingBrokers,\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      validation: Yup.string().required(utils.string.t('validation.required')),\r\n      muiComponentProps: {\r\n        disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(producingBrokers),\r\n      },\r\n    },\r\n    {\r\n      name: 'accountExecutive',\r\n      group: 'general',\r\n      type: 'select',\r\n      label: utils.string.t('processingInstructions.checklist.fields.accountExecutive'),\r\n      value: instruction?.details?.accountExecutiveId ?? '',\r\n      options: accountExecutives,\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      validation: Yup.string().required(utils.string.t('validation.required')),\r\n      muiComponentProps: {\r\n        disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(accountExecutives),\r\n      },\r\n    },\r\n    ...(isFdo\r\n      ? [\r\n          {\r\n            name: 'businessType',\r\n            group: 'general',\r\n            type: 'text',\r\n            label: utils.string.t('processingInstructions.checklist.fields.businessType'),\r\n            value: leadRef?.businessType || '',\r\n            muiComponentProps: {\r\n              InputProps: {\r\n                readOnly: true,\r\n                disabled: true,\r\n              },\r\n            },\r\n          },\r\n          {\r\n            name: 'facilityType',\r\n            group: 'general',\r\n            type: 'select',\r\n            label: utils.string.t('processingInstructions.checklist.fields.facilityType'),\r\n            value: getFacilityTypeId(),\r\n            validation: Yup.string().required(utils.string.t('validation.required')),\r\n            options: facilityTypes,\r\n            optionKey: 'facilityTypeID',\r\n            optionLabel: 'facilityTypeDetails',\r\n            disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(facilityTypes),\r\n          },\r\n        ]\r\n      : []),\r\n  ];\r\n\r\n  useEffect(\r\n    () => {\r\n      const reset = childRef?.current?.props?.resetFunc;\r\n      const schema = utils.schemas.parsePiChecklist(piSchema, instruction);\r\n      const updatedDefaultValues = {\r\n        checklist: utils.form.getNestedInitialValues(schema?.rows, 'columnName'),\r\n        ...utils.form.getInitialValues(fields),\r\n      };\r\n\r\n      setSchemaData(schema);\r\n      setDefaultValues(updatedDefaultValues);\r\n\r\n      if (utils.generic.isFunction(reset)) {\r\n        reset(updatedDefaultValues, {\r\n          keepDirty: false,\r\n        });\r\n      }\r\n    },\r\n    [instruction] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const validateChecklistDates = (valuesChecklist) => {\r\n    if (valuesChecklist?.quotesPutUp?.accountHandler === 'YES' && valuesChecklist?.quotesPutUp?.signedDate === null) {\r\n      return false;\r\n    }\r\n\r\n    if (valuesChecklist?.dutyOfDisclosure?.accountHandler === 'YES' && valuesChecklist?.dutyOfDisclosure?.signedDate === null) {\r\n      return false;\r\n    }\r\n\r\n    if (valuesChecklist?.evidence?.accountHandler === 'YES' && valuesChecklist?.evidence?.signedDate === null) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const validateYesNoNaToggle = (valuesChecklist) => {\r\n    return Object.values(valuesChecklist).every((c) => ['YES', 'NO', 'NA'].includes(c.accountHandler));\r\n  };\r\n\r\n  const validateChecklistTabs = (valuesChecklist) => {\r\n    return validateYesNoNaToggle(valuesChecklist) && validateChecklistDates(valuesChecklist);\r\n  };\r\n\r\n  const validateAllChecklistSelected = (valuesChecklist) => {\r\n    return validateYesNoNaToggle(valuesChecklist);\r\n  };\r\n\r\n  const validateMandateChecklistDates = (checklistRow) => {\r\n    if (checklistRow?.accountHandler === 'YES' && checklistRow?.signedDate === null) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const saveChecklist = ({ isNext, isSave, isSaveNext }) => {\r\n    const formValues = childRef.current.props?.values;\r\n    const updatedInstruction = {\r\n      ...instruction,\r\n      details: {\r\n        ...instruction.details,\r\n        accountExecutive: getSelectedAccountExecutiveName(formValues?.accountExecutive),\r\n        accountExecutiveId: formValues?.accountExecutive,\r\n        accountExecutiveEmailId: getSelectedAccountExecutiveEmail(formValues?.accountExecutive),\r\n        producingBrokerName: getSelectedProducingBrokerName(formValues?.producingBroker),\r\n        producingBrokerId: formValues?.producingBroker,\r\n        producingBrokerEmailId: getSelectedProducingBrokerEmail(formValues?.producingBroker),\r\n      },\r\n    };\r\n\r\n    if (isSaveNext || isSave) {\r\n      dispatch(checkListUpdate(formValues, updatedInstruction)).then((data) => {\r\n        if (isSaveNext) {\r\n          if (data?.status === constants.API_RESPONSE_OK) {\r\n            handlers.next();\r\n          } else {\r\n            dispatch(enqueueNotification('app.somethingWentWrong', 'warning'));\r\n          }\r\n        }\r\n      });\r\n    } else if (isNext) {\r\n      handlers.next();\r\n    }\r\n  };\r\n\r\n  const handleSave = (type) => {\r\n    saveChecklist(type);\r\n  };\r\n\r\n  const handleNext = (generalTabErrors, type) => {\r\n    const formValues = childRef.current.props?.values;\r\n    const isChecklistDatesSelected = validateChecklistDates(formValues?.checklist);\r\n\r\n    const updatedContent = Object.entries(piSchema?.content)?.reduce((acc, [key, value]) => {\r\n      const newValue = value?.map((contentValue) => {\r\n        contentValue.cells[0].isError =\r\n          !Boolean(formValues?.checklist[contentValue?.rowKey]?.accountHandler) ||\r\n          (['quotesPutUp', 'dutyOfDisclosure', 'evidence'].includes(contentValue?.rowKey) &&\r\n            validateMandateChecklistDates(formValues?.checklist[contentValue?.rowKey]));\r\n\r\n        return contentValue;\r\n      });\r\n\r\n      return {\r\n        ...acc,\r\n        ...{\r\n          [key]: newValue,\r\n        },\r\n      };\r\n    }, {});\r\n\r\n    const updatePiSchema = { ...piSchema, content: updatedContent };\r\n    setPiSchema(updatePiSchema);\r\n    const schema = utils.schemas.parsePiChecklist(updatePiSchema, instruction);\r\n    setSchemaData(schema);\r\n\r\n    const prePlacingChcklist = Object.entries(formValues?.checklist)?.reduce((acc, [key, value]) => {\r\n      return {\r\n        ...acc,\r\n        ...(['quotesPutUp', 'dutyOfDisclosure', 'demandsNeeds', 'slipsSigned', 'evidence', 'atlas', 'bars'].includes(key) && {\r\n          [key]: value,\r\n        }),\r\n      };\r\n    }, {});\r\n    const mrcChcklist = Object.entries(formValues?.checklist)?.reduce((acc, [key, value]) => {\r\n      return {\r\n        ...acc,\r\n        ...([\r\n          'allWrittenLines',\r\n          'allUnderwriter',\r\n          'informationClearlyStated',\r\n          'allMarketsApproved',\r\n          'paymentTerms',\r\n          'subscriptionAgreement',\r\n          'riskCodes',\r\n        ].includes(key) && {\r\n          [key]: value,\r\n        }),\r\n      };\r\n    }, {});\r\n    const otherDetailsChcklist = Object.entries(formValues?.checklist)?.reduce((acc, [key, value]) => {\r\n      return {\r\n        ...acc,\r\n        ...(['marketSheet', 'confirmSanctioned', 'thirdParty', 'contractCertainty'].includes(key) && {\r\n          [key]: value,\r\n        }),\r\n      };\r\n    }, {});\r\n\r\n    const isChecklistCompleted = validateAllChecklistSelected(formValues?.checklist);\r\n    const isPrePlacingChecklistCompleted = validateChecklistTabs(prePlacingChcklist);\r\n    const isMrcChecklistCompleted = validateChecklistTabs(mrcChcklist);\r\n    const isOtherDetailsChecklistCompleted = validateChecklistTabs(otherDetailsChcklist);\r\n    const isAllRiskRefsHavingAtLeastADoc = !(\r\n      utils.generic.isValidArray(riskReferencesDocumentsCountList, true) &&\r\n      riskReferencesDocumentsCountList?.some((a) => Number(a?.documentCount) === 0)\r\n    );\r\n    const updatedTabs = tabs?.map((tab) => {\r\n      switch (tab.value) {\r\n        case constants.GENERAL:\r\n          return { ...tab, errors: generalTabErrors };\r\n        case constants.PRE_PLACING:\r\n          return { ...tab, errors: Number(!isPrePlacingChecklistCompleted) };\r\n        case constants.MRC:\r\n          return { ...tab, errors: Number(!isMrcChecklistCompleted) };\r\n        case constants.OTHER_DETAILS:\r\n          return { ...tab, errors: Number(!isOtherDetailsChecklistCompleted) };\r\n        case constants.RISK_REFERENCES:\r\n          return { ...tab, errors: Number(!isAllRiskRefsHavingAtLeastADoc) };\r\n        default:\r\n          return {};\r\n      }\r\n    });\r\n    setTabs(updatedTabs);\r\n\r\n    const isAllMandatoryFieldsCompleted = !Boolean(generalTabErrors) && isChecklistCompleted;\r\n\r\n    if (isAllRiskRefsHavingAtLeastADoc && isAllMandatoryFieldsCompleted && isChecklistDatesSelected) {\r\n      saveChecklist(type);\r\n    } else if (!isAllMandatoryFieldsCompleted && !isAllRiskRefsHavingAtLeastADoc && !isChecklistDatesSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFieldsDatesDocs', 'warning'));\r\n    } else if (!isAllRiskRefsHavingAtLeastADoc && !isChecklistDatesSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredDatesDocs', 'warning'));\r\n    } else if (!isAllMandatoryFieldsCompleted && !isChecklistDatesSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFieldsDates', 'warning'));\r\n    } else if (!isAllMandatoryFieldsCompleted && !isAllRiskRefsHavingAtLeastADoc) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFieldsDocs', 'warning'));\r\n    } else if (!isAllMandatoryFieldsCompleted) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredFields', 'warning'));\r\n    } else if (!isAllRiskRefsHavingAtLeastADoc) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredDocs', 'warning'));\r\n    } else if (!isChecklistDatesSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.missingRequiredDates', 'warning'));\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    const reset = childRef?.current?.props?.resetFunc;\r\n\r\n    setResetKey(new Date().getTime());\r\n    setTabs(checklistTabs);\r\n\r\n    const updatedContent = Object.entries(piSchema?.content)?.reduce((acc, [key, value]) => {\r\n      const newValue = value?.map((contentValue) => {\r\n        contentValue.cells[0].isError = false;\r\n        return contentValue;\r\n      });\r\n\r\n      return {\r\n        ...acc,\r\n        ...{\r\n          [key]: newValue,\r\n        },\r\n      };\r\n    }, {});\r\n\r\n    const updatePiSchema = { ...piSchema, content: updatedContent };\r\n    setPiSchema(updatePiSchema);\r\n    const schema = utils.schemas.parsePiChecklist(updatePiSchema, instruction);\r\n    setSchemaData(schema);\r\n    if (utils.generic.isFunction(reset)) {\r\n      reset(defaultValues, { keepDirty: false });\r\n    }\r\n  };\r\n\r\n  const toggleTab = (tab) => {\r\n    setSelectedTab(tab);\r\n    history.replace(`${config.routes.processingInstructions.steps}/${id}${step ? `/${step}` : ''}${tab ? `/${tab}` : ''}`);\r\n  };\r\n\r\n  // abort if data is not ready/available\r\n  if (!defaultValues || !instruction) return null;\r\n\r\n  return (\r\n    <ProcessingInstructionsChecklistView\r\n      instruction={instruction}\r\n      leadRef={leadRef}\r\n      defaultValues={defaultValues}\r\n      columns={columns}\r\n      tabs={tabs}\r\n      selectedTab={selectedTab}\r\n      fields={fields}\r\n      schemaData={schemaData}\r\n      isRiskReferenceDocumentCountLoading={isRiskReferenceDocumentCountLoading}\r\n      isFdo={isFdo}\r\n      isReadOnly={isReadOnly}\r\n      isEditable={isEditable}\r\n      isCheckboxesEditable={isCheckboxesEditable}\r\n      resetKey={resetKey}\r\n      handlers={{\r\n        ...handlers,\r\n        cancel: handleCancel,\r\n        save: handleSave,\r\n        next: handleNext,\r\n        toggleTab,\r\n        setTabs,\r\n      }}\r\n      ref={childRef}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}