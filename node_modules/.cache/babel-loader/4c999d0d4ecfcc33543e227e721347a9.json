{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport * as utils from 'utils'; //app\n\nimport { authLogout, addLoader, removeLoader } from 'stores';\nexport var getAdvancedSearchResults = function getAdvancedSearchResults() {\n  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var selectedProcess = arguments.length > 1 ? arguments[1] : undefined;\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint;\n\n    var insuredName = params.insuredName,\n        depart = params.depart,\n        yoa = params.yoa;\n    var yearOfAcc = yoa ? yoa : 0;\n    var defaultError = {\n      file: 'stores/processingInstructions.actions.getAdvancedSearchResults'\n    };\n    dispatch(getAdvancedSearchResultsRequest(params));\n    dispatch(addLoader('getAdvancedSearchResults'));\n\n    var httpParams = _objectSpread({\n      insuredName: encodeURIComponent(insuredName === null || insuredName === void 0 ? void 0 : insuredName.name),\n      year: yearOfAcc,\n      processType: selectedProcess === null || selectedProcess === void 0 ? void 0 : selectedProcess.split(' ').join('')\n    }, (depart === null || depart === void 0 ? void 0 : depart.name) && {\n      departmentName: encodeURIComponent(depart.name)\n    });\n\n    return utils.api.get({\n      token: auth.accessToken,\n      endpoint: endpoint.ppService,\n      path: 'data/advance/search/risk/reference',\n      params: httpParams\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      if (json && json.status === 'OK' && json.data) {\n        // success\n        dispatch(getAdvancedSearchResultsSuccess(json.data));\n        return json.data;\n      } else {\n        // fail\n        return Promise.reject(_objectSpread({\n          message: \"API data format error\".concat(json.status ? \" (\".concat(json.status, \")\") : '')\n        }, json && _objectSpread({}, json)));\n      }\n    }).catch(function (err) {\n      utils.api.handleError(err, _objectSpread(_objectSpread({}, defaultError), {}, {\n        message: 'API fetch error (processingInstructions.getAdvancedSearchResults)'\n      }));\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      dispatch(getAdvancedSearchResultsFailure(err));\n      return err.json.data;\n    }).finally(function () {\n      dispatch(removeLoader('getAdvancedSearchResults'));\n    });\n  };\n};\nexport var getAdvancedSearchResultsRequest = function getAdvancedSearchResultsRequest(payload) {\n  return {\n    type: 'PROCESSING_INSTRUCTIONS_GET_ADVANCED_SEARCH_RESULTS_REQUEST',\n    payload: payload\n  };\n};\nexport var getAdvancedSearchResultsSuccess = function getAdvancedSearchResultsSuccess(responseData) {\n  return {\n    type: 'PROCESSING_INSTRUCTIONS_GET_ADVANCED_SEARCH_RESULTS_SUCCESS',\n    payload: responseData\n  };\n};\nexport var getAdvancedSearchResultsFailure = function getAdvancedSearchResultsFailure(error) {\n  return {\n    type: 'PROCESSING_INSTRUCTIONS_GET_ADVANCED_SEARCH_RESULTS_FAILURE',\n    payload: error\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/processingInstructions/processingInstructions.actions.getAdvancedSearchResults.js"],"names":["utils","authLogout","addLoader","removeLoader","getAdvancedSearchResults","params","selectedProcess","dispatch","getState","auth","user","endpoint","config","vars","insuredName","depart","yoa","yearOfAcc","defaultError","file","getAdvancedSearchResultsRequest","httpParams","encodeURIComponent","name","year","processType","split","join","departmentName","api","get","token","accessToken","ppService","path","then","response","handleResponse","json","status","data","getAdvancedSearchResultsSuccess","Promise","reject","message","catch","err","handleError","handleUnauthorized","getAdvancedSearchResultsFailure","finally","payload","type","responseData","error"],"mappings":"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","sourcesContent":["import * as utils from 'utils';\r\n\r\n//app\r\nimport { authLogout, addLoader, removeLoader } from 'stores';\r\n\r\nexport const getAdvancedSearchResults =\r\n  (params = {}, selectedProcess) =>\r\n  (dispatch, getState) => {\r\n    // prettier-ignore\r\n    const { user: { auth }, config: { vars: { endpoint }}} = getState();\r\n    const { insuredName, depart, yoa } = params;\r\n    const yearOfAcc = yoa ? yoa : 0;\r\n\r\n    const defaultError = {\r\n      file: 'stores/processingInstructions.actions.getAdvancedSearchResults',\r\n    };\r\n\r\n    dispatch(getAdvancedSearchResultsRequest(params));\r\n    dispatch(addLoader('getAdvancedSearchResults'));\r\n    const httpParams = {\r\n      insuredName: encodeURIComponent(insuredName?.name),\r\n      year: yearOfAcc,\r\n      processType: selectedProcess?.split(' ').join(''),\r\n      ...(depart?.name && { departmentName: encodeURIComponent(depart.name) }),\r\n    };\r\n\r\n    return utils.api\r\n      .get({\r\n        token: auth.accessToken,\r\n        endpoint: endpoint.ppService,\r\n        path: 'data/advance/search/risk/reference',\r\n        params: httpParams,\r\n      })\r\n      .then((response) => utils.api.handleResponse(response))\r\n      .then((json) => {\r\n        if (json && json.status === 'OK' && json.data) {\r\n          // success\r\n          dispatch(getAdvancedSearchResultsSuccess(json.data));\r\n          return json.data;\r\n        } else {\r\n          // fail\r\n          return Promise.reject({\r\n            message: `API data format error${json.status ? ` (${json.status})` : ''}`,\r\n            ...(json && { ...json }),\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        utils.api.handleError(err, { ...defaultError, message: 'API fetch error (processingInstructions.getAdvancedSearchResults)' });\r\n        utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n        dispatch(getAdvancedSearchResultsFailure(err));\r\n        return err.json.data;\r\n      })\r\n      .finally(() => {\r\n        dispatch(removeLoader('getAdvancedSearchResults'));\r\n      });\r\n  };\r\n\r\nexport const getAdvancedSearchResultsRequest = (payload) => {\r\n  return {\r\n    type: 'PROCESSING_INSTRUCTIONS_GET_ADVANCED_SEARCH_RESULTS_REQUEST',\r\n    payload,\r\n  };\r\n};\r\n\r\nexport const getAdvancedSearchResultsSuccess = (responseData) => {\r\n  return {\r\n    type: 'PROCESSING_INSTRUCTIONS_GET_ADVANCED_SEARCH_RESULTS_SUCCESS',\r\n    payload: responseData,\r\n  };\r\n};\r\n\r\nexport const getAdvancedSearchResultsFailure = (error) => {\r\n  return {\r\n    type: 'PROCESSING_INSTRUCTIONS_GET_ADVANCED_SEARCH_RESULTS_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}