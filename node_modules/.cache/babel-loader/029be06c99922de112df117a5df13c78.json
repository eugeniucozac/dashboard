{"ast":null,"code":"import \"core-js/modules/es.array.find\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport get from 'lodash/get'; // app\n\nimport { addLoader, authLogout, enqueueNotification, hideModal, removeLoader } from 'stores';\nimport * as utils from 'utils';\nimport * as constants from 'consts';\nexport var ntuPlacement = function ntuPlacement(placement) {\n  var calendarView = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint;\n\n    var defaultError = {\n      file: 'stores/placement.actions.ntu',\n      message: 'Data missing for PATCH request'\n    };\n    var state = getState();\n    var statusPlacement = get(state, 'referenceData.statuses.placement', []);\n    var statusPlacementNtuId = utils.referenceData.status.getIdByCode(statusPlacement, constants.STATUS_PLACEMENT_NTU);\n    var statusNtu = statusPlacement.find(function (status) {\n      return status.id === statusPlacementNtuId;\n    });\n    dispatch(ntuPlacementRequest(placement));\n    dispatch(addLoader('ntuPlacement'));\n\n    if (!placement || !placement.id || !statusNtu) {\n      dispatch(ntuPlacementFailure(defaultError));\n      dispatch(enqueueNotification('notification.ntuPlacement.fail', 'error'));\n      dispatch(removeLoader('ntuPlacement'));\n      return;\n    }\n\n    return utils.api.patch({\n      token: auth.accessToken,\n      endpoint: endpoint.edge,\n      path: \"api/placement/\".concat(placement.id),\n      data: {\n        statusId: get(statusNtu, 'id')\n      }\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleData(json);\n    }).then(function (data) {\n      dispatch(ntuPlacementSuccess(data, calendarView));\n      dispatch(enqueueNotification('notification.ntuPlacement.success', 'success'));\n      dispatch(removeLoader('ntuPlacement'));\n    })[\"catch\"](function (err) {\n      var errorParams = _objectSpread(_objectSpread({}, defaultError), {}, {\n        message: 'API patch error (placement.ntu)'\n      });\n\n      utils.api.handleError(err, errorParams);\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      dispatch(ntuPlacementFailure(err));\n      dispatch(enqueueNotification('notification.ntuPlacement.fail', 'error'));\n      dispatch(hideModal());\n      dispatch(removeLoader('ntuPlacement'));\n      return err;\n    });\n  };\n};\nexport var ntuPlacementRequest = function ntuPlacementRequest(data) {\n  return {\n    type: 'PLACEMENT_NTU_REQUEST',\n    payload: data\n  };\n};\nexport var ntuPlacementSuccess = function ntuPlacementSuccess(data, calendarView) {\n  return {\n    type: calendarView ? 'PLACEMENT_NTU_CALENDAR_SUCCESS' : 'PLACEMENT_NTU_SUCCESS',\n    payload: data\n  };\n};\nexport var ntuPlacementFailure = function ntuPlacementFailure(error) {\n  return {\n    type: 'PLACEMENT_NTU_FAILURE',\n    payload: error\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/placement/placement.actions.ntu.js"],"names":["get","addLoader","authLogout","enqueueNotification","hideModal","removeLoader","utils","constants","ntuPlacement","placement","calendarView","dispatch","getState","auth","user","endpoint","config","vars","defaultError","file","message","state","statusPlacement","statusPlacementNtuId","referenceData","status","getIdByCode","STATUS_PLACEMENT_NTU","statusNtu","find","id","ntuPlacementRequest","ntuPlacementFailure","api","patch","token","accessToken","edge","path","data","statusId","then","response","handleResponse","json","handleData","ntuPlacementSuccess","err","errorParams","handleError","handleUnauthorized","type","payload","error"],"mappings":"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","sourcesContent":["import get from 'lodash/get';\r\n\r\n// app\r\nimport { addLoader, authLogout, enqueueNotification, hideModal, removeLoader } from 'stores';\r\nimport * as utils from 'utils';\r\nimport * as constants from 'consts';\r\n\r\nexport const ntuPlacement =\r\n  (placement, calendarView = false) =>\r\n  (dispatch, getState) => {\r\n    // prettier-ignore\r\n    const { user: { auth }, config: { vars: { endpoint }}} = getState();\r\n\r\n    const defaultError = {\r\n      file: 'stores/placement.actions.ntu',\r\n      message: 'Data missing for PATCH request',\r\n    };\r\n\r\n    const state = getState();\r\n    const statusPlacement = get(state, 'referenceData.statuses.placement', []);\r\n    const statusPlacementNtuId = utils.referenceData.status.getIdByCode(statusPlacement, constants.STATUS_PLACEMENT_NTU);\r\n    const statusNtu = statusPlacement.find((status) => status.id === statusPlacementNtuId);\r\n\r\n    dispatch(ntuPlacementRequest(placement));\r\n    dispatch(addLoader('ntuPlacement'));\r\n\r\n    if (!placement || !placement.id || !statusNtu) {\r\n      dispatch(ntuPlacementFailure(defaultError));\r\n      dispatch(enqueueNotification('notification.ntuPlacement.fail', 'error'));\r\n      dispatch(removeLoader('ntuPlacement'));\r\n      return;\r\n    }\r\n\r\n    return utils.api\r\n      .patch({\r\n        token: auth.accessToken,\r\n        endpoint: endpoint.edge,\r\n        path: `api/placement/${placement.id}`,\r\n        data: {\r\n          statusId: get(statusNtu, 'id'),\r\n        },\r\n      })\r\n      .then((response) => utils.api.handleResponse(response))\r\n      .then((json) => utils.api.handleData(json))\r\n      .then((data) => {\r\n        dispatch(ntuPlacementSuccess(data, calendarView));\r\n        dispatch(enqueueNotification('notification.ntuPlacement.success', 'success'));\r\n        dispatch(removeLoader('ntuPlacement'));\r\n      })\r\n      .catch((err) => {\r\n        const errorParams = {\r\n          ...defaultError,\r\n          message: 'API patch error (placement.ntu)',\r\n        };\r\n\r\n        utils.api.handleError(err, errorParams);\r\n        utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n        dispatch(ntuPlacementFailure(err));\r\n        dispatch(enqueueNotification('notification.ntuPlacement.fail', 'error'));\r\n        dispatch(hideModal());\r\n        dispatch(removeLoader('ntuPlacement'));\r\n        return err;\r\n      });\r\n  };\r\n\r\nexport const ntuPlacementRequest = (data) => {\r\n  return {\r\n    type: 'PLACEMENT_NTU_REQUEST',\r\n    payload: data,\r\n  };\r\n};\r\n\r\nexport const ntuPlacementSuccess = (data, calendarView) => {\r\n  return {\r\n    type: calendarView ? 'PLACEMENT_NTU_CALENDAR_SUCCESS' : 'PLACEMENT_NTU_SUCCESS',\r\n    payload: data,\r\n  };\r\n};\r\n\r\nexport const ntuPlacementFailure = (error) => {\r\n  return {\r\n    type: 'PLACEMENT_NTU_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}