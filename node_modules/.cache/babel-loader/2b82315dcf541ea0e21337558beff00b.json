{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\ProcessingInstructionsSteps\\\\ProcessingInstructionsSteps.view.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types'; //app\n\nimport styles from './ProcessingInstructionsSteps.styles';\nimport ProcessingInstructionsAuthorisation from '../../modules/ProcessingInstructionsAuthorisation/ProcessingInstructionsAuthorisation';\nimport { HorizontalLinearStepper, Layout, SectionHeader, Translate, Status, Warning } from 'components';\nimport { ProcessingInstructionsRiskRefs, ProcessingInstructionsChecklist, ProcessingInstructionsDetails, ProcessingInstructionsEndorseFaBorder } from 'modules';\nimport * as constants from 'consts';\nimport * as utils from 'utils'; // mui\n\nimport { makeStyles } from '@material-ui/core';\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nProcessingInstructionsStepsView.propTypes = {\n  instruction: PropTypes.object.isRequired,\n  urlParams: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    step: PropTypes.oneOf(['add-risk-reference', 'checklist', 'processing-instruction', 'authorisations']),\n    tab: PropTypes.oneOf(['general', 'pre-placing', 'mrc', 'other-details', 'risk-references', 'processing-instruction', 'documents'])\n  }).isRequired,\n  type: PropTypes.oneOf(['closing', 'endorsement', 'fdo', 'bordereau', 'feeAmendment']).isRequired,\n  steps: PropTypes.arrayOf(PropTypes.shape({\n    slug: PropTypes.string.isRequired,\n    label: PropTypes.string.isRequired\n  })).isRequired,\n  stepsMap: PropTypes.object.isRequired,\n  activeStep: PropTypes.number.isRequired,\n  departmentList: PropTypes.array.isRequired,\n  handlers: PropTypes.shape({\n    back: PropTypes.func.isRequired,\n    next: PropTypes.func.isRequired\n  })\n};\nexport function ProcessingInstructionsStepsView(_ref) {\n  _s();\n\n  var _this = this;\n\n  var _ref$instruction = _ref.instruction,\n      instruction = _ref$instruction === void 0 ? {} : _ref$instruction,\n      urlParams = _ref.urlParams,\n      type = _ref.type,\n      steps = _ref.steps,\n      stepsMap = _ref.stepsMap,\n      activeStep = _ref.activeStep,\n      departmentList = _ref.departmentList,\n      handlers = _ref.handlers;\n  var classes = makeStyles(styles, {\n    name: 'ProcessingInstructionsSteps'\n  })();\n  var childRef = useRef(null);\n  var isEndorsement = utils.processingInstructions.isEndorsement(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isClosing = utils.processingInstructions.isClosing(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isFdo = utils.processingInstructions.isFdo(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isBordereau = utils.processingInstructions.isBordereau(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isFeeAndAmendment = utils.processingInstructions.isFeeAndAmendment(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isReopened = utils.processingInstructions.status.isReopened(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isSubmittedProcessing = utils.processingInstructions.status.isSubmittedProcessing(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var instructionTypeLabel = (instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId) ? ' - ' + utils.string.t(\"processingInstructions.type.\".concat(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId)) : '';\n\n  var getStep = function getStep(direction, step) {\n    var plusOrMinus = direction === 'back' ? -1 : 1;\n    var stepsArray = Object.keys(stepsMap[type]);\n    var currentStepIndex = stepsArray.indexOf(step);\n    var newStep = Object.entries(stepsMap[type]).find(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          key = _ref3[0],\n          value = _ref3[1];\n\n      return value === currentStepIndex + plusOrMinus;\n    });\n    return newStep && newStep[0];\n  };\n\n  var stepContent = function stepContent(index) {\n    switch (index) {\n      case 0:\n        {\n          return departmentList.length !== 0 && /*#__PURE__*/_jsxDEV(ProcessingInstructionsRiskRefs, {\n            instruction: instruction,\n            handlers: {\n              next: function next() {\n                return handlers.next(getStep('next', 'add-risk-reference'));\n              }\n            },\n            isStatusSubmittedProcessing: isSubmittedProcessing,\n            isStatusReopened: isReopened\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, _this);\n        }\n\n      case 1:\n        {\n          return isClosing || isFdo ? /*#__PURE__*/_jsxDEV(ProcessingInstructionsChecklist, {\n            instruction: instruction,\n            handlers: {\n              back: function back() {\n                return handlers.back(getStep('back', 'checklist'));\n              },\n              next: function next() {\n                return handlers.next(getStep('next', 'checklist'));\n              }\n            },\n            childRef: childRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }, _this) : isEndorsement || isBordereau || isFeeAndAmendment ? /*#__PURE__*/_jsxDEV(ProcessingInstructionsEndorseFaBorder, {\n            instruction: instruction,\n            handlers: {\n              back: function back() {\n                return handlers.back(getStep('back', 'processing-instruction'));\n              }\n            },\n            childRef: childRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 11\n          }, _this) : null;\n        }\n\n      case 2:\n        return /*#__PURE__*/_jsxDEV(ProcessingInstructionsDetails, {\n          instruction: instruction,\n          handlers: {\n            back: function back() {\n              return handlers.back(getStep('back', 'processing-instruction'));\n            },\n            next: function next() {\n              return handlers.next(getStep('next', 'processing-instruction'));\n            }\n          },\n          childRef: childRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, _this);\n\n      case 3:\n        return /*#__PURE__*/_jsxDEV(ProcessingInstructionsAuthorisation, {\n          instruction: instruction,\n          handlers: {\n            back: function back() {\n              return handlers.back(getStep('back', 'authorisations'));\n            }\n          },\n          childRef: childRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, _this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(Warning, {\n          type: \"error\",\n          border: true,\n          icon: true,\n          text: 'An error occurred with the step index for the Processing Instruction'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 16\n        }, _this);\n    }\n  };\n\n  var getStatus = function getStatus(statusId) {\n    if (utils.processingInstructions.status.isDraft(statusId)) {\n      return {\n        type: 'info',\n        id: constants.PI_STATUS_DRAFT\n      };\n    } else if (utils.processingInstructions.status.isRejectedDraft(statusId)) {\n      return {\n        type: 'error',\n        id: constants.PI_STATUS_REJECTED_DRAFT\n      };\n    } else if (utils.processingInstructions.status.isSubmittedAuthorisedSignatory(statusId)) {\n      return {\n        type: 'alert',\n        id: constants.PI_STATUS_SUBMITTED_AUTHORISED_SIGNATORY\n      };\n    } else if (utils.processingInstructions.status.isSubmittedProcessing(statusId)) {\n      return {\n        type: 'success',\n        id: constants.PI_STATUS_SUBMITTED_PROCESSING\n      };\n    } else if (utils.processingInstructions.status.isReopened(statusId)) {\n      return {\n        type: 'reopen',\n        id: constants.PI_STATUS_DRAFT_POST_SUBMISSION\n      };\n    } else {\n      return {\n        type: '',\n        name: 'status.other'\n      };\n    }\n  };\n\n  var status = getStatus(instruction.statusId);\n  var titleKey = instruction ? 'processingInstructions.edit.title' : 'processingInstructions.new.title';\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    testid: \"new-processing-instructions\",\n    extensiveScreen: true,\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      main: true,\n      padding: true,\n      children: [/*#__PURE__*/_jsxDEV(SectionHeader, {\n        title: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\".concat(utils.string.t(titleKey), \" (\").concat(constants.PI_PREFIX).concat(urlParams.id, \") \").concat(instructionTypeLabel), /*#__PURE__*/_jsxDEV(Status, {\n            size: \"md\",\n            text: /*#__PURE__*/_jsxDEV(Translate, {\n              label: \"processingInstructions.status.\".concat(status.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 23\n            }, this),\n            status: status.type,\n            nestedClasses: {\n              root: classes.status\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this),\n        icon: PlaylistAddCheckIcon,\n        testid: \"new-processing-instructions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(HorizontalLinearStepper, {\n        steps: steps,\n        stepContent: stepContent,\n        activeStep: activeStep,\n        showStepConnector: true,\n        nestedClasses: {\n          stepper: classes.stepper\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProcessingInstructionsStepsView, \"py5+L5G9wlGqN6fxkH3UuBRHKgc=\");\n\n_c = ProcessingInstructionsStepsView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProcessingInstructionsStepsView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/ProcessingInstructionsSteps/ProcessingInstructionsSteps.view.js"],"names":["React","useRef","PropTypes","styles","ProcessingInstructionsAuthorisation","HorizontalLinearStepper","Layout","SectionHeader","Translate","Status","Warning","ProcessingInstructionsRiskRefs","ProcessingInstructionsChecklist","ProcessingInstructionsDetails","ProcessingInstructionsEndorseFaBorder","constants","utils","makeStyles","PlaylistAddCheckIcon","ProcessingInstructionsStepsView","propTypes","instruction","object","isRequired","urlParams","shape","id","number","step","oneOf","tab","type","steps","arrayOf","slug","string","label","stepsMap","activeStep","departmentList","array","handlers","back","func","next","classes","name","childRef","isEndorsement","processingInstructions","processTypeId","isClosing","isFdo","isBordereau","isFeeAndAmendment","isReopened","status","statusId","isSubmittedProcessing","instructionTypeLabel","t","getStep","direction","plusOrMinus","stepsArray","Object","keys","currentStepIndex","indexOf","newStep","entries","find","key","value","stepContent","index","length","getStatus","isDraft","PI_STATUS_DRAFT","isRejectedDraft","PI_STATUS_REJECTED_DRAFT","isSubmittedAuthorisedSignatory","PI_STATUS_SUBMITTED_AUTHORISED_SIGNATORY","PI_STATUS_SUBMITTED_PROCESSING","PI_STATUS_DRAFT_POST_SUBMISSION","titleKey","PI_PREFIX","root","stepper"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\n//app\r\nimport styles from './ProcessingInstructionsSteps.styles';\r\nimport ProcessingInstructionsAuthorisation from '../../modules/ProcessingInstructionsAuthorisation/ProcessingInstructionsAuthorisation';\r\nimport { HorizontalLinearStepper, Layout, SectionHeader, Translate, Status, Warning } from 'components';\r\nimport {\r\n  ProcessingInstructionsRiskRefs,\r\n  ProcessingInstructionsChecklist,\r\n  ProcessingInstructionsDetails,\r\n  ProcessingInstructionsEndorseFaBorder,\r\n} from 'modules';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport { makeStyles } from '@material-ui/core';\r\nimport PlaylistAddCheckIcon from '@material-ui/icons/PlaylistAddCheck';\r\n\r\nProcessingInstructionsStepsView.propTypes = {\r\n  instruction: PropTypes.object.isRequired,\r\n  urlParams: PropTypes.shape({\r\n    id: PropTypes.number.isRequired,\r\n    step: PropTypes.oneOf(['add-risk-reference', 'checklist', 'processing-instruction', 'authorisations']),\r\n    tab: PropTypes.oneOf(['general', 'pre-placing', 'mrc', 'other-details', 'risk-references', 'processing-instruction', 'documents']),\r\n  }).isRequired,\r\n  type: PropTypes.oneOf(['closing', 'endorsement', 'fdo', 'bordereau', 'feeAmendment']).isRequired,\r\n  steps: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      slug: PropTypes.string.isRequired,\r\n      label: PropTypes.string.isRequired,\r\n    })\r\n  ).isRequired,\r\n  stepsMap: PropTypes.object.isRequired,\r\n  activeStep: PropTypes.number.isRequired,\r\n  departmentList: PropTypes.array.isRequired,\r\n  handlers: PropTypes.shape({\r\n    back: PropTypes.func.isRequired,\r\n    next: PropTypes.func.isRequired,\r\n  }),\r\n};\r\n\r\nexport function ProcessingInstructionsStepsView({\r\n  instruction = {},\r\n  urlParams,\r\n  type,\r\n  steps,\r\n  stepsMap,\r\n  activeStep,\r\n  departmentList,\r\n  handlers,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'ProcessingInstructionsSteps' })();\r\n  const childRef = useRef(null);\r\n\r\n  const isEndorsement = utils.processingInstructions.isEndorsement(instruction?.processTypeId);\r\n  const isClosing = utils.processingInstructions.isClosing(instruction?.processTypeId);\r\n  const isFdo = utils.processingInstructions.isFdo(instruction?.processTypeId);\r\n  const isBordereau = utils.processingInstructions.isBordereau(instruction?.processTypeId);\r\n  const isFeeAndAmendment = utils.processingInstructions.isFeeAndAmendment(instruction?.processTypeId);\r\n  const isReopened = utils.processingInstructions.status.isReopened(instruction?.statusId);\r\n  const isSubmittedProcessing = utils.processingInstructions.status.isSubmittedProcessing(instruction?.statusId);\r\n\r\n  const instructionTypeLabel = instruction?.processTypeId\r\n    ? ' - ' + utils.string.t(`processingInstructions.type.${instruction?.processTypeId}`)\r\n    : '';\r\n\r\n  const getStep = (direction, step) => {\r\n    const plusOrMinus = direction === 'back' ? -1 : 1;\r\n    const stepsArray = Object.keys(stepsMap[type]);\r\n    const currentStepIndex = stepsArray.indexOf(step);\r\n    const newStep = Object.entries(stepsMap[type]).find(([key, value]) => value === currentStepIndex + plusOrMinus);\r\n\r\n    return newStep && newStep[0];\r\n  };\r\n\r\n  const stepContent = (index) => {\r\n    switch (index) {\r\n      case 0: {\r\n        return (\r\n          departmentList.length !== 0 && (\r\n            <ProcessingInstructionsRiskRefs\r\n              instruction={instruction}\r\n              handlers={{\r\n                next: () => handlers.next(getStep('next', 'add-risk-reference')),\r\n              }}\r\n              isStatusSubmittedProcessing={isSubmittedProcessing}\r\n              isStatusReopened={isReopened}\r\n            />\r\n          )\r\n        );\r\n      }\r\n      case 1: {\r\n        return isClosing || isFdo ? (\r\n          <ProcessingInstructionsChecklist\r\n            instruction={instruction}\r\n            handlers={{\r\n              back: () => handlers.back(getStep('back', 'checklist')),\r\n              next: () => handlers.next(getStep('next', 'checklist')),\r\n            }}\r\n            childRef={childRef}\r\n          />\r\n        ) : isEndorsement || isBordereau || isFeeAndAmendment ? (\r\n          <ProcessingInstructionsEndorseFaBorder\r\n            instruction={instruction}\r\n            handlers={{\r\n              back: () => handlers.back(getStep('back', 'processing-instruction')),\r\n            }}\r\n            childRef={childRef}\r\n          />\r\n        ) : null;\r\n      }\r\n      case 2:\r\n        return (\r\n          <ProcessingInstructionsDetails\r\n            instruction={instruction}\r\n            handlers={{\r\n              back: () => handlers.back(getStep('back', 'processing-instruction')),\r\n              next: () => handlers.next(getStep('next', 'processing-instruction')),\r\n            }}\r\n            childRef={childRef}\r\n          />\r\n        );\r\n      case 3:\r\n        return (\r\n          <ProcessingInstructionsAuthorisation\r\n            instruction={instruction}\r\n            handlers={{\r\n              back: () => handlers.back(getStep('back', 'authorisations')),\r\n            }}\r\n            childRef={childRef}\r\n          />\r\n        );\r\n      default:\r\n        return <Warning type=\"error\" border icon text={'An error occurred with the step index for the Processing Instruction'} />;\r\n    }\r\n  };\r\n\r\n  const getStatus = (statusId) => {\r\n    if (utils.processingInstructions.status.isDraft(statusId)) {\r\n      return { type: 'info', id: constants.PI_STATUS_DRAFT };\r\n    } else if (utils.processingInstructions.status.isRejectedDraft(statusId)) {\r\n      return { type: 'error', id: constants.PI_STATUS_REJECTED_DRAFT };\r\n    } else if (utils.processingInstructions.status.isSubmittedAuthorisedSignatory(statusId)) {\r\n      return { type: 'alert', id: constants.PI_STATUS_SUBMITTED_AUTHORISED_SIGNATORY };\r\n    } else if (utils.processingInstructions.status.isSubmittedProcessing(statusId)) {\r\n      return { type: 'success', id: constants.PI_STATUS_SUBMITTED_PROCESSING };\r\n    } else if (utils.processingInstructions.status.isReopened(statusId)) {\r\n      return { type: 'reopen', id: constants.PI_STATUS_DRAFT_POST_SUBMISSION };\r\n    } else {\r\n      return { type: '', name: 'status.other' };\r\n    }\r\n  };\r\n\r\n  const status = getStatus(instruction.statusId);\r\n  const titleKey = instruction ? 'processingInstructions.edit.title' : 'processingInstructions.new.title';\r\n\r\n  return (\r\n    <Layout testid=\"new-processing-instructions\" extensiveScreen>\r\n      <Layout main padding>\r\n        <SectionHeader\r\n          title={\r\n            <span>\r\n              {`${utils.string.t(titleKey)} (${constants.PI_PREFIX}${urlParams.id}) ${instructionTypeLabel}`}\r\n              <Status\r\n                size=\"md\"\r\n                text={<Translate label={`processingInstructions.status.${status.id}`} />}\r\n                status={status.type}\r\n                nestedClasses={{ root: classes.status }}\r\n              />\r\n            </span>\r\n          }\r\n          icon={PlaylistAddCheckIcon}\r\n          testid=\"new-processing-instructions\"\r\n        />\r\n        <HorizontalLinearStepper\r\n          steps={steps}\r\n          stepContent={stepContent}\r\n          activeStep={activeStep}\r\n          showStepConnector\r\n          nestedClasses={{ stepper: classes.stepper }}\r\n        />\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}