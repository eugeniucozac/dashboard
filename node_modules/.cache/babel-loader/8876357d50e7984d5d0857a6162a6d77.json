{"ast":null,"code":"import \"core-js/modules/es.array.concat\";\nimport _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\MudmapLayer\\\\MudmapLayer.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clickDrag from 'react-clickdrag';\nimport chroma from 'chroma-js';\nimport round from 'lodash/round';\nimport isString from 'lodash/isString'; // app\n\nimport * as utils from 'utils'; // mui\n\nimport { Typography } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nMudmapLayer.propTypes = {\n  layer: PropTypes.object,\n  currency: PropTypes.string,\n  color: PropTypes.string,\n  maxAmount: PropTypes.number,\n  maxPercentage: PropTypes.number,\n  type: PropTypes.oneOf(['written', 'signed']),\n  isDragging: PropTypes.bool,\n  isPlaceholder: PropTypes.bool,\n  zIndex: PropTypes.number,\n  startDragging: PropTypes.func,\n  setDragging: PropTypes.func,\n  stopDragging: PropTypes.func,\n  dataDrag: PropTypes.object // from react-clickdrag\n\n};\nMudmapLayer.defaultProps = {\n  color: '#e3e3e3',\n  type: 'written'\n};\nexport function MudmapLayer(_ref) {\n  var _title, _subtitle, _percentage, _premium;\n\n  var layer = _ref.layer,\n      currency = _ref.currency,\n      color = _ref.color,\n      maxAmount = _ref.maxAmount,\n      maxPercentage = _ref.maxPercentage,\n      type = _ref.type,\n      isDragging = _ref.isDragging,\n      isPlaceholder = _ref.isPlaceholder,\n      zIndex = _ref.zIndex,\n      startDragging = _ref.startDragging,\n      setDragging = _ref.setDragging,\n      stopDragging = _ref.stopDragging,\n      dataDrag = _ref.dataDrag;\n  var isWritten = type === 'written';\n  var isSigned = type === 'signed';\n  var valuePercentage = isWritten ? layer.written : isSigned ? layer.signed : 0;\n  var top = round((maxAmount - (layer.amount + layer.xs)) / maxAmount * 100, 4);\n  var left = round(layer.left / maxPercentage * 100, 4);\n  var width = round(valuePercentage / maxPercentage * 100, 4);\n  var height = round(layer.amount / maxAmount * 100, 4); // using inline styles as this seems to offer better performance than\n  // material-UI generated styles updating hundreds of times per second while dragging\n\n  var style = {\n    root: {\n      position: 'absolute',\n      textAlign: 'center',\n      backgroundColor: color,\n      border: \"4px solid \".concat(chroma(chroma(color).darken(0.5))),\n      overflow: 'hidden',\n      cursor: 'pointer',\n      width: \"\".concat(width, \"%\"),\n      height: \"\".concat(height, \"%\"),\n      top: \"\".concat(top, \"%\"),\n      left: \"calc(\".concat(left, \"% + \").concat(dataDrag.isMouseDown ? dataDrag.moveDeltaX || 0 : 0, \"px)\"),\n      padding: '2px 8px',\n      zIndex: dataDrag.isMouseDown ? zIndex : 1,\n      transition: dataDrag.isMouseDown ? 'width 300ms ease, height 350ms ease' : 'all 350ms ease',\n      opacity: isDragging ? 0.9 : isPlaceholder ? 0.25 : 1,\n      filter: isPlaceholder ? 'blur(1px)' : 'none'\n    },\n    title: (_title = {\n      fontSize: 12\n    }, _defineProperty(_title, \"fontSize\", 'min(max(8px, 1.3vw), 13px)'), _defineProperty(_title, \"fontWeight\", 600), _defineProperty(_title, \"lineHeight\", 1.25), _defineProperty(_title, \"marginTop\", 4), _defineProperty(_title, \"marginBottom\", 4), _defineProperty(_title, \"userSelect\", 'none'), _defineProperty(_title, \"color\", utils.color.contrast(color)), _title),\n    subtitle: (_subtitle = {\n      fontSize: 10\n    }, _defineProperty(_subtitle, \"fontSize\", 'min(max(8px, 1.1vw), 11px)'), _defineProperty(_subtitle, \"fontWeight\", 400), _defineProperty(_subtitle, \"lineHeight\", 1.1), _defineProperty(_subtitle, \"marginTop\", 0), _defineProperty(_subtitle, \"marginBottom\", 6), _defineProperty(_subtitle, \"opacity\", 0.8), _defineProperty(_subtitle, \"userSelect\", 'none'), _defineProperty(_subtitle, \"color\", utils.color.contrast(color)), _subtitle),\n    percentage: (_percentage = {\n      fontSize: 9\n    }, _defineProperty(_percentage, \"fontSize\", 'min(max(7px, 1vw), 10px)'), _defineProperty(_percentage, \"marginBottom\", -1), _defineProperty(_percentage, \"opacity\", 0.7), _defineProperty(_percentage, \"userSelect\", 'none'), _defineProperty(_percentage, \"color\", utils.color.contrast(color)), _percentage),\n    premium: (_premium = {\n      fontSize: 8\n    }, _defineProperty(_premium, \"fontSize\", 'min(max(6px, 0.9vw), 9px)'), _defineProperty(_premium, \"opacity\", 0.7), _defineProperty(_premium, \"userSelect\", 'none'), _defineProperty(_premium, \"color\", utils.color.contrast(color)), _premium)\n  };\n\n  if (dataDrag.isMouseDown) {\n    setDragging(layer.id, dataDrag.moveDeltaX);\n  }\n\n  var percentage = utils.string.t('format.percent', {\n    value: {\n      number: valuePercentage * 100\n    }\n  });\n  var premium = isString(layer.premium) ? layer.premium : utils.string.t('format.currency', {\n    value: {\n      number: layer.premium,\n      currency: currency\n    }\n  });\n  var amount = utils.string.t('format.currency', {\n    value: {\n      number: layer.amount,\n      currency: currency\n    }\n  });\n  var excess = utils.string.t('format.currency', {\n    value: {\n      number: layer.xs,\n      currency: currency\n    }\n  });\n  var leads = layer && layer.leads || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onMouseUp: function onMouseUp() {\n      return stopDragging();\n    },\n    onMouseDown: function onMouseDown() {\n      return startDragging(layer.id);\n    },\n    style: style.root,\n    \"data-testid\": \"layer-\".concat(layer.id),\n    title: (layer.market ? \"\".concat(layer.market).concat(utils.generic.isValidArray(layer.leads, true) ? '\\n\\n' : '') : '') + leads.map(function (lead) {\n      return \" \\u2022 \".concat(lead.name).concat(lead.notes ? \": \".concat(lead.notes) : '');\n    }).join('\\n') + \"\\n\\n\".concat(utils.string.t(\"placement.generic.\".concat(type)), \": \").concat(percentage) + \"\\n\".concat(utils.string.t('placement.generic.premium'), \": \").concat(premium) + \"\\n\".concat(utils.string.t('placement.generic.amount'), \": \").concat(amount) + \"\\n\".concat(utils.string.t('placement.generic.excess'), \": \").concat(excess),\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"subtitle1\",\n      style: style.title,\n      children: layer.market\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"subtitle2\",\n      style: style.subtitle,\n      children: leads.map(function (lead) {\n        return lead.name;\n      }).join(', ')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body1\",\n      style: style.percentage,\n      children: percentage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      style: style.premium,\n      children: premium\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n_c = MudmapLayer;\nMudmapLayer.displayName = \"MudmapLayer\";\nexport default _c2 = clickDrag(MudmapLayer, {\n  touch: true\n});\nMudmapLayer.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"MudmapLayer\",\n  \"props\": {\n    \"color\": {\n      \"defaultValue\": {\n        \"value\": \"'#e3e3e3'\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"type\": {\n      \"defaultValue\": {\n        \"value\": \"'written'\",\n        \"computed\": false\n      },\n      \"type\": {\n        \"name\": \"enum\",\n        \"value\": [{\n          \"value\": \"'written'\",\n          \"computed\": false\n        }, {\n          \"value\": \"'signed'\",\n          \"computed\": false\n        }]\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"layer\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"currency\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"maxAmount\": {\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"maxPercentage\": {\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"isDragging\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"isPlaceholder\": {\n      \"type\": {\n        \"name\": \"bool\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"zIndex\": {\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"startDragging\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"setDragging\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"stopDragging\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"dataDrag\": {\n      \"type\": {\n        \"name\": \"object\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    }\n  }\n};\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\components\\\\MudmapLayer\\\\MudmapLayer.js\"] = {\n    name: \"MudmapLayer\",\n    docgenInfo: MudmapLayer.__docgenInfo,\n    path: \"src\\\\components\\\\MudmapLayer\\\\MudmapLayer.js\"\n  };\n}\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MudmapLayer\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/MudmapLayer/MudmapLayer.js"],"names":["React","PropTypes","clickDrag","chroma","round","isString","utils","Typography","MudmapLayer","propTypes","layer","object","currency","string","color","maxAmount","number","maxPercentage","type","oneOf","isDragging","bool","isPlaceholder","zIndex","startDragging","func","setDragging","stopDragging","dataDrag","defaultProps","isWritten","isSigned","valuePercentage","written","signed","top","amount","xs","left","width","height","style","root","position","textAlign","backgroundColor","border","darken","overflow","cursor","isMouseDown","moveDeltaX","padding","transition","opacity","filter","title","fontSize","contrast","subtitle","percentage","premium","id","t","value","excess","leads","market","generic","isValidArray","map","lead","name","notes","join","touch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clickDrag from 'react-clickdrag';\r\nimport chroma from 'chroma-js';\r\nimport round from 'lodash/round';\r\nimport isString from 'lodash/isString';\r\n\r\n// app\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport { Typography } from '@material-ui/core';\r\n\r\nMudmapLayer.propTypes = {\r\n  layer: PropTypes.object,\r\n  currency: PropTypes.string,\r\n  color: PropTypes.string,\r\n  maxAmount: PropTypes.number,\r\n  maxPercentage: PropTypes.number,\r\n  type: PropTypes.oneOf(['written', 'signed']),\r\n  isDragging: PropTypes.bool,\r\n  isPlaceholder: PropTypes.bool,\r\n  zIndex: PropTypes.number,\r\n  startDragging: PropTypes.func,\r\n  setDragging: PropTypes.func,\r\n  stopDragging: PropTypes.func,\r\n  dataDrag: PropTypes.object, // from react-clickdrag\r\n};\r\n\r\nMudmapLayer.defaultProps = {\r\n  color: '#e3e3e3',\r\n  type: 'written',\r\n};\r\n\r\nexport function MudmapLayer({\r\n  layer,\r\n  currency,\r\n  color,\r\n  maxAmount,\r\n  maxPercentage,\r\n  type,\r\n  isDragging,\r\n  isPlaceholder,\r\n  zIndex,\r\n  startDragging,\r\n  setDragging,\r\n  stopDragging,\r\n  dataDrag,\r\n}) {\r\n  const isWritten = type === 'written';\r\n  const isSigned = type === 'signed';\r\n  const valuePercentage = isWritten ? layer.written : isSigned ? layer.signed : 0;\r\n  const top = round(((maxAmount - (layer.amount + layer.xs)) / maxAmount) * 100, 4);\r\n  const left = round((layer.left / maxPercentage) * 100, 4);\r\n  const width = round((valuePercentage / maxPercentage) * 100, 4);\r\n  const height = round((layer.amount / maxAmount) * 100, 4);\r\n\r\n  // using inline styles as this seems to offer better performance than\r\n  // material-UI generated styles updating hundreds of times per second while dragging\r\n  const style = {\r\n    root: {\r\n      position: 'absolute',\r\n      textAlign: 'center',\r\n      backgroundColor: color,\r\n      border: `4px solid ${chroma(chroma(color).darken(0.5))}`,\r\n      overflow: 'hidden',\r\n      cursor: 'pointer',\r\n      width: `${width}%`,\r\n      height: `${height}%`,\r\n      top: `${top}%`,\r\n      left: `calc(${left}% + ${dataDrag.isMouseDown ? dataDrag.moveDeltaX || 0 : 0}px)`,\r\n      padding: '2px 8px',\r\n      zIndex: dataDrag.isMouseDown ? zIndex : 1,\r\n      transition: dataDrag.isMouseDown ? 'width 300ms ease, height 350ms ease' : 'all 350ms ease',\r\n      opacity: isDragging ? 0.9 : isPlaceholder ? 0.25 : 1,\r\n      filter: isPlaceholder ? 'blur(1px)' : 'none',\r\n    },\r\n    title: {\r\n      fontSize: 12,\r\n      fontSize: 'min(max(8px, 1.3vw), 13px)', // eslint-disable-line no-dupe-keys\r\n      fontWeight: 600,\r\n      lineHeight: 1.25,\r\n      marginTop: 4,\r\n      marginBottom: 4,\r\n      userSelect: 'none',\r\n      color: utils.color.contrast(color),\r\n    },\r\n    subtitle: {\r\n      fontSize: 10,\r\n      fontSize: 'min(max(8px, 1.1vw), 11px)', // eslint-disable-line no-dupe-keys\r\n      fontWeight: 400,\r\n      lineHeight: 1.1,\r\n      marginTop: 0,\r\n      marginBottom: 6,\r\n      opacity: 0.8,\r\n      userSelect: 'none',\r\n      color: utils.color.contrast(color),\r\n    },\r\n    percentage: {\r\n      fontSize: 9,\r\n      fontSize: 'min(max(7px, 1vw), 10px)', // eslint-disable-line no-dupe-keys\r\n      marginBottom: -1,\r\n      opacity: 0.7,\r\n      userSelect: 'none',\r\n      color: utils.color.contrast(color),\r\n    },\r\n    premium: {\r\n      fontSize: 8,\r\n      fontSize: 'min(max(6px, 0.9vw), 9px)', // eslint-disable-line no-dupe-keys\r\n      opacity: 0.7,\r\n      userSelect: 'none',\r\n      color: utils.color.contrast(color),\r\n    },\r\n  };\r\n\r\n  if (dataDrag.isMouseDown) {\r\n    setDragging(layer.id, dataDrag.moveDeltaX);\r\n  }\r\n\r\n  const percentage = utils.string.t('format.percent', { value: { number: valuePercentage * 100 } });\r\n  const premium = isString(layer.premium)\r\n    ? layer.premium\r\n    : utils.string.t('format.currency', { value: { number: layer.premium, currency } });\r\n  const amount = utils.string.t('format.currency', { value: { number: layer.amount, currency } });\r\n  const excess = utils.string.t('format.currency', { value: { number: layer.xs, currency } });\r\n  const leads = (layer && layer.leads) || [];\r\n\r\n  return (\r\n    <div\r\n      onMouseUp={() => stopDragging()}\r\n      onMouseDown={() => startDragging(layer.id)}\r\n      style={style.root}\r\n      data-testid={`layer-${layer.id}`}\r\n      title={\r\n        (layer.market ? `${layer.market}${utils.generic.isValidArray(layer.leads, true) ? '\\n\\n' : ''}` : '') +\r\n        leads.map((lead) => ` â€¢ ${lead.name}${lead.notes ? `: ${lead.notes}` : ''}`).join('\\n') +\r\n        `\\n\\n${utils.string.t(`placement.generic.${type}`)}: ${percentage}` +\r\n        `\\n${utils.string.t('placement.generic.premium')}: ${premium}` +\r\n        `\\n${utils.string.t('placement.generic.amount')}: ${amount}` +\r\n        `\\n${utils.string.t('placement.generic.excess')}: ${excess}`\r\n      }\r\n    >\r\n      <Typography variant=\"subtitle1\" style={style.title}>\r\n        {layer.market}\r\n      </Typography>\r\n      <Typography variant=\"subtitle2\" style={style.subtitle}>\r\n        {leads.map((lead) => lead.name).join(', ')}\r\n      </Typography>\r\n      <Typography variant=\"body1\" style={style.percentage}>\r\n        {percentage}\r\n      </Typography>\r\n      <Typography variant=\"body2\" style={style.premium}>\r\n        {premium}\r\n      </Typography>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default clickDrag(MudmapLayer, { touch: true });\r\n"]},"metadata":{},"sourceType":"module"}