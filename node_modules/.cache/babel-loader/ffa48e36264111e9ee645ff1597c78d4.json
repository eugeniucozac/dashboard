{"ast":null,"code":"import \"core-js/modules/es.array.concat\";\nimport _regeneratorRuntime from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\Market\\\\Market.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport toNumber from 'lodash/toNumber';\nimport get from 'lodash/get';\nimport { useParams, useHistory } from 'react-router'; // app\n\nimport { Layout } from 'components';\nimport { ClientContent, ClientSummary } from 'modules';\nimport { getMarketParentPlacements, getMarketParentList } from 'stores';\nimport config from 'config';\nimport * as utils from 'utils'; // miu\n\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function Market() {\n  _s();\n\n  var parentSelected = useSelector(function (state) {\n    return state.marketParent.selected;\n  });\n  var parentList = useSelector(function (state) {\n    return state.marketParent.listAll.items;\n  });\n  var parentPlacements = useSelector(function (state) {\n    return state.marketParent.placements;\n  });\n  var uiBrand = useSelector(function (state) {\n    return get(state, 'ui.brand');\n  });\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      slug = _useParams.slug;\n\n  var history = useHistory();\n  var previousId = useRef();\n  var dispatch = useDispatch();\n  var parentName = get(parentSelected, 'name') || utils.string.capitalise(slug);\n  var title = parentName ? \"\".concat(utils.string.t('app.market'), \" - \").concat(parentName) : utils.string.t('market.title');\n  useEffect(function () {\n    if (!id || toNumber(previousId.current) === toNumber(id)) return;\n    previousId.current = id;\n    fetchParent(id);\n  }, [id] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var fetchParent = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return dispatch(getMarketParentList());\n\n            case 2:\n              response = _context.sent;\n\n              if (response && response.content) {\n                dispatch(getMarketParentPlacements(id));\n              } else {\n                history.push(config.routes.home.root);\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchParent(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\".concat(title, \" - \").concat(utils.app.getAppName(uiBrand))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      testid: \"market\",\n      children: [/*#__PURE__*/_jsxDEV(Layout, {\n        main: true,\n        children: /*#__PURE__*/_jsxDEV(ClientContent, {\n          parent: {\n            list: parentList,\n            offices: [],\n            placements: parentPlacements,\n            selected: parentSelected\n          },\n          pageIcon: TimelineIcon,\n          type: \"market\",\n          showOfficeSelection: false,\n          selectedId: toNumber(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Layout, {\n        sidebar: true,\n        padding: false,\n        children: parentSelected ? /*#__PURE__*/_jsxDEV(ClientSummary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Market, \"lm12OkuQWseIVEL8ARar1Rid+/8=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useParams, useHistory, useDispatch];\n});\n\n_c = Market;\nMarket.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"Market\"\n};\nexport default Market;\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\pages\\\\Market\\\\Market.js\"] = {\n    name: \"Market\",\n    docgenInfo: Market.__docgenInfo,\n    path: \"src\\\\pages\\\\Market\\\\Market.js\"\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Market\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/Market/Market.js"],"names":["React","useRef","useEffect","useSelector","useDispatch","Helmet","toNumber","get","useParams","useHistory","Layout","ClientContent","ClientSummary","getMarketParentPlacements","getMarketParentList","config","utils","TimelineIcon","Market","parentSelected","state","marketParent","selected","parentList","listAll","items","parentPlacements","placements","uiBrand","id","slug","history","previousId","dispatch","parentName","string","capitalise","title","t","current","fetchParent","response","content","push","routes","home","root","app","getAppName","list","offices"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Helmet } from 'react-helmet';\r\nimport toNumber from 'lodash/toNumber';\r\nimport get from 'lodash/get';\r\nimport { useParams, useHistory } from 'react-router';\r\n\r\n// app\r\nimport { Layout } from 'components';\r\nimport { ClientContent, ClientSummary } from 'modules';\r\nimport { getMarketParentPlacements, getMarketParentList } from 'stores';\r\nimport config from 'config';\r\nimport * as utils from 'utils';\r\n\r\n// miu\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nexport function Market() {\r\n  const parentSelected = useSelector((state) => state.marketParent.selected);\r\n  const parentList = useSelector((state) => state.marketParent.listAll.items);\r\n  const parentPlacements = useSelector((state) => state.marketParent.placements);\r\n  const uiBrand = useSelector((state) => get(state, 'ui.brand'));\r\n  const { id, slug } = useParams();\r\n  const history = useHistory();\r\n  const previousId = useRef();\r\n  const dispatch = useDispatch();\r\n\r\n  const parentName = get(parentSelected, 'name') || utils.string.capitalise(slug);\r\n  const title = parentName ? `${utils.string.t('app.market')} - ${parentName}` : utils.string.t('market.title');\r\n\r\n  useEffect(\r\n    () => {\r\n      if (!id || toNumber(previousId.current) === toNumber(id)) return;\r\n      previousId.current = id;\r\n      fetchParent(id);\r\n    },\r\n    [id] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const fetchParent = async (id) => {\r\n    const response = await dispatch(getMarketParentList());\r\n    if (response && response.content) {\r\n      dispatch(getMarketParentPlacements(id));\r\n    } else {\r\n      history.push(config.routes.home.root);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${title} - ${utils.app.getAppName(uiBrand)}`}</title>\r\n      </Helmet>\r\n\r\n      <Layout testid=\"market\">\r\n        <Layout main>\r\n          <ClientContent\r\n            parent={{\r\n              list: parentList,\r\n              offices: [],\r\n              placements: parentPlacements,\r\n              selected: parentSelected,\r\n            }}\r\n            pageIcon={TimelineIcon}\r\n            type=\"market\"\r\n            showOfficeSelection={false}\r\n            selectedId={toNumber(id)}\r\n          />\r\n        </Layout>\r\n\r\n        <Layout sidebar padding={false}>\r\n          {parentSelected ? <ClientSummary /> : <span />}\r\n        </Layout>\r\n      </Layout>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Market;\r\n"]},"metadata":{},"sourceType":"module"}