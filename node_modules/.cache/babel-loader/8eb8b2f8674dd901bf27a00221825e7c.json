{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\AddRiskRowMultiple\\\\RiskRowItem.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useWatch, useFormContext } from 'react-hook-form';\nimport merge from 'lodash/merge';\nimport isString from 'lodash/isString';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport * as utils from 'utils';\nimport { FormLegend, Tooltip, ModalDialog } from 'components';\nimport { AddRiskFormField } from 'modules';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      marginBottom: 20,\n      width: '100%'\n    },\n    text: {\n      color: 'black!important',\n      fontWeight: 'bold'\n    },\n    error: {\n      color: \"\".concat(theme.palette.error.main, \"!important\")\n    },\n    valid: {\n      color: 'black!important'\n    },\n    expand: {\n      transform: 'rotate(0deg)',\n      marginLeft: 'auto',\n      transition: theme.transitions.create('transform', {\n        duration: theme.transitions.duration.shortest\n      })\n    },\n    legend: {\n      '&:not(:first-child) > legend': {\n        marginTop: '10px !important'\n      },\n      '& > legend': {\n        marginBottom: 0\n      }\n    }\n  };\n});\n\nvar renderValue = function renderValue(field, value) {\n  var prefix = '';\n  var suffix = '';\n  var newValue = value;\n\n  switch (field.type) {\n    case 'number':\n      newValue = utils.string.t(\"format.number\", {\n        value: {\n          number: value\n        }\n      });\n      break;\n\n    case 'toggle':\n      newValue = value === 'true' || value === true ? utils.string.t('app.yes') : value === 'false' || value === false ? utils.string.t('app.no') : '';\n      break;\n\n    case 'datepicker':\n      newValue = utils.string.t(\"format.date\", {\n        value: {\n          date: value\n        }\n      });\n      break;\n\n    case 'select':\n      {\n        var options = utils.generic.isValidArray(field.options, true) ? field.options : [];\n        var option = options.find(function (o) {\n          return String(o.value) === String(value);\n        }) || {};\n        newValue = (option === null || option === void 0 ? void 0 : option.label) !== 'Select...' ? option.label : '';\n        break;\n      }\n\n    case 'autocompletemui':\n      {\n        newValue = (value === null || value === void 0 ? void 0 : value.label) || '';\n        break;\n      }\n\n    default:\n      break;\n  } // add prefix/suffix for specific fields\n\n\n  if (field.name === 'distanceToCoast' && value) {\n    suffix = \" \".concat(utils.string.t('map.unit.miles'));\n  } // the extra <span /> is used to prevent Material-UI complaining about not receiving a ReactNode\n  // this happens if the value is true/false/undefined/null...\n  // this workaround prevents errors in case some invalid values fall through the cracks\n\n\n  return utils.generic.isValidObject(newValue) ? null : /*#__PURE__*/_jsxDEV(\"span\", {\n    children: [prefix, newValue, suffix]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, _this);\n};\n\nvar EditForm = function EditForm(_ref) {\n  _s();\n\n  var item = _ref.item,\n      definitionsFields = _ref.definitionsFields,\n      index = _ref.index,\n      formProps = _ref.formProps,\n      setValue = _ref.setValue;\n  var classes = useStyles();\n  var visibleDefs = definitionsFields.arrayItemDef.filter(function (f) {\n    return f.type !== 'hidden';\n  });\n  var hiddenDefs = definitionsFields.arrayItemDef.filter(function (f) {\n    return f.type === 'hidden';\n  });\n  useEffect(function () {\n    if (definitionsFields.itemTitleField && definitionsFields.itemTitle) {\n      var fieldName = \"\".concat(definitionsFields.name, \"[\").concat(index, \"].\").concat(definitionsFields.itemTitleField);\n      var fieldValue = \"\".concat(definitionsFields.itemTitle, \" \").concat(index + 1);\n      setValue(fieldName, fieldValue);\n    }\n  }, [definitionsFields.itemTitle, definitionsFields.itemTitleField, definitionsFields.name, index, setValue]);\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    spacing: 2,\n    \"data-testid\": \"grid-container\",\n    style: {\n      overflowY: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 12,\n      style: {\n        margin: '20px 30px'\n      },\n      children: [hiddenDefs.map(function (def) {\n        return /*#__PURE__*/_jsxDEV(AddRiskFormField, {\n          field: _objectSpread(_objectSpread({}, def), {}, {\n            name: \"\".concat(definitionsFields.name, \"[\").concat(index, \"].\").concat(def.name),\n            defaultValue: item[def.name]\n          }),\n          formProps: formProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, _this);\n      }), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        \"data-testid\": \"grid-container\",\n        children: visibleDefs.map(function (def, defIndex) {\n          var label = def.label,\n              fieldProps = _objectWithoutProperties(def, [\"label\"]);\n\n          var condition = utils.risk.getCondition(def, definitionsFields.arrayItemDef);\n          var conditionValue = condition && formProps.watch(\"\".concat(definitionsFields.name, \"[\").concat(index, \"].\").concat(condition.name));\n          var isValid = !condition || condition && utils.risk.isConditionValid(condition, conditionValue);\n          var isDisabled = condition && !isValid;\n          var hasLegend = isString(def.header);\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [hasLegend && /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              className: classes.legend,\n              children: /*#__PURE__*/_jsxDEV(FormLegend, {\n                text: def.header\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, _this), isValid ? /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              sm: 6,\n              md: 4,\n              children: /*#__PURE__*/_jsxDEV(AddRiskFormField, {\n                field: _objectSpread(_objectSpread({}, fieldProps), {}, {\n                  label: label,\n                  name: \"\".concat(definitionsFields.name, \"[\").concat(index, \"].\").concat(def.name),\n                  defaultValue: item[def.name],\n                  muiComponentProps: merge(fieldProps.muiComponentProps || {}, _objectSpread({}, ['text', 'number'].includes(def.type) && {\n                    InputProps: {\n                      disabled: isDisabled || def.disabled\n                    }\n                  }))\n                }),\n                formProps: formProps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 21\n              }, _this)\n            }, \"visible-\".concat(item.id), false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 19\n            }, _this) : null]\n          }, void 0, true);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, _this)]\n    }, item.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(EditForm, \"OAQf9SHEQQsOOZKjohcuI3tGtQ0=\", false, function () {\n  return [useStyles];\n});\n\n_c = EditForm;\nexport default function RiskRowItem(_ref2) {\n  _s2();\n\n  var _this2 = this;\n\n  var index = _ref2.index,\n      definitionsFields = _ref2.definitionsFields,\n      removeHandler = _ref2.removeHandler,\n      copyHandler = _ref2.copyHandler,\n      formProps = _ref2.formProps;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isBuildingEditOpen = _useState2[0],\n      setIsBuildingEditOpen = _useState2[1];\n\n  var classes = useStyles();\n\n  var _useFormContext = useFormContext(),\n      errors = _useFormContext.errors,\n      setValue = _useFormContext.setValue;\n\n  var data = useWatch({\n    control: formProps === null || formProps === void 0 ? void 0 : formProps.control,\n    name: definitionsFields.name\n  });\n  var item = data && data[index];\n  var actions = [{\n    name: 'ok',\n    type: 'ok',\n    color: 'secondary',\n    label: utils.string.t('app.confirm')\n  }];\n\n  var handleOpenEdit = function handleOpenEdit() {\n    setIsBuildingEditOpen(true);\n  };\n\n  var handleCloseEdit = function handleCloseEdit() {\n    setIsBuildingEditOpen(false);\n  };\n\n  var visibleDefs = definitionsFields.arrayItemDef.filter(function (f) {\n    return f.type !== 'hidden';\n  });\n  return /*#__PURE__*/_jsxDEV(Card, {\n    raised: true,\n    elevation: 2,\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      action: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Duplicate \".concat(definitionsFields === null || definitionsFields === void 0 ? void 0 : definitionsFields.itemTitle),\n          placement: \"top\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"Duplicate\",\n            size: \"small\",\n            onClick: function onClick() {\n              return copyHandler(index);\n            },\n            children: /*#__PURE__*/_jsxDEV(FileCopyIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Edit \".concat(definitionsFields === null || definitionsFields === void 0 ? void 0 : definitionsFields.itemTitle),\n          placement: \"top\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"Edit\",\n            size: \"small\",\n            onClick: handleOpenEdit,\n            children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Delete \".concat(definitionsFields === null || definitionsFields === void 0 ? void 0 : definitionsFields.itemTitle),\n          placement: \"top\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"Delete\",\n            size: \"small\",\n            onClick: function onClick() {\n              return removeHandler(index);\n            },\n            children: /*#__PURE__*/_jsxDEV(DeleteForeverIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true),\n      title: \"\".concat(definitionsFields === null || definitionsFields === void 0 ? void 0 : definitionsFields.itemTitle, \" \").concat(index + 1),\n      subheader: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalDialog, {\n      actions: actions,\n      title: \"Edit \".concat((item === null || item === void 0 ? void 0 : item.buildingTitle) ? item.buildingTitle : ''),\n      fullWidth: true,\n      disableBackdropClick: true,\n      enableFullScree: false,\n      maxWidth: \"lg\",\n      cancelHandler: handleCloseEdit,\n      hideModal: handleCloseEdit,\n      visible: isBuildingEditOpen,\n      children: /*#__PURE__*/_jsxDEV(EditForm, {\n        definitionsFields: definitionsFields,\n        item: item,\n        index: index,\n        formProps: formProps,\n        classes: classes,\n        setValue: setValue,\n        errors: errors\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n      children: visibleDefs.map(function (def) {\n        var isFieldInValid = errors && errors[definitionsFields.name] && errors[definitionsFields.name][index] && utils.generic.isValidObject(errors[definitionsFields.name][index], def.name);\n        var condition = utils.risk.getCondition(def, definitionsFields.arrayItemDef);\n        var conditionValue = condition && formProps.watch(\"\".concat(definitionsFields.name, \"[\").concat(index, \"].\").concat(condition.name));\n        var isValid = !condition || condition && utils.risk.isConditionValid(condition, conditionValue);\n        return isValid ? /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 1,\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              component: \"p\",\n              classes: {\n                root: isFieldInValid ? classes.error : classes.valid\n              },\n              children: [def.label, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, _this2), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              component: \"p\",\n              classes: {\n                root: classes.text\n              },\n              children: item && renderValue(def, item[def.name])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, _this2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, _this2) : null;\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(RiskRowItem, \"w0cS6Mi15/8JH+5hijOllpBzFc8=\", false, function () {\n  return [useStyles, useFormContext, useWatch];\n});\n\n_c2 = RiskRowItem;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"EditForm\");\n$RefreshReg$(_c2, \"RiskRowItem\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/AddRiskRowMultiple/RiskRowItem.js"],"names":["React","useState","useEffect","useWatch","useFormContext","merge","isString","makeStyles","Card","CardHeader","CardContent","Grid","IconButton","Typography","DeleteForeverIcon","EditIcon","FileCopyIcon","utils","FormLegend","Tooltip","ModalDialog","AddRiskFormField","useStyles","theme","root","marginBottom","width","text","color","fontWeight","error","palette","main","valid","expand","transform","marginLeft","transition","transitions","create","duration","shortest","legend","marginTop","renderValue","field","value","prefix","suffix","newValue","type","string","t","number","date","options","generic","isValidArray","option","find","o","String","label","name","isValidObject","EditForm","item","definitionsFields","index","formProps","setValue","classes","visibleDefs","arrayItemDef","filter","f","hiddenDefs","itemTitleField","itemTitle","fieldName","fieldValue","overflowY","margin","map","def","defaultValue","defIndex","fieldProps","condition","risk","getCondition","conditionValue","watch","isValid","isConditionValid","isDisabled","hasLegend","header","muiComponentProps","includes","InputProps","disabled","id","RiskRowItem","removeHandler","copyHandler","isBuildingEditOpen","setIsBuildingEditOpen","errors","data","control","actions","handleOpenEdit","handleCloseEdit","buildingTitle","isFieldInValid"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,EAAmBC,cAAnB,QAAyC,iBAAzC;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AAEA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AAEA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,WAA9B,QAAiD,YAAjD;AACA,SAASC,gBAAT,QAAiC,SAAjC;;;AAEA,IAAMC,SAAS,GAAGf,UAAU,CAAC,UAACgB,KAAD;AAAA,SAAY;AACvCC,IAAAA,IAAI,EAAE;AAAEC,MAAAA,YAAY,EAAE,EAAhB;AAAoBC,MAAAA,KAAK,EAAE;AAA3B,KADiC;AAEvCC,IAAAA,IAAI,EAAE;AACJC,MAAAA,KAAK,EAAE,iBADH;AAEJC,MAAAA,UAAU,EAAE;AAFR,KAFiC;AAMvCC,IAAAA,KAAK,EAAE;AACLF,MAAAA,KAAK,YAAKL,KAAK,CAACQ,OAAN,CAAcD,KAAd,CAAoBE,IAAzB;AADA,KANgC;AASvCC,IAAAA,KAAK,EAAE;AACLL,MAAAA,KAAK,EAAE;AADF,KATgC;AAYvCM,IAAAA,MAAM,EAAE;AACNC,MAAAA,SAAS,EAAE,cADL;AAENC,MAAAA,UAAU,EAAE,MAFN;AAGNC,MAAAA,UAAU,EAAEd,KAAK,CAACe,WAAN,CAAkBC,MAAlB,CAAyB,WAAzB,EAAsC;AAChDC,QAAAA,QAAQ,EAAEjB,KAAK,CAACe,WAAN,CAAkBE,QAAlB,CAA2BC;AADW,OAAtC;AAHN,KAZ+B;AAmBvCC,IAAAA,MAAM,EAAE;AACN,sCAAgC;AAC9BC,QAAAA,SAAS,EAAE;AADmB,OAD1B;AAIN,oBAAc;AACZlB,QAAAA,YAAY,EAAE;AADF;AAJR;AAnB+B,GAAZ;AAAA,CAAD,CAA5B;;AA6BA,IAAMmB,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAQC,KAAR,EAAkB;AACpC,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,QAAQ,GAAGH,KAAf;;AAEA,UAAQD,KAAK,CAACK,IAAd;AACE,SAAK,QAAL;AACED,MAAAA,QAAQ,GAAGhC,KAAK,CAACkC,MAAN,CAAaC,CAAb,kBAAgC;AAAEN,QAAAA,KAAK,EAAE;AAAEO,UAAAA,MAAM,EAAEP;AAAV;AAAT,OAAhC,CAAX;AACA;;AACF,SAAK,QAAL;AACEG,MAAAA,QAAQ,GACNH,KAAK,KAAK,MAAV,IAAoBA,KAAK,KAAK,IAA9B,GACI7B,KAAK,CAACkC,MAAN,CAAaC,CAAb,CAAe,SAAf,CADJ,GAEIN,KAAK,KAAK,OAAV,IAAqBA,KAAK,KAAK,KAA/B,GACA7B,KAAK,CAACkC,MAAN,CAAaC,CAAb,CAAe,QAAf,CADA,GAEA,EALN;AAMA;;AACF,SAAK,YAAL;AACEH,MAAAA,QAAQ,GAAGhC,KAAK,CAACkC,MAAN,CAAaC,CAAb,gBAA8B;AAAEN,QAAAA,KAAK,EAAE;AAAEQ,UAAAA,IAAI,EAAER;AAAR;AAAT,OAA9B,CAAX;AACA;;AACF,SAAK,QAAL;AAAe;AACb,YAAMS,OAAO,GAAGtC,KAAK,CAACuC,OAAN,CAAcC,YAAd,CAA2BZ,KAAK,CAACU,OAAjC,EAA0C,IAA1C,IAAkDV,KAAK,CAACU,OAAxD,GAAkE,EAAlF;AACA,YAAMG,MAAM,GAAGH,OAAO,CAACI,IAAR,CAAa,UAACC,CAAD;AAAA,iBAAOC,MAAM,CAACD,CAAC,CAACd,KAAH,CAAN,KAAoBe,MAAM,CAACf,KAAD,CAAjC;AAAA,SAAb,KAA0D,EAAzE;AAEAG,QAAAA,QAAQ,GAAG,CAAAS,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEI,KAAR,MAAkB,WAAlB,GAAgCJ,MAAM,CAACI,KAAvC,GAA+C,EAA1D;AACA;AACD;;AACD,SAAK,iBAAL;AAAwB;AACtBb,QAAAA,QAAQ,GAAG,CAAAH,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEgB,KAAP,KAAgB,EAA3B;AACA;AACD;;AACD;AACE;AA3BJ,GALoC,CAmCpC;;;AACA,MAAIjB,KAAK,CAACkB,IAAN,KAAe,iBAAf,IAAoCjB,KAAxC,EAA+C;AAC7CE,IAAAA,MAAM,cAAO/B,KAAK,CAACkC,MAAN,CAAaC,CAAb,CAAe,gBAAf,CAAP,CAAN;AACD,GAtCmC,CAuCpC;AACA;AACA;;;AACA,SAAOnC,KAAK,CAACuC,OAAN,CAAcQ,aAAd,CAA4Bf,QAA5B,IAAwC,IAAxC,gBACL;AAAA,eACGF,MADH,EAEGE,QAFH,EAGGD,MAHH;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAOD,CAjDD;;AAmDA,IAAMiB,QAAQ,GAAG,SAAXA,QAAW,OAA6D;AAAA;;AAAA,MAA1DC,IAA0D,QAA1DA,IAA0D;AAAA,MAApDC,iBAAoD,QAApDA,iBAAoD;AAAA,MAAjCC,KAAiC,QAAjCA,KAAiC;AAAA,MAA1BC,SAA0B,QAA1BA,SAA0B;AAAA,MAAfC,QAAe,QAAfA,QAAe;AAC5E,MAAMC,OAAO,GAAGjD,SAAS,EAAzB;AACA,MAAMkD,WAAW,GAAGL,iBAAiB,CAACM,YAAlB,CAA+BC,MAA/B,CAAsC,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACzB,IAAF,KAAW,QAAlB;AAAA,GAAtC,CAApB;AACA,MAAM0B,UAAU,GAAGT,iBAAiB,CAACM,YAAlB,CAA+BC,MAA/B,CAAsC,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACzB,IAAF,KAAW,QAAlB;AAAA,GAAtC,CAAnB;AAEAhD,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIiE,iBAAiB,CAACU,cAAlB,IAAoCV,iBAAiB,CAACW,SAA1D,EAAqE;AACnE,UAAMC,SAAS,aAAMZ,iBAAiB,CAACJ,IAAxB,cAAgCK,KAAhC,eAA0CD,iBAAiB,CAACU,cAA5D,CAAf;AACA,UAAMG,UAAU,aAAMb,iBAAiB,CAACW,SAAxB,cAAqCV,KAAK,GAAG,CAA7C,CAAhB;AACAE,MAAAA,QAAQ,CAACS,SAAD,EAAYC,UAAZ,CAAR;AACD;AACF,GANQ,EAMN,CAACb,iBAAiB,CAACW,SAAnB,EAA8BX,iBAAiB,CAACU,cAAhD,EAAgEV,iBAAiB,CAACJ,IAAlF,EAAwFK,KAAxF,EAA+FE,QAA/F,CANM,CAAT;AAQA,sBACE,QAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAA4B,mBAAY,gBAAxC;AAAyD,IAAA,KAAK,EAAE;AAAEW,MAAAA,SAAS,EAAE;AAAb,KAAhE;AAAA,2BACE,QAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAiC,MAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxC;AAAA,iBACGN,UAAU,CAACO,GAAX,CAAe,UAACC,GAAD,EAAS;AACvB,4BACE,QAAC,gBAAD;AACE,UAAA,KAAK,kCACAA,GADA;AAEHrB,YAAAA,IAAI,YAAKI,iBAAiB,CAACJ,IAAvB,cAA+BK,KAA/B,eAAyCgB,GAAG,CAACrB,IAA7C,CAFD;AAGHsB,YAAAA,YAAY,EAAEnB,IAAI,CAACkB,GAAG,CAACrB,IAAL;AAHf,YADP;AAME,UAAA,SAAS,EAAEM;AANb;AAAA;AAAA;AAAA;AAAA,iBADF;AAUD,OAXA,CADH,eAaE,QAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAgB,QAAA,OAAO,EAAE,CAAzB;AAA4B,uBAAY,gBAAxC;AAAA,kBACGG,WAAW,CAACW,GAAZ,CAAgB,UAACC,GAAD,EAAME,QAAN,EAAmB;AAAA,cAC1BxB,KAD0B,GACDsB,GADC,CAC1BtB,KAD0B;AAAA,cAChByB,UADgB,4BACDH,GADC;;AAElC,cAAMI,SAAS,GAAGvE,KAAK,CAACwE,IAAN,CAAWC,YAAX,CAAwBN,GAAxB,EAA6BjB,iBAAiB,CAACM,YAA/C,CAAlB;AACA,cAAMkB,cAAc,GAAGH,SAAS,IAAInB,SAAS,CAACuB,KAAV,WAAmBzB,iBAAiB,CAACJ,IAArC,cAA6CK,KAA7C,eAAuDoB,SAAS,CAACzB,IAAjE,EAApC;AAEA,cAAM8B,OAAO,GAAG,CAACL,SAAD,IAAeA,SAAS,IAAIvE,KAAK,CAACwE,IAAN,CAAWK,gBAAX,CAA4BN,SAA5B,EAAuCG,cAAvC,CAA5C;AACA,cAAMI,UAAU,GAAGP,SAAS,IAAI,CAACK,OAAjC;AACA,cAAMG,SAAS,GAAG1F,QAAQ,CAAC8E,GAAG,CAACa,MAAL,CAA1B;AAEA,8BACE;AAAA,uBACGD,SAAS,iBACR,QAAC,IAAD;AAAM,cAAA,IAAI,MAAV;AAAW,cAAA,EAAE,EAAE,EAAf;AAAmB,cAAA,SAAS,EAAEzB,OAAO,CAAC7B,MAAtC;AAAA,qCACE,QAAC,UAAD;AAAY,gBAAA,IAAI,EAAE0C,GAAG,CAACa;AAAtB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,qBAFJ,EAMGJ,OAAO,gBACN,QAAC,IAAD;AAAM,cAAA,IAAI,MAAV;AAAW,cAAA,EAAE,EAAE,CAAf;AAAkB,cAAA,EAAE,EAAE,CAAtB;AAAyB,cAAA,EAAE,EAAE,CAA7B;AAAA,qCACE,QAAC,gBAAD;AACE,gBAAA,KAAK,kCACAN,UADA;AAEHzB,kBAAAA,KAAK,EAAEA,KAFJ;AAGHC,kBAAAA,IAAI,YAAKI,iBAAiB,CAACJ,IAAvB,cAA+BK,KAA/B,eAAyCgB,GAAG,CAACrB,IAA7C,CAHD;AAIHsB,kBAAAA,YAAY,EAAEnB,IAAI,CAACkB,GAAG,CAACrB,IAAL,CAJf;AAKHmC,kBAAAA,iBAAiB,EAAE7F,KAAK,CAACkF,UAAU,CAACW,iBAAX,IAAgC,EAAjC,oBAClB,CAAC,MAAD,EAAS,QAAT,EAAmBC,QAAnB,CAA4Bf,GAAG,CAAClC,IAAhC,KAAyC;AAAEkD,oBAAAA,UAAU,EAAE;AAAEC,sBAAAA,QAAQ,EAAEN,UAAU,IAAIX,GAAG,CAACiB;AAA9B;AAAd,mBADvB;AALrB,kBADP;AAUE,gBAAA,SAAS,EAAEhC;AAVb;AAAA;AAAA;AAAA;AAAA;AADF,iCAAgDH,IAAI,CAACoC,EAArD;AAAA;AAAA;AAAA;AAAA,qBADM,GAeJ,IArBN;AAAA,0BADF;AAyBD,SAlCA;AADH;AAAA;AAAA;AAAA;AAAA,eAbF;AAAA,OAAwBpC,IAAI,CAACoC,EAA7B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,WADF;AAuDD,CApED;;GAAMrC,Q;UACY3C,S;;;KADZ2C,Q;AAsEN,eAAe,SAASsC,WAAT,QAA0F;AAAA;;AAAA;;AAAA,MAAnEnC,KAAmE,SAAnEA,KAAmE;AAAA,MAA5DD,iBAA4D,SAA5DA,iBAA4D;AAAA,MAAzCqC,aAAyC,SAAzCA,aAAyC;AAAA,MAA1BC,WAA0B,SAA1BA,WAA0B;AAAA,MAAbpC,SAAa,SAAbA,SAAa;;AAAA,kBACnDpE,QAAQ,CAAC,KAAD,CAD2C;AAAA;AAAA,MAChGyG,kBADgG;AAAA,MAC5EC,qBAD4E;;AAEvG,MAAMpC,OAAO,GAAGjD,SAAS,EAAzB;;AAFuG,wBAI1ElB,cAAc,EAJ4D;AAAA,MAI/FwG,MAJ+F,mBAI/FA,MAJ+F;AAAA,MAIvFtC,QAJuF,mBAIvFA,QAJuF;;AAKvG,MAAMuC,IAAI,GAAG1G,QAAQ,CAAC;AACpB2G,IAAAA,OAAO,EAAEzC,SAAF,aAAEA,SAAF,uBAAEA,SAAS,CAAEyC,OADA;AAEpB/C,IAAAA,IAAI,EAAEI,iBAAiB,CAACJ;AAFJ,GAAD,CAArB;AAKA,MAAMG,IAAI,GAAG2C,IAAI,IAAIA,IAAI,CAACzC,KAAD,CAAzB;AAEA,MAAM2C,OAAO,GAAG,CACd;AACEhD,IAAAA,IAAI,EAAE,IADR;AAEEb,IAAAA,IAAI,EAAE,IAFR;AAGEtB,IAAAA,KAAK,EAAE,WAHT;AAIEkC,IAAAA,KAAK,EAAE7C,KAAK,CAACkC,MAAN,CAAaC,CAAb,CAAe,aAAf;AAJT,GADc,CAAhB;;AASA,MAAM4D,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BL,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACD,GAFD;;AAIA,MAAMM,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5BN,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD,GAFD;;AAIA,MAAMnC,WAAW,GAAGL,iBAAiB,CAACM,YAAlB,CAA+BC,MAA/B,CAAsC,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACzB,IAAF,KAAW,QAAlB;AAAA,GAAtC,CAApB;AAEA,sBACE,QAAC,IAAD;AAAM,IAAA,MAAM,MAAZ;AAAa,IAAA,SAAS,EAAE,CAAxB;AAA2B,IAAA,SAAS,EAAEqB,OAAO,CAAC/C,IAA9C;AAAA,4BACE,QAAC,UAAD;AACE,MAAA,MAAM,eACJ;AAAA,gCACE,QAAC,OAAD;AAAS,UAAA,KAAK,sBAAe2C,iBAAf,aAAeA,iBAAf,uBAAeA,iBAAiB,CAAEW,SAAlC,CAAd;AAA6D,UAAA,SAAS,EAAC,KAAvE;AAAA,iCACE,QAAC,UAAD;AAAY,0BAAW,WAAvB;AAAmC,YAAA,IAAI,EAAC,OAAxC;AAAgD,YAAA,OAAO,EAAE;AAAA,qBAAM2B,WAAW,CAACrC,KAAD,CAAjB;AAAA,aAAzD;AAAA,mCACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAME,QAAC,OAAD;AAAS,UAAA,KAAK,iBAAUD,iBAAV,aAAUA,iBAAV,uBAAUA,iBAAiB,CAAEW,SAA7B,CAAd;AAAwD,UAAA,SAAS,EAAC,KAAlE;AAAA,iCACE,QAAC,UAAD;AAAY,0BAAW,MAAvB;AAA8B,YAAA,IAAI,EAAC,OAAnC;AAA2C,YAAA,OAAO,EAAEkC,cAApD;AAAA,mCACE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBANF,eAWE,QAAC,OAAD;AAAS,UAAA,KAAK,mBAAY7C,iBAAZ,aAAYA,iBAAZ,uBAAYA,iBAAiB,CAAEW,SAA/B,CAAd;AAA0D,UAAA,SAAS,EAAC,KAApE;AAAA,iCACE,QAAC,UAAD;AAAY,0BAAW,QAAvB;AAAgC,YAAA,IAAI,EAAC,OAArC;AAA6C,YAAA,OAAO,EAAE;AAAA,qBAAM0B,aAAa,CAACpC,KAAD,CAAnB;AAAA,aAAtD;AAAA,mCACE,QAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA,sBAFJ;AAoBE,MAAA,KAAK,YAAKD,iBAAL,aAAKA,iBAAL,uBAAKA,iBAAiB,CAAEW,SAAxB,cAAqCV,KAAK,GAAG,CAA7C,CApBP;AAqBE,MAAA,SAAS,EAAC;AArBZ;AAAA;AAAA;AAAA;AAAA,YADF,eAwBE,QAAC,WAAD;AACE,MAAA,OAAO,EAAE2C,OADX;AAEE,MAAA,KAAK,iBAAU,CAAA7C,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEgD,aAAN,IAAsBhD,IAAI,CAACgD,aAA3B,GAA2C,EAArD,CAFP;AAGE,MAAA,SAAS,MAHX;AAIE,MAAA,oBAAoB,MAJtB;AAKE,MAAA,eAAe,EAAE,KALnB;AAME,MAAA,QAAQ,EAAC,IANX;AAOE,MAAA,aAAa,EAAED,eAPjB;AAQE,MAAA,SAAS,EAAEA,eARb;AASE,MAAA,OAAO,EAAEP,kBATX;AAAA,6BAWE,QAAC,QAAD;AACE,QAAA,iBAAiB,EAAEvC,iBADrB;AAEE,QAAA,IAAI,EAAED,IAFR;AAGE,QAAA,KAAK,EAAEE,KAHT;AAIE,QAAA,SAAS,EAAEC,SAJb;AAKE,QAAA,OAAO,EAAEE,OALX;AAME,QAAA,QAAQ,EAAED,QANZ;AAOE,QAAA,MAAM,EAAEsC;AAPV;AAAA;AAAA;AAAA;AAAA;AAXF;AAAA;AAAA;AAAA;AAAA,YAxBF,eA8CE,QAAC,WAAD;AAAA,gBACGpC,WAAW,CAACW,GAAZ,CAAgB,UAACC,GAAD,EAAS;AACxB,YAAM+B,cAAc,GAClBP,MAAM,IACNA,MAAM,CAACzC,iBAAiB,CAACJ,IAAnB,CADN,IAEA6C,MAAM,CAACzC,iBAAiB,CAACJ,IAAnB,CAAN,CAA+BK,KAA/B,CAFA,IAGAnD,KAAK,CAACuC,OAAN,CAAcQ,aAAd,CAA4B4C,MAAM,CAACzC,iBAAiB,CAACJ,IAAnB,CAAN,CAA+BK,KAA/B,CAA5B,EAAmEgB,GAAG,CAACrB,IAAvE,CAJF;AAMA,YAAMyB,SAAS,GAAGvE,KAAK,CAACwE,IAAN,CAAWC,YAAX,CAAwBN,GAAxB,EAA6BjB,iBAAiB,CAACM,YAA/C,CAAlB;AACA,YAAMkB,cAAc,GAAGH,SAAS,IAAInB,SAAS,CAACuB,KAAV,WAAmBzB,iBAAiB,CAACJ,IAArC,cAA6CK,KAA7C,eAAuDoB,SAAS,CAACzB,IAAjE,EAApC;AAEA,YAAM8B,OAAO,GAAG,CAACL,SAAD,IAAeA,SAAS,IAAIvE,KAAK,CAACwE,IAAN,CAAWK,gBAAX,CAA4BN,SAA5B,EAAuCG,cAAvC,CAA5C;AAEA,eAAOE,OAAO,gBACZ,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAgB,UAAA,OAAO,EAAE,CAAzB;AAA4B,UAAA,UAAU,EAAC,QAAvC;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAkB,YAAA,EAAE,EAAE,CAAtB;AAAA,mCACE,QAAC,UAAD;AAAY,cAAA,OAAO,EAAC,OAApB;AAA4B,cAAA,SAAS,EAAC,GAAtC;AAA0C,cAAA,OAAO,EAAE;AAAErE,gBAAAA,IAAI,EAAE2F,cAAc,GAAG5C,OAAO,CAACzC,KAAX,GAAmByC,OAAO,CAACtC;AAAjD,eAAnD;AAAA,yBACGmD,GAAG,CAACtB,KADP;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAME,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAkB,YAAA,EAAE,EAAE,CAAtB;AAAA,mCACE,QAAC,UAAD;AAAY,cAAA,OAAO,EAAC,OAApB;AAA4B,cAAA,SAAS,EAAC,GAAtC;AAA0C,cAAA,OAAO,EAAE;AAAEtC,gBAAAA,IAAI,EAAE+C,OAAO,CAAC5C;AAAhB,eAAnD;AAAA,wBACGuC,IAAI,IAAItB,WAAW,CAACwC,GAAD,EAAMlB,IAAI,CAACkB,GAAG,CAACrB,IAAL,CAAV;AADtB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBANF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADY,GAaV,IAbJ;AAcD,OA1BA;AADH;AAAA;AAAA;AAAA;AAAA,YA9CF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA8ED;;IA7GuBwC,W;UAENjF,S,EAEalB,c,EAChBD,Q;;;MALSoG,W","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useWatch, useFormContext } from 'react-hook-form';\r\nimport merge from 'lodash/merge';\r\nimport isString from 'lodash/isString';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\n\r\nimport * as utils from 'utils';\r\n\r\nimport { FormLegend, Tooltip, ModalDialog } from 'components';\r\nimport { AddRiskFormField } from 'modules';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: { marginBottom: 20, width: '100%' },\r\n  text: {\r\n    color: 'black!important',\r\n    fontWeight: 'bold',\r\n  },\r\n  error: {\r\n    color: `${theme.palette.error.main}!important`,\r\n  },\r\n  valid: {\r\n    color: 'black!important',\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  legend: {\r\n    '&:not(:first-child) > legend': {\r\n      marginTop: '10px !important',\r\n    },\r\n    '& > legend': {\r\n      marginBottom: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nconst renderValue = (field, value) => {\r\n  let prefix = '';\r\n  let suffix = '';\r\n  let newValue = value;\r\n\r\n  switch (field.type) {\r\n    case 'number':\r\n      newValue = utils.string.t(`format.number`, { value: { number: value } });\r\n      break;\r\n    case 'toggle':\r\n      newValue =\r\n        value === 'true' || value === true\r\n          ? utils.string.t('app.yes')\r\n          : value === 'false' || value === false\r\n          ? utils.string.t('app.no')\r\n          : '';\r\n      break;\r\n    case 'datepicker':\r\n      newValue = utils.string.t(`format.date`, { value: { date: value } });\r\n      break;\r\n    case 'select': {\r\n      const options = utils.generic.isValidArray(field.options, true) ? field.options : [];\r\n      const option = options.find((o) => String(o.value) === String(value)) || {};\r\n\r\n      newValue = option?.label !== 'Select...' ? option.label : '';\r\n      break;\r\n    }\r\n    case 'autocompletemui': {\r\n      newValue = value?.label || '';\r\n      break;\r\n    }\r\n    default:\r\n      break;\r\n  }\r\n\r\n  // add prefix/suffix for specific fields\r\n  if (field.name === 'distanceToCoast' && value) {\r\n    suffix = ` ${utils.string.t('map.unit.miles')}`;\r\n  }\r\n  // the extra <span /> is used to prevent Material-UI complaining about not receiving a ReactNode\r\n  // this happens if the value is true/false/undefined/null...\r\n  // this workaround prevents errors in case some invalid values fall through the cracks\r\n  return utils.generic.isValidObject(newValue) ? null : (\r\n    <span>\r\n      {prefix}\r\n      {newValue}\r\n      {suffix}\r\n    </span>\r\n  );\r\n};\r\n\r\nconst EditForm = ({ item, definitionsFields, index, formProps, setValue }) => {\r\n  const classes = useStyles();\r\n  const visibleDefs = definitionsFields.arrayItemDef.filter((f) => f.type !== 'hidden');\r\n  const hiddenDefs = definitionsFields.arrayItemDef.filter((f) => f.type === 'hidden');\r\n\r\n  useEffect(() => {\r\n    if (definitionsFields.itemTitleField && definitionsFields.itemTitle) {\r\n      const fieldName = `${definitionsFields.name}[${index}].${definitionsFields.itemTitleField}`;\r\n      const fieldValue = `${definitionsFields.itemTitle} ${index + 1}`;\r\n      setValue(fieldName, fieldValue);\r\n    }\r\n  }, [definitionsFields.itemTitle, definitionsFields.itemTitleField, definitionsFields.name, index, setValue]);\r\n\r\n  return (\r\n    <Grid container spacing={2} data-testid=\"grid-container\" style={{ overflowY: 'auto' }}>\r\n      <Grid item xs={12} key={item.id} style={{ margin: '20px 30px' }}>\r\n        {hiddenDefs.map((def) => {\r\n          return (\r\n            <AddRiskFormField\r\n              field={{\r\n                ...def,\r\n                name: `${definitionsFields.name}[${index}].${def.name}`,\r\n                defaultValue: item[def.name],\r\n              }}\r\n              formProps={formProps}\r\n            />\r\n          );\r\n        })}\r\n        <Grid container spacing={3} data-testid=\"grid-container\">\r\n          {visibleDefs.map((def, defIndex) => {\r\n            const { label, ...fieldProps } = def;\r\n            const condition = utils.risk.getCondition(def, definitionsFields.arrayItemDef);\r\n            const conditionValue = condition && formProps.watch(`${definitionsFields.name}[${index}].${condition.name}`);\r\n\r\n            const isValid = !condition || (condition && utils.risk.isConditionValid(condition, conditionValue));\r\n            const isDisabled = condition && !isValid;\r\n            const hasLegend = isString(def.header);\r\n\r\n            return (\r\n              <>\r\n                {hasLegend && (\r\n                  <Grid item xs={12} className={classes.legend}>\r\n                    <FormLegend text={def.header} />\r\n                  </Grid>\r\n                )}\r\n                {isValid ? (\r\n                  <Grid item xs={6} sm={6} md={4} key={`visible-${item.id}`}>\r\n                    <AddRiskFormField\r\n                      field={{\r\n                        ...fieldProps,\r\n                        label: label,\r\n                        name: `${definitionsFields.name}[${index}].${def.name}`,\r\n                        defaultValue: item[def.name],\r\n                        muiComponentProps: merge(fieldProps.muiComponentProps || {}, {\r\n                          ...(['text', 'number'].includes(def.type) && { InputProps: { disabled: isDisabled || def.disabled } }),\r\n                        }),\r\n                      }}\r\n                      formProps={formProps}\r\n                    />\r\n                  </Grid>\r\n                ) : null}\r\n              </>\r\n            );\r\n          })}\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default function RiskRowItem({ index, definitionsFields, removeHandler, copyHandler, formProps }) {\r\n  const [isBuildingEditOpen, setIsBuildingEditOpen] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const { errors, setValue } = useFormContext();\r\n  const data = useWatch({\r\n    control: formProps?.control,\r\n    name: definitionsFields.name,\r\n  });\r\n\r\n  const item = data && data[index];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'ok',\r\n      type: 'ok',\r\n      color: 'secondary',\r\n      label: utils.string.t('app.confirm'),\r\n    },\r\n  ];\r\n\r\n  const handleOpenEdit = () => {\r\n    setIsBuildingEditOpen(true);\r\n  };\r\n\r\n  const handleCloseEdit = () => {\r\n    setIsBuildingEditOpen(false);\r\n  };\r\n\r\n  const visibleDefs = definitionsFields.arrayItemDef.filter((f) => f.type !== 'hidden');\r\n\r\n  return (\r\n    <Card raised elevation={2} className={classes.root}>\r\n      <CardHeader\r\n        action={\r\n          <>\r\n            <Tooltip title={`Duplicate ${definitionsFields?.itemTitle}`} placement=\"top\">\r\n              <IconButton aria-label=\"Duplicate\" size=\"small\" onClick={() => copyHandler(index)}>\r\n                <FileCopyIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title={`Edit ${definitionsFields?.itemTitle}`} placement=\"top\">\r\n              <IconButton aria-label=\"Edit\" size=\"small\" onClick={handleOpenEdit}>\r\n                <EditIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title={`Delete ${definitionsFields?.itemTitle}`} placement=\"top\">\r\n              <IconButton aria-label=\"Delete\" size=\"small\" onClick={() => removeHandler(index)}>\r\n                <DeleteForeverIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </>\r\n        }\r\n        title={`${definitionsFields?.itemTitle} ${index + 1}`}\r\n        subheader=\"\"\r\n      />\r\n      <ModalDialog\r\n        actions={actions}\r\n        title={`Edit ${item?.buildingTitle ? item.buildingTitle : ''}`}\r\n        fullWidth\r\n        disableBackdropClick\r\n        enableFullScree={false}\r\n        maxWidth=\"lg\"\r\n        cancelHandler={handleCloseEdit}\r\n        hideModal={handleCloseEdit}\r\n        visible={isBuildingEditOpen}\r\n      >\r\n        <EditForm\r\n          definitionsFields={definitionsFields}\r\n          item={item}\r\n          index={index}\r\n          formProps={formProps}\r\n          classes={classes}\r\n          setValue={setValue}\r\n          errors={errors}\r\n        />\r\n      </ModalDialog>\r\n\r\n      <CardContent>\r\n        {visibleDefs.map((def) => {\r\n          const isFieldInValid =\r\n            errors &&\r\n            errors[definitionsFields.name] &&\r\n            errors[definitionsFields.name][index] &&\r\n            utils.generic.isValidObject(errors[definitionsFields.name][index], def.name);\r\n\r\n          const condition = utils.risk.getCondition(def, definitionsFields.arrayItemDef);\r\n          const conditionValue = condition && formProps.watch(`${definitionsFields.name}[${index}].${condition.name}`);\r\n\r\n          const isValid = !condition || (condition && utils.risk.isConditionValid(condition, conditionValue));\r\n\r\n          return isValid ? (\r\n            <Grid container spacing={1} alignItems=\"center\">\r\n              <Grid item xs={6} sm={6}>\r\n                <Typography variant=\"body2\" component=\"p\" classes={{ root: isFieldInValid ? classes.error : classes.valid }}>\r\n                  {def.label}:\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item xs={6} sm={6}>\r\n                <Typography variant=\"body2\" component=\"p\" classes={{ root: classes.text }}>\r\n                  {item && renderValue(def, item[def.name])}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          ) : null;\r\n        })}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}