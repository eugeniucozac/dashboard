{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\ClaimsNewLoss\\\\ClaimsNewLoss.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router';\nimport { Helmet } from 'react-helmet'; // app\n\nimport { showModal, selectClaimsStepper, selectCatCodes, selectClaimsStatuses, selectPriorities, selectLossQualifiers, selectSettlementCurrency, selectReferralResponse, getCatCodes, getStatuses, getPriorityLevels, getLossQualifiers, getSettlementCurrency, getReferralResponse, resetClaimData, submitClaimDetailsInformation, resetLinkPolicies } from 'stores';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { CustomizedDialog, DrawerComponent, DmsFnolWidget } from 'components'; // mui\n\nimport { Typography } from '@material-ui/core';\nimport { ClaimsRegisterNewLoss } from 'forms';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ClaimsNewLoss() {\n  _s();\n\n  var _this = this,\n      _location$state3,\n      _location$state$loss,\n      _location$state4;\n\n  var rootRef = useRef(null);\n  var location = useLocation();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      fnolModalOpen = _useState2[0],\n      setFnolModalOpen = _useState2[1];\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var brand = useSelector(function (state) {\n    return state.ui.brand;\n  });\n  var catCodes = useSelector(selectCatCodes);\n  var priorities = useSelector(selectPriorities);\n  var lossQualifiers = useSelector(selectLossQualifiers);\n  var claimsStatuses = useSelector(selectClaimsStatuses);\n  var settlementCurrency = useSelector(selectSettlementCurrency);\n  var referralResponse = useSelector(selectReferralResponse);\n  var currentStep = useSelector(selectClaimsStepper);\n\n  var _useState3 = useState([{\n    id: 0,\n    form: utils.string.t('claims.modalStepperLabel.createLoss'),\n    formEditedStatus: false,\n    isSubmitted: false\n  }, {\n    id: 1,\n    form: utils.string.t('claims.modalStepperLabel.linkPolicies'),\n    formEditedStatus: false,\n    isSubmitted: false\n  }, {\n    id: 2,\n    form: utils.string.t('claims.modalStepperLabel.createClaim'),\n    formEditedStatus: false,\n    isSubmitted: false\n  }, {\n    id: 3,\n    form: utils.string.t('claims.modalStepperLabel.manageDocuments'),\n    formEditedStatus: false,\n    isSubmitted: false\n  }, {\n    id: 4,\n    form: utils.string.t('claims.modalStepperLabel.confirmation'),\n    formEditedStatus: false,\n    isSubmitted: false\n  }]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      forms = _useState4[0],\n      editFormStatus = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isAnyformDirty = _useState6[0],\n      checkDirtyStatus = _useState6[1]; // On click of Finish button\n\n\n  var launchFinishModal = function launchFinishModal() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        title: utils.string.t('claims.modals.finishRegisterLoss.title'),\n        fullWidth: true,\n        maxWidth: 'sm',\n        componentProps: {\n          confirmLabel: utils.string.t('app.yes'),\n          cancelLabel: utils.string.t('app.no'),\n          confirmMessage: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            color: \"secondary\",\n            children: utils.string.t('claims.modals.finishRegisterLoss.content')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, _this),\n          submitHandler: function submitHandler() {\n            dispatch(submitClaimDetailsInformation());\n            dispatch(resetClaimData());\n            history.push(config.routes.claimsFNOL.root);\n          },\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  };\n\n  var getAllReferentialData = function getAllReferentialData() {\n    if (utils.generic.isInvalidOrEmptyArray(catCodes)) {\n      dispatch(getCatCodes());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(priorities)) {\n      dispatch(getPriorityLevels());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(lossQualifiers)) {\n      dispatch(getLossQualifiers());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(claimsStatuses)) {\n      dispatch(getStatuses());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(settlementCurrency)) {\n      dispatch(getSettlementCurrency());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(referralResponse)) {\n      dispatch(getReferralResponse());\n    }\n  };\n\n  useEffect(function () {\n    getAllReferentialData();\n    setFnolModalOpen(true);\n    return function () {\n      dispatch(resetClaimData());\n      dispatch(resetLinkPolicies());\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var handleFnolModalClose = function handleFnolModalClose() {\n    if (isAnyformDirty) {\n      dispatch(showModal({\n        component: 'CONFIRM',\n        props: {\n          title: utils.string.t('status.alert'),\n          hint: utils.string.t('navigation.title'),\n          fullWidth: true,\n          maxWidth: 'xs',\n          componentProps: {\n            cancelLabel: utils.string.t('app.no'),\n            confirmLabel: utils.string.t('app.yes'),\n            submitHandler: function submitHandler() {\n              var _location$state, _location$state2;\n\n              setFnolModalOpen(false);\n              (location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.redirectUrl) ? history.push(location === null || location === void 0 ? void 0 : (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.redirectUrl) : history.push(config.routes.claimsFNOL.root);\n            }\n          }\n        }\n      }));\n    }\n  };\n\n  var _findDirtyForm = function findDirtyForm(forms) {\n    editFormStatus(forms === null || forms === void 0 ? void 0 : forms.map(function (form) {\n      return _objectSpread({}, form);\n    }));\n    checkDirtyStatus(forms.some(function (form) {\n      return (form === null || form === void 0 ? void 0 : form.formEditedStatus) === true;\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CustomizedDialog, {\n      parentRef: rootRef,\n      dialogOpen: fnolModalOpen,\n      modalTitle: utils.string.t('claims.modalStepperLabel.title'),\n      handlers: {\n        handleDialogClose: handleFnolModalClose\n      },\n      redirectUrl: location === null || location === void 0 ? void 0 : (_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.redirectUrl,\n      isDirty: isAnyformDirty,\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: /*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"\".concat(utils.string.t('claims.actions.registerNewLoss'), \" - \").concat(utils.app.getAppName(brand))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClaimsRegisterNewLoss, {\n        initialFormStatus: forms,\n        steps: forms.map(function (frm) {\n          return frm === null || frm === void 0 ? void 0 : frm.form;\n        }),\n        stepsForms: forms,\n        currentStep: currentStep,\n        launchFinishModal: launchFinishModal,\n        findDirtyForm: function findDirtyForm(forms) {\n          _findDirtyForm(forms);\n        },\n        lossProperties: (_location$state$loss = location === null || location === void 0 ? void 0 : (_location$state4 = location.state) === null || _location$state4 === void 0 ? void 0 : _location$state4.loss) !== null && _location$state$loss !== void 0 ? _location$state$loss : {}\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), fnolModalOpen && /*#__PURE__*/_jsxDEV(DrawerComponent, {\n      isDrawerOpen: true,\n      children: /*#__PURE__*/_jsxDEV(DmsFnolWidget, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ClaimsNewLoss, \"wQGjjQvqXOObXQ63v9/f/m6iNXo=\", false, function () {\n  return [useLocation, useDispatch, useHistory, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ClaimsNewLoss;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimsNewLoss\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/ClaimsNewLoss/ClaimsNewLoss.js"],"names":["React","useState","useEffect","useRef","useDispatch","useSelector","useHistory","useLocation","Helmet","showModal","selectClaimsStepper","selectCatCodes","selectClaimsStatuses","selectPriorities","selectLossQualifiers","selectSettlementCurrency","selectReferralResponse","getCatCodes","getStatuses","getPriorityLevels","getLossQualifiers","getSettlementCurrency","getReferralResponse","resetClaimData","submitClaimDetailsInformation","resetLinkPolicies","utils","config","CustomizedDialog","DrawerComponent","DmsFnolWidget","Typography","ClaimsRegisterNewLoss","ClaimsNewLoss","rootRef","location","fnolModalOpen","setFnolModalOpen","dispatch","history","brand","state","ui","catCodes","priorities","lossQualifiers","claimsStatuses","settlementCurrency","referralResponse","currentStep","id","form","string","t","formEditedStatus","isSubmitted","forms","editFormStatus","isAnyformDirty","checkDirtyStatus","launchFinishModal","component","props","title","fullWidth","maxWidth","componentProps","confirmLabel","cancelLabel","confirmMessage","submitHandler","push","routes","claimsFNOL","root","handleClose","getAllReferentialData","generic","isInvalidOrEmptyArray","handleFnolModalClose","hint","redirectUrl","findDirtyForm","map","some","handleDialogClose","app","getAppName","frm","loss"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { Helmet } from 'react-helmet';\r\n// app\r\nimport {\r\n  showModal,\r\n  selectClaimsStepper,\r\n  selectCatCodes,\r\n  selectClaimsStatuses,\r\n  selectPriorities,\r\n  selectLossQualifiers,\r\n  selectSettlementCurrency,\r\n  selectReferralResponse,\r\n  getCatCodes,\r\n  getStatuses,\r\n  getPriorityLevels,\r\n  getLossQualifiers,\r\n  getSettlementCurrency,\r\n  getReferralResponse,\r\n  resetClaimData,\r\n  submitClaimDetailsInformation,\r\n  resetLinkPolicies,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\nimport { CustomizedDialog, DrawerComponent, DmsFnolWidget } from 'components';\r\n\r\n// mui\r\nimport { Typography } from '@material-ui/core';\r\nimport { ClaimsRegisterNewLoss } from 'forms';\r\n\r\n\r\nexport default function ClaimsNewLoss() {\r\n  const rootRef = useRef(null);\r\n  const location = useLocation();\r\n  const [fnolModalOpen, setFnolModalOpen] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const brand = useSelector((state) => state.ui.brand);\r\n  const catCodes = useSelector(selectCatCodes);\r\n  const priorities = useSelector(selectPriorities);\r\n  const lossQualifiers = useSelector(selectLossQualifiers);\r\n  const claimsStatuses = useSelector(selectClaimsStatuses);\r\n  const settlementCurrency = useSelector(selectSettlementCurrency);\r\n  const referralResponse = useSelector(selectReferralResponse);\r\n  const currentStep = useSelector(selectClaimsStepper);\r\n  const [forms, editFormStatus] = useState([\r\n    { id: 0, form: utils.string.t('claims.modalStepperLabel.createLoss'), formEditedStatus: false, isSubmitted: false },\r\n    { id: 1, form: utils.string.t('claims.modalStepperLabel.linkPolicies'), formEditedStatus: false, isSubmitted: false },\r\n    { id: 2, form: utils.string.t('claims.modalStepperLabel.createClaim'), formEditedStatus: false, isSubmitted: false },\r\n    { id: 3, form: utils.string.t('claims.modalStepperLabel.manageDocuments'), formEditedStatus: false, isSubmitted: false },\r\n    { id: 4, form: utils.string.t('claims.modalStepperLabel.confirmation'), formEditedStatus: false, isSubmitted: false },\r\n  ]);\r\n  const [isAnyformDirty, checkDirtyStatus] = useState(false);\r\n  // On click of Finish button\r\n  const launchFinishModal = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          title: utils.string.t('claims.modals.finishRegisterLoss.title'),\r\n          fullWidth: true,\r\n          maxWidth: 'sm',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('app.yes'),\r\n            cancelLabel: utils.string.t('app.no'),\r\n            confirmMessage: (\r\n              <Typography variant=\"h5\" color=\"secondary\">\r\n                {utils.string.t('claims.modals.finishRegisterLoss.content')}\r\n              </Typography>\r\n            ),\r\n            submitHandler: () => {\r\n              dispatch(submitClaimDetailsInformation());\r\n              dispatch(resetClaimData());\r\n              history.push(config.routes.claimsFNOL.root);\r\n            },\r\n            handleClose: () => {},\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n  const getAllReferentialData = () => {\r\n    if (utils.generic.isInvalidOrEmptyArray(catCodes)) {\r\n      dispatch(getCatCodes());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(priorities)) {\r\n      dispatch(getPriorityLevels());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(lossQualifiers)) {\r\n      dispatch(getLossQualifiers());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(claimsStatuses)) {\r\n      dispatch(getStatuses());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(settlementCurrency)) {\r\n      dispatch(getSettlementCurrency());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(referralResponse)) {\r\n      dispatch(getReferralResponse());\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    getAllReferentialData();\r\n    setFnolModalOpen(true);\r\n    return () => {\r\n      dispatch(resetClaimData());\r\n      dispatch(resetLinkPolicies());\r\n    };\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n  const handleFnolModalClose = () => {\r\n    if (isAnyformDirty) {\r\n      dispatch(\r\n        showModal({\r\n          component: 'CONFIRM',\r\n          props: {\r\n            title: utils.string.t('status.alert'),\r\n            hint: utils.string.t('navigation.title'),\r\n            fullWidth: true,\r\n            maxWidth: 'xs',\r\n            componentProps: {\r\n              cancelLabel: utils.string.t('app.no'),\r\n              confirmLabel: utils.string.t('app.yes'),\r\n              submitHandler: () => {\r\n                setFnolModalOpen(false);\r\n                location?.state?.redirectUrl ? history.push(location?.state?.redirectUrl) :  history.push(config.routes.claimsFNOL.root);\r\n              },\r\n            },\r\n          },\r\n        })\r\n      );\r\n    }\r\n  };\r\n  const findDirtyForm = (forms) => {\r\n    editFormStatus(forms?.map((form) => ({ ...form })));\r\n    checkDirtyStatus(forms.some((form) => form?.formEditedStatus === true));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CustomizedDialog\r\n        parentRef={rootRef}\r\n        dialogOpen={fnolModalOpen}\r\n        modalTitle={utils.string.t('claims.modalStepperLabel.title')}\r\n        handlers={{\r\n          handleDialogClose: handleFnolModalClose,\r\n        }}\r\n        redirectUrl={location?.state?.redirectUrl}\r\n        isDirty={isAnyformDirty}\r\n      >\r\n        <Helmet>\r\n          <title>{`${utils.string.t('claims.actions.registerNewLoss')} - ${utils.app.getAppName(brand)}`}</title>\r\n        </Helmet>\r\n        <ClaimsRegisterNewLoss\r\n          initialFormStatus={forms}\r\n          steps={forms.map((frm) => frm?.form)}\r\n          stepsForms={forms}\r\n          currentStep={currentStep}\r\n          launchFinishModal={launchFinishModal}\r\n          findDirtyForm={(forms) => {\r\n            findDirtyForm(forms);\r\n          }}\r\n          lossProperties={location?.state?.loss ?? {}}\r\n        />\r\n      </CustomizedDialog>\r\n      {fnolModalOpen && (\r\n        <DrawerComponent isDrawerOpen>\r\n          <DmsFnolWidget />\r\n        </DrawerComponent>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}