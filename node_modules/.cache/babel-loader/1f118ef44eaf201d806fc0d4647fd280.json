{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ClaimsManageDocuments\\\\ClaimsManageDocuments.js\",\n    _s = $RefreshSig$();\n\nimport { React, useEffect, useState, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ClaimsManageDocumentsView } from './ClaimsManageDocuments.view';\nimport { selectorDmsViewFiles, getViewTableDocuments, selectClaimIdFromGrid, selectLossId, unlinkDmsViewDocuments, viewDocumentsDelete, showModal, viewDocumentsDownload, postClaimAndLossDocumentsToGxb, resetDmsDocumentsUpload, resetDmsDocumentsView, resetDmsDocumentsHistory, resetFilesUploaded, selectDmsDocDetails } from 'stores';\nimport * as utils from 'utils';\nimport * as constants from 'consts';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nClaimsManageDocuments.propTypes = {\n  isAllStepsCompleted: PropTypes.bool.isRequired,\n  activeStep: PropTypes.number.isRequired,\n  lastStep: PropTypes.bool.isRequired,\n  handleCancel: PropTypes.func.isRequired,\n  handleFinish: PropTypes.func.isRequired,\n  handleNext: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleSave: PropTypes.func.isRequired\n};\nexport default function ClaimsManageDocuments(props) {\n  _s();\n\n  var activeStep = props.activeStep,\n      isAllStepsCompleted = props.isAllStepsCompleted,\n      handleBack = props.handleBack,\n      handleNext = props.handleNext,\n      index = props.index,\n      isFormsEdited = props.isFormsEdited,\n      onSaveHandle = props.onSaveHandle;\n  var dispatch = useDispatch();\n  var claimDetails = useSelector(selectClaimIdFromGrid);\n  var lossDetails = useSelector(selectLossId);\n  var sectionType = constants.DMS_CONTEXT_CLAIM;\n  var viewDocumentsList = useSelector(selectorDmsViewFiles);\n  var savedDmsDocList = useSelector(selectDmsDocDetails);\n  var claimDocuments = [];\n  var lossDocuments = [];\n\n  var updateClaimFileListAfterLinking = function updateClaimFileListAfterLinking() {\n    dispatch(getViewTableDocuments({\n      referenceId: claimDetails === null || claimDetails === void 0 ? void 0 : claimDetails.claimReference,\n      sectionType: sectionType,\n      parentLossRef: lossDetails === null || lossDetails === void 0 ? void 0 : lossDetails.lossRef\n    }));\n  };\n\n  var sendDocumentToGXB = function sendDocumentToGXB(documents) {\n    dispatch(postClaimAndLossDocumentsToGxb({\n      referenceId: claimDetails === null || claimDetails === void 0 ? void 0 : claimDetails.claimReference,\n      sectionType: sectionType,\n      documents: documents\n    }));\n  };\n\n  useEffect(function () {\n    var _savedDmsDocList$mana, _savedDmsDocList$mana2, _savedDmsDocList$mana3, _savedDmsDocList$mana4;\n\n    if (!(savedDmsDocList === null || savedDmsDocList === void 0 ? void 0 : (_savedDmsDocList$mana = savedDmsDocList.manageDocument) === null || _savedDmsDocList$mana === void 0 ? void 0 : (_savedDmsDocList$mana2 = _savedDmsDocList$mana.lossDocumentDetails) === null || _savedDmsDocList$mana2 === void 0 ? void 0 : _savedDmsDocList$mana2.length) || !(savedDmsDocList === null || savedDmsDocList === void 0 ? void 0 : (_savedDmsDocList$mana3 = savedDmsDocList.manageDocument) === null || _savedDmsDocList$mana3 === void 0 ? void 0 : (_savedDmsDocList$mana4 = _savedDmsDocList$mana3.claimDocumentDetails) === null || _savedDmsDocList$mana4 === void 0 ? void 0 : _savedDmsDocList$mana4.length)) {\n      updateClaimFileListAfterLinking();\n    }\n\n    return function () {\n      dispatch(resetDmsDocumentsUpload());\n      dispatch(resetDmsDocumentsView());\n      dispatch(resetDmsDocumentsHistory());\n      dispatch(resetFilesUploaded());\n    };\n  }, [] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var _savedDmsDocList$mana5 = savedDmsDocList === null || savedDmsDocList === void 0 ? void 0 : savedDmsDocList.manageDocument,\n      lossDocumentDetails = _savedDmsDocList$mana5.lossDocumentDetails,\n      claimDocumentDetails = _savedDmsDocList$mana5.claimDocumentDetails; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n\n  var existedDocumentList = useMemo(function () {\n    return !utils.generic.isInvalidOrEmptyArray(viewDocumentsList) ? viewDocumentsList : [].concat(_toConsumableArray(lossDocumentDetails), _toConsumableArray(claimDocumentDetails));\n  });\n  var originalTableData = useRef(existedDocumentList);\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      search = _useState2[0],\n      setSearch = _useState2[1];\n\n  var _useState3 = useState(originalTableData.current),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredTableData = _useState4[0],\n      setFilteredTableData = _useState4[1];\n\n  var searchIndexedTableData = utils.dmsSearch.constructSearchableData(filteredTableData);\n  var fields = utils.generic.isValidArray(existedDocumentList, true) ? existedDocumentList === null || existedDocumentList === void 0 ? void 0 : existedDocumentList.map(function (eachCheck) {\n    return {\n      name: eachCheck === null || eachCheck === void 0 ? void 0 : eachCheck.documentId.toString(),\n      type: 'checkbox',\n      defaultValue: eachCheck.isSendToGxb\n    };\n  }) : [];\n  var validationSchema = utils.form.getValidationSchema(fields);\n  var checkListForm = useForm(_objectSpread({}, validationSchema && {\n    resolver: yupResolver(validationSchema),\n    context: {\n      validation: true\n    }\n  }));\n  var defaultCheckValues = existedDocumentList === null || existedDocumentList === void 0 ? void 0 : existedDocumentList.filter(function (item) {\n    return !!item.isSendToGxb === true;\n  }).length;\n\n  var _useState5 = useState(defaultCheckValues === existedDocumentList.length),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectAll = _useState6[0],\n      setSelectAll = _useState6[1];\n\n  filteredTableData === null || filteredTableData === void 0 ? void 0 : filteredTableData.forEach(function (item) {\n    if (item === null || item === void 0 ? void 0 : item.isLinkedFromLoss) {\n      lossDocuments.push(item);\n    } else {\n      claimDocuments.push(item);\n    }\n  });\n  var columns = [{\n    id: 'gxb',\n    label: utils.string.t('claims.manageDocumentLabels.gxb'),\n    visible: true,\n    compact: true,\n    align: 'left'\n  }, {\n    id: 'filename',\n    label: utils.string.t('claims.manageDocumentLabels.filename'),\n    visible: true,\n    compact: true,\n    align: 'left',\n    width: '25px'\n  }, {\n    id: 'uploadedby',\n    label: utils.string.t('claims.manageDocumentLabels.uploadedby'),\n    visible: true,\n    compact: true,\n    align: 'left'\n  }, {\n    id: 'uploadedon',\n    label: utils.string.t('claims.manageDocumentLabels.uploadedon'),\n    visible: true,\n    compact: true,\n    align: 'left'\n  }];\n  var popoverActions = [{\n    id: 'download',\n    label: utils.string.t('dms.view.popOverMenuItems.download'),\n    callback: function callback(_ref) {\n      var doc = _ref.doc;\n      return dispatch(viewDocumentsDownload(doc));\n    }\n  }, {\n    id: 'unlink',\n    label: utils.string.t('dms.view.popOverMenuItems.unlink'),\n    callback: function callback(_ref2) {\n      var doc = _ref2.doc;\n      return confirmDocumentUnlink([doc]);\n    }\n  }, {\n    id: 'delete',\n    label: utils.string.t('dms.view.popOverMenuItems.delete'),\n    callback: function callback(_ref3) {\n      var doc = _ref3.doc;\n      return confirmDocumentDelete([doc]);\n    }\n  }, {\n    id: 'versionHistory',\n    label: utils.string.t('dms.view.popOverMenuItems.versionHistory'),\n    callback: function callback(_ref4) {\n      var doc = _ref4.doc;\n      return showVersionHistoryModal(doc);\n    }\n  }];\n  var searchFields = [{\n    name: 'query',\n    type: 'text',\n    placeholder: utils.string.t('claims.manageDocumentLabels.searchPlaceholder'),\n    defaultValue: '',\n    gridSize: {\n      xs: 12\n    },\n    muiComponentProps: {\n      autoComplete: 'off'\n    }\n  }];\n  var searchActions = [{\n    name: 'filter',\n    label: utils.string.t('app.searchLabel'),\n    handler: function handler(_ref5) {\n      var query = _ref5.query;\n      return setSearch(query);\n    }\n  }, {\n    name: 'reset',\n    label: utils.string.t('app.reset'),\n    handler: function handler() {\n      return setSearch('');\n    }\n  }];\n\n  var confirmDocumentUnlink = function confirmDocumentUnlink(docs) {\n    var requestParams = docs === null || docs === void 0 ? void 0 : docs.map(function (d) {\n      return {\n        documentId: d.documentId,\n        referenceId: claimDetails === null || claimDetails === void 0 ? void 0 : claimDetails.claimReference,\n        sectionType: sectionType\n      };\n    });\n    var requestParamsLength = requestParams === null || requestParams === void 0 ? void 0 : requestParams.length;\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('dms.view.unlinkDocument.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('dms.view.unlinkDocument.confirmLabel'),\n          confirmMessage: requestParamsLength === 1 ? utils.string.t('dms.view.unlinkDocument.confirmMessage') : utils.string.t('dms.view.unlinkDocument.confirmMessageForMulti', {\n            count: requestParamsLength\n          }),\n          submitHandler: function submitHandler() {\n            return dispatch(unlinkDmsViewDocuments(requestParams)).then(function (response) {\n              if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n                updateClaimFileListAfterLinking();\n              }\n            });\n          }\n        }\n      }\n    }));\n  };\n\n  var confirmDocumentDelete = function confirmDocumentDelete(docs) {\n    var documentIds = docs === null || docs === void 0 ? void 0 : docs.map(function (doc) {\n      return doc.documentId;\n    });\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('dms.view.deleteDocument.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('dms.view.deleteDocument.confirmLabel'),\n          confirmMessage: utils.string.t('dms.view.deleteDocument.confirmMessage'),\n          submitHandler: function submitHandler() {\n            return dispatch(viewDocumentsDelete(documentIds)).then(function (response) {\n              if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n                updateClaimFileListAfterLinking();\n              }\n            });\n          }\n        }\n      }\n    }));\n  };\n\n  var showVersionHistoryModal = function showVersionHistoryModal(docData) {\n    dispatch(showModal({\n      component: 'DMS_VERSION_HISTORY',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('dms.view.versionHistory.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          docData: docData\n        }\n      }\n    }));\n  };\n\n  useEffect(function () {\n    if (search) {\n      setFilteredTableData(utils.dmsSearch.getFilteredTableData(searchIndexedTableData, search, originalTableData));\n    } else setFilteredTableData(originalTableData.current);\n  }, [search]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    originalTableData.current = existedDocumentList;\n    setFilteredTableData(originalTableData.current);\n  }, [existedDocumentList]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(ClaimsManageDocumentsView, {\n    activeStep: activeStep,\n    isAllStepsCompleted: isAllStepsCompleted,\n    handleBack: handleBack,\n    handleNext: handleNext,\n    index: index,\n    isFormsEdited: isFormsEdited,\n    onSaveHandle: onSaveHandle,\n    col: columns,\n    fields: fields,\n    formControls: checkListForm,\n    popoverActions: popoverActions,\n    searchFields: searchFields,\n    searchActions: searchActions,\n    claimDocuments: claimDocuments,\n    lossDocuments: lossDocuments,\n    updateClaimFileListAfterLinking: updateClaimFileListAfterLinking,\n    sendDocumentToGXB: sendDocumentToGXB,\n    selectAll: selectAll,\n    setSelectAll: setSelectAll\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClaimsManageDocuments, \"TBidA9Rastuc8q96+WEo5vUnBfI=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useForm];\n});\n\n_c = ClaimsManageDocuments;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimsManageDocuments\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ClaimsManageDocuments/ClaimsManageDocuments.js"],"names":["React","useEffect","useState","useRef","useMemo","PropTypes","useDispatch","useSelector","ClaimsManageDocumentsView","selectorDmsViewFiles","getViewTableDocuments","selectClaimIdFromGrid","selectLossId","unlinkDmsViewDocuments","viewDocumentsDelete","showModal","viewDocumentsDownload","postClaimAndLossDocumentsToGxb","resetDmsDocumentsUpload","resetDmsDocumentsView","resetDmsDocumentsHistory","resetFilesUploaded","selectDmsDocDetails","utils","constants","useForm","yupResolver","ClaimsManageDocuments","propTypes","isAllStepsCompleted","bool","isRequired","activeStep","number","lastStep","handleCancel","func","handleFinish","handleNext","handleBack","handleSave","props","index","isFormsEdited","onSaveHandle","dispatch","claimDetails","lossDetails","sectionType","DMS_CONTEXT_CLAIM","viewDocumentsList","savedDmsDocList","claimDocuments","lossDocuments","updateClaimFileListAfterLinking","referenceId","claimReference","parentLossRef","lossRef","sendDocumentToGXB","documents","manageDocument","lossDocumentDetails","length","claimDocumentDetails","existedDocumentList","generic","isInvalidOrEmptyArray","originalTableData","search","setSearch","current","filteredTableData","setFilteredTableData","searchIndexedTableData","dmsSearch","constructSearchableData","fields","isValidArray","map","eachCheck","name","documentId","toString","type","defaultValue","isSendToGxb","validationSchema","form","getValidationSchema","checkListForm","resolver","context","validation","defaultCheckValues","filter","item","selectAll","setSelectAll","forEach","isLinkedFromLoss","push","columns","id","label","string","t","visible","compact","align","width","popoverActions","callback","doc","confirmDocumentUnlink","confirmDocumentDelete","showVersionHistoryModal","searchFields","placeholder","gridSize","xs","muiComponentProps","autoComplete","searchActions","handler","query","docs","requestParams","d","requestParamsLength","component","fullWidth","title","maxWidth","componentProps","confirmLabel","confirmMessage","count","submitHandler","then","response","status","API_RESPONSE_OK","documentIds","docData","getFilteredTableData"],"mappings":"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","sourcesContent":["import { React, useEffect, useState, useRef, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { ClaimsManageDocumentsView } from './ClaimsManageDocuments.view';\r\nimport {\r\n  selectorDmsViewFiles,\r\n  getViewTableDocuments,\r\n  selectClaimIdFromGrid,\r\n  selectLossId,\r\n  unlinkDmsViewDocuments,\r\n  viewDocumentsDelete,\r\n  showModal,\r\n  viewDocumentsDownload,\r\n  postClaimAndLossDocumentsToGxb,\r\n  resetDmsDocumentsUpload,\r\n  resetDmsDocumentsView,\r\n  resetDmsDocumentsHistory,\r\n  resetFilesUploaded,\r\n  selectDmsDocDetails,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport * as constants from 'consts';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\nClaimsManageDocuments.propTypes = {\r\n  isAllStepsCompleted: PropTypes.bool.isRequired,\r\n  activeStep: PropTypes.number.isRequired,\r\n  lastStep: PropTypes.bool.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n  handleFinish: PropTypes.func.isRequired,\r\n  handleNext: PropTypes.func.isRequired,\r\n  handleBack: PropTypes.func.isRequired,\r\n  handleSave: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default function ClaimsManageDocuments(props) {\r\n  const { activeStep, isAllStepsCompleted, handleBack, handleNext, index, isFormsEdited, onSaveHandle } = props;\r\n\r\n  const dispatch = useDispatch();\r\n  const claimDetails = useSelector(selectClaimIdFromGrid);\r\n  const lossDetails = useSelector(selectLossId);\r\n  const sectionType = constants.DMS_CONTEXT_CLAIM;\r\n\r\n  const viewDocumentsList = useSelector(selectorDmsViewFiles);\r\n  const savedDmsDocList = useSelector(selectDmsDocDetails);\r\n\r\n  const claimDocuments = [];\r\n  const lossDocuments = [];\r\n\r\n  const updateClaimFileListAfterLinking = () => {\r\n    dispatch(getViewTableDocuments({ referenceId: claimDetails?.claimReference, sectionType, parentLossRef: lossDetails?.lossRef }));\r\n  };\r\n\r\n  const sendDocumentToGXB = (documents) => {\r\n    dispatch(postClaimAndLossDocumentsToGxb({ referenceId: claimDetails?.claimReference, sectionType: sectionType, documents: documents }));\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      if (!savedDmsDocList?.manageDocument?.lossDocumentDetails?.length || !savedDmsDocList?.manageDocument?.claimDocumentDetails?.length) {\r\n        updateClaimFileListAfterLinking();\r\n      }\r\n      return () => {\r\n        dispatch(resetDmsDocumentsUpload());\r\n        dispatch(resetDmsDocumentsView());\r\n        dispatch(resetDmsDocumentsHistory());\r\n        dispatch(resetFilesUploaded());\r\n      };\r\n    },\r\n    [] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const { lossDocumentDetails, claimDocumentDetails } = savedDmsDocList?.manageDocument;\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const existedDocumentList = useMemo(() => !utils.generic.isInvalidOrEmptyArray(viewDocumentsList) ?\r\n    viewDocumentsList : [...lossDocumentDetails, ...claimDocumentDetails]);\r\n\r\n  const originalTableData = useRef(existedDocumentList);\r\n\r\n  const [search, setSearch] = useState('');\r\n  const [filteredTableData, setFilteredTableData] = useState(originalTableData.current);\r\n  const searchIndexedTableData = utils.dmsSearch.constructSearchableData(filteredTableData);\r\n\r\n  const fields = utils.generic.isValidArray(existedDocumentList, true)\r\n    ? existedDocumentList?.map((eachCheck) => ({\r\n        name: eachCheck?.documentId.toString(),\r\n        type: 'checkbox',\r\n        defaultValue: eachCheck.isSendToGxb,\r\n      }))\r\n    : [];\r\n\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n  const checkListForm = useForm({\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema), context: { validation: true } }),\r\n  });\r\n\r\n  const defaultCheckValues = existedDocumentList?.filter((item) => !!item.isSendToGxb === true).length;\r\n  const [selectAll, setSelectAll] = useState(defaultCheckValues === existedDocumentList.length);\r\n\r\n  filteredTableData?.forEach((item) => {\r\n    if (item?.isLinkedFromLoss) {\r\n      lossDocuments.push(item);\r\n    } else {\r\n      claimDocuments.push(item);\r\n    }\r\n  });\r\n\r\n  const columns = [\r\n    {\r\n      id: 'gxb',\r\n      label: utils.string.t('claims.manageDocumentLabels.gxb'),\r\n      visible: true,\r\n      compact: true,\r\n      align: 'left',\r\n    },\r\n    {\r\n      id: 'filename',\r\n      label: utils.string.t('claims.manageDocumentLabels.filename'),\r\n      visible: true,\r\n      compact: true,\r\n      align: 'left',\r\n      width: '25px',\r\n    },\r\n    {\r\n      id: 'uploadedby',\r\n      label: utils.string.t('claims.manageDocumentLabels.uploadedby'),\r\n      visible: true,\r\n      compact: true,\r\n      align: 'left',\r\n    },\r\n    {\r\n      id: 'uploadedon',\r\n      label: utils.string.t('claims.manageDocumentLabels.uploadedon'),\r\n      visible: true,\r\n      compact: true,\r\n      align: 'left',\r\n    },\r\n  ];\r\n\r\n  const popoverActions = [\r\n    {\r\n      id: 'download',\r\n      label: utils.string.t('dms.view.popOverMenuItems.download'),\r\n      callback: ({ doc }) => dispatch(viewDocumentsDownload(doc)),\r\n    },\r\n    {\r\n      id: 'unlink',\r\n      label: utils.string.t('dms.view.popOverMenuItems.unlink'),\r\n      callback: ({ doc }) => confirmDocumentUnlink([doc]),\r\n    },\r\n    {\r\n      id: 'delete',\r\n      label: utils.string.t('dms.view.popOverMenuItems.delete'),\r\n      callback: ({ doc }) => confirmDocumentDelete([doc]),\r\n    },\r\n    {\r\n      id: 'versionHistory',\r\n      label: utils.string.t('dms.view.popOverMenuItems.versionHistory'),\r\n      callback: ({ doc }) => showVersionHistoryModal(doc),\r\n    },\r\n  ];\r\n\r\n  const searchFields = [\r\n    {\r\n      name: 'query',\r\n      type: 'text',\r\n      placeholder: utils.string.t('claims.manageDocumentLabels.searchPlaceholder'),\r\n      defaultValue: '',\r\n      gridSize: { xs: 12 },\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n      },\r\n    },\r\n  ];\r\n\r\n  const searchActions = [\r\n    {\r\n      name: 'filter',\r\n      label: utils.string.t('app.searchLabel'),\r\n      handler: ({ query }) => setSearch(query),\r\n    },\r\n    {\r\n      name: 'reset',\r\n      label: utils.string.t('app.reset'),\r\n      handler: () => setSearch(''),\r\n    },\r\n  ];\r\n\r\n  const confirmDocumentUnlink = (docs) => {\r\n    const requestParams = docs?.map((d) => {\r\n      return {\r\n        documentId: d.documentId,\r\n        referenceId: claimDetails?.claimReference,\r\n        sectionType: sectionType,\r\n      };\r\n    });\r\n    const requestParamsLength = requestParams?.length;\r\n\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('dms.view.unlinkDocument.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('dms.view.unlinkDocument.confirmLabel'),\r\n            confirmMessage:\r\n              requestParamsLength === 1\r\n                ? utils.string.t('dms.view.unlinkDocument.confirmMessage')\r\n                : utils.string.t('dms.view.unlinkDocument.confirmMessageForMulti', {\r\n                    count: requestParamsLength,\r\n                  }),\r\n            submitHandler: () =>\r\n              dispatch(unlinkDmsViewDocuments(requestParams)).then((response) => {\r\n                if (response?.status === constants.API_RESPONSE_OK) {\r\n                  updateClaimFileListAfterLinking();\r\n                }\r\n              }),\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const confirmDocumentDelete = (docs) => {\r\n    const documentIds = docs?.map((doc) => doc.documentId);\r\n\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('dms.view.deleteDocument.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('dms.view.deleteDocument.confirmLabel'),\r\n            confirmMessage: utils.string.t('dms.view.deleteDocument.confirmMessage'),\r\n            submitHandler: () =>\r\n              dispatch(viewDocumentsDelete(documentIds)).then((response) => {\r\n                if (response?.status === constants.API_RESPONSE_OK) {\r\n                  updateClaimFileListAfterLinking();\r\n                }\r\n              }),\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const showVersionHistoryModal = (docData) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'DMS_VERSION_HISTORY',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('dms.view.versionHistory.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            docData: docData,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (search) {\r\n      setFilteredTableData(utils.dmsSearch.getFilteredTableData(searchIndexedTableData, search, originalTableData));\r\n    } else setFilteredTableData(originalTableData.current);\r\n  }, [search]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    originalTableData.current = existedDocumentList;\r\n    setFilteredTableData(originalTableData.current);\r\n  }, [existedDocumentList]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <ClaimsManageDocumentsView\r\n      activeStep={activeStep}\r\n      isAllStepsCompleted={isAllStepsCompleted}\r\n      handleBack={handleBack}\r\n      handleNext={handleNext}\r\n      index={index}\r\n      isFormsEdited={isFormsEdited}\r\n      onSaveHandle={onSaveHandle}\r\n      col={columns}\r\n      fields={fields}\r\n      formControls={checkListForm}\r\n      popoverActions={popoverActions}\r\n      searchFields={searchFields}\r\n      searchActions={searchActions}\r\n      claimDocuments={claimDocuments}\r\n      lossDocuments={lossDocuments}\r\n      updateClaimFileListAfterLinking={updateClaimFileListAfterLinking}\r\n      sendDocumentToGXB={sendDocumentToGXB}\r\n      selectAll={selectAll}\r\n      setSelectAll={setSelectAll}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}