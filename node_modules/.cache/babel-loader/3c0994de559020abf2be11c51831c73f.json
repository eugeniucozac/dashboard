{"ast":null,"code":"var _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\PremiumProcessingCaseRFI\\\\PremiumProcessingCaseRFI.view.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport get from 'lodash/get'; // app\n\nimport { Tabs, AccessControl, Empty } from 'components';\nimport { PremiumProcessingCaseRfiRespond, PremiumProcessingCaseRfiResolve, PremiumProcessingCaseRFIForm } from 'modules';\nimport { PREMIUM_PROCESSING_TAB_NEW_RFI, RFI_STATUS, SENIOR_MANAGER, FRONT_END_CONTACT, AUTHORISED_SIGNATORY, WORKBASKET, ALL_CASES, RESOLVE_SENDTOFEC_YES, OPERATIONS_LEAD, ROLE_TECHNICIAN_MANAGER, INTERNAL_RFITYPE } from 'consts';\nimport { selectUserRole, selectcaseRfiSubTabs } from 'stores';\nimport * as utils from 'utils';\nimport { ReactComponent as IconSearchFile } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/line-icon-search-file.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nPremiumProcessingCaseRFIView.propTypes = {\n  caseDetails: PropTypes.object.isRequired,\n  rfiDetails: PropTypes.object,\n  newRfiUsers: PropTypes.array.isRequired,\n  subTabs: PropTypes.array.isRequired,\n  selectedSubTab: PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    status: PropTypes.string.isRequired\n  }).isRequired,\n  isPageDirty: PropTypes.bool.isRequired,\n  isCreatedByLoginUser: PropTypes.bool.isRequired,\n  hasResponseRfiPermission: PropTypes.bool,\n  isWorklist: PropTypes.bool,\n  isHistoryCases: PropTypes.bool,\n  handlers: PropTypes.shape({\n    selectTab: PropTypes.func.isRequired,\n    stayOnTab: PropTypes.func.isRequired,\n    switchTab: PropTypes.func.isRequired,\n    setIsPageDirty: PropTypes.func.isRequired\n  })\n};\nexport default function PremiumProcessingCaseRFIView(_ref) {\n  _s();\n\n  var caseDetails = _ref.caseDetails,\n      rfiDetails = _ref.rfiDetails,\n      newRfiUsers = _ref.newRfiUsers,\n      subTabs = _ref.subTabs,\n      selectedSubTab = _ref.selectedSubTab,\n      isPageDirty = _ref.isPageDirty,\n      isCreatedByLoginUser = _ref.isCreatedByLoginUser,\n      handlers = _ref.handlers,\n      hasRfiTabPermission = _ref.hasRfiTabPermission,\n      isWorklist = _ref.isWorklist,\n      isHistoryCases = _ref.isHistoryCases;\n  var currentUser = useSelector(selectUserRole);\n  var isSeniorManager = utils.generic.isValidArray(currentUser, true) && currentUser.some(function (item) {\n    return [SENIOR_MANAGER.toLowerCase()].includes(item.name.toLowerCase());\n  });\n  var isAuthorisedSignatory = utils.generic.isValidArray(currentUser, true) && currentUser.some(function (item) {\n    return [AUTHORISED_SIGNATORY.toLowerCase()].includes(item.name.toLowerCase());\n  });\n  var isFrontEndContact = utils.generic.isValidArray(currentUser, true) && currentUser.some(function (item) {\n    return [FRONT_END_CONTACT.toLowerCase()].includes(item.name.toLowerCase());\n  });\n  var isOperationsLead = utils.generic.isValidArray(currentUser, true) && currentUser.some(function (item) {\n    return [OPERATIONS_LEAD.toLowerCase()].includes(item.name.toLowerCase());\n  });\n  var isTechnicianManager = utils.generic.isValidArray(currentUser, true) && currentUser.some(function (item) {\n    return [ROLE_TECHNICIAN_MANAGER.toLowerCase()].includes(item.name.toLowerCase());\n  });\n  var isWorkBasketOrAllCases = (caseDetails === null || caseDetails === void 0 ? void 0 : caseDetails.taskView) === WORKBASKET || (caseDetails === null || caseDetails === void 0 ? void 0 : caseDetails.taskView) === ALL_CASES;\n  var isNotResolvedOrSendToFECValue = (rfiDetails === null || rfiDetails === void 0 ? void 0 : rfiDetails.isNotResolvedOrSendToFEC) === RESOLVE_SENDTOFEC_YES && (rfiDetails === null || rfiDetails === void 0 ? void 0 : rfiDetails.status) === RFI_STATUS.OPEN;\n\n  if (isWorkBasketOrAllCases || isNotResolvedOrSendToFECValue || isTechnicianManager) {\n    isCreatedByLoginUser = true;\n  }\n\n  var rfiInternal = (rfiDetails === null || rfiDetails === void 0 ? void 0 : rfiDetails.rfiType) === INTERNAL_RFITYPE;\n  var permissions = isSeniorManager || isFrontEndContact || isOperationsLead ? ['read'] : ['read', 'create', 'update', 'delete'];\n  var isOpen = selectedSubTab.status === RFI_STATUS.OPEN;\n  var isNewRfi = selectedSubTab.id === PREMIUM_PROCESSING_TAB_NEW_RFI;\n\n  if (isSeniorManager && isOpen) {\n    isNewRfi = true;\n  }\n\n  var showReadOnlyForm = isOpen && isCreatedByLoginUser;\n  var isResponded = selectedSubTab.status === RFI_STATUS.RESPONSE_RECEIVED;\n  var isResolved = selectedSubTab.status === RFI_STATUS.RESOLVED;\n  var hasRfiTabPermissionValue = isAuthorisedSignatory ? !hasRfiTabPermission : hasRfiTabPermission;\n\n  if (isFrontEndContact && isNewRfi || subTabs.length === 0) {\n    isNewRfi = false;\n  }\n\n  var rfiSubTabs = useSelector(selectcaseRfiSubTabs);\n  var notificationObj = useSelector(function (state) {\n    return get(state, 'notifications.notificationList');\n  });\n  var isRfiNotification;\n  rfiSubTabs.forEach(function (rfiSub) {\n    notificationObj.forEach(function (notify) {\n      var taskIdNotifiy = notify.refId.split('||')[1];\n\n      if (taskIdNotifiy === rfiSub.taskId) {\n        return isRfiNotification = true;\n      }\n    });\n  });\n  isRfiNotification = isRfiNotification === true ? true : false;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [hasRfiTabPermissionValue && /*#__PURE__*/_jsxDEV(AccessControl, {\n      feature: \"premiumProcessing.RFITab\",\n      permissions: \"read\",\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        tabs: subTabs,\n        overrideTab: selectedSubTab === null || selectedSubTab === void 0 ? void 0 : selectedSubTab.id,\n        onChange: function onChange(tabName) {\n          return handlers.selectTab(tabName);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), (isNewRfi || showReadOnlyForm) && /*#__PURE__*/_jsxDEV(AccessControl, {\n      feature: \"premiumProcessing.CreateRFI\",\n      permissions: permissions,\n      children: /*#__PURE__*/_jsxDEV(PremiumProcessingCaseRFIForm, {\n        caseDetails: caseDetails,\n        rfiDetails: rfiDetails,\n        newRfiUsers: newRfiUsers,\n        isEditable: isNewRfi,\n        isPageDirty: isPageDirty,\n        isWorklist: isWorklist,\n        isSeniorManager: isSeniorManager,\n        handlers: handlers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), !isNewRfi && isOpen && /*#__PURE__*/_jsxDEV(AccessControl, {\n      feature: \"premiumProcessing.ResponseRFI\",\n      permissions: permissions,\n      children: /*#__PURE__*/_jsxDEV(PremiumProcessingCaseRfiRespond, {\n        caseDetails: caseDetails,\n        rfiDetails: rfiDetails,\n        isPageDirty: isPageDirty,\n        isWorklist: isWorklist,\n        handlers: handlers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this), !isNewRfi && (isResponded || isResolved) && /*#__PURE__*/_jsxDEV(AccessControl, {\n      feature: \"premiumProcessing.ResolveRFI\",\n      permissions: permissions,\n      children: /*#__PURE__*/_jsxDEV(PremiumProcessingCaseRfiResolve, {\n        rfiDetails: rfiDetails,\n        isEditable: isFrontEndContact && isResponded ? !isResponded : isResponded,\n        isPageDirty: isPageDirty,\n        isResolved: isResolved,\n        handlers: handlers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }, this), (!isRfiNotification && isFrontEndContact && !rfiInternal && !isNewRfi && !isResolved || subTabs.length === 0 && isHistoryCases) && /*#__PURE__*/_jsxDEV(Empty, {\n      title: utils.string.t('claims.noMatchFound'),\n      icon: /*#__PURE__*/_jsxDEV(IconSearchFile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 68\n      }, this),\n      padding: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PremiumProcessingCaseRFIView, \"/o+fb2EKxViLPjwAcGhlTf/Cm2Q=\", false, function () {\n  return [useSelector, useSelector, useSelector];\n});\n\n_c = PremiumProcessingCaseRFIView;\n\nvar _c;\n\n$RefreshReg$(_c, \"PremiumProcessingCaseRFIView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/PremiumProcessingCaseRFI/PremiumProcessingCaseRFI.view.js"],"names":["React","PropTypes","useSelector","get","Tabs","AccessControl","Empty","PremiumProcessingCaseRfiRespond","PremiumProcessingCaseRfiResolve","PremiumProcessingCaseRFIForm","PREMIUM_PROCESSING_TAB_NEW_RFI","RFI_STATUS","SENIOR_MANAGER","FRONT_END_CONTACT","AUTHORISED_SIGNATORY","WORKBASKET","ALL_CASES","RESOLVE_SENDTOFEC_YES","OPERATIONS_LEAD","ROLE_TECHNICIAN_MANAGER","INTERNAL_RFITYPE","selectUserRole","selectcaseRfiSubTabs","utils","PremiumProcessingCaseRFIView","propTypes","caseDetails","object","isRequired","rfiDetails","newRfiUsers","array","subTabs","selectedSubTab","shape","id","oneOfType","string","number","status","isPageDirty","bool","isCreatedByLoginUser","hasResponseRfiPermission","isWorklist","isHistoryCases","handlers","selectTab","func","stayOnTab","switchTab","setIsPageDirty","hasRfiTabPermission","currentUser","isSeniorManager","generic","isValidArray","some","item","toLowerCase","includes","name","isAuthorisedSignatory","isFrontEndContact","isOperationsLead","isTechnicianManager","isWorkBasketOrAllCases","taskView","isNotResolvedOrSendToFECValue","isNotResolvedOrSendToFEC","OPEN","rfiInternal","rfiType","permissions","isOpen","isNewRfi","showReadOnlyForm","isResponded","RESPONSE_RECEIVED","isResolved","RESOLVED","hasRfiTabPermissionValue","length","rfiSubTabs","notificationObj","state","isRfiNotification","forEach","rfiSub","notify","taskIdNotifiy","refId","split","taskId","tabName","t"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { Tabs, AccessControl, Empty } from 'components';\r\nimport { PremiumProcessingCaseRfiRespond, PremiumProcessingCaseRfiResolve, PremiumProcessingCaseRFIForm } from 'modules';\r\nimport {\r\n  PREMIUM_PROCESSING_TAB_NEW_RFI,\r\n  RFI_STATUS,\r\n  SENIOR_MANAGER,\r\n  FRONT_END_CONTACT,\r\n  AUTHORISED_SIGNATORY,\r\n  WORKBASKET,\r\n  ALL_CASES,\r\n  RESOLVE_SENDTOFEC_YES,\r\n  OPERATIONS_LEAD,\r\n  ROLE_TECHNICIAN_MANAGER,\r\n  INTERNAL_RFITYPE\r\n} from 'consts';\r\nimport { selectUserRole, selectcaseRfiSubTabs } from 'stores';\r\nimport * as utils from 'utils';\r\nimport { ReactComponent as IconSearchFile } from '../../assets/svg/line-icon-search-file.svg';\r\n\r\nPremiumProcessingCaseRFIView.propTypes = {\r\n  caseDetails: PropTypes.object.isRequired,\r\n  rfiDetails: PropTypes.object,\r\n  newRfiUsers: PropTypes.array.isRequired,\r\n  subTabs: PropTypes.array.isRequired,\r\n  selectedSubTab: PropTypes.shape({\r\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\r\n    status: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  isPageDirty: PropTypes.bool.isRequired,\r\n  isCreatedByLoginUser: PropTypes.bool.isRequired,\r\n  hasResponseRfiPermission: PropTypes.bool,\r\n  isWorklist: PropTypes.bool,\r\n  isHistoryCases: PropTypes.bool,\r\n  handlers: PropTypes.shape({\r\n    selectTab: PropTypes.func.isRequired,\r\n    stayOnTab: PropTypes.func.isRequired,\r\n    switchTab: PropTypes.func.isRequired,\r\n    setIsPageDirty: PropTypes.func.isRequired,\r\n  }),\r\n};\r\n\r\nexport default function PremiumProcessingCaseRFIView({\r\n  caseDetails,\r\n  rfiDetails,\r\n  newRfiUsers,\r\n  subTabs,\r\n  selectedSubTab,\r\n  isPageDirty,\r\n  isCreatedByLoginUser,\r\n  handlers,\r\n  hasRfiTabPermission,\r\n  isWorklist,\r\n  isHistoryCases\r\n}) {\r\n  const currentUser = useSelector(selectUserRole);\r\n  const isSeniorManager =\r\n    utils.generic.isValidArray(currentUser, true) &&\r\n    currentUser.some((item) => [SENIOR_MANAGER.toLowerCase()].includes(item.name.toLowerCase()));\r\n  const isAuthorisedSignatory =\r\n    utils.generic.isValidArray(currentUser, true) &&\r\n    currentUser.some((item) => [AUTHORISED_SIGNATORY.toLowerCase()].includes(item.name.toLowerCase()));\r\n  const isFrontEndContact =\r\n    utils.generic.isValidArray(currentUser, true) &&\r\n    currentUser.some((item) => [FRONT_END_CONTACT.toLowerCase()].includes(item.name.toLowerCase()));\r\n  const isOperationsLead =\r\n    utils.generic.isValidArray(currentUser, true) &&\r\n    currentUser.some((item) => [OPERATIONS_LEAD.toLowerCase()].includes(item.name.toLowerCase()));\r\n  const isTechnicianManager =\r\n    utils.generic.isValidArray(currentUser, true) &&\r\n    currentUser.some((item) => [ROLE_TECHNICIAN_MANAGER.toLowerCase()].includes(item.name.toLowerCase()));\r\n  const isWorkBasketOrAllCases = caseDetails?.taskView === WORKBASKET || caseDetails?.taskView === ALL_CASES;\r\n  const isNotResolvedOrSendToFECValue =\r\n    rfiDetails?.isNotResolvedOrSendToFEC === RESOLVE_SENDTOFEC_YES && rfiDetails?.status === RFI_STATUS.OPEN;\r\n  if (isWorkBasketOrAllCases || isNotResolvedOrSendToFECValue || isTechnicianManager) {\r\n    isCreatedByLoginUser = true;\r\n  }\r\n  const rfiInternal = rfiDetails?.rfiType === INTERNAL_RFITYPE\r\n  const permissions = isSeniorManager || isFrontEndContact || isOperationsLead ? ['read'] : ['read', 'create', 'update', 'delete'];\r\n  const isOpen = selectedSubTab.status === RFI_STATUS.OPEN;\r\n  let isNewRfi = selectedSubTab.id === PREMIUM_PROCESSING_TAB_NEW_RFI;\r\n  if (isSeniorManager && isOpen) {\r\n    isNewRfi = true;\r\n  }\r\n  const showReadOnlyForm = isOpen && isCreatedByLoginUser;\r\n  const isResponded = selectedSubTab.status === RFI_STATUS.RESPONSE_RECEIVED;\r\n  const isResolved = selectedSubTab.status === RFI_STATUS.RESOLVED;\r\n  const hasRfiTabPermissionValue = isAuthorisedSignatory ? !hasRfiTabPermission : hasRfiTabPermission;\r\n  if ((isFrontEndContact && isNewRfi) || subTabs.length === 0) {\r\n    isNewRfi = false;\r\n  }\r\n  const rfiSubTabs = useSelector(selectcaseRfiSubTabs);\r\n  const notificationObj = useSelector((state) => get(state, 'notifications.notificationList'));\r\n  let isRfiNotification;\r\n  rfiSubTabs.forEach((rfiSub) => {\r\n    notificationObj.forEach((notify) => {\r\n      const taskIdNotifiy = notify.refId.split('||')[1];\r\n      if (taskIdNotifiy === rfiSub.taskId) {\r\n        return isRfiNotification = true;\r\n      }\r\n    })\r\n  })\r\n  isRfiNotification = isRfiNotification === true ? true : false;\r\n \r\n  return (\r\n    <>\r\n      {hasRfiTabPermissionValue && (\r\n        <AccessControl feature=\"premiumProcessing.RFITab\" permissions=\"read\">\r\n          <Tabs tabs={subTabs} overrideTab={selectedSubTab?.id} onChange={(tabName) => handlers.selectTab(tabName)} />\r\n        </AccessControl>\r\n      )}\r\n\r\n      {(isNewRfi || showReadOnlyForm) && (\r\n        <AccessControl feature=\"premiumProcessing.CreateRFI\" permissions={permissions}>\r\n          <PremiumProcessingCaseRFIForm\r\n            caseDetails={caseDetails}\r\n            rfiDetails={rfiDetails}\r\n            newRfiUsers={newRfiUsers}\r\n            isEditable={isNewRfi}\r\n            isPageDirty={isPageDirty}\r\n            isWorklist={isWorklist}\r\n            isSeniorManager={isSeniorManager}\r\n            handlers={handlers}\r\n          />\r\n        </AccessControl>\r\n      )}\r\n\r\n      {!isNewRfi && isOpen && (\r\n        <AccessControl feature=\"premiumProcessing.ResponseRFI\" permissions={permissions}>\r\n          <PremiumProcessingCaseRfiRespond\r\n            caseDetails={caseDetails}\r\n            rfiDetails={rfiDetails}\r\n            isPageDirty={isPageDirty}\r\n            isWorklist={isWorklist}\r\n            handlers={handlers}\r\n          />\r\n        </AccessControl>\r\n      )}\r\n\r\n      {!isNewRfi && (isResponded || isResolved) && (\r\n        <AccessControl feature=\"premiumProcessing.ResolveRFI\" permissions={permissions}>\r\n          <PremiumProcessingCaseRfiResolve\r\n            rfiDetails={rfiDetails}\r\n            isEditable={isFrontEndContact && isResponded ? !isResponded : isResponded}\r\n            isPageDirty={isPageDirty}\r\n            isResolved={isResolved}\r\n            handlers={handlers}\r\n          />\r\n        </AccessControl>\r\n      )}\r\n\r\n      {((!isRfiNotification && isFrontEndContact && !rfiInternal && !isNewRfi && !isResolved) || (subTabs.length === 0 && isHistoryCases))  && (\r\n        <Empty title={utils.string.t('claims.noMatchFound')} icon={<IconSearchFile />} padding />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}