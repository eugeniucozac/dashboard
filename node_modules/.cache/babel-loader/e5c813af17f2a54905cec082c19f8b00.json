{"ast":null,"code":"var _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\PremiumProcessingCreateActionAccordion\\\\PremiumProcessingCreateActionAccordion.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router';\nimport { useSelector, useDispatch } from 'react-redux'; // app\n\nimport PremiumProcessingCreateActionAccordionView from './PremiumProcessingCreateActionAccordion.view';\nimport config from 'config';\nimport * as constants from 'consts';\nimport { selectCaseDetails, showModal, enqueueNotification, selectCaseTaskTypeView, premiumProcessingRejectCaseInitiation, getPremiumProcessingTasksDetails, selectCaseIsCheckSigning } from 'stores';\nimport * as utils from 'utils';\nimport { isEmpty } from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nPremiumProcessingCreateActionAccordion.propTypes = {\n  taskId: PropTypes.string.isRequired,\n  currentUser: PropTypes.array,\n  selectedCases: PropTypes.array,\n  isUnassignedStage: PropTypes.bool.isRequired,\n  fieldsValue: PropTypes.object,\n  isWorkBasket: PropTypes.bool.isRequired,\n  isAllCases: PropTypes.bool.isRequired,\n  isValidRPSection: PropTypes.bool.isRequired,\n  isIssueDocumentStage: PropTypes.bool.isRequired,\n  isCheckSigningCase: PropTypes.bool.isRequired,\n  isRejectPendingActionStage: PropTypes.bool\n};\nexport default function PremiumProcessingCreateActionAccordion(_ref) {\n  _s();\n\n  var _selectedCases$,\n      _selectedCases$2,\n      _selectedCases$3,\n      _this = this;\n\n  var taskId = _ref.taskId,\n      currentUser = _ref.currentUser,\n      selectedCases = _ref.selectedCases,\n      isUnassignedStage = _ref.isUnassignedStage,\n      fieldsValue = _ref.fieldsValue,\n      isWorkBasket = _ref.isWorkBasket,\n      isAllCases = _ref.isAllCases,\n      isValidRPSection = _ref.isValidRPSection,\n      isIssueDocumentStage = _ref.isIssueDocumentStage,\n      isCheckSigningCase = _ref.isCheckSigningCase,\n      isRejectPendingActionStage = _ref.isRejectPendingActionStage;\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var caseDetails = useSelector(selectCaseDetails);\n  var caseTaskTypeView = useSelector(selectCaseTaskTypeView);\n  var isCheckSigning = useSelector(selectCaseIsCheckSigning);\n  var caseStages = caseDetails === null || caseDetails === void 0 ? void 0 : caseDetails.caseStageDetails;\n  var notesValue = fieldsValue === null || fieldsValue === void 0 ? void 0 : fieldsValue.notesField;\n  var policyRef = selectedCases === null || selectedCases === void 0 ? void 0 : (_selectedCases$ = selectedCases[0]) === null || _selectedCases$ === void 0 ? void 0 : _selectedCases$.policyRef;\n  var isCompletedStage = caseStages === null || caseStages === void 0 ? void 0 : caseStages.some(function (cs) {\n    return [constants.BPM_STAGE_COMPLETED].includes(cs.bpmStageCode) && cs.active;\n  });\n  var userRoleRejectCase = !isCheckSigning && utils.generic.isValidArray(currentUser, true) && currentUser.some(function (item) {\n    return [constants.ROLE_SENIOR_TECHNICIAN.toLowerCase(), constants.ROLE_JUNIOR_TECHNICIAN.toLowerCase(), constants.ROLE_TECHNICIAN_MANAGER.toLowerCase()].includes(item.name.toLowerCase());\n  });\n  var caseId = selectedCases === null || selectedCases === void 0 ? void 0 : (_selectedCases$2 = selectedCases[0]) === null || _selectedCases$2 === void 0 ? void 0 : _selectedCases$2.caseId;\n  var caseFlagType = selectedCases === null || selectedCases === void 0 ? void 0 : (_selectedCases$3 = selectedCases[0]) === null || _selectedCases$3 === void 0 ? void 0 : _selectedCases$3.type;\n  var selectedCasesType = caseFlagType === null || caseFlagType === void 0 ? void 0 : caseFlagType.split(',');\n  var isQcFlag = Boolean(selectedCasesType === null || selectedCasesType === void 0 ? void 0 : selectedCasesType.some(function (flag) {\n    return flag === constants.QC_FLAG;\n  }));\n\n  var issueDocumentsHandler = function issueDocumentsHandler() {\n    history.push(\"\".concat(config.routes.premiumProcessing.case, \"/\").concat(taskId, \"/\").concat(constants.PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS));\n  };\n\n  var newRfiHandler = function newRfiHandler() {\n    if (taskId) {\n      history.push(\"\".concat(config.routes.premiumProcessing.case, \"/\").concat(taskId, \"/\").concat(constants.PREMIUM_PROCESSING_TAB_RFI));\n    }\n  };\n\n  var manageDocuments = function manageDocuments() {\n    if (taskId) {\n      history.push(\"\".concat(config.routes.premiumProcessing.case, \"/\").concat(taskId, \"/\").concat(constants.PREMIUM_PROCESSING_TAB_DOCUMENTS));\n    }\n  };\n\n  var showRejectCaseModal = function showRejectCaseModal() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('premiumProcessing.rejectingCase.rejectCase'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('premiumProcessing.rejectingCase.rejectCase'),\n          cancelLabel: utils.string.t('app.cancel'),\n          confirmMessage: /*#__PURE__*/_jsxDEV(\"span\", {\n            dangerouslySetInnerHTML: {\n              __html: \"\".concat(utils.string.t('premiumProcessing.rejectingCase.rejectCaseConfirmationMessage'))\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, _this),\n          buttonColors: {\n            confirm: 'secondary',\n            cancel: 'primary'\n          },\n          submitHandler: function submitHandler() {\n            dispatch(premiumProcessingRejectCaseInitiation({\n              taskId: taskId,\n              notesValue: notesValue,\n              caseId: caseId,\n              policyRef: policyRef\n            })).then(function (response) {\n              var _response$response;\n\n              if ((response === null || response === void 0 ? void 0 : (_response$response = response.response) === null || _response$response === void 0 ? void 0 : _response$response.status) === constants.API_STATUS_INTERNAL_SERVER_ERROR) {\n                dispatch(enqueueNotification('premiumProcessing.caseDetailsSection.workflowStageUpdateError', 'error'));\n              } else {\n                dispatch(getPremiumProcessingTasksDetails({\n                  requestType: 'search',\n                  taskType: caseTaskTypeView,\n                  filterTerm: []\n                }));\n                dispatch(getPremiumProcessingTasksDetails({\n                  requestType: 'filter',\n                  taskType: caseTaskTypeView,\n                  filterTerm: []\n                }));\n              }\n            });\n          },\n          cancelHandler: function cancelHandler() {},\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  };\n\n  var handleRejectCase = function handleRejectCase() {\n    if (isEmpty(fieldsValue === null || fieldsValue === void 0 ? void 0 : fieldsValue.notesField)) {\n      dispatch(enqueueNotification('premiumProcessing.rejectingCase.rejectCaseNotesMandatoryMessage', 'warning'));\n      return;\n    }\n\n    showRejectCaseModal();\n  };\n\n  var checkSigningHandler = function checkSigningHandler() {\n    dispatch(showModal({\n      component: 'PREMIUM_PROCESSING_CHECK_SIGNING',\n      props: {\n        title: utils.string.t('premiumProcessing.checkSigningCase.popUpTitle'),\n        fullWidth: true,\n        maxWidth: 'md',\n        componentProps: {\n          caseDetails: caseDetails\n        }\n      }\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(PremiumProcessingCreateActionAccordionView, {\n    taskId: taskId,\n    isCompletedStage: isCompletedStage,\n    isUnassignedStage: isUnassignedStage,\n    isWorkBasket: isWorkBasket,\n    isAllCases: isAllCases,\n    isQcFlag: isQcFlag,\n    userRoleRejectCase: userRoleRejectCase,\n    isIssueDocumentStage: isIssueDocumentStage,\n    isValidRPSection: isValidRPSection,\n    isCheckSigningCase: isCheckSigningCase,\n    isRejectPendingActionStage: isRejectPendingActionStage,\n    handlers: {\n      issueDocumentsHandler: issueDocumentsHandler,\n      handleRejectCase: handleRejectCase,\n      newRfiHandler: newRfiHandler,\n      manageDocuments: manageDocuments,\n      checkSigningHandler: checkSigningHandler\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PremiumProcessingCreateActionAccordion, \"do/lHZ4jcwf4hSCMEVGuUYJRiLo=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector];\n});\n\n_c = PremiumProcessingCreateActionAccordion;\n\nvar _c;\n\n$RefreshReg$(_c, \"PremiumProcessingCreateActionAccordion\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/PremiumProcessingCreateActionAccordion/PremiumProcessingCreateActionAccordion.js"],"names":["React","PropTypes","useHistory","useSelector","useDispatch","PremiumProcessingCreateActionAccordionView","config","constants","selectCaseDetails","showModal","enqueueNotification","selectCaseTaskTypeView","premiumProcessingRejectCaseInitiation","getPremiumProcessingTasksDetails","selectCaseIsCheckSigning","utils","isEmpty","PremiumProcessingCreateActionAccordion","propTypes","taskId","string","isRequired","currentUser","array","selectedCases","isUnassignedStage","bool","fieldsValue","object","isWorkBasket","isAllCases","isValidRPSection","isIssueDocumentStage","isCheckSigningCase","isRejectPendingActionStage","dispatch","history","caseDetails","caseTaskTypeView","isCheckSigning","caseStages","caseStageDetails","notesValue","notesField","policyRef","isCompletedStage","some","cs","BPM_STAGE_COMPLETED","includes","bpmStageCode","active","userRoleRejectCase","generic","isValidArray","item","ROLE_SENIOR_TECHNICIAN","toLowerCase","ROLE_JUNIOR_TECHNICIAN","ROLE_TECHNICIAN_MANAGER","name","caseId","caseFlagType","type","selectedCasesType","split","isQcFlag","Boolean","flag","QC_FLAG","issueDocumentsHandler","push","routes","premiumProcessing","case","PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS","newRfiHandler","PREMIUM_PROCESSING_TAB_RFI","manageDocuments","PREMIUM_PROCESSING_TAB_DOCUMENTS","showRejectCaseModal","component","props","fullWidth","title","t","maxWidth","componentProps","confirmLabel","cancelLabel","confirmMessage","__html","buttonColors","confirm","cancel","submitHandler","then","response","status","API_STATUS_INTERNAL_SERVER_ERROR","requestType","taskType","filterTerm","cancelHandler","handleClose","handleRejectCase","checkSigningHandler"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useHistory } from 'react-router';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\n// app\r\nimport PremiumProcessingCreateActionAccordionView from './PremiumProcessingCreateActionAccordion.view';\r\nimport config from 'config';\r\nimport * as constants from 'consts';\r\nimport {\r\n  selectCaseDetails,\r\n  showModal,\r\n  enqueueNotification,\r\n  selectCaseTaskTypeView,\r\n  premiumProcessingRejectCaseInitiation,\r\n  getPremiumProcessingTasksDetails,\r\n  selectCaseIsCheckSigning,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport { isEmpty } from 'lodash';\r\n\r\nPremiumProcessingCreateActionAccordion.propTypes = {\r\n  taskId: PropTypes.string.isRequired,\r\n  currentUser: PropTypes.array,\r\n  selectedCases: PropTypes.array,\r\n  isUnassignedStage: PropTypes.bool.isRequired,\r\n  fieldsValue: PropTypes.object,\r\n  isWorkBasket: PropTypes.bool.isRequired,\r\n  isAllCases: PropTypes.bool.isRequired,\r\n  isValidRPSection: PropTypes.bool.isRequired,\r\n  isIssueDocumentStage: PropTypes.bool.isRequired,\r\n  isCheckSigningCase: PropTypes.bool.isRequired,\r\n  isRejectPendingActionStage: PropTypes.bool,\r\n};\r\n\r\nexport default function PremiumProcessingCreateActionAccordion({\r\n  taskId,\r\n  currentUser,\r\n  selectedCases,\r\n  isUnassignedStage,\r\n  fieldsValue,\r\n  isWorkBasket,\r\n  isAllCases,\r\n  isValidRPSection,\r\n  isIssueDocumentStage,\r\n  isCheckSigningCase,\r\n  isRejectPendingActionStage,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const caseDetails = useSelector(selectCaseDetails);\r\n  const caseTaskTypeView = useSelector(selectCaseTaskTypeView);\r\n  const isCheckSigning = useSelector(selectCaseIsCheckSigning);\r\n  const caseStages = caseDetails?.caseStageDetails;\r\n  const notesValue = fieldsValue?.notesField;\r\n  const policyRef = selectedCases?.[0]?.policyRef;\r\n  const isCompletedStage = caseStages?.some((cs) => [constants.BPM_STAGE_COMPLETED].includes(cs.bpmStageCode) && cs.active);\r\n  const userRoleRejectCase =\r\n    !isCheckSigning &&\r\n    utils.generic.isValidArray(currentUser, true) &&\r\n    currentUser.some((item) =>\r\n      [\r\n        constants.ROLE_SENIOR_TECHNICIAN.toLowerCase(),\r\n        constants.ROLE_JUNIOR_TECHNICIAN.toLowerCase(),\r\n        constants.ROLE_TECHNICIAN_MANAGER.toLowerCase(),\r\n      ].includes(item.name.toLowerCase())\r\n    );\r\n  const caseId = selectedCases?.[0]?.caseId;\r\n  const caseFlagType = selectedCases?.[0]?.type;\r\n  const selectedCasesType = caseFlagType?.split(',');\r\n  const isQcFlag = Boolean(selectedCasesType?.some((flag) => flag === constants.QC_FLAG));\r\n  const issueDocumentsHandler = () => {\r\n    history.push(`${config.routes.premiumProcessing.case}/${taskId}/${constants.PREMIUM_PROCESSING_TAB_ISSUE_DOCUMENTS}`);\r\n  };\r\n\r\n  const newRfiHandler = () => {\r\n    if (taskId) {\r\n      history.push(`${config.routes.premiumProcessing.case}/${taskId}/${constants.PREMIUM_PROCESSING_TAB_RFI}`);\r\n    }\r\n  };\r\n\r\n  const manageDocuments = () => {\r\n    if (taskId) {\r\n      history.push(`${config.routes.premiumProcessing.case}/${taskId}/${constants.PREMIUM_PROCESSING_TAB_DOCUMENTS}`);\r\n    }\r\n  };\r\n\r\n  const showRejectCaseModal = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('premiumProcessing.rejectingCase.rejectCase'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('premiumProcessing.rejectingCase.rejectCase'),\r\n            cancelLabel: utils.string.t('app.cancel'),\r\n            confirmMessage: (\r\n              <span\r\n                dangerouslySetInnerHTML={{\r\n                  __html: `${utils.string.t('premiumProcessing.rejectingCase.rejectCaseConfirmationMessage')}`,\r\n                }}\r\n              />\r\n            ),\r\n            buttonColors: { confirm: 'secondary', cancel: 'primary' },\r\n            submitHandler: () => {\r\n              dispatch(premiumProcessingRejectCaseInitiation({ taskId, notesValue, caseId, policyRef })).then((response) => {\r\n                if (response?.response?.status === constants.API_STATUS_INTERNAL_SERVER_ERROR) {\r\n                  dispatch(enqueueNotification('premiumProcessing.caseDetailsSection.workflowStageUpdateError', 'error'));\r\n                } else {\r\n                  dispatch(getPremiumProcessingTasksDetails({ requestType: 'search', taskType: caseTaskTypeView, filterTerm: [] }));\r\n                  dispatch(getPremiumProcessingTasksDetails({ requestType: 'filter', taskType: caseTaskTypeView, filterTerm: [] }));\r\n                }\r\n              });\r\n            },\r\n            cancelHandler: () => {},\r\n            handleClose: () => {},\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleRejectCase = () => {\r\n    if (isEmpty(fieldsValue?.notesField)) {\r\n      dispatch(enqueueNotification('premiumProcessing.rejectingCase.rejectCaseNotesMandatoryMessage', 'warning'));\r\n      return;\r\n    }\r\n    showRejectCaseModal();\r\n  };\r\n\r\n  const checkSigningHandler = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'PREMIUM_PROCESSING_CHECK_SIGNING',\r\n        props: {\r\n          title: utils.string.t('premiumProcessing.checkSigningCase.popUpTitle'),\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          componentProps: {\r\n            caseDetails,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <PremiumProcessingCreateActionAccordionView\r\n      taskId={taskId}\r\n      isCompletedStage={isCompletedStage}\r\n      isUnassignedStage={isUnassignedStage}\r\n      isWorkBasket={isWorkBasket}\r\n      isAllCases={isAllCases}\r\n      isQcFlag={isQcFlag}\r\n      userRoleRejectCase={userRoleRejectCase}\r\n      isIssueDocumentStage={isIssueDocumentStage}\r\n      isValidRPSection={isValidRPSection}\r\n      isCheckSigningCase={isCheckSigningCase}\r\n      isRejectPendingActionStage={isRejectPendingActionStage}\r\n      handlers={{\r\n        issueDocumentsHandler,\r\n        handleRejectCase,\r\n        newRfiHandler,\r\n        manageDocuments,\r\n        checkSigningHandler,\r\n      }}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}