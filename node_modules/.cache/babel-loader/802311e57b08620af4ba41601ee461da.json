{"ast":null,"code":"import _classCallCheck from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\Client\\\\Client.js\";\nimport React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router';\nimport { Helmet } from 'react-helmet';\nimport toNumber from 'lodash/toNumber';\nimport get from 'lodash/get'; // app\n\nimport { Layout } from 'components';\nimport { ClientContent, ClientSummary } from 'modules';\nimport { addLoader, removeLoader, deleteParentPlacements, deselectPlacement, getParent, getParentPlacements, resetPlacementLocations, resetPortfolioMapLevel } from 'stores';\nimport config from 'config';\nimport * as utils from 'utils'; // mui\n\nimport ApartmentIcon from '@material-ui/icons/Apartment'; // state\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    brand: state.ui.brand,\n    parent: state.parent\n  };\n}; // dispatch\n\n\nvar mapDispatchToProps = {\n  addLoader: addLoader,\n  removeLoader: removeLoader,\n  deleteParentPlacements: deleteParentPlacements,\n  deselectPlacement: deselectPlacement,\n  getParent: getParent,\n  getParentPlacements: getParentPlacements,\n  resetPlacementLocations: resetPlacementLocations,\n  resetPortfolioMapLevel: resetPortfolioMapLevel\n};\nexport var Client = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Client, _PureComponent);\n\n  var _super = _createSuper(Client);\n\n  function Client() {\n    var _this;\n\n    _classCallCheck(this, Client);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.fetchParent = function (id) {\n      var _this$props = _this.props,\n          addLoader = _this$props.addLoader,\n          removeLoader = _this$props.removeLoader,\n          getParent = _this$props.getParent,\n          history = _this$props.history;\n      addLoader('fetchParentsPlacements'); // first get office details\n      // then get placements for that office\n\n      getParent(id).then(function (response) {\n        if (response && response.id) {\n          _this.fetchPlacements(id);\n        } else {\n          history.replace(config.routes.home.root);\n          removeLoader('fetchParentsPlacements');\n        }\n      });\n    };\n\n    _this.fetchPlacements = function (id) {\n      var _this$props2 = _this.props,\n          removeLoader = _this$props2.removeLoader,\n          getParentPlacements = _this$props2.getParentPlacements;\n      getParentPlacements(id).then(function () {\n        removeLoader('fetchParentsPlacements');\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Client, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props3 = this.props,\n          match = _this$props3.match,\n          deselectPlacement = _this$props3.deselectPlacement;\n      var urlParentId = toNumber(get(match, 'params.id'));\n      deselectPlacement();\n\n      if (urlParentId) {\n        this.fetchParent(urlParentId);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.resetPlacementLocations();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevParentId = get(prevProps, 'match.params.id');\n      var nextParentId = get(this.props, 'match.params.id');\n\n      if (prevParentId !== nextParentId) {\n        this.props.resetPortfolioMapLevel();\n        this.props.deselectPlacement();\n        this.props.deleteParentPlacements();\n\n        if (nextParentId) {\n          this.fetchParent(nextParentId);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          parent = _this$props4.parent,\n          brand = _this$props4.brand,\n          match = _this$props4.match;\n      var urlParentId = toNumber(get(match, 'params.id'));\n      var slug = get(match, 'params.slug');\n      var parentName = get(parent, 'selected.name') || utils.string.capitalise(slug);\n      var title = parentName ? \"\".concat(utils.string.t('app.client'), \" - \").concat(parentName) : utils.string.t('client.title');\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Helmet, {\n          children: /*#__PURE__*/_jsxDEV(\"title\", {\n            children: \"\".concat(title, \" - \").concat(utils.app.getAppName(brand))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Layout, {\n          testid: \"client\",\n          children: [/*#__PURE__*/_jsxDEV(Layout, {\n            main: true,\n            children: /*#__PURE__*/_jsxDEV(ClientContent, {\n              type: \"client\",\n              parent: parent,\n              pageIcon: ApartmentIcon,\n              urlParentId: urlParentId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Layout, {\n            sidebar: true,\n            padding: false,\n            children: get(parent, 'selected') ? /*#__PURE__*/_jsxDEV(ClientSummary, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 40\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 60\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true);\n    }\n  }]);\n\n  return Client;\n}(PureComponent);\nexport default compose(withRouter, connect(mapStateToProps, mapDispatchToProps))(Client);","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/Client/Client.js"],"names":["React","PureComponent","connect","compose","withRouter","Helmet","toNumber","get","Layout","ClientContent","ClientSummary","addLoader","removeLoader","deleteParentPlacements","deselectPlacement","getParent","getParentPlacements","resetPlacementLocations","resetPortfolioMapLevel","config","utils","ApartmentIcon","mapStateToProps","state","brand","ui","parent","mapDispatchToProps","Client","fetchParent","id","props","history","then","response","fetchPlacements","replace","routes","home","root","match","urlParentId","prevProps","prevParentId","nextParentId","slug","parentName","string","capitalise","title","t","app","getAppName"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { withRouter } from 'react-router';\r\nimport { Helmet } from 'react-helmet';\r\nimport toNumber from 'lodash/toNumber';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { Layout } from 'components';\r\nimport { ClientContent, ClientSummary } from 'modules';\r\nimport {\r\n  addLoader,\r\n  removeLoader,\r\n  deleteParentPlacements,\r\n  deselectPlacement,\r\n  getParent,\r\n  getParentPlacements,\r\n  resetPlacementLocations,\r\n  resetPortfolioMapLevel,\r\n} from 'stores';\r\nimport config from 'config';\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport ApartmentIcon from '@material-ui/icons/Apartment';\r\n\r\n// state\r\nconst mapStateToProps = (state) => ({\r\n  brand: state.ui.brand,\r\n  parent: state.parent,\r\n});\r\n\r\n// dispatch\r\nconst mapDispatchToProps = {\r\n  addLoader,\r\n  removeLoader,\r\n  deleteParentPlacements,\r\n  deselectPlacement,\r\n  getParent,\r\n  getParentPlacements,\r\n  resetPlacementLocations,\r\n  resetPortfolioMapLevel,\r\n};\r\n\r\nexport class Client extends PureComponent {\r\n  componentWillMount() {\r\n    const { match, deselectPlacement } = this.props;\r\n    const urlParentId = toNumber(get(match, 'params.id'));\r\n\r\n    deselectPlacement();\r\n\r\n    if (urlParentId) {\r\n      this.fetchParent(urlParentId);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.resetPlacementLocations();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const prevParentId = get(prevProps, 'match.params.id');\r\n    const nextParentId = get(this.props, 'match.params.id');\r\n\r\n    if (prevParentId !== nextParentId) {\r\n      this.props.resetPortfolioMapLevel();\r\n      this.props.deselectPlacement();\r\n      this.props.deleteParentPlacements();\r\n\r\n      if (nextParentId) {\r\n        this.fetchParent(nextParentId);\r\n      }\r\n    }\r\n  }\r\n\r\n  fetchParent = (id) => {\r\n    const { addLoader, removeLoader, getParent, history } = this.props;\r\n\r\n    addLoader('fetchParentsPlacements');\r\n\r\n    // first get office details\r\n    // then get placements for that office\r\n    getParent(id).then((response) => {\r\n      if (response && response.id) {\r\n        this.fetchPlacements(id);\r\n      } else {\r\n        history.replace(config.routes.home.root);\r\n        removeLoader('fetchParentsPlacements');\r\n      }\r\n    });\r\n  };\r\n\r\n  fetchPlacements = (id) => {\r\n    const { removeLoader, getParentPlacements } = this.props;\r\n\r\n    getParentPlacements(id).then(() => {\r\n      removeLoader('fetchParentsPlacements');\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { parent, brand, match } = this.props;\r\n    const urlParentId = toNumber(get(match, 'params.id'));\r\n\r\n    const slug = get(match, 'params.slug');\r\n    const parentName = get(parent, 'selected.name') || utils.string.capitalise(slug);\r\n    const title = parentName ? `${utils.string.t('app.client')} - ${parentName}` : utils.string.t('client.title');\r\n\r\n    return (\r\n      <>\r\n        <Helmet>\r\n          <title>{`${title} - ${utils.app.getAppName(brand)}`}</title>\r\n        </Helmet>\r\n\r\n        <Layout testid=\"client\">\r\n          <Layout main>\r\n            <ClientContent type=\"client\" parent={parent} pageIcon={ApartmentIcon} urlParentId={urlParentId} />\r\n          </Layout>\r\n\r\n          <Layout sidebar padding={false}>\r\n            {get(parent, 'selected') ? <ClientSummary /> : <span />}\r\n          </Layout>\r\n        </Layout>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(withRouter, connect(mapStateToProps, mapDispatchToProps))(Client);\r\n"]},"metadata":{},"sourceType":"module"}