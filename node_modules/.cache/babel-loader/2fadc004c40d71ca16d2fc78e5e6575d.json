{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\RfiDetails\\\\RfiDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'; //app\n\nimport { RfiDetailsView } from './RfiDetails.view';\nimport { setDmsTaskContextType, resetDmsTaskTypeContext, selectLossInformation, selectLossInfoIsLoading, selectClaimsInformation, selectClaimsTabRows, selectClaimsTabSelectedClaimData, selectClaimInfoIsLoading, selectTaskDashboardTaskDetails, selectIsTaskDashboardTaskDetailsLoading, selectRfiHistoryListLoader, selectRefDataCatCodesList, selectQueryCodes, selectRefDataQueryCodes, selectLossQualifiers, selectSanctionsCheckStatus, getSanctionsCheckStatus, getLossInformation, getClaimsTabDetails, getSelectedClaimDetails, getClaimsTaskDashboardDetail, getRfiHistory, resetRfiDashboardData, getRfiHistoryDocuments, setClaimsTabSelectedItem } from 'stores';\nimport { DMS_TASK_CONTEXT_TYPE_RFI_RESPONSE } from 'consts';\nimport * as utils from 'utils';\nimport * as constants from 'consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RfiDetails(props) {\n  _s();\n\n  var rfiTask = props.rfiTask;\n  var dispatch = useDispatch();\n  var lossInformation = useSelector(selectLossInformation);\n  var isLossInfoLoading = useSelector(selectLossInfoIsLoading);\n  var claimsInformation = useSelector(selectClaimsInformation);\n  var claimBasicDetail = useSelector(selectClaimsTabSelectedClaimData);\n  var isClaimInfoLoading = useSelector(selectClaimInfoIsLoading);\n  var associatedTaskInformation = useSelector(selectTaskDashboardTaskDetails);\n  var isAssociatedTaskInfoLoading = useSelector(selectIsTaskDashboardTaskDetailsLoading);\n  var catCodes = useSelector(selectRefDataCatCodesList);\n  var claimsQueryCodes = useSelector(selectQueryCodes);\n  var refDataQueryCodes = useSelector(selectRefDataQueryCodes);\n  var lossQualifiers = useSelector(selectLossQualifiers);\n  var sanctionCheckStatus = useSelector(selectSanctionsCheckStatus);\n  var rfiHistoryLoader = useSelector(selectRfiHistoryListLoader);\n  var claimsTabRowsData = useSelector(selectClaimsTabRows);\n  var rfiOriginType = utils.claimsRfi.checkRfiOriginType(rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.refType);\n  var isInflightLoss = (lossInformation === null || lossInformation === void 0 ? void 0 : lossInformation.isInflighLoss) === 1 || true; // Defaulting to true as invalid loss id is present in RFI task created on Inflight Loss\n\n  var claimDetail = (claimsInformation === null || claimsInformation === void 0 ? void 0 : claimsInformation.claimReference) ? claimsInformation : claimBasicDetail;\n  var claimDashboardDisplayData = utils.generic.isValidArray(claimsTabRowsData, true) ? claimsTabRowsData[0] : {};\n  useEffect(function () {\n    getRfiHistoryDetails();\n    dispatch(setDmsTaskContextType({\n      type: DMS_TASK_CONTEXT_TYPE_RFI_RESPONSE,\n      refId: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.taskId\n    }));\n    dispatch(getLossInformation({\n      lossDetailsId: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.lossDetailID,\n      sourceIdParams: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.sourceID,\n      divisionIdParam: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.departmentID,\n      claimRefParam: (rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.claimRef) || (rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.processRef),\n      viewLoader: false\n    }));\n    dispatch(getClaimsTabDetails({\n      requestType: constants.CLAIMS_TAB_REQ_TYPES.search,\n      claimsType: constants.CLAIM_TEAM_TYPE.allClaims,\n      searchBy: constants.CLAIMS_TAB_SEARCH_OPTION_CLAIM_REF,\n      firstTimeSort: 'processRef',\n      term: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.claimRef\n    }));\n    dispatch(getSelectedClaimDetails({\n      claimId: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.businessProcessID,\n      claimRefParams: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.claimRef,\n      sourceIdParams: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.sourceID,\n      divisionIDParams: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.departmentID,\n      viewLoader: false\n    }));\n    dispatch(getClaimsTaskDashboardDetail({\n      query: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.parentTaskRef,\n      claimID: rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.businessProcessID,\n      viewLoader: false\n    }));\n    dispatch(getSanctionsCheckStatus(rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.rootProcessId, false));\n    return function () {\n      dispatch(resetDmsTaskTypeContext());\n      dispatch(resetRfiDashboardData());\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if (utils.generic.isValidObject(claimDashboardDisplayData) && ((claimDashboardDisplayData === null || claimDashboardDisplayData === void 0 ? void 0 : claimDashboardDisplayData.claimRef) || (claimDashboardDisplayData === null || claimDashboardDisplayData === void 0 ? void 0 : claimDashboardDisplayData.claimReference))) {\n      dispatch(setClaimsTabSelectedItem(claimDashboardDisplayData, true));\n    }\n  }, [claimDashboardDisplayData]); // eslint-disable-line react-hooks/exhaustive-deps\n  //Sections Data\n\n  var lossInfo = utils.claimsAdditionalDetails.getLossCardInfo(lossInformation, catCodes, isInflightLoss, isLossInfoLoading);\n  var claimInfo = utils.claimsAdditionalDetails.getClaimCardInfo(claimDetail, lossQualifiers, isClaimInfoLoading);\n  var taskInfo = utils.claimsAdditionalDetails.getTaskCardInfo(associatedTaskInformation, sanctionCheckStatus, isAssociatedTaskInfoLoading);\n\n  var getRfiHistoryDetails = function getRfiHistoryDetails() {\n    var _dispatch;\n\n    (_dispatch = dispatch(getRfiHistory(rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.taskId))) === null || _dispatch === void 0 ? void 0 : _dispatch.then(function (data) {\n      if (data.status === constants.API_RESPONSE_OK) {\n        var rfihistoryList = _toConsumableArray(data === null || data === void 0 ? void 0 : data.data);\n\n        if (!utils.generic.isInvalidOrEmptyArray(rfihistoryList)) {\n          var caseIncidentNotesList = [];\n          rfihistoryList === null || rfihistoryList === void 0 ? void 0 : rfihistoryList.forEach(function (item) {\n            var _item$caseIncidentNot;\n\n            caseIncidentNotesList.push({\n              referenceId: \"\".concat(rfiTask === null || rfiTask === void 0 ? void 0 : rfiTask.taskId, \"-\").concat(item === null || item === void 0 ? void 0 : (_item$caseIncidentNot = item.caseIncidentNotesID) === null || _item$caseIncidentNot === void 0 ? void 0 : _item$caseIncidentNot.toString()),\n              sectionType: constants.DMS_CONTEXT_TASK\n            });\n          });\n          dispatch(getRfiHistoryDocuments(caseIncidentNotesList));\n        }\n      }\n    });\n  };\n\n  var openDocViewer = function openDocViewer(event, doc) {\n    event.preventDefault();\n    var documentId = doc.documentId,\n        documentName = doc.documentName;\n    utils.dms.dmsDocumentViewLauncher(documentId, documentName);\n  };\n\n  return /*#__PURE__*/_jsxDEV(RfiDetailsView, _objectSpread(_objectSpread({}, props), {}, {\n    rfiOriginType: rfiOriginType,\n    lossInfo: lossInfo,\n    claimInfo: claimInfo,\n    taskInfo: taskInfo,\n    claimsQueryCodes: claimsQueryCodes,\n    refDataQueryCodes: refDataQueryCodes,\n    rfiHistoryLoader: rfiHistoryLoader,\n    handlers: {\n      openDocViewer: openDocViewer,\n      getRfiHistoryDetails: getRfiHistoryDetails\n    }\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RfiDetails, \"HZzVqQ8wswWUXjZKoJmHqaYnj+s=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = RfiDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"RfiDetails\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/RfiDetails/RfiDetails.js"],"names":["React","useEffect","useDispatch","useSelector","RfiDetailsView","setDmsTaskContextType","resetDmsTaskTypeContext","selectLossInformation","selectLossInfoIsLoading","selectClaimsInformation","selectClaimsTabRows","selectClaimsTabSelectedClaimData","selectClaimInfoIsLoading","selectTaskDashboardTaskDetails","selectIsTaskDashboardTaskDetailsLoading","selectRfiHistoryListLoader","selectRefDataCatCodesList","selectQueryCodes","selectRefDataQueryCodes","selectLossQualifiers","selectSanctionsCheckStatus","getSanctionsCheckStatus","getLossInformation","getClaimsTabDetails","getSelectedClaimDetails","getClaimsTaskDashboardDetail","getRfiHistory","resetRfiDashboardData","getRfiHistoryDocuments","setClaimsTabSelectedItem","DMS_TASK_CONTEXT_TYPE_RFI_RESPONSE","utils","constants","RfiDetails","props","rfiTask","dispatch","lossInformation","isLossInfoLoading","claimsInformation","claimBasicDetail","isClaimInfoLoading","associatedTaskInformation","isAssociatedTaskInfoLoading","catCodes","claimsQueryCodes","refDataQueryCodes","lossQualifiers","sanctionCheckStatus","rfiHistoryLoader","claimsTabRowsData","rfiOriginType","claimsRfi","checkRfiOriginType","refType","isInflightLoss","isInflighLoss","claimDetail","claimReference","claimDashboardDisplayData","generic","isValidArray","getRfiHistoryDetails","type","refId","taskId","lossDetailsId","lossDetailID","sourceIdParams","sourceID","divisionIdParam","departmentID","claimRefParam","claimRef","processRef","viewLoader","requestType","CLAIMS_TAB_REQ_TYPES","search","claimsType","CLAIM_TEAM_TYPE","allClaims","searchBy","CLAIMS_TAB_SEARCH_OPTION_CLAIM_REF","firstTimeSort","term","claimId","businessProcessID","claimRefParams","divisionIDParams","query","parentTaskRef","claimID","rootProcessId","isValidObject","lossInfo","claimsAdditionalDetails","getLossCardInfo","claimInfo","getClaimCardInfo","taskInfo","getTaskCardInfo","then","data","status","API_RESPONSE_OK","rfihistoryList","isInvalidOrEmptyArray","caseIncidentNotesList","forEach","item","push","referenceId","caseIncidentNotesID","toString","sectionType","DMS_CONTEXT_TASK","openDocViewer","event","doc","preventDefault","documentId","documentName","dms","dmsDocumentViewLauncher"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n//app\r\nimport { RfiDetailsView } from './RfiDetails.view';\r\nimport {\r\n  setDmsTaskContextType,\r\n  resetDmsTaskTypeContext,\r\n  selectLossInformation,\r\n  selectLossInfoIsLoading,\r\n  selectClaimsInformation,\r\n  selectClaimsTabRows,\r\n  selectClaimsTabSelectedClaimData,\r\n  selectClaimInfoIsLoading,\r\n  selectTaskDashboardTaskDetails,\r\n  selectIsTaskDashboardTaskDetailsLoading,\r\n  selectRfiHistoryListLoader,\r\n  selectRefDataCatCodesList,\r\n  selectQueryCodes,\r\n  selectRefDataQueryCodes,\r\n  selectLossQualifiers,\r\n  selectSanctionsCheckStatus,\r\n  getSanctionsCheckStatus,\r\n  getLossInformation,\r\n  getClaimsTabDetails,\r\n  getSelectedClaimDetails,\r\n  getClaimsTaskDashboardDetail,\r\n  getRfiHistory,\r\n  resetRfiDashboardData,\r\n  getRfiHistoryDocuments,\r\n  setClaimsTabSelectedItem,\r\n} from 'stores';\r\nimport { DMS_TASK_CONTEXT_TYPE_RFI_RESPONSE } from 'consts';\r\nimport * as utils from 'utils';\r\nimport * as constants from 'consts';\r\n\r\nexport default function RfiDetails(props) {\r\n  const { rfiTask } = props;\r\n  const dispatch = useDispatch();\r\n\r\n  const lossInformation = useSelector(selectLossInformation);\r\n  const isLossInfoLoading = useSelector(selectLossInfoIsLoading);\r\n  const claimsInformation = useSelector(selectClaimsInformation);\r\n  const claimBasicDetail = useSelector(selectClaimsTabSelectedClaimData);\r\n  const isClaimInfoLoading = useSelector(selectClaimInfoIsLoading);\r\n  const associatedTaskInformation = useSelector(selectTaskDashboardTaskDetails);\r\n  const isAssociatedTaskInfoLoading = useSelector(selectIsTaskDashboardTaskDetailsLoading);\r\n\r\n  const catCodes = useSelector(selectRefDataCatCodesList);\r\n  const claimsQueryCodes = useSelector(selectQueryCodes);\r\n  const refDataQueryCodes = useSelector(selectRefDataQueryCodes);\r\n  const lossQualifiers = useSelector(selectLossQualifiers);\r\n  const sanctionCheckStatus = useSelector(selectSanctionsCheckStatus);\r\n  const rfiHistoryLoader = useSelector(selectRfiHistoryListLoader);\r\n  const claimsTabRowsData = useSelector(selectClaimsTabRows);\r\n\r\n  const rfiOriginType = utils.claimsRfi.checkRfiOriginType(rfiTask?.refType);\r\n  const isInflightLoss = lossInformation?.isInflighLoss === 1 || true; // Defaulting to true as invalid loss id is present in RFI task created on Inflight Loss\r\n  const claimDetail = claimsInformation?.claimReference ? claimsInformation : claimBasicDetail;\r\n  const claimDashboardDisplayData = utils.generic.isValidArray(claimsTabRowsData, true) ? claimsTabRowsData[0] : {};\r\n\r\n  useEffect(() => {\r\n    getRfiHistoryDetails();\r\n    dispatch(setDmsTaskContextType({ type: DMS_TASK_CONTEXT_TYPE_RFI_RESPONSE, refId: rfiTask?.taskId }));\r\n\r\n    dispatch(\r\n      getLossInformation({\r\n        lossDetailsId: rfiTask?.lossDetailID,\r\n        sourceIdParams: rfiTask?.sourceID,\r\n        divisionIdParam: rfiTask?.departmentID,\r\n        claimRefParam: rfiTask?.claimRef || rfiTask?.processRef,\r\n        viewLoader: false,\r\n      })\r\n    );\r\n    dispatch(\r\n      getClaimsTabDetails({\r\n        requestType: constants.CLAIMS_TAB_REQ_TYPES.search,\r\n        claimsType: constants.CLAIM_TEAM_TYPE.allClaims,\r\n        searchBy: constants.CLAIMS_TAB_SEARCH_OPTION_CLAIM_REF,\r\n        firstTimeSort: 'processRef',\r\n        term: rfiTask?.claimRef,\r\n      })\r\n    );\r\n    dispatch(\r\n      getSelectedClaimDetails({\r\n        claimId: rfiTask?.businessProcessID,\r\n        claimRefParams: rfiTask?.claimRef,\r\n        sourceIdParams: rfiTask?.sourceID,\r\n        divisionIDParams: rfiTask?.departmentID,\r\n        viewLoader: false,\r\n      })\r\n    );\r\n    dispatch(getClaimsTaskDashboardDetail({ query: rfiTask?.parentTaskRef, claimID: rfiTask?.businessProcessID, viewLoader: false }));\r\n\r\n    dispatch(getSanctionsCheckStatus(rfiTask?.rootProcessId, false));\r\n\r\n    return () => {\r\n      dispatch(resetDmsTaskTypeContext());\r\n      dispatch(resetRfiDashboardData());\r\n    };\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (\r\n      utils.generic.isValidObject(claimDashboardDisplayData) &&\r\n      (claimDashboardDisplayData?.claimRef || claimDashboardDisplayData?.claimReference)\r\n    ) {\r\n      dispatch(setClaimsTabSelectedItem(claimDashboardDisplayData, true));\r\n    }\r\n  }, [claimDashboardDisplayData]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  //Sections Data\r\n  const lossInfo = utils.claimsAdditionalDetails.getLossCardInfo(lossInformation, catCodes, isInflightLoss, isLossInfoLoading);\r\n  const claimInfo = utils.claimsAdditionalDetails.getClaimCardInfo(claimDetail, lossQualifiers, isClaimInfoLoading);\r\n  const taskInfo = utils.claimsAdditionalDetails.getTaskCardInfo(\r\n    associatedTaskInformation,\r\n    sanctionCheckStatus,\r\n    isAssociatedTaskInfoLoading\r\n  );\r\n\r\n  const getRfiHistoryDetails = () => {\r\n    dispatch(getRfiHistory(rfiTask?.taskId))?.then((data) => {\r\n      if (data.status === constants.API_RESPONSE_OK) {\r\n        const rfihistoryList = [...data?.data];\r\n        if (!utils.generic.isInvalidOrEmptyArray(rfihistoryList)) {\r\n          const caseIncidentNotesList = [];\r\n          rfihistoryList?.forEach((item) => {\r\n            caseIncidentNotesList.push({\r\n              referenceId: `${rfiTask?.taskId}-${item?.caseIncidentNotesID?.toString()}`,\r\n              sectionType: constants.DMS_CONTEXT_TASK,\r\n            });\r\n          });\r\n          dispatch(getRfiHistoryDocuments(caseIncidentNotesList));\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const openDocViewer = (event, doc) => {\r\n    event.preventDefault();\r\n    const { documentId, documentName } = doc;\r\n    utils.dms.dmsDocumentViewLauncher(documentId, documentName);\r\n  };\r\n\r\n  return (\r\n    <RfiDetailsView\r\n      {...props}\r\n      rfiOriginType={rfiOriginType}\r\n      lossInfo={lossInfo}\r\n      claimInfo={claimInfo}\r\n      taskInfo={taskInfo}\r\n      claimsQueryCodes={claimsQueryCodes}\r\n      refDataQueryCodes={refDataQueryCodes}\r\n      rfiHistoryLoader={rfiHistoryLoader}\r\n      handlers={{ openDocViewer: openDocViewer, getRfiHistoryDetails: getRfiHistoryDetails }}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}