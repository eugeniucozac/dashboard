{"ast":null,"code":"import { addLoader, authLogout, removeLoader, enqueueNotification, hideModal } from 'stores';\nimport * as utils from 'utils';\nexport var editClientOffice = function editClientOffice(editedOffice, previousOffice) {\n  return function (dispatch, getState) {\n    // prettier-ignore\n    var _getState = getState(),\n        auth = _getState.user.auth,\n        endpoint = _getState.config.vars.endpoint;\n\n    dispatch(editClientOfficeRequest(editedOffice));\n    dispatch(addLoader('editClientOffice'));\n    var defaultError = {\n      file: 'stores/admin.actions.editClientOffice'\n    };\n\n    if (!utils.generic.isValidObject(editedOffice) || !utils.generic.isValidArray(editedOffice.parent, true) || !utils.generic.isValidArray(editedOffice.clients, true) || !utils.generic.isValidObject(previousOffice)) {\n      dispatch(editClientOfficeFailure(defaultError));\n      dispatch(enqueueNotification('notification.admin.officePatchFail', 'error'));\n      dispatch(removeLoader('editClientOffice'));\n      dispatch(hideModal());\n      return;\n    }\n\n    var parent = editedOffice.parent,\n        name = editedOffice.name,\n        clients = editedOffice.clients;\n    var officeToIds = {\n      name: name,\n      clientIds: clients.map(function (client) {\n        return client.id;\n      }),\n      parentId: parent[0].id\n    };\n    var previousOfficeToIds = {\n      name: previousOffice.name,\n      parentId: previousOffice.parent && previousOffice.parent.id,\n      clientIds: utils.generic.isValidArray(previousOffice.clients) && previousOffice.clients.map(function (clients) {\n        return clients.id;\n      })\n    };\n    var patchChanges = utils.generic.getDifferences(previousOfficeToIds, officeToIds);\n    return utils.api.patch({\n      token: auth.accessToken,\n      endpoint: endpoint.edge,\n      path: \"api/client/office/\".concat(previousOffice.id),\n      data: patchChanges\n    }).then(function (response) {\n      return utils.api.handleResponse(response);\n    }).then(function (json) {\n      return utils.api.handleData(json);\n    }).then(function (data) {\n      var name = data.name,\n          parent = data.parent;\n      dispatch(editClientOfficeSuccess(data));\n      dispatch(enqueueNotification('notification.admin.officePatchSuccess', 'success', {\n        data: {\n          officeName: name,\n          clientName: parent && parent.name\n        }\n      }));\n    })[\"catch\"](function (err) {\n      utils.api.handleError(err, defaultError);\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\n      dispatch(editClientOfficeFailure(err));\n      dispatch(enqueueNotification('notification.admin.officePatchFail', 'error'));\n      return err;\n    })[\"finally\"](function () {\n      dispatch(removeLoader('editClientOffice'));\n      dispatch(hideModal());\n    });\n  };\n};\nexport var editClientOfficeRequest = function editClientOfficeRequest(payload) {\n  return {\n    type: 'ADMIN_CLIENT_OFFICE_EDIT_REQUEST',\n    payload: payload\n  };\n};\nexport var editClientOfficeSuccess = function editClientOfficeSuccess(payload) {\n  return {\n    type: 'ADMIN_CLIENT_OFFICE_EDIT_SUCCESS',\n    payload: payload\n  };\n};\nexport var editClientOfficeFailure = function editClientOfficeFailure(error) {\n  return {\n    type: 'ADMIN_CLIENT_OFFICE_EDIT_FAILURE',\n    payload: error\n  };\n};","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/stores/admin/admin.actions.editClientOffice.js"],"names":["addLoader","authLogout","removeLoader","enqueueNotification","hideModal","utils","editClientOffice","editedOffice","previousOffice","dispatch","getState","auth","user","endpoint","config","vars","editClientOfficeRequest","defaultError","file","generic","isValidObject","isValidArray","parent","clients","editClientOfficeFailure","name","officeToIds","clientIds","map","client","id","parentId","previousOfficeToIds","patchChanges","getDifferences","api","patch","token","accessToken","edge","path","data","then","response","handleResponse","json","handleData","editClientOfficeSuccess","officeName","clientName","err","handleError","handleUnauthorized","payload","type","error"],"mappings":"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","sourcesContent":["import { addLoader, authLogout, removeLoader, enqueueNotification, hideModal } from 'stores';\r\nimport * as utils from 'utils';\r\n\r\nexport const editClientOffice = (editedOffice, previousOffice) => (dispatch, getState) => {\r\n  // prettier-ignore\r\n  const { user: { auth }, config: { vars: { endpoint }}} = getState();\r\n\r\n  dispatch(editClientOfficeRequest(editedOffice));\r\n  dispatch(addLoader('editClientOffice'));\r\n\r\n  const defaultError = {\r\n    file: 'stores/admin.actions.editClientOffice',\r\n  };\r\n\r\n  if (\r\n    !utils.generic.isValidObject(editedOffice) ||\r\n    !utils.generic.isValidArray(editedOffice.parent, true) ||\r\n    !utils.generic.isValidArray(editedOffice.clients, true) ||\r\n    !utils.generic.isValidObject(previousOffice)\r\n  ) {\r\n    dispatch(editClientOfficeFailure(defaultError));\r\n    dispatch(enqueueNotification('notification.admin.officePatchFail', 'error'));\r\n    dispatch(removeLoader('editClientOffice'));\r\n    dispatch(hideModal());\r\n    return;\r\n  }\r\n\r\n  const { parent, name, clients } = editedOffice;\r\n\r\n  const officeToIds = {\r\n    name,\r\n    clientIds: clients.map((client) => client.id),\r\n    parentId: parent[0].id,\r\n  };\r\n\r\n  const previousOfficeToIds = {\r\n    name: previousOffice.name,\r\n    parentId: previousOffice.parent && previousOffice.parent.id,\r\n    clientIds: utils.generic.isValidArray(previousOffice.clients) && previousOffice.clients.map((clients) => clients.id),\r\n  };\r\n\r\n  const patchChanges = utils.generic.getDifferences(previousOfficeToIds, officeToIds);\r\n\r\n  return utils.api\r\n    .patch({\r\n      token: auth.accessToken,\r\n      endpoint: endpoint.edge,\r\n      path: `api/client/office/${previousOffice.id}`,\r\n      data: patchChanges,\r\n    })\r\n    .then((response) => utils.api.handleResponse(response))\r\n    .then((json) => utils.api.handleData(json))\r\n    .then((data) => {\r\n      const { name, parent } = data;\r\n      dispatch(editClientOfficeSuccess(data));\r\n      dispatch(\r\n        enqueueNotification('notification.admin.officePatchSuccess', 'success', {\r\n          data: { officeName: name, clientName: parent && parent.name },\r\n        })\r\n      );\r\n    })\r\n    .catch((err) => {\r\n      utils.api.handleError(err, defaultError);\r\n      utils.api.handleUnauthorized(err, dispatch, authLogout);\r\n      dispatch(editClientOfficeFailure(err));\r\n      dispatch(enqueueNotification('notification.admin.officePatchFail', 'error'));\r\n      return err;\r\n    })\r\n    .finally(() => {\r\n      dispatch(removeLoader('editClientOffice'));\r\n      dispatch(hideModal());\r\n    });\r\n};\r\n\r\nexport const editClientOfficeRequest = (payload) => {\r\n  return {\r\n    type: 'ADMIN_CLIENT_OFFICE_EDIT_REQUEST',\r\n    payload,\r\n  };\r\n};\r\n\r\nexport const editClientOfficeSuccess = (payload) => {\r\n  return {\r\n    type: 'ADMIN_CLIENT_OFFICE_EDIT_SUCCESS',\r\n    payload,\r\n  };\r\n};\r\n\r\nexport const editClientOfficeFailure = (error) => {\r\n  return {\r\n    type: 'ADMIN_CLIENT_OFFICE_EDIT_FAILURE',\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}