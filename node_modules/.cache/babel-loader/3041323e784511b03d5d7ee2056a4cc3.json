{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\LinkClaimPolicy\\\\LinkClaimPolicy.view.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport PropTypes from 'prop-types'; //app\n\nimport styles from './LinkClaimPolicy.styles';\nimport { Accordion, FormLegend, FormAutocompleteMui, FormDate, FormText, Skeleton, FormCheckbox } from 'components';\nimport { ClaimsUnderwritingGroups, ClaimsMovementType } from 'modules';\nimport * as utils from 'utils';\nimport { makeStyles, Grid, Box, Typography } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nLinkClaimPolicyView.propTypes = {\n  fields: PropTypes.array.isRequired,\n  policyData: PropTypes.object.isRequired,\n  allClaimDetails: PropTypes.object,\n  originalCurrencyValue: PropTypes.func,\n  settlementCurrencyValue: PropTypes.func,\n  uwResetKey: PropTypes.number,\n  hasClaimRef: PropTypes.bool.isRequired,\n  underWritingGroups: PropTypes.object,\n  isBordereauFlag: PropTypes.bool,\n  validation: PropTypes.bool.isRequired,\n  setValidation: PropTypes.func.isRequired,\n  index: PropTypes.number.isRequired,\n  isFormsEdited: PropTypes.array.isRequired,\n  setFormEditedStatus: PropTypes.func.isRequired,\n  postSaveHandler: PropTypes.func.isRequired,\n  postEditSaveHandler: PropTypes.func.isRequired,\n  saveStatus: PropTypes.number,\n  selectedPolicyRender: PropTypes.number,\n  handleFormStatus: PropTypes.func,\n  selectNextPolicy: PropTypes.bool,\n  postSaveNextHanlder: PropTypes.func,\n  fieldsLoader: PropTypes.object.isRequired\n};\nexport function LinkClaimPolicyView(_ref) {\n  _s();\n\n  var fields = _ref.fields,\n      policyData = _ref.policyData,\n      allClaimDetails = _ref.allClaimDetails,\n      originalCurrencyValue = _ref.originalCurrencyValue,\n      settlementCurrencyValue = _ref.settlementCurrencyValue,\n      uwResetKey = _ref.uwResetKey,\n      hasClaimRef = _ref.hasClaimRef,\n      underWritingGroups = _ref.underWritingGroups,\n      isBordereauFlag = _ref.isBordereauFlag,\n      validation = _ref.validation,\n      setValidation = _ref.setValidation,\n      index = _ref.index,\n      isFormsEdited = _ref.isFormsEdited,\n      setFormEditedStatus = _ref.setFormEditedStatus,\n      postSaveHandler = _ref.postSaveHandler,\n      postEditSaveHandler = _ref.postEditSaveHandler,\n      saveStatus = _ref.saveStatus,\n      selectedPolicyRender = _ref.selectedPolicyRender,\n      handleFormStatus = _ref.handleFormStatus,\n      selectNextPolicy = _ref.selectNextPolicy,\n      postSaveNextHanlder = _ref.postSaveNextHanlder,\n      fieldsLoader = _ref.fieldsLoader;\n  var classes = makeStyles(styles, {\n    name: 'LinkClaimPolicy'\n  })();\n  var focusInputRef = useRef();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isEdit = _useState2[0],\n      setIsEdit = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      initialLoad = _useState4[0],\n      setInitialLoad = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      accExpandStatus = _useState6[0],\n      setAccExpandStatus = _useState6[1];\n\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n  var claimForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema),\n    context: {\n      validation: validation\n    }\n  }));\n  var handleSubmit = claimForm.handleSubmit,\n      setValue = claimForm.setValue,\n      control = claimForm.control,\n      errors = claimForm.errors,\n      watch = claimForm.watch;\n  var insuredWatch = Boolean(watch('insured'));\n  var clientWatch = Boolean(watch('client'));\n  var countryCodeWatch = Boolean(watch('countryCode'));\n  var certificateNumberWatch = Boolean(watch('certificateNumber'));\n  var certificateInceptionDateWatch = Boolean(watch('certificateInceptionDate'));\n  var certificateExpiryDateWatch = Boolean(watch('certificateExpiryDate'));\n  var originalCurrencyCodeWatch = Boolean(watch('originalCurrencyCode'));\n  var settlementCurrencyCodeWatch = Boolean(watch('settlementCurrencyCode'));\n  var interestWatch = Boolean(watch('interest'));\n  var underWritingGroupsWatch = Boolean(watch('underWritingGroups'));\n\n  var formWatcher = function formWatcher() {\n    return insuredWatch || clientWatch || countryCodeWatch || certificateNumberWatch || certificateInceptionDateWatch || certificateExpiryDateWatch || originalCurrencyCodeWatch || settlementCurrencyCodeWatch || interestWatch || underWritingGroupsWatch;\n  };\n\n  var saveHandler = function saveHandler() {\n    if (selectedPolicyRender !== '' && initialLoad || initialLoad && validation) {\n      handleFormStatus();\n    }\n  };\n\n  if (formWatcher() !== isEdit) {\n    if (formWatcher()) setIsEdit(true);\n  }\n\n  useEffect(function () {\n    if (isEdit && initialLoad) {\n      saveHandler();\n    } else {\n      var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n        return _objectSpread({}, form);\n      });\n\n      if (formState[index]['formEditedStatus']) {\n        formState[index]['formEditedStatus'] = false;\n        formState[index]['isSubmitted'] = true;\n        setFormEditedStatus(formState);\n      }\n\n      setInitialLoad(true);\n    }\n  }, [isEdit]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    var _isFormsEdited$index, _isFormsEdited$index2;\n\n    if (saveStatus && !((_isFormsEdited$index = isFormsEdited[index]) === null || _isFormsEdited$index === void 0 ? void 0 : _isFormsEdited$index.formEditedStatus) && initialLoad) {\n      handleSubmit(postSaveHandler)();\n    } else if (saveStatus && ((_isFormsEdited$index2 = isFormsEdited[index]) === null || _isFormsEdited$index2 === void 0 ? void 0 : _isFormsEdited$index2.formEditedStatus) && validation) {\n      handleSubmit(postEditSaveHandler)();\n    } else if (selectNextPolicy && initialLoad) {\n      handleSubmit(postSaveNextHanlder)();\n    }\n\n    setValidation(true);\n  }, [saveStatus]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if (underWritingGroups) {\n      if (underWritingGroups.percentageOfSelected) {\n        setValue('orderPercentage', underWritingGroups.percentageOfSelected);\n        if (selectedPolicyRender !== '') saveHandler();\n      }\n    }\n  }, [underWritingGroups]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    var _Object$keys;\n\n    if (((_Object$keys = Object.keys(errors)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) > 0) {\n      var _focusInputRef$curren;\n\n      focusInputRef === null || focusInputRef === void 0 ? void 0 : (_focusInputRef$curren = focusInputRef.current) === null || _focusInputRef$curren === void 0 ? void 0 : _focusInputRef$curren.scrollIntoView();\n    }\n  }, [errors]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if ((allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.originalCurrency) || (allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.settlementCurrencyCode)) {\n      setValue('originalCurrencyCode', originalCurrencyValue());\n      setValue('settlementCurrencyCode', settlementCurrencyValue());\n    }\n\n    if (isBordereauFlag && !Object.keys(errors).length > 0) {\n      setValue('certificateNumber', fields[9].value);\n      setValue('certificateInceptionDate', fields[10].value);\n      setValue('certificateExpiryDate', fields[11].value);\n    }\n  }, [allClaimDetails]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FormLegend, {\n      text: policyData === null || policyData === void 0 ? void 0 : policyData.policyNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: -2,\n      ref: focusInputRef,\n      children: [isBordereauFlag && /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(FormCheckbox, _objectSpread(_objectSpread({\n            label: utils.string.t('claims.claimInformation.bordereauClaim')\n          }, utils.form.getFieldProps(fields, 'bordereauClaim', control)), {}, {\n            error: errors.bordereauClaim\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: fieldsLoader.isInsuredLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 15,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 55,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'insured', control)), {}, {\n              error: errors.insured,\n              callback: initialLoad && saveHandler,\n              handleUpdate: function handleUpdate(id, value) {\n                setValue(id, value);\n              }\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this)\n          }, uwResetKey, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: fieldsLoader.isPoliciesClientsLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 15,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 55,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'client', control)), {}, {\n              error: errors.client,\n              callback: initialLoad && saveHandler,\n              handleUpdate: function handleUpdate(id, value) {\n                setValue(id, value);\n              }\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this)\n          }, uwResetKey || isEdit, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'countryCode', control)), {}, {\n              error: errors.countryCode,\n              callback: initialLoad && saveHandler,\n              handleUpdate: function handleUpdate(id, value) {\n                setValue(id, value);\n              }\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)\n          }, uwResetKey || isEdit, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'originalCurrencyCode', control)), {}, {\n              error: errors.originalCurrencyCode,\n              callback: initialLoad && saveHandler,\n              handleUpdate: function handleUpdate(id, value) {\n                setValue(id, value);\n              }\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)\n          }, uwResetKey, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'settlementCurrencyCode', control)), {}, {\n              error: errors.settlementCurrencyCode,\n              callback: initialLoad && saveHandler,\n              handleUpdate: function handleUpdate(id, value) {\n                setValue(id, value);\n              }\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)\n          }, uwResetKey, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          sm: 4,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: fieldsLoader.isInterestLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [' ', /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 15,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 55,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'interest', control)), {}, {\n              error: errors.interest,\n              callback: initialLoad && saveHandler,\n              handleUpdate: function handleUpdate(id, value) {\n                setValue(id, value);\n              }\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this)\n          }, uwResetKey, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), isBordereauFlag && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 4,\n            children: /*#__PURE__*/_jsxDEV(FormText, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'certificateNumber', control)), {}, {\n              error: errors.certificateNumber\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 4,\n            children: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'certificateInceptionDate', control)), {}, {\n              error: errors.certificateInceptionDate\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 4,\n            children: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'certificateExpiryDate', control)), {}, {\n              error: errors.certificateExpiryDate\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            sm: 4,\n            children: (fieldsLoader === null || fieldsLoader === void 0 ? void 0 : fieldsLoader.isBordereauPeriodsLoading) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 15,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                height: 55,\n                animation: \"wave\",\n                displayNumber: 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'bordereauPeriod', control)), {}, {\n              error: errors.bordereauPeriod\n            }), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 5,\n        children: /*#__PURE__*/_jsxDEV(Accordion, {\n          expanded: accExpandStatus,\n          onChange: function onChange() {\n            return setAccExpandStatus(!accExpandStatus);\n          },\n          title: /*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.accordionTitle,\n            variant: \"body2\",\n            children: utils.string.t('claims.underWritingGroups.title')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            className: classes.accordionContent,\n            children: [/*#__PURE__*/_jsxDEV(ClaimsUnderwritingGroups, {\n              fields: fields,\n              claimForm: claimForm,\n              uwResetKey: uwResetKey,\n              hasClaimRef: hasClaimRef,\n              selectedPolicyRender: selectedPolicyRender\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              mt: 4,\n              children: /*#__PURE__*/_jsxDEV(ClaimsMovementType, {\n                fields: fields,\n                claimForm: claimForm,\n                underWritingGroups: underWritingGroups,\n                enforceValueSet: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LinkClaimPolicyView, \"lcBmVF6Aav6O1HwBhAgrk8vgMWI=\", false, function () {\n  return [useForm];\n});\n\n_c = LinkClaimPolicyView;\n\nvar _c;\n\n$RefreshReg$(_c, \"LinkClaimPolicyView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/LinkClaimPolicy/LinkClaimPolicy.view.js"],"names":["React","useEffect","useState","useRef","useForm","yupResolver","PropTypes","styles","Accordion","FormLegend","FormAutocompleteMui","FormDate","FormText","Skeleton","FormCheckbox","ClaimsUnderwritingGroups","ClaimsMovementType","utils","makeStyles","Grid","Box","Typography","LinkClaimPolicyView","propTypes","fields","array","isRequired","policyData","object","allClaimDetails","originalCurrencyValue","func","settlementCurrencyValue","uwResetKey","number","hasClaimRef","bool","underWritingGroups","isBordereauFlag","validation","setValidation","index","isFormsEdited","setFormEditedStatus","postSaveHandler","postEditSaveHandler","saveStatus","selectedPolicyRender","handleFormStatus","selectNextPolicy","postSaveNextHanlder","fieldsLoader","classes","name","focusInputRef","isEdit","setIsEdit","initialLoad","setInitialLoad","accExpandStatus","setAccExpandStatus","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","claimForm","resolver","context","handleSubmit","setValue","control","errors","watch","insuredWatch","Boolean","clientWatch","countryCodeWatch","certificateNumberWatch","certificateInceptionDateWatch","certificateExpiryDateWatch","originalCurrencyCodeWatch","settlementCurrencyCodeWatch","interestWatch","underWritingGroupsWatch","formWatcher","saveHandler","formState","map","formEditedStatus","percentageOfSelected","Object","keys","length","current","scrollIntoView","originalCurrency","settlementCurrencyCode","value","policyNumber","string","t","getFieldProps","bordereauClaim","isInsuredLoading","insured","id","isPoliciesClientsLoading","client","countryCode","originalCurrencyCode","isInterestLoading","interest","certificateNumber","certificateInceptionDate","certificateExpiryDate","isBordereauPeriodsLoading","bordereauPeriod","accordionTitle","accordionContent"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport PropTypes from 'prop-types';\r\n\r\n//app\r\nimport styles from './LinkClaimPolicy.styles';\r\nimport { Accordion, FormLegend, FormAutocompleteMui, FormDate, FormText, Skeleton, FormCheckbox } from 'components';\r\nimport { ClaimsUnderwritingGroups, ClaimsMovementType } from 'modules';\r\nimport * as utils from 'utils';\r\n\r\nimport { makeStyles, Grid, Box, Typography } from '@material-ui/core';\r\n\r\nLinkClaimPolicyView.propTypes = {\r\n  fields: PropTypes.array.isRequired,\r\n  policyData: PropTypes.object.isRequired,\r\n  allClaimDetails: PropTypes.object,\r\n  originalCurrencyValue: PropTypes.func,\r\n  settlementCurrencyValue: PropTypes.func,\r\n  uwResetKey: PropTypes.number,\r\n  hasClaimRef: PropTypes.bool.isRequired,\r\n  underWritingGroups: PropTypes.object,\r\n  isBordereauFlag: PropTypes.bool,\r\n  validation: PropTypes.bool.isRequired,\r\n  setValidation: PropTypes.func.isRequired,\r\n  index: PropTypes.number.isRequired,\r\n  isFormsEdited: PropTypes.array.isRequired,\r\n  setFormEditedStatus: PropTypes.func.isRequired,\r\n  postSaveHandler: PropTypes.func.isRequired,\r\n  postEditSaveHandler: PropTypes.func.isRequired,\r\n  saveStatus: PropTypes.number,\r\n  selectedPolicyRender: PropTypes.number,\r\n  handleFormStatus: PropTypes.func,\r\n  selectNextPolicy: PropTypes.bool,\r\n  postSaveNextHanlder: PropTypes.func,\r\n  fieldsLoader: PropTypes.object.isRequired,\r\n};\r\n\r\nexport function LinkClaimPolicyView({\r\n  fields,\r\n  policyData,\r\n  allClaimDetails,\r\n  originalCurrencyValue,\r\n  settlementCurrencyValue,\r\n  uwResetKey,\r\n  hasClaimRef,\r\n  underWritingGroups,\r\n  isBordereauFlag,\r\n  validation,\r\n  setValidation,\r\n  index,\r\n  isFormsEdited,\r\n  setFormEditedStatus,\r\n  postSaveHandler,\r\n  postEditSaveHandler,\r\n  saveStatus,\r\n  selectedPolicyRender,\r\n  handleFormStatus,\r\n  selectNextPolicy,\r\n  postSaveNextHanlder,\r\n  fieldsLoader,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'LinkClaimPolicy' })();\r\n\r\n  const focusInputRef = useRef();\r\n\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [initialLoad, setInitialLoad] = useState(false);\r\n  const [accExpandStatus, setAccExpandStatus] = useState(true);\r\n\r\n  const defaultValues = utils.form.getInitialValues(fields);\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n\r\n  const claimForm = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema), context: { validation } }),\r\n  });\r\n\r\n  const { handleSubmit, setValue, control, errors, watch } = claimForm;\r\n\r\n  const insuredWatch = Boolean(watch('insured'));\r\n  const clientWatch = Boolean(watch('client'));\r\n  const countryCodeWatch = Boolean(watch('countryCode'));\r\n  const certificateNumberWatch = Boolean(watch('certificateNumber'));\r\n  const certificateInceptionDateWatch = Boolean(watch('certificateInceptionDate'));\r\n  const certificateExpiryDateWatch = Boolean(watch('certificateExpiryDate'));\r\n  const originalCurrencyCodeWatch = Boolean(watch('originalCurrencyCode'));\r\n  const settlementCurrencyCodeWatch = Boolean(watch('settlementCurrencyCode'));\r\n  const interestWatch = Boolean(watch('interest'));\r\n  const underWritingGroupsWatch = Boolean(watch('underWritingGroups'));\r\n\r\n  const formWatcher = () => {\r\n    return (\r\n      insuredWatch ||\r\n      clientWatch ||\r\n      countryCodeWatch ||\r\n      certificateNumberWatch ||\r\n      certificateInceptionDateWatch ||\r\n      certificateExpiryDateWatch ||\r\n      originalCurrencyCodeWatch ||\r\n      settlementCurrencyCodeWatch ||\r\n      interestWatch ||\r\n      underWritingGroupsWatch\r\n    );\r\n  };\r\n\r\n  const saveHandler = () => {\r\n    if ((selectedPolicyRender !== '' && initialLoad) || (initialLoad && validation)) {\r\n      handleFormStatus();\r\n    }\r\n  };\r\n\r\n  if (formWatcher() !== isEdit) {\r\n    if (formWatcher()) setIsEdit(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (isEdit && initialLoad) {\r\n      saveHandler();\r\n    } else {\r\n      const formState = isFormsEdited?.map((form) => ({ ...form }));\r\n      if (formState[index]['formEditedStatus']) {\r\n        formState[index]['formEditedStatus'] = false;\r\n        formState[index]['isSubmitted'] = true;\r\n        setFormEditedStatus(formState);\r\n      }\r\n      setInitialLoad(true);\r\n    }\r\n  }, [isEdit]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (saveStatus && !isFormsEdited[index]?.formEditedStatus && initialLoad) {\r\n      handleSubmit(postSaveHandler)();\r\n    } else if (saveStatus && isFormsEdited[index]?.formEditedStatus && validation) {\r\n      handleSubmit(postEditSaveHandler)();\r\n    } else if (selectNextPolicy && initialLoad) {\r\n      handleSubmit(postSaveNextHanlder)();\r\n    }\r\n    setValidation(true);\r\n  }, [saveStatus]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (underWritingGroups) {\r\n      if (underWritingGroups.percentageOfSelected) {\r\n        setValue('orderPercentage', underWritingGroups.percentageOfSelected);\r\n        if (selectedPolicyRender !== '') saveHandler();\r\n      }\r\n    }\r\n  }, [underWritingGroups]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (Object.keys(errors)?.length > 0) {\r\n      focusInputRef?.current?.scrollIntoView();\r\n    }\r\n  }, [errors]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (allClaimDetails?.originalCurrency || allClaimDetails?.settlementCurrencyCode) {\r\n      setValue('originalCurrencyCode', originalCurrencyValue());\r\n      setValue('settlementCurrencyCode', settlementCurrencyValue());\r\n    }\r\n\r\n    if (isBordereauFlag && !Object.keys(errors).length > 0) {\r\n      setValue('certificateNumber', fields[9].value);\r\n      setValue('certificateInceptionDate', fields[10].value);\r\n      setValue('certificateExpiryDate', fields[11].value);\r\n    }\r\n  }, [allClaimDetails]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <>\r\n      <FormLegend text={policyData?.policyNumber} />\r\n      <Box mt={-2} ref={focusInputRef}>\r\n        {isBordereauFlag && (\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={6} sm={4}>\r\n              <FormCheckbox\r\n                label={utils.string.t('claims.claimInformation.bordereauClaim')}\r\n                {...utils.form.getFieldProps(fields, 'bordereauClaim', control)}\r\n                error={errors.bordereauClaim}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={6} sm={4}>\r\n            <div key={uwResetKey}>\r\n              {fieldsLoader.isInsuredLoading ? (\r\n                <>\r\n                  <Skeleton height={15} animation=\"wave\" displayNumber={1} />\r\n                  <Skeleton height={55} animation=\"wave\" displayNumber={1} />\r\n                </>\r\n              ) : (\r\n                <FormAutocompleteMui\r\n                  {...utils.form.getFieldProps(fields, 'insured', control)}\r\n                  error={errors.insured}\r\n                  callback={initialLoad && saveHandler}\r\n                  handleUpdate={(id, value) => {\r\n                    setValue(id, value);\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          </Grid>\r\n\r\n          <Grid item xs={6} sm={4}>\r\n            <div key={uwResetKey || isEdit}>\r\n              {fieldsLoader.isPoliciesClientsLoading ? (\r\n                <>\r\n                  <Skeleton height={15} animation=\"wave\" displayNumber={1} />\r\n                  <Skeleton height={55} animation=\"wave\" displayNumber={1} />\r\n                </>\r\n              ) : (\r\n                <FormAutocompleteMui\r\n                  {...utils.form.getFieldProps(fields, 'client', control)}\r\n                  error={errors.client}\r\n                  callback={initialLoad && saveHandler}\r\n                  handleUpdate={(id, value) => {\r\n                    setValue(id, value);\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          </Grid>\r\n\r\n          <Grid item xs={6} sm={4}>\r\n            <div key={uwResetKey || isEdit}>\r\n              <FormAutocompleteMui\r\n                {...utils.form.getFieldProps(fields, 'countryCode', control)}\r\n                error={errors.countryCode}\r\n                callback={initialLoad && saveHandler}\r\n                handleUpdate={(id, value) => {\r\n                  setValue(id, value);\r\n                }}\r\n              />\r\n            </div>\r\n          </Grid>\r\n\r\n          <Grid item xs={6} sm={4}>\r\n            <div key={uwResetKey}>\r\n              <FormAutocompleteMui\r\n                {...utils.form.getFieldProps(fields, 'originalCurrencyCode', control)}\r\n                error={errors.originalCurrencyCode}\r\n                callback={initialLoad && saveHandler}\r\n                handleUpdate={(id, value) => {\r\n                  setValue(id, value);\r\n                }}\r\n              />\r\n            </div>\r\n          </Grid>\r\n          <Grid item xs={6} sm={4}>\r\n            <div key={uwResetKey}>\r\n              <FormAutocompleteMui\r\n                {...utils.form.getFieldProps(fields, 'settlementCurrencyCode', control)}\r\n                error={errors.settlementCurrencyCode}\r\n                callback={initialLoad && saveHandler}\r\n                handleUpdate={(id, value) => {\r\n                  setValue(id, value);\r\n                }}\r\n              />\r\n            </div>\r\n          </Grid>\r\n          <Grid item xs={6} sm={4}>\r\n            <div key={uwResetKey}>\r\n              {fieldsLoader.isInterestLoading ? (\r\n                <>\r\n                  {' '}\r\n                  <Skeleton height={15} animation=\"wave\" displayNumber={1} />\r\n                  <Skeleton height={55} animation=\"wave\" displayNumber={1} />\r\n                </>\r\n              ) : (\r\n                <FormAutocompleteMui\r\n                  {...utils.form.getFieldProps(fields, 'interest', control)}\r\n                  error={errors.interest}\r\n                  callback={initialLoad && saveHandler}\r\n                  handleUpdate={(id, value) => {\r\n                    setValue(id, value);\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          </Grid>\r\n          {isBordereauFlag && (\r\n            <>\r\n              <Grid item xs={6} sm={4}>\r\n                <FormText {...utils.form.getFieldProps(fields, 'certificateNumber', control)} error={errors.certificateNumber} />\r\n              </Grid>\r\n              <Grid item xs={6} sm={4}>\r\n                <FormDate\r\n                  {...utils.form.getFieldProps(fields, 'certificateInceptionDate', control)}\r\n                  error={errors.certificateInceptionDate}\r\n                />\r\n              </Grid>\r\n              <Grid item xs={6} sm={4}>\r\n                <FormDate {...utils.form.getFieldProps(fields, 'certificateExpiryDate', control)} error={errors.certificateExpiryDate} />\r\n              </Grid>\r\n              <Grid item xs={6} sm={4}>\r\n                {fieldsLoader?.isBordereauPeriodsLoading ? (\r\n                  <>\r\n                    <Skeleton height={15} animation=\"wave\" displayNumber={1} />\r\n                    <Skeleton height={55} animation=\"wave\" displayNumber={1} />\r\n                  </>\r\n                ) : (\r\n                  <FormAutocompleteMui {...utils.form.getFieldProps(fields, 'bordereauPeriod', control)} error={errors.bordereauPeriod} />\r\n                )}\r\n              </Grid>\r\n            </>\r\n          )}\r\n        </Grid>\r\n\r\n        <Box mt={5}>\r\n          <Accordion\r\n            expanded={accExpandStatus}\r\n            onChange={() => setAccExpandStatus(!accExpandStatus)}\r\n            title={\r\n              <Typography className={classes.accordionTitle} variant=\"body2\">\r\n                {utils.string.t('claims.underWritingGroups.title')}\r\n              </Typography>\r\n            }\r\n          >\r\n            <Box className={classes.accordionContent}>\r\n              <ClaimsUnderwritingGroups\r\n                fields={fields}\r\n                claimForm={claimForm}\r\n                uwResetKey={uwResetKey}\r\n                hasClaimRef={hasClaimRef}\r\n                selectedPolicyRender={selectedPolicyRender}\r\n              />\r\n              <Box mt={4}>\r\n                <ClaimsMovementType fields={fields} claimForm={claimForm} underWritingGroups={underWritingGroups} enforceValueSet={true} />\r\n              </Box>\r\n            </Box>\r\n          </Accordion>\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}