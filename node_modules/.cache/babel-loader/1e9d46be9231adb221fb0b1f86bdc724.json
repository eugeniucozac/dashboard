{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\LinkClaimPolicy\\\\LinkClaimPolicy.view.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup'; //app\n\nimport * as utils from 'utils';\nimport { Accordion, FormAutocompleteMui, FormDate, FormLabel, FormGrid, FormText, Layout } from 'components';\nimport { ClaimsUnderwritingGroups, ClaimsMovementType } from 'modules';\nimport styles from './LinkClaimPolicy.styles';\nimport { makeStyles, Grid, Box, Typography } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function LinkClaimPolicyView(_ref) {\n  _s();\n\n  var fields = _ref.fields,\n      policyData = _ref.policyData,\n      uwResetKey = _ref.uwResetKey,\n      hasClaimRef = _ref.hasClaimRef,\n      underWritingGroups = _ref.underWritingGroups,\n      isBordereauFlag = _ref.isBordereauFlag,\n      validation = _ref.validation,\n      setValidation = _ref.setValidation,\n      index = _ref.index,\n      isFormsEdited = _ref.isFormsEdited,\n      setFormEditedStatus = _ref.setFormEditedStatus,\n      postSaveHandler = _ref.postSaveHandler,\n      postEditSaveHandler = _ref.postEditSaveHandler,\n      saveStatus = _ref.saveStatus,\n      selectedPolicyRender = _ref.selectedPolicyRender;\n  var classes = makeStyles(styles, {\n    name: 'EnterClaimInformation'\n  })();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isEdit = _useState2[0],\n      setIsEdit = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      initialLoad = _useState4[0],\n      setInitialLoad = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      accExpandStatus = _useState6[0],\n      setAccExpandStatus = _useState6[1];\n\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n  var claimForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema),\n    context: {\n      validation: validation\n    }\n  }));\n  var handleSubmit = claimForm.handleSubmit,\n      setValue = claimForm.setValue,\n      control = claimForm.control,\n      errors = claimForm.errors,\n      watch = claimForm.watch;\n  var insuredWatch = Boolean(watch('insured'));\n  var clientWatch = Boolean(watch('client'));\n  var countryCodeWatch = Boolean(watch('countryCode'));\n  var certificateNumberWatch = Boolean(watch('certificateNumber'));\n  var certificateInceptionDateWatch = Boolean(watch('certificateInceptionDate'));\n  var certificateExpiryDateWatch = Boolean(watch('certificateExpiryDate'));\n  var originalCurrencyCodeWatch = Boolean(watch('originalCurrencyCode'));\n  var settlementCurrencyCodeWatch = Boolean(watch('settlementCurrencyCode'));\n  var interestWatch = Boolean(watch('interest'));\n  var underWritingGroupsWatch = Boolean(watch('underWritingGroups'));\n\n  var formWatcher = function formWatcher() {\n    return insuredWatch || clientWatch || countryCodeWatch || certificateNumberWatch || certificateInceptionDateWatch || certificateExpiryDateWatch || originalCurrencyCodeWatch || settlementCurrencyCodeWatch || interestWatch || underWritingGroupsWatch;\n  };\n\n  var saveHandler = function saveHandler() {\n    if (selectedPolicyRender !== '') {\n      var formEdited = isFormsEdited.map(function (form) {\n        return _objectSpread({}, form);\n      });\n      formEdited[index][\"formEditedStatus\"] = true;\n      setFormEditedStatus(formEdited);\n    }\n  };\n\n  if (formWatcher() !== isEdit) {\n    setIsEdit(true);\n  }\n\n  useEffect(function () {\n    if (isEdit && initialLoad) {\n      saveHandler();\n    } else {\n      setInitialLoad(true);\n    }\n  }, [isEdit]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    var _isFormsEdited$index, _isFormsEdited$index2;\n\n    if (saveStatus && !((_isFormsEdited$index = isFormsEdited[index]) === null || _isFormsEdited$index === void 0 ? void 0 : _isFormsEdited$index.formEditedStatus) && initialLoad) {\n      handleSubmit(postSaveHandler)();\n    } else if (saveStatus && ((_isFormsEdited$index2 = isFormsEdited[index]) === null || _isFormsEdited$index2 === void 0 ? void 0 : _isFormsEdited$index2.formEditedStatus) && validation) {\n      handleSubmit(postEditSaveHandler)();\n    }\n\n    setValidation(true);\n  }, [saveStatus]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if (underWritingGroups) {\n      if (underWritingGroups.percentageOfSelected) {\n        setValue('orderPercentage', underWritingGroups.percentageOfSelected);\n        saveHandler();\n      } else {\n        setValue('order', '100');\n      }\n    }\n  }, [underWritingGroups]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setValue('insured', fields === null || fields === void 0 ? void 0 : fields[0].value);\n    setValue('client', fields[1].value);\n    setValue('countryCode', fields[2].value);\n    setValue('originalCurrencyCode', fields[3].value);\n    setValue('settlementCurrencyCode', fields[4].value);\n    setValue('interest', fields[5].value);\n\n    if (isBordereauFlag) {\n      setValue('certificateNumber', fields[9].value);\n      setValue('certificateInceptionDate', fields[10].value);\n      setValue('certificateExpiryDate', fields[11].value);\n    }\n  }, [uwResetKey]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"body2\",\n      className: classes.typoTitle,\n      children: policyData === null || policyData === void 0 ? void 0 : policyData.policyNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.wrapper,\n      children: /*#__PURE__*/_jsxDEV(Layout, {\n        main: true,\n        padding: true,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          m: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 3,\n            direction: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.insured')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'insured', control)), {}, {\n                  error: errors.insured,\n                  callback: selectedPolicyRender !== '' && saveHandler\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 37\n                }, this)\n              }, uwResetKey, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.client')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'client', control)), {}, {\n                  error: errors.client,\n                  callback: selectedPolicyRender !== '' && saveHandler\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 37\n                }, this)\n              }, uwResetKey || isEdit, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.country')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'countryCode', control)), {}, {\n                  error: errors.countryCode,\n                  callback: selectedPolicyRender !== '' && saveHandler\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 37\n                }, this)\n              }, uwResetKey || isEdit, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), isBordereauFlag && /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 3,\n            direction: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.certificateNumber')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormText, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'certificateNumber', control)), {}, {\n                  error: errors.certificateNumber\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.certificateInceptionDate')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'certificateInceptionDate', control)), {}, {\n                  error: errors.certificateInceptionDate\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.certificateExpiryDate')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormDate, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'certificateExpiryDate', control)), {}, {\n                  error: errors.certificateExpiryDate\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 3,\n            direction: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.originalCurrency')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'originalCurrencyCode', control)), {}, {\n                  error: errors.settlementCurrencyCode,\n                  callback: selectedPolicyRender !== '' && saveHandler\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 37\n                }, this)\n              }, uwResetKey, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.settlementCurrency')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'settlementCurrencyCode', control)), {}, {\n                  error: errors.settlementCurrencyCode,\n                  callback: selectedPolicyRender !== '' && saveHandler\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 37\n                }, this)\n              }, uwResetKey, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n                nestedClasses: {\n                  root: classes.formLabel\n                },\n                label: \"\".concat(utils.string.t('claims.claimInformation.interest')),\n                align: \"right\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                children: /*#__PURE__*/_jsxDEV(FormAutocompleteMui, _objectSpread(_objectSpread({}, utils.form.getFieldProps(fields, 'interest', control)), {}, {\n                  error: errors.interest,\n                  callback: selectedPolicyRender !== '' && saveHandler\n                }), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 37\n                }, this)\n              }, uwResetKey, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Accordion, {\n            expanded: accExpandStatus,\n            onChange: function onChange() {\n              return setAccExpandStatus(!accExpandStatus);\n            },\n            className: classes.accordionLine,\n            title: /*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.title,\n              variant: \"body2\",\n              children: [\" \", utils.string.t('claims.underWritingGroups.title')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 152\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              direction: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(ClaimsUnderwritingGroups, {\n                  fields: fields,\n                  claimForm: claimForm,\n                  uwResetKey: uwResetKey,\n                  hasClaimRef: hasClaimRef,\n                  selectedPolicyRender: selectedPolicyRender\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 30\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(ClaimsMovementType, {\n                  fields: fields,\n                  claimForm: claimForm,\n                  underWritingGroups: underWritingGroups,\n                  enforceValueSet: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LinkClaimPolicyView, \"zp3wr2nQsXMLLvQurSRCKhSksDI=\", false, function () {\n  return [useForm];\n});\n\n_c = LinkClaimPolicyView;\n\nvar _c;\n\n$RefreshReg$(_c, \"LinkClaimPolicyView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/LinkClaimPolicy/LinkClaimPolicy.view.js"],"names":["React","useEffect","useState","useForm","yupResolver","utils","Accordion","FormAutocompleteMui","FormDate","FormLabel","FormGrid","FormText","Layout","ClaimsUnderwritingGroups","ClaimsMovementType","styles","makeStyles","Grid","Box","Typography","LinkClaimPolicyView","fields","policyData","uwResetKey","hasClaimRef","underWritingGroups","isBordereauFlag","validation","setValidation","index","isFormsEdited","setFormEditedStatus","postSaveHandler","postEditSaveHandler","saveStatus","selectedPolicyRender","classes","name","isEdit","setIsEdit","initialLoad","setInitialLoad","accExpandStatus","setAccExpandStatus","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","claimForm","resolver","context","handleSubmit","setValue","control","errors","watch","insuredWatch","Boolean","clientWatch","countryCodeWatch","certificateNumberWatch","certificateInceptionDateWatch","certificateExpiryDateWatch","originalCurrencyCodeWatch","settlementCurrencyCodeWatch","interestWatch","underWritingGroupsWatch","formWatcher","saveHandler","formEdited","map","formEditedStatus","percentageOfSelected","value","typoTitle","policyNumber","wrapper","root","formLabel","string","t","getFieldProps","insured","client","countryCode","certificateNumber","certificateInceptionDate","certificateExpiryDate","settlementCurrencyCode","interest","accordionLine","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\n//app\r\nimport * as utils from 'utils';\r\n\r\nimport { Accordion, FormAutocompleteMui, FormDate, FormLabel, FormGrid, FormText, Layout } from 'components';\r\nimport { ClaimsUnderwritingGroups, ClaimsMovementType } from 'modules';\r\nimport styles from './LinkClaimPolicy.styles';\r\n\r\nimport { makeStyles, Grid, Box, Typography } from '@material-ui/core';\r\n\r\nexport function LinkClaimPolicyView({\r\n    fields, \r\n    policyData, \r\n    uwResetKey, \r\n    hasClaimRef, \r\n    underWritingGroups, \r\n    isBordereauFlag,\r\n    validation, \r\n    setValidation,\r\n    index,\r\n    isFormsEdited,\r\n    setFormEditedStatus,\r\n    postSaveHandler,\r\n    postEditSaveHandler,\r\n    saveStatus,\r\n    selectedPolicyRender,\r\n}){\r\n    const classes = makeStyles(styles, { name: 'EnterClaimInformation' })();\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [initialLoad, setInitialLoad] = useState(false);\r\n    const [accExpandStatus, setAccExpandStatus] = useState(true);\r\n    const defaultValues = utils.form.getInitialValues(fields);\r\n    const validationSchema = utils.form.getValidationSchema(fields);\r\n\r\n    const claimForm = useForm({\r\n        defaultValues,\r\n        ...(validationSchema && { resolver: yupResolver(validationSchema), context: { validation } }),\r\n    });\r\n    const { handleSubmit, setValue, control, errors, watch } = claimForm;\r\n\r\n    const insuredWatch = Boolean(watch('insured'));\r\n    const clientWatch = Boolean(watch('client'));\r\n    const countryCodeWatch = Boolean(watch('countryCode'));\r\n    const certificateNumberWatch = Boolean(watch('certificateNumber'));\r\n    const certificateInceptionDateWatch = Boolean(watch('certificateInceptionDate'));\r\n    const certificateExpiryDateWatch = Boolean(watch('certificateExpiryDate'));\r\n    const originalCurrencyCodeWatch = Boolean(watch ('originalCurrencyCode'));\r\n    const settlementCurrencyCodeWatch = Boolean(watch('settlementCurrencyCode'));\r\n    const interestWatch = Boolean(watch('interest'));\r\n    const underWritingGroupsWatch = Boolean(watch('underWritingGroups'));\r\n\r\n    const formWatcher = () => {\r\n        return insuredWatch || clientWatch || countryCodeWatch || certificateNumberWatch || certificateInceptionDateWatch || certificateExpiryDateWatch || originalCurrencyCodeWatch || settlementCurrencyCodeWatch || interestWatch || underWritingGroupsWatch;\r\n    }\r\n\r\n    const saveHandler = () => {\r\n        if(selectedPolicyRender!==''){\r\n            const formEdited = isFormsEdited.map((form) => ({ ...form }));\r\n            formEdited[index][\"formEditedStatus\"] = true;\r\n            setFormEditedStatus(formEdited);\r\n        }\r\n    };\r\n\r\n    if(formWatcher() !== isEdit){\r\n        setIsEdit(true);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(isEdit && initialLoad){\r\n            saveHandler();\r\n        } else{\r\n            setInitialLoad(true);\r\n        }   \r\n    }, [isEdit]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    useEffect(()=>{\r\n        if(saveStatus && !isFormsEdited[index]?.formEditedStatus && initialLoad){\r\n            handleSubmit(postSaveHandler)();\r\n        }else if(saveStatus && isFormsEdited[index]?.formEditedStatus && validation){\r\n            handleSubmit(postEditSaveHandler)();\r\n        }\r\n        setValidation(true);\r\n    },[saveStatus]) // eslint-disable-line react-hooks/exhaustive-deps\r\n    \r\n    useEffect(() => {\r\n        if(underWritingGroups){\r\n            if (underWritingGroups.percentageOfSelected) {\r\n                setValue('orderPercentage', underWritingGroups.percentageOfSelected);\r\n                saveHandler();\r\n              } else {\r\n                setValue('order', '100');\r\n              }\r\n        }\r\n    }, [underWritingGroups]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    useEffect(()=>{\r\n        setValue('insured', fields?.[0].value);\r\n        setValue('client', fields[1].value);\r\n        setValue('countryCode', fields[2].value);\r\n        setValue('originalCurrencyCode', fields[3].value);\r\n        setValue('settlementCurrencyCode', fields[4].value);\r\n        setValue('interest', fields[5].value);\r\n        if(isBordereauFlag){\r\n            setValue('certificateNumber', fields[9].value);\r\n            setValue('certificateInceptionDate', fields[10].value);\r\n            setValue('certificateExpiryDate', fields[11].value);\r\n        }\r\n    },[uwResetKey]) // eslint-disable-line react-hooks/exhaustive-deps\r\n    \r\n    return(\r\n        <>\r\n            <Typography variant=\"body2\" className={classes.typoTitle}>\r\n                {policyData?.policyNumber}\r\n            </Typography>\r\n            <div className={classes.wrapper}>\r\n                <Layout main padding>\r\n                    <Box m={3}>\r\n                        <Grid container spacing={3} direction=\"row\">\r\n                            <Grid item xs={4}>\r\n                                <FormLabel\r\n                                    nestedClasses={{ root: classes.formLabel }}\r\n                                    label={`${utils.string.t('claims.claimInformation.insured')}`}\r\n                                    align=\"right\"\r\n                                />\r\n                                <FormGrid item key={uwResetKey}>\r\n                                    <FormAutocompleteMui \r\n                                        {...utils.form.getFieldProps(fields, 'insured', control)} \r\n                                        error={errors.insured} \r\n                                        callback={selectedPolicyRender!=='' && saveHandler}\r\n                                    />\r\n                                </FormGrid>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={4}>\r\n                                <FormLabel\r\n                                    nestedClasses={{ root: classes.formLabel }}\r\n                                    label={`${utils.string.t('claims.claimInformation.client')}`}\r\n                                    align=\"right\"\r\n                                />\r\n                                <FormGrid item key={uwResetKey || isEdit}>\r\n                                    <FormAutocompleteMui \r\n                                        {...utils.form.getFieldProps(fields, 'client', control)} \r\n                                        error={errors.client} \r\n                                        callback={selectedPolicyRender!=='' && saveHandler} \r\n                                    />\r\n                                </FormGrid>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={4}>\r\n                                <FormLabel\r\n                                    nestedClasses={{ root: classes.formLabel }}\r\n                                    label={`${utils.string.t('claims.claimInformation.country')}`}\r\n                                    align=\"right\"\r\n                                />\r\n                                <FormGrid item key={uwResetKey || isEdit}>\r\n                                    <FormAutocompleteMui \r\n                                        {...utils.form.getFieldProps(fields, 'countryCode', control)} \r\n                                        error={errors.countryCode} \r\n                                        callback={selectedPolicyRender!=='' && saveHandler}\r\n                                    />\r\n                                </FormGrid>\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                        {\r\n                            isBordereauFlag && (\r\n                                <Grid container spacing={3} direction=\"row\">\r\n                                    <Grid item xs={4}>\r\n                                        <FormLabel\r\n                                            nestedClasses={{ root: classes.formLabel }}\r\n                                            label={`${utils.string.t('claims.claimInformation.certificateNumber')}`}\r\n                                            align=\"right\"\r\n                                        />\r\n                                        <FormGrid item>\r\n                                            <FormText {...utils.form.getFieldProps(fields, 'certificateNumber', control)} error={errors.certificateNumber} />\r\n                                        </FormGrid>\r\n                                    </Grid>\r\n                                    \r\n                                    <Grid item xs={4}>\r\n                                        <FormLabel\r\n                                            nestedClasses={{ root: classes.formLabel }}\r\n                                            label={`${utils.string.t('claims.claimInformation.certificateInceptionDate')}`}\r\n                                            align=\"right\"\r\n                                        />\r\n                                        <FormGrid item>\r\n                                            <FormDate\r\n                                                {...utils.form.getFieldProps(fields, 'certificateInceptionDate', control)}\r\n                                                error={errors.certificateInceptionDate}\r\n                                            />\r\n                                        </FormGrid>\r\n                                    </Grid>\r\n\r\n                                    <Grid item xs={4}>\r\n                                        <FormLabel\r\n                                            nestedClasses={{ root: classes.formLabel }}\r\n                                            label={`${utils.string.t('claims.claimInformation.certificateExpiryDate')}`}\r\n                                            align=\"right\"\r\n                                        />\r\n                                        <FormGrid item>\r\n                                            <FormDate\r\n                                                {...utils.form.getFieldProps(fields, 'certificateExpiryDate', control)}\r\n                                                error={errors.certificateExpiryDate}\r\n                                            />\r\n                                        </FormGrid>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            )\r\n                        }\r\n\r\n                        <Grid container spacing={3} direction=\"row\">\r\n                            <Grid item xs={4}>\r\n                                <FormLabel\r\n                                    nestedClasses={{ root: classes.formLabel }}\r\n                                    label={`${utils.string.t('claims.claimInformation.originalCurrency')}`}\r\n                                    align=\"right\"\r\n                                />\r\n                                <FormGrid item key={uwResetKey}>\r\n                                    <FormAutocompleteMui\r\n                                        {...utils.form.getFieldProps(fields, 'originalCurrencyCode', control)}\r\n                                        error={errors.settlementCurrencyCode}\r\n                                        callback={selectedPolicyRender!=='' && saveHandler}\r\n                                    />\r\n                                </FormGrid>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <FormLabel\r\n                                    nestedClasses={{ root: classes.formLabel }}\r\n                                    label={`${utils.string.t('claims.claimInformation.settlementCurrency')}`}\r\n                                    align=\"right\"\r\n                                />\r\n                                <FormGrid item key={uwResetKey}>\r\n                                    <FormAutocompleteMui\r\n                                        {...utils.form.getFieldProps(fields, 'settlementCurrencyCode', control)}\r\n                                        error={errors.settlementCurrencyCode}\r\n                                        callback={selectedPolicyRender!=='' && saveHandler}\r\n                                    />\r\n                                </FormGrid>\r\n                            </Grid>\r\n                            <Grid item xs={4}>\r\n                                <FormLabel\r\n                                    nestedClasses={{ root: classes.formLabel }}\r\n                                    label={`${utils.string.t('claims.claimInformation.interest')}`}\r\n                                    align=\"right\"\r\n                                />\r\n                                <FormGrid item key={uwResetKey}>\r\n                                    <FormAutocompleteMui\r\n                                        {...utils.form.getFieldProps(fields, 'interest', control)}\r\n                                        error={errors.interest}\r\n                                        callback={selectedPolicyRender!=='' && saveHandler}\r\n                                    />\r\n                                </FormGrid>\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                    </Box>\r\n                    <Box>\r\n                    <Accordion expanded={accExpandStatus} onChange={()=>setAccExpandStatus(!accExpandStatus)} className={classes.accordionLine} title={<Typography className={classes.title} variant=\"body2\"> {utils.string.t('claims.underWritingGroups.title')}</Typography>}>\r\n                        <Grid container direction=\"row\">\r\n                            <Grid item xs={12}>\r\n                             <ClaimsUnderwritingGroups fields={fields} claimForm={claimForm} uwResetKey={uwResetKey} hasClaimRef={hasClaimRef} selectedPolicyRender={selectedPolicyRender} />\r\n                            </Grid>\r\n                            <Grid item xs={12}>\r\n                            <ClaimsMovementType\r\n                                fields={fields}\r\n                                claimForm={claimForm}\r\n                                underWritingGroups={underWritingGroups}\r\n                                enforceValueSet={true}\r\n                            />\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Accordion>\r\n                    </Box>\r\n                </Layout>\r\n            </div>\r\n            \r\n        </>\r\n    );\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}