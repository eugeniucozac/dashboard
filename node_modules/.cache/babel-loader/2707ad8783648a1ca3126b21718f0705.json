{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\Approval\\\\Approval.view.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types'; // app\n\nimport styles from './Approval.styles';\nimport { Info, Button, FormAutocomplete } from 'components';\nimport PersonIcon from '@material-ui/icons/Person';\nimport * as utils from 'utils';\nimport config from 'config'; // mui\n\nimport { makeStyles, Typography } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nApprovalView.propTypes = {\n  title: PropTypes.string.isRequired,\n  user: PropTypes.object,\n  userKey: PropTypes.string.isRequired,\n  approvedDate: PropTypes.string,\n  approvedDateKey: PropTypes.string.isRequired,\n  isApproved: PropTypes.bool,\n  isApprovedKey: PropTypes.string.isRequired,\n  users: PropTypes.array,\n  onChange: PropTypes.func.isRequired,\n  isSubmitting: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool,\n  disableApproval: PropTypes.bool\n};\nexport function ApprovalView(_ref) {\n  _s();\n\n  var _this = this;\n\n  var users = _ref.users,\n      title = _ref.title,\n      onChange = _ref.onChange,\n      isSubmitting = _ref.isSubmitting,\n      disabled = _ref.disabled,\n      disableApproval = _ref.disableApproval,\n      user = _ref.user,\n      userKey = _ref.userKey,\n      approvedDate = _ref.approvedDate,\n      approvedDateKey = _ref.approvedDateKey,\n      isApproved = _ref.isApproved,\n      isApprovedKey = _ref.isApprovedKey;\n  var classes = makeStyles(styles, {\n    name: 'Approval'\n  })();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      allowUserChange = _useState4[0],\n      setAllowUserChange = _useState4[1];\n\n  useEffect(function () {\n    setValue(user || {});\n    setAllowUserChange(users && !isApproved);\n  }, [isApproved, user, users] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  var searchField = {\n    name: 'user',\n    placeholder: utils.string.t('app.searchForProperty', {\n      property: utils.string.t('app.user')\n    }),\n    optionLabel: 'fullName',\n    muiComponentProps: {\n      'data-testid': 'fullName-search',\n      disabled: disabled\n    },\n    innerComponentProps: {\n      isDisabled: disabled,\n      isClearable: false,\n      blurInputOnSelect: true,\n      noOptionsFoundMessage: utils.string.t('app.propertyNotFound', {\n        property: utils.string.t('app.user')\n      }),\n      customStyles: {\n        size: 'xs'\n      }\n    }\n  };\n\n  var ApprovalBox = function ApprovalBox() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.box,\n      children: [allowUserChange && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.autocomplete,\n        children: /*#__PURE__*/_jsxDEV(FormAutocomplete, _objectSpread(_objectSpread({}, searchField), {}, {\n          options: users || [],\n          value: [value],\n          handleUpdate: function handleUpdate(id, value) {\n            if (value[0] && typeof value[0] === 'object') {\n              setValue(value[0]);\n              onChange(_defineProperty({}, userKey, value[0]));\n            }\n          }\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, _this), !isApproved && /*#__PURE__*/_jsxDEV(Button, {\n        nestedClasses: {\n          btn: classes.button\n        },\n        text: utils.string.t('app.approve'),\n        onClick: function onClick() {\n          var _onChange2;\n\n          return onChange((_onChange2 = {}, _defineProperty(_onChange2, isApprovedKey, true), _defineProperty(_onChange2, approvedDateKey, new Date()), _onChange2));\n        },\n        disabled: isSubmitting || disableApproval || !user,\n        color: \"primary\",\n        size: \"medium\",\n        \"data-testid\": \"approval-confirmation-button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, _this), isApproved && /*#__PURE__*/_jsxDEV(Typography, {\n        \"data-testid\": \"approval-date\",\n        variant: \"body2\",\n        color: \"textSecondary\",\n        className: classes.date,\n        children: \"\".concat(utils.string.t('app.approved'), \": \").concat(utils.string.t('format.date', {\n          value: {\n            date: approvedDate,\n            format: config.ui.format.date.text\n          }\n        }))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Info, {\n    title: title,\n    description: !allowUserChange ? value.fullName : undefined,\n    content: /*#__PURE__*/_jsxDEV(ApprovalBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 16\n    }, this),\n    avatarIcon: PersonIcon,\n    nestedClasses: {\n      details: classes.info\n    },\n    \"data-testid\": \"approval-info\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ApprovalView, \"vrDA/atVLRgRRsHGqr19jz6KzZo=\");\n\n_c = ApprovalView;\n\nvar _c;\n\n$RefreshReg$(_c, \"ApprovalView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/Approval/Approval.view.js"],"names":["React","useState","useEffect","PropTypes","styles","Info","Button","FormAutocomplete","PersonIcon","utils","config","makeStyles","Typography","ApprovalView","propTypes","title","string","isRequired","user","object","userKey","approvedDate","approvedDateKey","isApproved","bool","isApprovedKey","users","array","onChange","func","isSubmitting","disabled","disableApproval","classes","name","value","setValue","allowUserChange","setAllowUserChange","searchField","placeholder","t","property","optionLabel","muiComponentProps","innerComponentProps","isDisabled","isClearable","blurInputOnSelect","noOptionsFoundMessage","customStyles","size","ApprovalBox","box","autocomplete","id","btn","button","Date","date","format","ui","text","fullName","undefined","details","info"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// app\r\nimport styles from './Approval.styles';\r\nimport { Info, Button, FormAutocomplete } from 'components';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\n\r\n// mui\r\nimport { makeStyles, Typography } from '@material-ui/core';\r\n\r\nApprovalView.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  user: PropTypes.object,\r\n  userKey: PropTypes.string.isRequired,\r\n  approvedDate: PropTypes.string,\r\n  approvedDateKey: PropTypes.string.isRequired,\r\n  isApproved: PropTypes.bool,\r\n  isApprovedKey: PropTypes.string.isRequired,\r\n  users: PropTypes.array,\r\n  onChange: PropTypes.func.isRequired,\r\n  isSubmitting: PropTypes.bool.isRequired,\r\n  disabled: PropTypes.bool,\r\n  disableApproval: PropTypes.bool,\r\n};\r\n\r\nexport function ApprovalView({\r\n  users,\r\n  title,\r\n  onChange,\r\n  isSubmitting,\r\n  disabled,\r\n  disableApproval,\r\n  user,\r\n  userKey,\r\n  approvedDate,\r\n  approvedDateKey,\r\n  isApproved,\r\n  isApprovedKey,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'Approval' })();\r\n  const [value, setValue] = useState({});\r\n  const [allowUserChange, setAllowUserChange] = useState(false);\r\n\r\n  useEffect(\r\n    () => {\r\n      setValue(user || {});\r\n      setAllowUserChange(users && !isApproved);\r\n    },\r\n    [isApproved, user, users] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const searchField = {\r\n    name: 'user',\r\n    placeholder: utils.string.t('app.searchForProperty', { property: utils.string.t('app.user') }),\r\n    optionLabel: 'fullName',\r\n    muiComponentProps: {\r\n      'data-testid': 'fullName-search',\r\n      disabled,\r\n    },\r\n    innerComponentProps: {\r\n      isDisabled: disabled,\r\n      isClearable: false,\r\n      blurInputOnSelect: true,\r\n      noOptionsFoundMessage: utils.string.t('app.propertyNotFound', { property: utils.string.t('app.user') }),\r\n      customStyles: {\r\n        size: 'xs',\r\n      },\r\n    },\r\n  };\r\n\r\n  const ApprovalBox = () => {\r\n    return (\r\n      <div className={classes.box}>\r\n        {allowUserChange && (\r\n          <div className={classes.autocomplete}>\r\n            <FormAutocomplete\r\n              {...searchField}\r\n              options={users || []}\r\n              value={[value]}\r\n              handleUpdate={(id, value) => {\r\n                if (value[0] && typeof value[0] === 'object') {\r\n                  setValue(value[0]);\r\n                  onChange({ [userKey]: value[0] });\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {!isApproved && (\r\n          <Button\r\n            nestedClasses={{ btn: classes.button }}\r\n            text={utils.string.t('app.approve')}\r\n            onClick={() => onChange({ [isApprovedKey]: true, [approvedDateKey]: new Date() })}\r\n            disabled={isSubmitting || disableApproval || !user}\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            data-testid=\"approval-confirmation-button\"\r\n          />\r\n        )}\r\n\r\n        {isApproved && (\r\n          <Typography data-testid=\"approval-date\" variant=\"body2\" color=\"textSecondary\" className={classes.date}>\r\n            {`${utils.string.t('app.approved')}: ${utils.string.t('format.date', {\r\n              value: { date: approvedDate, format: config.ui.format.date.text },\r\n            })}`}\r\n          </Typography>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Info\r\n      title={title}\r\n      description={!allowUserChange ? value.fullName : undefined}\r\n      content={<ApprovalBox />}\r\n      avatarIcon={PersonIcon}\r\n      nestedClasses={{\r\n        details: classes.info,\r\n      }}\r\n      data-testid=\"approval-info\"\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}