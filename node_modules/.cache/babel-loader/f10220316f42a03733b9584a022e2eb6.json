{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\forms\\\\ClaimsRegisterNewLoss\\\\ClaimsRegisterNewLoss.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport ClaimsRegisterNewLossView from './ClaimsRegisterNewLoss.view';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nClaimsRegisterNewLoss.propTypes = {\n  steps: PropTypes.array.isRequired,\n  stepsForms: PropTypes.array.isRequired,\n  findDirtyForm: PropTypes.func,\n  initialFormStatus: PropTypes.array,\n  currentStep: PropTypes.number\n};\nClaimsRegisterNewLoss.defaultProps = {\n  currentStep: 0,\n  findDirtyForm: function findDirtyForm() {},\n  initialFormStatus: []\n};\nexport default function ClaimsRegisterNewLoss(_ref) {\n  _s();\n\n  var currentStep = _ref.currentStep,\n      steps = _ref.steps,\n      stepsForms = _ref.stepsForms,\n      findDirtyForm = _ref.findDirtyForm,\n      initialFormStatus = _ref.initialFormStatus;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      stepFields = _useState2[0],\n      setStepFields = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStep = _useState4[0],\n      setActiveStep = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      progress = _useState6[0],\n      setProgress = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isFormsEdited = _useState8[0],\n      setFormEditedStatus = _useState8[1];\n\n  var handleStep = function handleStep(step) {\n    if (activeStep < step) {\n      var _isFormsEdited$active, _isFormsEdited$active2, _isFormsEdited, _isFormsEdited2;\n\n      if (!(isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$active = isFormsEdited[activeStep]) === null || _isFormsEdited$active === void 0 ? void 0 : _isFormsEdited$active[\"formEditedStatus\"]) && (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$active2 = isFormsEdited[activeStep]) === null || _isFormsEdited$active2 === void 0 ? void 0 : _isFormsEdited$active2[\"isSubmitted\"]) && !(isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited = isFormsEdited[step - 1]) === null || _isFormsEdited === void 0 ? void 0 : _isFormsEdited[\"formEditedStatus\"]) && (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited2 = isFormsEdited[step - 1]) === null || _isFormsEdited2 === void 0 ? void 0 : _isFormsEdited2[\"isSubmitted\"])) {\n        setActiveStep(step);\n      }\n    } else if (activeStep > step) {\n      var _isFormsEdited$active3;\n\n      if (!(isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$active3 = isFormsEdited[activeStep]) === null || _isFormsEdited$active3 === void 0 ? void 0 : _isFormsEdited$active3[\"formEditedStatus\"])) {\n        setActiveStep(step);\n      }\n    }\n  };\n\n  var handleNext = function handleNext() {\n    var formState = isFormsEdited.map(function (form) {\n      return _objectSpread({}, form);\n    });\n    formState === null || formState === void 0 ? void 0 : formState.map(function (form) {\n      var _formState$activeStep;\n\n      if ((form === null || form === void 0 ? void 0 : form.id) > activeStep && (formState === null || formState === void 0 ? void 0 : (_formState$activeStep = formState[activeStep]) === null || _formState$activeStep === void 0 ? void 0 : _formState$activeStep[\"formEditedStatus\"])) {\n        form[\"isSubmitted\"] = false;\n      }\n    });\n    formState[activeStep][\"formEditedStatus\"] = false;\n    formState[activeStep][\"isSubmitted\"] = true;\n    setFormEditedStatus(formState);\n    setActiveStep(activeStep + 1);\n  };\n\n  var handleBack = function handleBack() {\n    var _isFormsEdited$active4;\n\n    if (!(isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$active4 = isFormsEdited[activeStep]) === null || _isFormsEdited$active4 === void 0 ? void 0 : _isFormsEdited$active4[\"formEditedStatus\"])) {\n      setActiveStep(activeStep - 1);\n    }\n  };\n\n  var handleSave = function handleSave() {\n    var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n      return _objectSpread({}, form);\n    });\n    formState[activeStep][\"formEditedStatus\"] = false;\n    formState[activeStep][\"isSubmitted\"] = true;\n    formState === null || formState === void 0 ? void 0 : formState.map(function (frm) {\n      return (frm === null || frm === void 0 ? void 0 : frm.id) > activeStep ? frm[\"isSubmitted\"] = false : frm[\"isSubmitted\"] = true;\n    });\n    setFormEditedStatus(formState);\n  };\n\n  var handleFormStatus = function handleFormStatus() {\n    var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n      return _objectSpread({}, form);\n    });\n    formState[activeStep][\"formEditedStatus\"] = true;\n    formState[activeStep][\"isSubmitted\"] = false;\n    setFormEditedStatus(formState);\n  };\n\n  useEffect(function () {\n    currentStep && setActiveStep(currentStep);\n    setStepFields(steps);\n    setFormEditedStatus(stepsForms);\n    return function () {\n      findDirtyForm(initialFormStatus);\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setProgress(activeStep ? activeStep / stepFields.length * 100 : 0);\n  }, [activeStep]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    findDirtyForm(isFormsEdited);\n  }, [isFormsEdited]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(ClaimsRegisterNewLossView, {\n    activeStep: activeStep,\n    steps: steps,\n    progress: progress,\n    handleStep: handleStep,\n    isFormsEdited: isFormsEdited,\n    isAllStepsCompleted: false,\n    handleFormStatus: handleFormStatus,\n    handleNext: handleNext,\n    handleBack: handleBack,\n    handleSave: handleSave\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ClaimsRegisterNewLoss, \"piEUUTQHog5mOe483U/YpX5pDqY=\");\n\n_c = ClaimsRegisterNewLoss;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimsRegisterNewLoss\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/forms/ClaimsRegisterNewLoss/ClaimsRegisterNewLoss.js"],"names":["React","useState","useEffect","PropTypes","ClaimsRegisterNewLossView","ClaimsRegisterNewLoss","propTypes","steps","array","isRequired","stepsForms","findDirtyForm","func","initialFormStatus","currentStep","number","defaultProps","stepFields","setStepFields","activeStep","setActiveStep","progress","setProgress","isFormsEdited","setFormEditedStatus","handleStep","step","handleNext","formState","map","form","id","handleBack","handleSave","frm","handleFormStatus","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ClaimsRegisterNewLossView from './ClaimsRegisterNewLoss.view';\r\n\r\nClaimsRegisterNewLoss.propTypes = {\r\n  steps: PropTypes.array.isRequired,\r\n  stepsForms: PropTypes.array.isRequired,\r\n  findDirtyForm: PropTypes.func,\r\n  initialFormStatus: PropTypes.array,\r\n  currentStep: PropTypes.number\r\n};\r\nClaimsRegisterNewLoss.defaultProps = {\r\n  currentStep: 0,\r\n  findDirtyForm: () => { },\r\n  initialFormStatus: []\r\n}\r\nexport default function ClaimsRegisterNewLoss({ currentStep, steps, stepsForms, findDirtyForm, initialFormStatus }) {\r\n  const [stepFields, setStepFields] = useState([]);\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [progress, setProgress] = useState(0);\r\n  const [isFormsEdited, setFormEditedStatus] = useState([])\r\n\r\n  const handleStep = (step) => {\r\n    if (activeStep < step) {\r\n      if (!isFormsEdited?.[activeStep]?.[\"formEditedStatus\"]\r\n        && isFormsEdited?.[activeStep]?.[\"isSubmitted\"]\r\n        &&\r\n        (!isFormsEdited?.[step - 1]?.[\"formEditedStatus\"] && isFormsEdited?.[step - 1]?.[\"isSubmitted\"])\r\n      ) {\r\n        setActiveStep(step);\r\n      }\r\n    }\r\n    else if (activeStep > step) {\r\n      if (!isFormsEdited?.[activeStep]?.[\"formEditedStatus\"]) {\r\n        setActiveStep(step);\r\n      }\r\n    }\r\n\r\n  };\r\n  const handleNext = () => {\r\n    const formState = isFormsEdited.map((form) => ({ ...form }))\r\n    formState?.map(form => {\r\n      if (form?.id > activeStep && formState?.[activeStep]?.[\"formEditedStatus\"]) {\r\n        form[\"isSubmitted\"] = false\r\n      }\r\n    })\r\n    formState[activeStep][\"formEditedStatus\"] = false;\r\n    formState[activeStep][\"isSubmitted\"] = true;\r\n    setFormEditedStatus(formState)\r\n    setActiveStep(activeStep + 1)\r\n  }\r\n  const handleBack = () => {\r\n    if (!isFormsEdited?.[activeStep]?.[\"formEditedStatus\"]) {\r\n      setActiveStep(activeStep - 1)\r\n    }\r\n  }\r\n  const handleSave = () => {\r\n    const formState = isFormsEdited?.map((form) => ({ ...form }))\r\n    formState[activeStep][\"formEditedStatus\"] = false;\r\n    formState[activeStep][\"isSubmitted\"] = true;\r\n    formState?.map(frm => frm?.id > activeStep ? frm[\"isSubmitted\"] = false : frm[\"isSubmitted\"] = true)\r\n    setFormEditedStatus(formState)\r\n  }\r\n  const handleFormStatus = () => {\r\n    const formState = isFormsEdited?.map((form) => ({ ...form }))\r\n    formState[activeStep][\"formEditedStatus\"] = true;\r\n    formState[activeStep][\"isSubmitted\"] = false;\r\n    setFormEditedStatus(formState)\r\n  }\r\n\r\n  useEffect(() => {\r\n    currentStep && setActiveStep(currentStep)\r\n    setStepFields(steps);\r\n    setFormEditedStatus(stepsForms)\r\n    return () => {\r\n      findDirtyForm(initialFormStatus)\r\n    };\r\n  }, []);  // eslint-disable-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    setProgress(activeStep ? (activeStep / stepFields.length) * 100 : 0);\r\n  }, [activeStep]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    findDirtyForm(isFormsEdited)\r\n  }, [isFormsEdited]);// eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <ClaimsRegisterNewLossView\r\n      activeStep={activeStep}\r\n      steps={steps}\r\n      progress={progress}\r\n      handleStep={handleStep}\r\n      isFormsEdited={isFormsEdited}\r\n      isAllStepsCompleted={false}\r\n      handleFormStatus={handleFormStatus}\r\n      handleNext={handleNext}\r\n      handleBack={handleBack}\r\n      handleSave={handleSave}\r\n    />\r\n\r\n\r\n  );\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}