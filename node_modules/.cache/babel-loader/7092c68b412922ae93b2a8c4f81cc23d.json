{"ast":null,"code":"import _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\LinkClaimPolicy\\\\LinkClaimPolicy.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport moment from 'moment';\nimport PropTypes from 'prop-types'; // app\n\nimport styles from './LinkClaimPolicy.styles';\nimport { LinkClaimPolicyView } from './LinkClaimPolicy.view';\nimport { FormGrid } from 'components';\nimport { getInterest, getClaimDetails, getPolicyInsures, getPolicyClients, getPolicySections, getBEAdjuster, getComplexityValues, selectClaimsPolicySections, selectClaimsInterestItems, selectClaimPolicyInsures, selectSectionEnabledUG, selectClaimsUnderwritingGroups, selectClaimPolicyClients, selectAllClaimDetails, postClaimDetailsInformation, postEditClaimDetailsInformation, selectLinkPoliciesData, getLinkPoliciesData, selectRefDataNewCountriesList, selectClaimsInterest, selectIsClaimPolicyClientsLoading, selectPolicySectionIsLoading, selectisClaimPolicyInsuresLoading, selectRefDataSettlementCurrency, selectRefDataBaseCurrency, selectClaimBordereauPeriods, getClaimBordereauPeriods, getReferralValues, selectBordereauPeriodsLoading, resetClaimsInformation } from 'stores';\nimport * as utils from 'utils';\nimport { CLAIM_SECTION_ENABLED_UG, CLAIM_POLICY_SECTION_DEFAULT } from 'consts'; //mui\n\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { makeStyles } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nSelectedClaimPolicy.propTypes = {\n  selectedPolicy: PropTypes.bool\n};\nexport default function SelectedClaimPolicy(_ref) {\n  _s();\n\n  var _interest,\n      _settlementCurriencie,\n      _useSelector,\n      _countriesList,\n      _originalCurrencies,\n      _linkPoliciesData$dat2,\n      _linkPoliciesData$dat11,\n      _linkPoliciesData$dat12,\n      _linkPoliciesData$dat13,\n      _linkPoliciesData$dat14,\n      _isFormsEdited$index2,\n      _isFormsEdited$index3,\n      _isFormsEdited$index4,\n      _isFormsEdited$index5,\n      _isFormsEdited$index6,\n      _linkPoliciesData$dat15,\n      _interest2,\n      _interest3,\n      _linkPoliciesData$dat16,\n      _claimInfo$basisOfOrd,\n      _linkPoliciesData$dat17,\n      _linkPoliciesData$dat18,\n      _this = this;\n\n  var policyData = _ref.policyData,\n      selectedPolicyRender = _ref.selectedPolicyRender,\n      setSelectedPolicyRender = _ref.setSelectedPolicyRender,\n      validation = _ref.validation,\n      setValidation = _ref.setValidation,\n      setActiveStep = _ref.setActiveStep,\n      index = _ref.index,\n      isFormsEdited = _ref.isFormsEdited,\n      setFormEditedStatus = _ref.setFormEditedStatus,\n      saveStatus = _ref.saveStatus,\n      sectionEnabledValidationFlag = _ref.sectionEnabledValidationFlag,\n      claimInfo = _ref.claimInfo,\n      handleFormStatus = _ref.handleFormStatus,\n      selectNextPolicy = _ref.selectNextPolicy,\n      setSelectNextPolicy = _ref.setSelectNextPolicy,\n      selectedPolicy = _ref.selectedPolicy;\n  var classes = makeStyles(styles, {\n    name: 'LinkClaimPolicy'\n  })();\n  var dispatch = useDispatch();\n  var bordereauPolicyData = useRef(null);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      uwResetKey = _useState2[0],\n      setUWResetKey = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      stepper = _useState4[0],\n      setStepper = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isBordereauChecked = _useState6[0],\n      setBordereauChecked = _useState6[1];\n\n  var interest = useSelector(selectClaimsInterestItems);\n  interest = utils.generic.isValidArray(interest) ? (_interest = interest) === null || _interest === void 0 ? void 0 : _interest.map(function (intrst) {\n    return _objectSpread(_objectSpread({}, intrst), {}, {\n      description: \"\".concat(intrst.code, \" - \").concat(intrst.description)\n    });\n  }) : null;\n  var allSettlementCurriencies = useSelector(selectRefDataSettlementCurrency);\n  var settlementCurriencies = utils.referenceData.settlementCurrencyTypes.getAllById(allSettlementCurriencies, policyData === null || policyData === void 0 ? void 0 : policyData.xbInstanceID);\n  settlementCurriencies = utils.generic.isValidArray(settlementCurriencies) ? (_settlementCurriencie = settlementCurriencies) === null || _settlementCurriencie === void 0 ? void 0 : _settlementCurriencie.map(function (currency) {\n    return _objectSpread(_objectSpread({}, currency), {}, {\n      currencyName: \"\".concat(currency.currencyCd, \" - \").concat(currency.currencyName)\n    });\n  }) : null;\n  var allClaimDetails = useSelector(selectAllClaimDetails);\n  var underWritingGroups = useSelector(selectClaimsUnderwritingGroups);\n  var policySections = useSelector(selectClaimsPolicySections);\n  var claimPolicyInsures = useSelector(selectClaimPolicyInsures);\n  var isSectionEnabled = useSelector(selectSectionEnabledUG);\n  var claimPolicyClients = useSelector(selectClaimPolicyClients);\n  var isInterestLoading = (_useSelector = useSelector(selectClaimsInterest)) === null || _useSelector === void 0 ? void 0 : _useSelector.isLoading;\n  var isPoliciesClientsLoading = useSelector(selectIsClaimPolicyClientsLoading);\n  var isPolicySectionLoading = useSelector(selectPolicySectionIsLoading);\n  var isInsuredLoading = useSelector(selectisClaimPolicyInsuresLoading);\n  var claimBordereauPeriods = useSelector(selectClaimBordereauPeriods);\n  var isBordereauPeriodsLoading = useSelector(selectBordereauPeriodsLoading);\n  var countriesList = useSelector(selectRefDataNewCountriesList);\n  countriesList = utils.generic.isValidArray(countriesList) ? (_countriesList = countriesList) === null || _countriesList === void 0 ? void 0 : _countriesList.map(function (country) {\n    return _objectSpread(_objectSpread({}, country), {}, {\n      countryName: \"\".concat(country.countryCode, \" - \").concat(country.countryName)\n    });\n  }) : null;\n  var linkPoliciesData = useSelector(selectLinkPoliciesData);\n  var isBordereauFlag = (allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.isBordereau) === 1;\n  var allOriginalCurrencies = useSelector(selectRefDataBaseCurrency);\n  var originalCurrencies = utils.referenceData.baseCurrenyTypes.getAllById(allOriginalCurrencies, policyData === null || policyData === void 0 ? void 0 : policyData.xbInstanceID);\n  originalCurrencies = utils.generic.isValidArray(originalCurrencies) ? (_originalCurrencies = originalCurrencies) === null || _originalCurrencies === void 0 ? void 0 : _originalCurrencies.map(function (currency) {\n    return _objectSpread(_objectSpread({}, currency), {}, {\n      currencyName: \"\".concat(currency.currencyCd, \" - \").concat(currency.currencyName)\n    });\n  }) : null;\n  useEffect(function () {\n    if (selectedPolicyRender !== '') {\n      dispatch(getInterest({\n        viewLoader: false\n      }));\n      dispatch(getPolicyInsures({\n        viewLoader: false\n      }));\n      isSectionEnabled && dispatch(getPolicySections({\n        viewLoader: false\n      }));\n      dispatch(getPolicyClients({\n        viewLoader: false\n      })).then(function (response) {\n        if (utils.generic.isValidArray(response)) {\n          dispatch(getLinkPoliciesData({\n            loader: true,\n            fieldLoader: false\n          }));\n          setUWResetKey(new Date().getTime());\n        }\n      });\n      dispatch(getClaimDetails()).then(function (response) {\n        var _response$status;\n\n        if ((response === null || response === void 0 ? void 0 : (_response$status = response.status) === null || _response$status === void 0 ? void 0 : _response$status.toLowerCase()) === 'ok') {\n          dispatch(resetClaimsInformation());\n        }\n      });\n      dispatch(getBEAdjuster({\n        viewLoader: false\n      }));\n      dispatch(getComplexityValues());\n      dispatch(getReferralValues());\n      dispatch(getClaimBordereauPeriods());\n    }\n  }, [selectedPolicyRender]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    var _linkPoliciesData$dat;\n\n    setBordereauChecked(!!(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat = linkPoliciesData.data) === null || _linkPoliciesData$dat === void 0 ? void 0 : _linkPoliciesData$dat.bordereauClaim));\n  }, [linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat2 = linkPoliciesData.data) === null || _linkPoliciesData$dat2 === void 0 ? void 0 : _linkPoliciesData$dat2.bordereauClaim]);\n  var sectionAllOption = (policyData === null || policyData === void 0 ? void 0 : policyData.policyType) === CLAIM_SECTION_ENABLED_UG[0] ? [] : [{\n    id: CLAIM_POLICY_SECTION_DEFAULT,\n    name: utils.string.t('app.all'),\n    description: null\n  }];\n  var policyInfo = [].concat(sectionAllOption, _toConsumableArray(utils.generic.isValidArray(policySections, true) ? policySections : []));\n\n  var postSaveHandler = function postSaveHandler(postData) {\n    if (!(claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimID)) {\n      dispatch(postClaimDetailsInformation(postData)).then(function (response) {\n        if (response) {\n          dispatch(getLinkPoliciesData({\n            data: postData\n          }));\n          var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n            return _objectSpread({}, form);\n          });\n          formState[index]['formEditedStatus'] = false;\n          formState[index]['isSubmitted'] = false;\n          setFormEditedStatus(formState);\n          setValidation(false);\n        }\n      });\n    } else {\n      dispatch(postEditClaimDetailsInformation(postData)).then(function (response) {\n        if (response) {\n          dispatch(getLinkPoliciesData({\n            data: postData\n          }));\n          var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n            return _objectSpread({}, form);\n          });\n          formState[index]['formEditedStatus'] = false;\n          formState[index]['isSubmitted'] = false;\n          setFormEditedStatus(formState);\n          setValidation(false);\n        }\n      });\n    }\n  };\n\n  var postEditSaveHandler = function postEditSaveHandler(postData) {\n    utils.dms.resetDmsFiles(dispatch);\n\n    if (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimID) {\n      dispatch(postEditClaimDetailsInformation(postData)).then(function (response) {\n        if (response) {\n          dispatch(getLinkPoliciesData({\n            data: postData\n          }));\n          var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n            return _objectSpread({}, form);\n          });\n          formState[index]['formEditedStatus'] = false;\n          formState[index]['isSubmitted'] = true;\n          setFormEditedStatus(formState);\n          typeof (response === null || response === void 0 ? void 0 : response.claimReference) === 'string' && setActiveStep(index + 1);\n          setValidation(true);\n          setSelectedPolicyRender('');\n        }\n      });\n    } else {\n      dispatch(postClaimDetailsInformation(postData)).then(function (response) {\n        if (response) {\n          dispatch(getLinkPoliciesData({\n            data: postData\n          }));\n          var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n            return _objectSpread({}, form);\n          });\n          formState[index]['formEditedStatus'] = false;\n          formState[index]['isSubmitted'] = true;\n          setFormEditedStatus(formState);\n          typeof (response === null || response === void 0 ? void 0 : response.claimReference) === 'string' && setActiveStep(index + 1);\n          setValidation(true);\n          setSelectedPolicyRender('');\n        }\n      });\n    }\n  };\n\n  var postSaveNextHanlder = function postSaveNextHanlder(postData) {\n    if (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimID) {\n      var policyUpdated = true;\n      dispatch(postEditClaimDetailsInformation(postData, policyUpdated)).then(function (response) {\n        if (response) {\n          var _isFormsEdited$index;\n\n          dispatch(getLinkPoliciesData({\n            data: postData\n          }));\n          var formState = isFormsEdited === null || isFormsEdited === void 0 ? void 0 : isFormsEdited.map(function (form) {\n            return _objectSpread({}, form);\n          });\n\n          if ((_isFormsEdited$index = isFormsEdited[index]) === null || _isFormsEdited$index === void 0 ? void 0 : _isFormsEdited$index.formEditedStatus) {\n            formState[index]['formEditedStatus'] = false;\n            formState[index]['isSubmitted'] = false;\n            setFormEditedStatus(formState);\n            typeof (response === null || response === void 0 ? void 0 : response.claimReference) === 'string' && setActiveStep(index + 1);\n            setValidation(true);\n            setSelectNextPolicy(false);\n          } else {\n            formState[index]['formEditedStatus'] = false;\n            formState[index]['isSubmitted'] = true;\n            setFormEditedStatus(formState);\n            setValidation(true);\n            setSelectedPolicyRender('');\n            setSelectNextPolicy(false);\n          }\n        }\n      });\n    }\n  };\n\n  var clientValue = function clientValue(claimPolicyClients) {\n    var _linkPoliciesData$dat3;\n\n    return (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat3 = linkPoliciesData.data) === null || _linkPoliciesData$dat3 === void 0 ? void 0 : _linkPoliciesData$dat3.client) && !(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.fieldLoader) ? claimPolicyClients === null || claimPolicyClients === void 0 ? void 0 : claimPolicyClients.find(function (clmPolicyclnt) {\n      return clmPolicyclnt.id === linkPoliciesData.data.client.id;\n    }) : (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.clientID) ? claimPolicyClients === null || claimPolicyClients === void 0 ? void 0 : claimPolicyClients.find(function (clmPolicyclnt) {\n      var _claimInfo$clientID;\n\n      return clmPolicyclnt.id === (claimInfo === null || claimInfo === void 0 ? void 0 : (_claimInfo$clientID = claimInfo.clientID) === null || _claimInfo$clientID === void 0 ? void 0 : _claimInfo$clientID.toString());\n    }) : (claimPolicyClients === null || claimPolicyClients === void 0 ? void 0 : claimPolicyClients.length) === 1 ? claimPolicyClients[0] : null;\n  };\n\n  var countryCodeValue = function countryCodeValue(countriesList) {\n    var _linkPoliciesData$dat4;\n\n    return (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat4 = linkPoliciesData.data) === null || _linkPoliciesData$dat4 === void 0 ? void 0 : _linkPoliciesData$dat4.countryCode) && !(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.fieldLoader) ? countriesList === null || countriesList === void 0 ? void 0 : countriesList.find(function (country) {\n      return country.countryCode === linkPoliciesData.data.countryCode.countryCode;\n    }) : (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.settlementCountry) ? countriesList === null || countriesList === void 0 ? void 0 : countriesList.find(function (country) {\n      return country.countryCode === claimInfo.settlementCountry;\n    }) : null;\n  };\n\n  var originalCurrencyValue = function originalCurrencyValue() {\n    var _linkPoliciesData$dat5, _originalCurrencies2, _originalCurrencies3, _originalCurrencies4;\n\n    return (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat5 = linkPoliciesData.data) === null || _linkPoliciesData$dat5 === void 0 ? void 0 : _linkPoliciesData$dat5.originalCurrencyCode) && !(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.fieldLoader) ? (_originalCurrencies2 = originalCurrencies) === null || _originalCurrencies2 === void 0 ? void 0 : _originalCurrencies2.find(function (currency) {\n      var _linkPoliciesData$dat6, _linkPoliciesData$dat7;\n\n      return currency.currencyCd === (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat6 = linkPoliciesData.data) === null || _linkPoliciesData$dat6 === void 0 ? void 0 : (_linkPoliciesData$dat7 = _linkPoliciesData$dat6.originalCurrencyCode) === null || _linkPoliciesData$dat7 === void 0 ? void 0 : _linkPoliciesData$dat7.currencyCd);\n    }) : (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.originalCurrency) ? (_originalCurrencies3 = originalCurrencies) === null || _originalCurrencies3 === void 0 ? void 0 : _originalCurrencies3.find(function (currency) {\n      return (currency === null || currency === void 0 ? void 0 : currency.currencyCd) === (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.originalCurrency);\n    }) : (_originalCurrencies4 = originalCurrencies) === null || _originalCurrencies4 === void 0 ? void 0 : _originalCurrencies4.find(function (currency) {\n      return (currency === null || currency === void 0 ? void 0 : currency.currencyCd) === (allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.originalCurrency);\n    });\n  };\n\n  var settlementCurrencyValue = function settlementCurrencyValue() {\n    var _linkPoliciesData$dat8, _settlementCurriencie2, _settlementCurriencie3, _settlementCurriencie4;\n\n    return (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat8 = linkPoliciesData.data) === null || _linkPoliciesData$dat8 === void 0 ? void 0 : _linkPoliciesData$dat8.originalCurrencyCode) && !(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.fieldLoader) ? (_settlementCurriencie2 = settlementCurriencies) === null || _settlementCurriencie2 === void 0 ? void 0 : _settlementCurriencie2.find(function (currency) {\n      return currency.currencyCd === linkPoliciesData.data.settlementCurrencyCode.currencyCd;\n    }) : (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.settlementCurrencyCode) ? (_settlementCurriencie3 = settlementCurriencies) === null || _settlementCurriencie3 === void 0 ? void 0 : _settlementCurriencie3.find(function (currency) {\n      return (currency === null || currency === void 0 ? void 0 : currency.currencyCd) === (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.settlementCurrencyCode);\n    }) : (_settlementCurriencie4 = settlementCurriencies) === null || _settlementCurriencie4 === void 0 ? void 0 : _settlementCurriencie4.find(function (currency) {\n      return (currency === null || currency === void 0 ? void 0 : currency.currencyCd) === (allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.settlementCurrencyCode);\n    });\n  };\n\n  var bordereauPeriod = claimBordereauPeriods === null || claimBordereauPeriods === void 0 ? void 0 : claimBordereauPeriods.find(function (periods) {\n    var _linkPoliciesData$dat9, _linkPoliciesData$dat10;\n\n    return (periods === null || periods === void 0 ? void 0 : periods.id) === (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat9 = linkPoliciesData.data) === null || _linkPoliciesData$dat9 === void 0 ? void 0 : (_linkPoliciesData$dat10 = _linkPoliciesData$dat9.bordereauPeriod) === null || _linkPoliciesData$dat10 === void 0 ? void 0 : _linkPoliciesData$dat10.id);\n  });\n  var bordereauPeriodValue = !(claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimReference) ? policyData === null || policyData === void 0 ? void 0 : policyData.bordereauPeriod : selectedPolicy ? allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.bordereauPeriod : bordereauPeriod;\n  var certificateNumber = !(claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimReference) ? allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.certificateNumber : selectedPolicy ? allClaimDetails === null || allClaimDetails === void 0 ? void 0 : allClaimDetails.certificateNumber : linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat11 = linkPoliciesData.data) === null || _linkPoliciesData$dat11 === void 0 ? void 0 : _linkPoliciesData$dat11.certificateNumber;\n  var certExpiryDate = !(claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimReference) ? policyData === null || policyData === void 0 ? void 0 : policyData.expiryDate : selectedPolicy ? policyData === null || policyData === void 0 ? void 0 : policyData.expiryDate : linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat12 = linkPoliciesData.data) === null || _linkPoliciesData$dat12 === void 0 ? void 0 : _linkPoliciesData$dat12.certificateExpiryDate;\n  var certInceptionDate = !(claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.claimReference) ? policyData === null || policyData === void 0 ? void 0 : policyData.inceptionDate : selectedPolicy ? policyData === null || policyData === void 0 ? void 0 : policyData.inceptionDate : linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat13 = linkPoliciesData.data) === null || _linkPoliciesData$dat13 === void 0 ? void 0 : _linkPoliciesData$dat13.certificateInceptionDate;\n  var fields = [{\n    name: 'insured',\n    type: 'autocompletemui',\n    options: claimPolicyInsures || [],\n    optionKey: 'id',\n    optionLabel: 'name',\n    label: utils.string.t('claims.claimInformation.insured'),\n    value: (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat14 = linkPoliciesData.data) === null || _linkPoliciesData$dat14 === void 0 ? void 0 : _linkPoliciesData$dat14.insured) && !(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.fieldLoader) ? claimPolicyInsures === null || claimPolicyInsures === void 0 ? void 0 : claimPolicyInsures.find(function (clmPolicy) {\n      return clmPolicy.id === linkPoliciesData.data.insured.id;\n    }) : (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.insuredID) ? claimPolicyInsures === null || claimPolicyInsures === void 0 ? void 0 : claimPolicyInsures.find(function (clmPolicy) {\n      var _claimInfo$insuredID;\n\n      return clmPolicy.id === (claimInfo === null || claimInfo === void 0 ? void 0 : (_claimInfo$insuredID = claimInfo.insuredID) === null || _claimInfo$insuredID === void 0 ? void 0 : _claimInfo$insuredID.toString());\n    }) : (claimPolicyInsures === null || claimPolicyInsures === void 0 ? void 0 : claimPolicyInsures.length) === 1 ? claimPolicyInsures[0] : null,\n    validation: (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$index2 = isFormsEdited[index]) === null || _isFormsEdited$index2 === void 0 ? void 0 : _isFormsEdited$index2.formEditedStatus) ? Yup.object().nullable().required(utils.string.t('validation.required')).when('$validation', function (validation, schema) {\n      return validation ? schema : Yup.object().nullable();\n    }) : false\n  }, {\n    name: 'client',\n    type: 'autocompletemui',\n    options: claimPolicyClients || [],\n    optionKey: 'id',\n    optionLabel: 'name',\n    label: utils.string.t('claims.claimInformation.client'),\n    value: clientValue(claimPolicyClients),\n    validation: (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$index3 = isFormsEdited[index]) === null || _isFormsEdited$index3 === void 0 ? void 0 : _isFormsEdited$index3.formEditedStatus) ? Yup.object().nullable().required(utils.string.t('validation.required')).when('$validation', function (validation, schema) {\n      return validation ? schema : Yup.object().nullable();\n    }) : false\n  }, {\n    name: 'countryCode',\n    type: 'autocompletemui',\n    options: countriesList || [],\n    optionKey: 'countryCode',\n    optionLabel: 'countryName',\n    label: utils.string.t('claims.claimInformation.country'),\n    value: countryCodeValue(countriesList),\n    validation: (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$index4 = isFormsEdited[index]) === null || _isFormsEdited$index4 === void 0 ? void 0 : _isFormsEdited$index4.formEditedStatus) ? Yup.object().nullable().required(utils.string.t('validation.required')) : false\n  }, {\n    name: 'originalCurrencyCode',\n    type: 'autocompletemui',\n    options: originalCurrencies || [],\n    optionKey: 'currencyCd',\n    optionLabel: 'currencyName',\n    label: utils.string.t('claims.claimInformation.originalCurrency'),\n    value: originalCurrencyValue(),\n    validation: (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$index5 = isFormsEdited[index]) === null || _isFormsEdited$index5 === void 0 ? void 0 : _isFormsEdited$index5.formEditedStatus) ? Yup.object().nullable().required(utils.string.t('validation.required')) : false\n  }, {\n    name: 'settlementCurrencyCode',\n    type: 'autocompletemui',\n    options: settlementCurriencies || [],\n    optionKey: 'currencyCd',\n    optionLabel: 'currencyName',\n    label: utils.string.t('claims.claimInformation.settlementCurrency'),\n    value: settlementCurrencyValue(),\n    validation: (isFormsEdited === null || isFormsEdited === void 0 ? void 0 : (_isFormsEdited$index6 = isFormsEdited[index]) === null || _isFormsEdited$index6 === void 0 ? void 0 : _isFormsEdited$index6.formEditedStatus) ? Yup.object().nullable().required(utils.string.t('validation.required')) : false\n  }, {\n    name: 'interest',\n    type: 'autocompletemui',\n    options: interest,\n    label: utils.string.t('claims.claimInformation.interest'),\n    value: (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat15 = linkPoliciesData.data) === null || _linkPoliciesData$dat15 === void 0 ? void 0 : _linkPoliciesData$dat15.interest) && !(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.fieldLoader) ? (_interest2 = interest) === null || _interest2 === void 0 ? void 0 : _interest2.find(function (intrst) {\n      return intrst.xbPolicyID === linkPoliciesData.data.interest.xbPolicyID;\n    }) : ((_interest3 = interest) === null || _interest3 === void 0 ? void 0 : _interest3.length) === 1 ? interest[0] : null,\n    optionKey: 'xbPolicyID',\n    optionLabel: 'description'\n  }, {\n    name: 'movementType',\n    type: 'toggle',\n    label: '',\n    value: (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat16 = linkPoliciesData.data) === null || _linkPoliciesData$dat16 === void 0 ? void 0 : _linkPoliciesData$dat16.movementType) || (claimInfo === null || claimInfo === void 0 ? void 0 : claimInfo.movementType) || 'Advice',\n    options: [{\n      label: utils.string.t('claims.typeOfSettlement.advice'),\n      value: 'Advice'\n    }, {\n      label: utils.string.t('claims.typeOfSettlement.settlement'),\n      value: 'Settlement'\n    }]\n  }, {\n    name: 'order',\n    type: 'radio',\n    defaultValue: (claimInfo === null || claimInfo === void 0 ? void 0 : (_claimInfo$basisOfOrd = claimInfo.basisOfOrder) === null || _claimInfo$basisOfOrd === void 0 ? void 0 : _claimInfo$basisOfOrd.toString()) || '100',\n    muiFormGroupProps: {\n      row: true,\n      classes: {\n        root: classes.radioLabel\n      }\n    },\n    options: [{\n      label: utils.string.t('claims.typeOfSettlement.oneHundredPercent'),\n      value: '100'\n    }, {\n      label: utils.string.t('claims.typeOfSettlement.ourShare'),\n      value: '0'\n    }]\n  }, {\n    name: 'orderPercentage',\n    type: 'number',\n    defaultValue: underWritingGroups.percentageOfSelected || '0',\n    value: underWritingGroups.percentageOfSelected || '0',\n    muiComponentProps: {\n      disabled: true\n    },\n    validation: Yup.number().min(0, utils.string.t('claims.typeOfSettlement.errorMin')).max(100, utils.string.t('claims.typeOfSettlement.error'))\n  }].concat(_toConsumableArray(isBordereauFlag ? [{\n    name: 'certificateNumber',\n    type: 'text',\n    label: utils.string.t('claims.claimInformation.certificateNumber'),\n    value: certificateNumber,\n    muiComponentProps: {\n      classes: {\n        root: classes.formInput\n      },\n      disabled: isBordereauChecked\n    },\n    validation: !isBordereauChecked ? Yup.string().nullable().required(utils.string.t('validation.required')).max(17, utils.string.t('claims.claimInformation.validation.maxCerficateNumber')).when('$validation', function (validation, schema) {\n      return validation ? schema : Yup.string();\n    }) : false\n  }, {\n    type: 'datepicker',\n    name: 'certificateInceptionDate',\n    label: utils.string.t('claims.claimInformation.certificateInceptionDate'),\n    value: certInceptionDate,\n    muiComponentProps: {\n      fullWidth: true,\n      disabled: isBordereauChecked\n    },\n    validation: !isBordereauChecked ? Yup.date().nullable().required(utils.string.t('validation.required')).test('from', utils.string.t('claims.claimInformation.validation.greaterThenExpDate'), function (value) {\n      return value && this.options.parent.certificateExpiryDate ? moment(value).isSameOrBefore(this.options.parent.certificateExpiryDate) : true;\n    }).when('$validation', function (validation, schema) {\n      return validation ? schema : Yup.date().nullable();\n    }) : false,\n    outputFormat: 'iso'\n  }, {\n    type: 'datepicker',\n    name: 'certificateExpiryDate',\n    label: utils.string.t('claims.claimInformation.certificateExpiryDate'),\n    value: certExpiryDate,\n    muiComponentProps: {\n      fullWidth: true,\n      disabled: isBordereauChecked\n    },\n    validation: !isBordereauChecked ? Yup.date().nullable().required(utils.string.t('validation.required')).test('from', utils.string.t('claims.claimInformation.validation.lesserThenIncDate'), function (value) {\n      return value && this.options.parent.certificateInceptionDate ? moment(value).isSameOrAfter(this.options.parent.certificateInceptionDate) : true;\n    }).when('$validation', function (validation, schema) {\n      return validation ? schema : Yup.date().nullable();\n    }) : false,\n    outputFormat: 'iso'\n  }, {\n    name: 'bordereauClaim',\n    type: 'checkbox',\n    defaultValue: Boolean(linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat17 = linkPoliciesData.data) === null || _linkPoliciesData$dat17 === void 0 ? void 0 : _linkPoliciesData$dat17.bordereauClaim),\n    muiComponentProps: {\n      onChange: function onChange(_, value) {\n        setBordereauChecked(value);\n        bordereauPolicyData === null || bordereauPolicyData === void 0 ? void 0 : bordereauPolicyData.current(value);\n      }\n    }\n  }, {\n    name: 'bordereauPeriod',\n    type: 'autocompletemui',\n    label: utils.string.t('claims.claimInformation.bordereauPeriod'),\n    options: claimBordereauPeriods,\n    optionKey: 'id',\n    optionLabel: 'name',\n    value: bordereauPeriodValue,\n    muiComponentProps: {\n      disabled: !isBordereauChecked\n    },\n    validation: Yup.object().nullable().when('bordereauClaim', {\n      is: function is(val) {\n        return val;\n      },\n      then: Yup.object().nullable().required(utils.string.t('validation.required')),\n      otherwise: Yup.object().nullable()\n    })\n  }] : []), _toConsumableArray(isSectionEnabled ? [{\n    name: 'ugSections',\n    type: 'autocompletemui',\n    value: (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : (_linkPoliciesData$dat18 = linkPoliciesData.data) === null || _linkPoliciesData$dat18 === void 0 ? void 0 : _linkPoliciesData$dat18.ugSections) || null,\n    options: policyInfo,\n    optionKey: 'id',\n    optionLabel: 'name',\n    validation: sectionEnabledValidationFlag ? Yup.object().nullable().required(utils.string.t('validation.required')).when('$validation', function (validation, schema) {\n      return validation ? schema : Yup.object().nullable();\n    }) : false\n  }] : []));\n\n  if (isPoliciesClientsLoading || isInterestLoading || isPolicySectionLoading || isInsuredLoading) {\n    return /*#__PURE__*/_jsxDEV(FormGrid, {\n      container: true,\n      spacing: 4,\n      children: _toConsumableArray(new Array(2)).map(function (item, index) {\n        return /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(FormGrid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Skeleton, {\n              height: 30,\n              width: 100\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(FormGrid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(FormGrid, {\n              container: true,\n              spacing: 4,\n              children: [/*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                xs: 12,\n                md: 4,\n                children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                  height: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                  height: 30,\n                  variant: \"rect\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                xs: 12,\n                md: 4,\n                children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                  height: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                  height: 30,\n                  variant: \"rect\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(FormGrid, {\n                item: true,\n                xs: 12,\n                md: 4,\n                children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                  height: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                  height: 30,\n                  variant: \"rect\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, _this)]\n        }, \"skeleton-\".concat(index), true, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 7\n    }, this);\n  }\n\n  return (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.searchBy) !== '' && (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.searchTerm) !== '' && (linkPoliciesData === null || linkPoliciesData === void 0 ? void 0 : linkPoliciesData.loader) && /*#__PURE__*/_jsxDEV(LinkClaimPolicyView, {\n    fields: fields,\n    policyData: policyData,\n    claimPolicyInsures: claimPolicyInsures,\n    allClaimDetails: allClaimDetails,\n    originalCurrencyValue: originalCurrencyValue,\n    settlementCurrencyValue: settlementCurrencyValue,\n    interest: interest,\n    uwResetKey: uwResetKey,\n    hasClaimRef: false,\n    underWritingGroups: underWritingGroups,\n    claimPolicyClients: claimPolicyClients,\n    isBordereauFlag: isBordereauFlag,\n    validation: validation,\n    setValidation: setValidation,\n    index: index,\n    isFormsEdited: isFormsEdited,\n    setFormEditedStatus: setFormEditedStatus,\n    postSaveHandler: postSaveHandler,\n    postEditSaveHandler: postEditSaveHandler,\n    saveStatus: saveStatus,\n    selectedPolicyRender: selectedPolicyRender,\n    handleFormStatus: handleFormStatus,\n    stepper: stepper,\n    setStepper: setStepper,\n    selectNextPolicy: selectNextPolicy,\n    postSaveNextHanlder: postSaveNextHanlder,\n    claimBordereauPeriods: claimBordereauPeriods,\n    bordereauPolicyData: bordereauPolicyData,\n    fieldsLoader: {\n      isPoliciesClientsLoading: isPoliciesClientsLoading,\n      isInterestLoading: isInterestLoading,\n      isPolicySectionLoading: isPolicySectionLoading,\n      isInsuredLoading: isInsuredLoading,\n      isBordereauPeriodsLoading: isBordereauPeriodsLoading\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 581,\n    columnNumber: 7\n  }, this);\n}\n\n_s(SelectedClaimPolicy, \"o5hYeD1lG6NOeggmFHpq6Lup86Q=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = SelectedClaimPolicy;\n\nvar _c;\n\n$RefreshReg$(_c, \"SelectedClaimPolicy\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/LinkClaimPolicy/LinkClaimPolicy.js"],"names":["React","Fragment","useState","useEffect","useRef","useDispatch","useSelector","Yup","moment","PropTypes","styles","LinkClaimPolicyView","FormGrid","getInterest","getClaimDetails","getPolicyInsures","getPolicyClients","getPolicySections","getBEAdjuster","getComplexityValues","selectClaimsPolicySections","selectClaimsInterestItems","selectClaimPolicyInsures","selectSectionEnabledUG","selectClaimsUnderwritingGroups","selectClaimPolicyClients","selectAllClaimDetails","postClaimDetailsInformation","postEditClaimDetailsInformation","selectLinkPoliciesData","getLinkPoliciesData","selectRefDataNewCountriesList","selectClaimsInterest","selectIsClaimPolicyClientsLoading","selectPolicySectionIsLoading","selectisClaimPolicyInsuresLoading","selectRefDataSettlementCurrency","selectRefDataBaseCurrency","selectClaimBordereauPeriods","getClaimBordereauPeriods","getReferralValues","selectBordereauPeriodsLoading","resetClaimsInformation","utils","CLAIM_SECTION_ENABLED_UG","CLAIM_POLICY_SECTION_DEFAULT","Skeleton","makeStyles","SelectedClaimPolicy","propTypes","selectedPolicy","bool","policyData","selectedPolicyRender","setSelectedPolicyRender","validation","setValidation","setActiveStep","index","isFormsEdited","setFormEditedStatus","saveStatus","sectionEnabledValidationFlag","claimInfo","handleFormStatus","selectNextPolicy","setSelectNextPolicy","classes","name","dispatch","bordereauPolicyData","uwResetKey","setUWResetKey","stepper","setStepper","isBordereauChecked","setBordereauChecked","interest","generic","isValidArray","map","intrst","description","code","allSettlementCurriencies","settlementCurriencies","referenceData","settlementCurrencyTypes","getAllById","xbInstanceID","currency","currencyName","currencyCd","allClaimDetails","underWritingGroups","policySections","claimPolicyInsures","isSectionEnabled","claimPolicyClients","isInterestLoading","isLoading","isPoliciesClientsLoading","isPolicySectionLoading","isInsuredLoading","claimBordereauPeriods","isBordereauPeriodsLoading","countriesList","country","countryName","countryCode","linkPoliciesData","isBordereauFlag","isBordereau","allOriginalCurrencies","originalCurrencies","baseCurrenyTypes","viewLoader","then","response","loader","fieldLoader","Date","getTime","status","toLowerCase","data","bordereauClaim","sectionAllOption","policyType","id","string","t","policyInfo","postSaveHandler","postData","claimID","formState","form","postEditSaveHandler","dms","resetDmsFiles","claimReference","postSaveNextHanlder","policyUpdated","formEditedStatus","clientValue","client","find","clmPolicyclnt","clientID","toString","length","countryCodeValue","settlementCountry","originalCurrencyValue","originalCurrencyCode","originalCurrency","settlementCurrencyValue","settlementCurrencyCode","bordereauPeriod","periods","bordereauPeriodValue","certificateNumber","certExpiryDate","expiryDate","certificateExpiryDate","certInceptionDate","inceptionDate","certificateInceptionDate","fields","type","options","optionKey","optionLabel","label","value","insured","clmPolicy","insuredID","object","nullable","required","when","schema","xbPolicyID","movementType","defaultValue","basisOfOrder","muiFormGroupProps","row","root","radioLabel","percentageOfSelected","muiComponentProps","disabled","number","min","max","formInput","fullWidth","date","test","parent","isSameOrBefore","outputFormat","isSameOrAfter","Boolean","onChange","_","current","is","val","otherwise","ugSections","Array","item","searchBy","searchTerm"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport * as Yup from 'yup';\r\nimport moment from 'moment';\r\nimport PropTypes from 'prop-types';\r\n\r\n// app\r\nimport styles from './LinkClaimPolicy.styles';\r\nimport { LinkClaimPolicyView } from './LinkClaimPolicy.view';\r\nimport { FormGrid } from 'components';\r\nimport {\r\n  getInterest,\r\n  getClaimDetails,\r\n  getPolicyInsures,\r\n  getPolicyClients,\r\n  getPolicySections,\r\n  getBEAdjuster,\r\n  getComplexityValues,\r\n  selectClaimsPolicySections,\r\n  selectClaimsInterestItems,\r\n  selectClaimPolicyInsures,\r\n  selectSectionEnabledUG,\r\n  selectClaimsUnderwritingGroups,\r\n  selectClaimPolicyClients,\r\n  selectAllClaimDetails,\r\n  postClaimDetailsInformation,\r\n  postEditClaimDetailsInformation,\r\n  selectLinkPoliciesData,\r\n  getLinkPoliciesData,\r\n  selectRefDataNewCountriesList,\r\n  selectClaimsInterest,\r\n  selectIsClaimPolicyClientsLoading,\r\n  selectPolicySectionIsLoading,\r\n  selectisClaimPolicyInsuresLoading,\r\n  selectRefDataSettlementCurrency,\r\n  selectRefDataBaseCurrency,\r\n  selectClaimBordereauPeriods,\r\n  getClaimBordereauPeriods,\r\n  getReferralValues,\r\n  selectBordereauPeriodsLoading,\r\n  resetClaimsInformation,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport { CLAIM_SECTION_ENABLED_UG, CLAIM_POLICY_SECTION_DEFAULT } from 'consts';\r\n\r\n//mui\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nSelectedClaimPolicy.propTypes = {\r\n  selectedPolicy: PropTypes.bool,\r\n};\r\n\r\nexport default function SelectedClaimPolicy({\r\n  policyData,\r\n  selectedPolicyRender,\r\n  setSelectedPolicyRender,\r\n  validation,\r\n  setValidation,\r\n  setActiveStep,\r\n  index,\r\n  isFormsEdited,\r\n  setFormEditedStatus,\r\n  saveStatus,\r\n  sectionEnabledValidationFlag,\r\n  claimInfo,\r\n  handleFormStatus,\r\n  selectNextPolicy,\r\n  setSelectNextPolicy,\r\n  selectedPolicy,\r\n}) {\r\n  const classes = makeStyles(styles, { name: 'LinkClaimPolicy' })();\r\n\r\n  const dispatch = useDispatch();\r\n  const bordereauPolicyData = useRef(null);\r\n\r\n  const [uwResetKey, setUWResetKey] = useState();\r\n  const [stepper, setStepper] = useState(false);\r\n  const [isBordereauChecked, setBordereauChecked] = useState(false);\r\n\r\n  let interest = useSelector(selectClaimsInterestItems);\r\n  interest = utils.generic.isValidArray(interest)\r\n    ? interest?.map((intrst) => ({ ...intrst, description: `${intrst.code} - ${intrst.description}` }))\r\n    : null;\r\n\r\n  let allSettlementCurriencies = useSelector(selectRefDataSettlementCurrency);\r\n  let settlementCurriencies = utils.referenceData.settlementCurrencyTypes.getAllById(allSettlementCurriencies, policyData?.xbInstanceID);\r\n\r\n  settlementCurriencies = utils.generic.isValidArray(settlementCurriencies)\r\n    ? settlementCurriencies?.map((currency) => ({ ...currency, currencyName: `${currency.currencyCd} - ${currency.currencyName}` }))\r\n    : null;\r\n  const allClaimDetails = useSelector(selectAllClaimDetails);\r\n  const underWritingGroups = useSelector(selectClaimsUnderwritingGroups);\r\n  const policySections = useSelector(selectClaimsPolicySections);\r\n  const claimPolicyInsures = useSelector(selectClaimPolicyInsures);\r\n  const isSectionEnabled = useSelector(selectSectionEnabledUG);\r\n  const claimPolicyClients = useSelector(selectClaimPolicyClients);\r\n  const isInterestLoading = useSelector(selectClaimsInterest)?.isLoading;\r\n  const isPoliciesClientsLoading = useSelector(selectIsClaimPolicyClientsLoading);\r\n  const isPolicySectionLoading = useSelector(selectPolicySectionIsLoading);\r\n  const isInsuredLoading = useSelector(selectisClaimPolicyInsuresLoading);\r\n  const claimBordereauPeriods = useSelector(selectClaimBordereauPeriods);\r\n  const isBordereauPeriodsLoading = useSelector(selectBordereauPeriodsLoading);\r\n\r\n  let countriesList = useSelector(selectRefDataNewCountriesList);\r\n  countriesList = utils.generic.isValidArray(countriesList)\r\n    ? countriesList?.map((country) => ({ ...country, countryName: `${country.countryCode} - ${country.countryName}` }))\r\n    : null;\r\n  const linkPoliciesData = useSelector(selectLinkPoliciesData);\r\n  const isBordereauFlag = allClaimDetails?.isBordereau === 1;\r\n\r\n  let allOriginalCurrencies = useSelector(selectRefDataBaseCurrency);\r\n  let originalCurrencies = utils.referenceData.baseCurrenyTypes.getAllById(allOriginalCurrencies, policyData?.xbInstanceID);\r\n  originalCurrencies = utils.generic.isValidArray(originalCurrencies)\r\n    ? originalCurrencies?.map((currency) => ({ ...currency, currencyName: `${currency.currencyCd} - ${currency.currencyName}` }))\r\n    : null;\r\n\r\n  useEffect(() => {\r\n    if (selectedPolicyRender !== '') {\r\n      dispatch(getInterest({ viewLoader: false }));\r\n      dispatch(getPolicyInsures({ viewLoader: false }));\r\n      isSectionEnabled && dispatch(getPolicySections({ viewLoader: false }));\r\n      dispatch(getPolicyClients({ viewLoader: false })).then((response) => {\r\n        if (utils.generic.isValidArray(response)) {\r\n          dispatch(getLinkPoliciesData({ loader: true, fieldLoader: false }));\r\n          setUWResetKey(new Date().getTime());\r\n        }\r\n      });\r\n      dispatch(getClaimDetails()).then((response) => {\r\n        if (response?.status?.toLowerCase() === 'ok') {\r\n          dispatch(resetClaimsInformation());\r\n        }\r\n      });\r\n      dispatch(getBEAdjuster({ viewLoader: false }));\r\n      dispatch(getComplexityValues());\r\n      dispatch(getReferralValues());\r\n      dispatch(getClaimBordereauPeriods());\r\n    }\r\n  }, [selectedPolicyRender]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    setBordereauChecked(!!linkPoliciesData?.data?.bordereauClaim);\r\n  }, [linkPoliciesData?.data?.bordereauClaim]);\r\n\r\n  const sectionAllOption =\r\n    policyData?.policyType === CLAIM_SECTION_ENABLED_UG[0]\r\n      ? []\r\n      : [{ id: CLAIM_POLICY_SECTION_DEFAULT, name: utils.string.t('app.all'), description: null }];\r\n\r\n  const policyInfo = [...sectionAllOption, ...(utils.generic.isValidArray(policySections, true) ? policySections : [])];\r\n\r\n  const postSaveHandler = (postData) => {\r\n    if (!claimInfo?.claimID) {\r\n      dispatch(postClaimDetailsInformation(postData)).then((response) => {\r\n        if (response) {\r\n          dispatch(getLinkPoliciesData({ data: postData }));\r\n          const formState = isFormsEdited?.map((form) => ({ ...form }));\r\n          formState[index]['formEditedStatus'] = false;\r\n          formState[index]['isSubmitted'] = false;\r\n          setFormEditedStatus(formState);\r\n          setValidation(false);\r\n        }\r\n      });\r\n    } else {\r\n      dispatch(postEditClaimDetailsInformation(postData)).then((response) => {\r\n        if (response) {\r\n          dispatch(getLinkPoliciesData({ data: postData }));\r\n          const formState = isFormsEdited?.map((form) => ({ ...form }));\r\n          formState[index]['formEditedStatus'] = false;\r\n          formState[index]['isSubmitted'] = false;\r\n          setFormEditedStatus(formState);\r\n          setValidation(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const postEditSaveHandler = (postData) => {\r\n    utils.dms.resetDmsFiles(dispatch);\r\n    if (claimInfo?.claimID) {\r\n      dispatch(postEditClaimDetailsInformation(postData)).then((response) => {\r\n        if (response) {\r\n          dispatch(getLinkPoliciesData({ data: postData }));\r\n          const formState = isFormsEdited?.map((form) => ({ ...form }));\r\n          formState[index]['formEditedStatus'] = false;\r\n          formState[index]['isSubmitted'] = true;\r\n          setFormEditedStatus(formState);\r\n          typeof response?.claimReference === 'string' && setActiveStep(index + 1);\r\n          setValidation(true);\r\n          setSelectedPolicyRender('');\r\n        }\r\n      });\r\n    } else {\r\n      dispatch(postClaimDetailsInformation(postData)).then((response) => {\r\n        if (response) {\r\n          dispatch(getLinkPoliciesData({ data: postData }));\r\n          const formState = isFormsEdited?.map((form) => ({ ...form }));\r\n          formState[index]['formEditedStatus'] = false;\r\n          formState[index]['isSubmitted'] = true;\r\n          setFormEditedStatus(formState);\r\n          typeof response?.claimReference === 'string' && setActiveStep(index + 1);\r\n          setValidation(true);\r\n          setSelectedPolicyRender('');\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const postSaveNextHanlder = (postData) => {\r\n    if (claimInfo?.claimID) {\r\n      const policyUpdated = true;\r\n      dispatch(postEditClaimDetailsInformation(postData, policyUpdated)).then((response) => {\r\n        if (response) {\r\n          dispatch(getLinkPoliciesData({ data: postData }));\r\n          const formState = isFormsEdited?.map((form) => ({ ...form }));\r\n          if (isFormsEdited[index]?.formEditedStatus) {\r\n            formState[index]['formEditedStatus'] = false;\r\n            formState[index]['isSubmitted'] = false;\r\n            setFormEditedStatus(formState);\r\n            typeof response?.claimReference === 'string' && setActiveStep(index + 1);\r\n            setValidation(true);\r\n            setSelectNextPolicy(false);\r\n          } else {\r\n            formState[index]['formEditedStatus'] = false;\r\n            formState[index]['isSubmitted'] = true;\r\n            setFormEditedStatus(formState);\r\n            setValidation(true);\r\n            setSelectedPolicyRender('');\r\n            setSelectNextPolicy(false);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const clientValue = (claimPolicyClients) => {\r\n    return linkPoliciesData?.data?.client && !linkPoliciesData?.fieldLoader\r\n      ? claimPolicyClients?.find((clmPolicyclnt) => clmPolicyclnt.id === linkPoliciesData.data.client.id)\r\n      : claimInfo?.clientID\r\n      ? claimPolicyClients?.find((clmPolicyclnt) => clmPolicyclnt.id === claimInfo?.clientID?.toString())\r\n      : claimPolicyClients?.length === 1\r\n      ? claimPolicyClients[0]\r\n      : null;\r\n  };\r\n\r\n  const countryCodeValue = (countriesList) => {\r\n    return linkPoliciesData?.data?.countryCode && !linkPoliciesData?.fieldLoader\r\n      ? countriesList?.find((country) => country.countryCode === linkPoliciesData.data.countryCode.countryCode)\r\n      : claimInfo?.settlementCountry\r\n      ? countriesList?.find((country) => country.countryCode === claimInfo.settlementCountry)\r\n      : null;\r\n  };\r\n  const originalCurrencyValue = () => {\r\n    return linkPoliciesData?.data?.originalCurrencyCode && !linkPoliciesData?.fieldLoader\r\n      ? originalCurrencies?.find((currency) => currency.currencyCd === linkPoliciesData?.data?.originalCurrencyCode?.currencyCd)\r\n      : claimInfo?.originalCurrency\r\n      ? originalCurrencies?.find((currency) => currency?.currencyCd === claimInfo?.originalCurrency)\r\n      : originalCurrencies?.find((currency) => currency?.currencyCd === allClaimDetails?.originalCurrency);\r\n  };\r\n  const settlementCurrencyValue = () => {\r\n    return linkPoliciesData?.data?.originalCurrencyCode && !linkPoliciesData?.fieldLoader\r\n      ? settlementCurriencies?.find((currency) => currency.currencyCd === linkPoliciesData.data.settlementCurrencyCode.currencyCd)\r\n      : claimInfo?.settlementCurrencyCode\r\n      ? settlementCurriencies?.find((currency) => currency?.currencyCd === claimInfo?.settlementCurrencyCode)\r\n      : settlementCurriencies?.find((currency) => currency?.currencyCd === allClaimDetails?.settlementCurrencyCode);\r\n  };\r\n\r\n  const bordereauPeriod = claimBordereauPeriods?.find((periods) => periods?.id === linkPoliciesData?.data?.bordereauPeriod?.id);\r\n\r\n  const bordereauPeriodValue = !claimInfo?.claimReference\r\n    ? policyData?.bordereauPeriod\r\n    : selectedPolicy\r\n    ? allClaimDetails?.bordereauPeriod\r\n    : bordereauPeriod;\r\n\r\n  const certificateNumber = !claimInfo?.claimReference\r\n    ? allClaimDetails?.certificateNumber\r\n    : selectedPolicy\r\n    ? allClaimDetails?.certificateNumber\r\n    : linkPoliciesData?.data?.certificateNumber;\r\n\r\n  const certExpiryDate = !claimInfo?.claimReference\r\n    ? policyData?.expiryDate\r\n    : selectedPolicy\r\n    ? policyData?.expiryDate\r\n    : linkPoliciesData?.data?.certificateExpiryDate;\r\n\r\n  const certInceptionDate = !claimInfo?.claimReference\r\n    ? policyData?.inceptionDate\r\n    : selectedPolicy\r\n    ? policyData?.inceptionDate\r\n    : linkPoliciesData?.data?.certificateInceptionDate;\r\n\r\n  const fields = [\r\n    {\r\n      name: 'insured',\r\n      type: 'autocompletemui',\r\n      options: claimPolicyInsures || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      label: utils.string.t('claims.claimInformation.insured'),\r\n      value:\r\n        linkPoliciesData?.data?.insured && !linkPoliciesData?.fieldLoader\r\n          ? claimPolicyInsures?.find((clmPolicy) => clmPolicy.id === linkPoliciesData.data.insured.id)\r\n          : claimInfo?.insuredID\r\n          ? claimPolicyInsures?.find((clmPolicy) => clmPolicy.id === claimInfo?.insuredID?.toString())\r\n          : claimPolicyInsures?.length === 1\r\n          ? claimPolicyInsures[0]\r\n          : null,\r\n      validation: isFormsEdited?.[index]?.formEditedStatus\r\n        ? Yup.object()\r\n            .nullable()\r\n            .required(utils.string.t('validation.required'))\r\n            .when('$validation', (validation, schema) => (validation ? schema : Yup.object().nullable()))\r\n        : false,\r\n    },\r\n    {\r\n      name: 'client',\r\n      type: 'autocompletemui',\r\n      options: claimPolicyClients || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      label: utils.string.t('claims.claimInformation.client'),\r\n      value: clientValue(claimPolicyClients),\r\n      validation: isFormsEdited?.[index]?.formEditedStatus\r\n        ? Yup.object()\r\n            .nullable()\r\n            .required(utils.string.t('validation.required'))\r\n            .when('$validation', (validation, schema) => (validation ? schema : Yup.object().nullable()))\r\n        : false,\r\n    },\r\n    {\r\n      name: 'countryCode',\r\n      type: 'autocompletemui',\r\n      options: countriesList || [],\r\n      optionKey: 'countryCode',\r\n      optionLabel: 'countryName',\r\n      label: utils.string.t('claims.claimInformation.country'),\r\n      value: countryCodeValue(countriesList),\r\n      validation: isFormsEdited?.[index]?.formEditedStatus\r\n        ? Yup.object().nullable().required(utils.string.t('validation.required'))\r\n        : false,\r\n    },\r\n    {\r\n      name: 'originalCurrencyCode',\r\n      type: 'autocompletemui',\r\n      options: originalCurrencies || [],\r\n      optionKey: 'currencyCd',\r\n      optionLabel: 'currencyName',\r\n      label: utils.string.t('claims.claimInformation.originalCurrency'),\r\n      value: originalCurrencyValue(),\r\n      validation: isFormsEdited?.[index]?.formEditedStatus\r\n        ? Yup.object().nullable().required(utils.string.t('validation.required'))\r\n        : false,\r\n    },\r\n    {\r\n      name: 'settlementCurrencyCode',\r\n      type: 'autocompletemui',\r\n      options: settlementCurriencies || [],\r\n      optionKey: 'currencyCd',\r\n      optionLabel: 'currencyName',\r\n      label: utils.string.t('claims.claimInformation.settlementCurrency'),\r\n      value: settlementCurrencyValue(),\r\n      validation: isFormsEdited?.[index]?.formEditedStatus\r\n        ? Yup.object().nullable().required(utils.string.t('validation.required'))\r\n        : false,\r\n    },\r\n    {\r\n      name: 'interest',\r\n      type: 'autocompletemui',\r\n      options: interest,\r\n      label: utils.string.t('claims.claimInformation.interest'),\r\n      value:\r\n        linkPoliciesData?.data?.interest && !linkPoliciesData?.fieldLoader\r\n          ? interest?.find((intrst) => intrst.xbPolicyID === linkPoliciesData.data.interest.xbPolicyID)\r\n          : interest?.length === 1\r\n          ? interest[0]\r\n          : null,\r\n      optionKey: 'xbPolicyID',\r\n      optionLabel: 'description',\r\n    },\r\n    {\r\n      name: 'movementType',\r\n      type: 'toggle',\r\n      label: '',\r\n      value: linkPoliciesData?.data?.movementType || claimInfo?.movementType || 'Advice',\r\n      options: [\r\n        {\r\n          label: utils.string.t('claims.typeOfSettlement.advice'),\r\n          value: 'Advice',\r\n        },\r\n        {\r\n          label: utils.string.t('claims.typeOfSettlement.settlement'),\r\n          value: 'Settlement',\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      name: 'order',\r\n      type: 'radio',\r\n      defaultValue: claimInfo?.basisOfOrder?.toString() || '100',\r\n      muiFormGroupProps: {\r\n        row: true,\r\n        classes: {\r\n          root: classes.radioLabel,\r\n        },\r\n      },\r\n      options: [\r\n        {\r\n          label: utils.string.t('claims.typeOfSettlement.oneHundredPercent'),\r\n          value: '100',\r\n        },\r\n        {\r\n          label: utils.string.t('claims.typeOfSettlement.ourShare'),\r\n          value: '0',\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      name: 'orderPercentage',\r\n      type: 'number',\r\n      defaultValue: underWritingGroups.percentageOfSelected || '0',\r\n      value: underWritingGroups.percentageOfSelected || '0',\r\n      muiComponentProps: {\r\n        disabled: true,\r\n      },\r\n      validation: Yup.number()\r\n        .min(0, utils.string.t('claims.typeOfSettlement.errorMin'))\r\n        .max(100, utils.string.t('claims.typeOfSettlement.error')),\r\n    },\r\n    ...(isBordereauFlag\r\n      ? [\r\n          {\r\n            name: 'certificateNumber',\r\n            type: 'text',\r\n            label: utils.string.t('claims.claimInformation.certificateNumber'),\r\n            value: certificateNumber,\r\n            muiComponentProps: {\r\n              classes: {\r\n                root: classes.formInput,\r\n              },\r\n              disabled: isBordereauChecked,\r\n            },\r\n            validation: !isBordereauChecked\r\n              ? Yup.string()\r\n                  .nullable()\r\n                  .required(utils.string.t('validation.required'))\r\n                  .max(17, utils.string.t('claims.claimInformation.validation.maxCerficateNumber'))\r\n                  .when('$validation', (validation, schema) => (validation ? schema : Yup.string()))\r\n              : false,\r\n          },\r\n          {\r\n            type: 'datepicker',\r\n            name: 'certificateInceptionDate',\r\n            label: utils.string.t('claims.claimInformation.certificateInceptionDate'),\r\n            value: certInceptionDate,\r\n            muiComponentProps: {\r\n              fullWidth: true,\r\n              disabled: isBordereauChecked,\r\n            },\r\n            validation: !isBordereauChecked\r\n              ? Yup.date()\r\n                  .nullable()\r\n                  .required(utils.string.t('validation.required'))\r\n                  .test('from', utils.string.t('claims.claimInformation.validation.greaterThenExpDate'), function (value) {\r\n                    return value && this.options.parent.certificateExpiryDate\r\n                      ? moment(value).isSameOrBefore(this.options.parent.certificateExpiryDate)\r\n                      : true;\r\n                  })\r\n                  .when('$validation', (validation, schema) => (validation ? schema : Yup.date().nullable()))\r\n              : false,\r\n            outputFormat: 'iso',\r\n          },\r\n          {\r\n            type: 'datepicker',\r\n            name: 'certificateExpiryDate',\r\n            label: utils.string.t('claims.claimInformation.certificateExpiryDate'),\r\n            value: certExpiryDate,\r\n            muiComponentProps: {\r\n              fullWidth: true,\r\n              disabled: isBordereauChecked,\r\n            },\r\n            validation: !isBordereauChecked\r\n              ? Yup.date()\r\n                  .nullable()\r\n                  .required(utils.string.t('validation.required'))\r\n                  .test('from', utils.string.t('claims.claimInformation.validation.lesserThenIncDate'), function (value) {\r\n                    return value && this.options.parent.certificateInceptionDate\r\n                      ? moment(value).isSameOrAfter(this.options.parent.certificateInceptionDate)\r\n                      : true;\r\n                  })\r\n                  .when('$validation', (validation, schema) => (validation ? schema : Yup.date().nullable()))\r\n              : false,\r\n            outputFormat: 'iso',\r\n          },\r\n          {\r\n            name: 'bordereauClaim',\r\n            type: 'checkbox',\r\n            defaultValue: Boolean(linkPoliciesData?.data?.bordereauClaim),\r\n            muiComponentProps: {\r\n              onChange: (_, value) => {\r\n                setBordereauChecked(value);\r\n                bordereauPolicyData?.current(value);\r\n              },\r\n            },\r\n          },\r\n          {\r\n            name: 'bordereauPeriod',\r\n            type: 'autocompletemui',\r\n            label: utils.string.t('claims.claimInformation.bordereauPeriod'),\r\n            options: claimBordereauPeriods,\r\n            optionKey: 'id',\r\n            optionLabel: 'name',\r\n            value: bordereauPeriodValue,\r\n            muiComponentProps: {\r\n              disabled: !isBordereauChecked,\r\n            },\r\n            validation: Yup.object()\r\n              .nullable()\r\n              .when('bordereauClaim', {\r\n                is: (val) => val,\r\n                then: Yup.object().nullable().required(utils.string.t('validation.required')),\r\n                otherwise: Yup.object().nullable(),\r\n              }),\r\n          },\r\n        ]\r\n      : []),\r\n    ...(isSectionEnabled\r\n      ? [\r\n          {\r\n            name: 'ugSections',\r\n            type: 'autocompletemui',\r\n            value: linkPoliciesData?.data?.ugSections || null,\r\n            options: policyInfo,\r\n            optionKey: 'id',\r\n            optionLabel: 'name',\r\n            validation: sectionEnabledValidationFlag\r\n              ? Yup.object()\r\n                  .nullable()\r\n                  .required(utils.string.t('validation.required'))\r\n                  .when('$validation', (validation, schema) => (validation ? schema : Yup.object().nullable()))\r\n              : false,\r\n          },\r\n        ]\r\n      : []),\r\n  ];\r\n  if (isPoliciesClientsLoading || isInterestLoading || isPolicySectionLoading || isInsuredLoading) {\r\n    return (\r\n      <FormGrid container spacing={4}>\r\n        {[...new Array(2)].map((item, index) => (\r\n          <Fragment key={`skeleton-${index}`}>\r\n            <FormGrid item xs={12}>\r\n              <Skeleton height={30} width={100} />\r\n            </FormGrid>\r\n            <FormGrid item xs={12}>\r\n              <FormGrid container spacing={4}>\r\n                <FormGrid item xs={12} md={4}>\r\n                  <Skeleton height={16} />\r\n                  <Skeleton height={30} variant=\"rect\" />\r\n                </FormGrid>\r\n                <FormGrid item xs={12} md={4}>\r\n                  <Skeleton height={16} />\r\n                  <Skeleton height={30} variant=\"rect\" />\r\n                </FormGrid>\r\n                <FormGrid item xs={12} md={4}>\r\n                  <Skeleton height={16} />\r\n                  <Skeleton height={30} variant=\"rect\" />\r\n                </FormGrid>\r\n              </FormGrid>\r\n            </FormGrid>\r\n          </Fragment>\r\n        ))}\r\n      </FormGrid>\r\n    );\r\n  }\r\n\r\n  return (\r\n    linkPoliciesData?.searchBy !== '' &&\r\n    linkPoliciesData?.searchTerm !== '' &&\r\n    linkPoliciesData?.loader && (\r\n      <LinkClaimPolicyView\r\n        fields={fields}\r\n        policyData={policyData}\r\n        claimPolicyInsures={claimPolicyInsures}\r\n        allClaimDetails={allClaimDetails}\r\n        originalCurrencyValue={originalCurrencyValue}\r\n        settlementCurrencyValue={settlementCurrencyValue}\r\n        interest={interest}\r\n        uwResetKey={uwResetKey}\r\n        hasClaimRef={false}\r\n        underWritingGroups={underWritingGroups}\r\n        claimPolicyClients={claimPolicyClients}\r\n        isBordereauFlag={isBordereauFlag}\r\n        validation={validation}\r\n        setValidation={setValidation}\r\n        index={index}\r\n        isFormsEdited={isFormsEdited}\r\n        setFormEditedStatus={setFormEditedStatus}\r\n        postSaveHandler={postSaveHandler}\r\n        postEditSaveHandler={postEditSaveHandler}\r\n        saveStatus={saveStatus}\r\n        selectedPolicyRender={selectedPolicyRender}\r\n        handleFormStatus={handleFormStatus}\r\n        stepper={stepper}\r\n        setStepper={setStepper}\r\n        selectNextPolicy={selectNextPolicy}\r\n        postSaveNextHanlder={postSaveNextHanlder}\r\n        claimBordereauPeriods={claimBordereauPeriods}\r\n        bordereauPolicyData={bordereauPolicyData}\r\n        fieldsLoader={{\r\n          isPoliciesClientsLoading: isPoliciesClientsLoading,\r\n          isInterestLoading: isInterestLoading,\r\n          isPolicySectionLoading: isPolicySectionLoading,\r\n          isInsuredLoading: isInsuredLoading,\r\n          isBordereauPeriodsLoading: isBordereauPeriodsLoading,\r\n        }}\r\n      />\r\n    )\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}