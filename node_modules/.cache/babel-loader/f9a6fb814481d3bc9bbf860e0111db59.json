{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\forms\\\\DmsMetadata\\\\DmsMetadata.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useForm } from 'react-hook-form';\nimport { useSelector, useDispatch } from 'react-redux';\nimport * as Yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup'; //app\n\nimport DmsMetadataView from './DmsMetadata.view';\nimport * as utils from 'utils';\nimport * as constants from 'consts';\nimport { getDocumentMetaData, getDmsContext, selectRefDataXbInstances, getViewTableDocuments, selectRefDataNewDocumentTypesByContextSource, selectCaseDetails, getDmsEditMetadataSelector, getDmsEditMetadata, selectSettlementCurrency, postEditedMetadataDetails } from 'stores';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nDmsMetadata.propTypes = {\n  docData: PropTypes.object.isRequired,\n  context: PropTypes.string.isRequired,\n  selectedSourceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\n  searchParamsAfterUpload: PropTypes.shape({\n    referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n    sectionType: PropTypes.string.isRequired\n  }),\n  cancelHandler: PropTypes.func.isRequired\n};\nDmsMetadata.defaultProps = {\n  documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy\n};\nexport default function DmsMetadata(_ref) {\n  _s();\n\n  var _existedMetaData$meta, _existedMetaData$meta2, _existedMetaData$meta3, _existedMetaData$meta4, _existedMetaData$meta5, _existedMetaData$meta6, _existedMetaData$meta7, _existedMetaData$meta8, _currencies;\n\n  var docData = _ref.docData,\n      context = _ref.context,\n      selectedSourceId = _ref.selectedSourceId,\n      referenceId = _ref.referenceId,\n      documentTypeKey = _ref.documentTypeKey,\n      searchParamsAfterUpload = _ref.searchParamsAfterUpload,\n      cancelHandler = _ref.cancelHandler;\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(getDocumentMetaData),\n      documentMetaData = _useSelector.documentMetaData,\n      isDoc_Pending = _useSelector.isDoc_Pending;\n\n  var dmsContext = useSelector(getDmsContext);\n  var refDataXbInstances = useSelector(selectRefDataXbInstances);\n  var ppSelectCaseDetails = useSelector(selectCaseDetails);\n  var docInfo = utils.dmsFormatter.formatDocumentMetaData(documentMetaData, dmsContext, refDataXbInstances);\n  var sourceId = selectedSourceId ? selectedSourceId : constants.DMS_CLAIM_SOURCE_ID;\n\n  var _utils$dmsFormatter$g = utils.dmsFormatter.getDocumentTypeFilterKeys(dmsContext, sourceId, documentTypeKey),\n      dmsSectionKey = _utils$dmsFormatter$g.dmsSectionKey;\n\n  var documentTypes = useSelector(selectRefDataNewDocumentTypesByContextSource(dmsSectionKey, sourceId));\n  var existedMetaData = useSelector(getDmsEditMetadataSelector);\n  var currencies = useSelector(selectSettlementCurrency);\n  currencies = currencies.map(function (currency) {\n    return _objectSpread(_objectSpread({}, currency), {}, {\n      name: \"\".concat(currency.id, \" - \").concat(currency.name)\n    });\n  });\n  var documentId = docData.documentId,\n      docClassification = docData.docClassification;\n\n  var _useState = useState((existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentTypeDescription) === constants.DMS_EDIT_PAYMENT_TYPE),\n      _useState2 = _slicedToArray(_useState, 2),\n      isPaymentAllowed = _useState2[0],\n      setIsPaymentAllowed = _useState2[1];\n\n  var isDmsFromPiInstruction = utils.dmsFormatter.isDmsFromPiInstruction(documentTypeKey);\n  var policyRef = ppSelectCaseDetails.policyRef,\n      instructionId = ppSelectCaseDetails.instructionId; //if api is added for this, please update this\n\n  var docClassificationTypes = [{\n    id: 1,\n    value: utils.string.t('dms.upload.modalItems.classificationType.low')\n  }, {\n    id: 2,\n    value: utils.string.t('dms.upload.modalItems.classificationType.guarded')\n  }, {\n    id: 3,\n    value: utils.string.t('dms.upload.modalItems.classificationType.high')\n  }, {\n    id: 4,\n    value: utils.string.t('dms.upload.modalItems.classificationType.severe')\n  }];\n  var fields = [{\n    name: 'documentName',\n    type: 'text',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentName) || '',\n    validation: Yup.string().required(utils.string.t('validation.required'))\n  }, {\n    name: 'documentType',\n    type: 'autocompletemui',\n    options: documentTypes || [],\n    optionKey: 'id',\n    optionLabel: 'documentTypeDescription',\n    value: (documentTypes === null || documentTypes === void 0 ? void 0 : documentTypes.find(function (item) {\n      return item.documentTypeDescription === (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentTypeDescription);\n    })) || '',\n    validation: Yup.object().nullable().required(utils.string.t('validation.required'))\n  }, {\n    name: 'documentClassification',\n    type: 'autocompletemui',\n    options: docClassificationTypes || [],\n    optionKey: 'id',\n    optionLabel: 'value',\n    value: (docClassificationTypes === null || docClassificationTypes === void 0 ? void 0 : docClassificationTypes.find(function (item) {\n      return item.id === Number(docClassification);\n    })) || '',\n    validation: Yup.object().nullable().required(utils.string.t('validation.required'))\n  }, {\n    type: 'datepicker',\n    name: 'payment.paymentDate',\n    icon: 'TodayIcon',\n    muiComponentProps: {\n      fullWidth: true\n    },\n    outputFormat: 'iso',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta = existedMetaData.metadataFields) === null || _existedMetaData$meta === void 0 ? void 0 : (_existedMetaData$meta2 = _existedMetaData$meta.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_DATE;\n    })) === null || _existedMetaData$meta2 === void 0 ? void 0 : _existedMetaData$meta2.value) || ''\n  }, {\n    name: 'payment.paymentReference',\n    type: 'text',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta3 = existedMetaData.metadataFields) === null || _existedMetaData$meta3 === void 0 ? void 0 : (_existedMetaData$meta4 = _existedMetaData$meta3.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_REFERENCE;\n    })) === null || _existedMetaData$meta4 === void 0 ? void 0 : _existedMetaData$meta4.value) || ''\n  }, {\n    name: 'payment.lossPayee',\n    type: 'text',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta5 = existedMetaData.metadataFields) === null || _existedMetaData$meta5 === void 0 ? void 0 : (_existedMetaData$meta6 = _existedMetaData$meta5.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_LOSS_PAYEE;\n    })) === null || _existedMetaData$meta6 === void 0 ? void 0 : _existedMetaData$meta6.value) || ''\n  }, {\n    name: 'payment.amount',\n    type: 'number',\n    value: (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta7 = existedMetaData.metadataFields) === null || _existedMetaData$meta7 === void 0 ? void 0 : (_existedMetaData$meta8 = _existedMetaData$meta7.find(function (item) {\n      return item.prop === constants.DMS_EDIT_PAYMENT_AMOUNT;\n    })) === null || _existedMetaData$meta8 === void 0 ? void 0 : _existedMetaData$meta8.value) || ''\n  }, {\n    name: 'payment.currency',\n    type: 'autocompletemui',\n    options: currencies || [],\n    optionKey: 'id',\n    optionLabel: 'name',\n    value: ((_currencies = currencies) === null || _currencies === void 0 ? void 0 : _currencies.find(function (item) {\n      var _existedMetaData$meta9, _existedMetaData$meta10;\n\n      return item.id === (existedMetaData === null || existedMetaData === void 0 ? void 0 : (_existedMetaData$meta9 = existedMetaData.metadataFields) === null || _existedMetaData$meta9 === void 0 ? void 0 : (_existedMetaData$meta10 = _existedMetaData$meta9.find(function (subItem) {\n        return subItem.prop === constants.DMS_EDIT_PAYMENT_CURRENCY;\n      })) === null || _existedMetaData$meta10 === void 0 ? void 0 : _existedMetaData$meta10.value);\n    })) || ''\n  }];\n  var actions = [{\n    name: 'secondary',\n    label: utils.string.t('app.cancel'),\n    handler: function handler() {\n      cancelHandler();\n    }\n  }, {\n    name: 'submit',\n    label: utils.string.t('app.save'),\n    handler: function handler(values) {\n      handleMetaDataSubmit(values);\n    }\n  }];\n  var defaultValues = utils.form.getInitialValues(fields);\n  var validationSchema = utils.form.getValidationSchema(fields);\n\n  var _useForm = useForm(_objectSpread({\n    defaultValues: defaultValues\n  }, validationSchema && {\n    resolver: yupResolver(validationSchema)\n  })),\n      control = _useForm.control,\n      reset = _useForm.reset,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit,\n      formState = _useForm.formState,\n      watch = _useForm.watch;\n\n  var documentType = watch('documentType');\n  useEffect(function () {\n    !utils.generic.isValidObject(existedMetaData) && dispatch(getDmsEditMetadata(documentId, docClassification));\n  }, [documentId]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setIsPaymentAllowed((documentType === null || documentType === void 0 ? void 0 : documentType.documentTypeDescription) === constants.DMS_EDIT_PAYMENT_TYPE);\n  }, [documentType]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var handleMetaDataSubmit = function handleMetaDataSubmit(values) {\n    var _Object$keys, _values$documentType, _values$documentType2, _values$documentClass;\n\n    var metadataField = isPaymentAllowed && ((_Object$keys = Object.keys(values === null || values === void 0 ? void 0 : values.payment)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.map(function (item) {\n      var _values$payment$item;\n\n      var propVal = item === 'currency' ? values === null || values === void 0 ? void 0 : (_values$payment$item = values.payment[item]) === null || _values$payment$item === void 0 ? void 0 : _values$payment$item.id : values === null || values === void 0 ? void 0 : values.payment[item];\n      return {\n        prop: constants.DMS_EDIT_PAYMENT_PAYLOAD[item],\n        value: (item === 'amount' ? parseInt(propVal) : propVal) || ''\n      };\n    }));\n    var editMetadata = {\n      documentExtType: (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentExtType) || '',\n      documentId: parseInt(existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.documentId) || '',\n      documentTypeId: (values === null || values === void 0 ? void 0 : (_values$documentType = values.documentType) === null || _values$documentType === void 0 ? void 0 : _values$documentType.documentTypeID) || '',\n      documentTypeDescription: (values === null || values === void 0 ? void 0 : (_values$documentType2 = values.documentType) === null || _values$documentType2 === void 0 ? void 0 : _values$documentType2.documentTypeDescription) || '',\n      createdDate: (docData === null || docData === void 0 ? void 0 : docData.createdDate) || '',\n      createdBy: (existedMetaData === null || existedMetaData === void 0 ? void 0 : existedMetaData.createdBy) || '',\n      docClassificationId: (values === null || values === void 0 ? void 0 : (_values$documentClass = values.documentClassification) === null || _values$documentClass === void 0 ? void 0 : _values$documentClass.id) || '',\n      newFileName: values === null || values === void 0 ? void 0 : values.documentName,\n      metadataFields: metadataField || null\n    };\n    dispatch(postEditedMetadataDetails(editMetadata)).then(function (response) {\n      if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n        if (!isDmsFromPiInstruction) {\n          dispatch(getViewTableDocuments(_objectSpread({}, searchParamsAfterUpload ? searchParamsAfterUpload : _objectSpread({\n            referenceId: referenceId,\n            sectionType: context,\n            documentTypeKey: documentTypeKey\n          }, policyRef && instructionId && {\n            policyRef: policyRef,\n            instructionId: instructionId\n          }))));\n        }\n\n        cancelHandler();\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(DmsMetadataView, {\n    fields: fields,\n    control: control,\n    errors: errors,\n    actions: actions,\n    reset: reset,\n    handleSubmit: handleSubmit,\n    formState: formState,\n    dmsContext: dmsContext,\n    isDocPending: isDoc_Pending,\n    docInfo: docInfo,\n    documentData: docData,\n    existedMetaData: existedMetaData,\n    isPaymentAllowed: isPaymentAllowed\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DmsMetadata, \"aZJkqss8xgg9cWIDu9vQM8vFnTc=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useForm];\n});\n\n_c = DmsMetadata;\n\nvar _c;\n\n$RefreshReg$(_c, \"DmsMetadata\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/forms/DmsMetadata/DmsMetadata.js"],"names":["React","useEffect","useState","PropTypes","useForm","useSelector","useDispatch","Yup","yupResolver","DmsMetadataView","utils","constants","getDocumentMetaData","getDmsContext","selectRefDataXbInstances","getViewTableDocuments","selectRefDataNewDocumentTypesByContextSource","selectCaseDetails","getDmsEditMetadataSelector","getDmsEditMetadata","selectSettlementCurrency","postEditedMetadataDetails","DmsMetadata","propTypes","docData","object","isRequired","context","string","selectedSourceId","oneOfType","number","referenceId","documentTypeKey","oneOf","DMS_DOCUMENT_TYPE_SECTION_KEYS","searchParamsAfterUpload","shape","sectionType","cancelHandler","func","defaultProps","type","policy","dispatch","documentMetaData","isDoc_Pending","dmsContext","refDataXbInstances","ppSelectCaseDetails","docInfo","dmsFormatter","formatDocumentMetaData","sourceId","DMS_CLAIM_SOURCE_ID","getDocumentTypeFilterKeys","dmsSectionKey","documentTypes","existedMetaData","currencies","map","currency","name","id","documentId","docClassification","documentTypeDescription","DMS_EDIT_PAYMENT_TYPE","isPaymentAllowed","setIsPaymentAllowed","isDmsFromPiInstruction","policyRef","instructionId","docClassificationTypes","value","t","fields","documentName","validation","required","options","optionKey","optionLabel","find","item","nullable","Number","icon","muiComponentProps","fullWidth","outputFormat","metadataFields","prop","DMS_EDIT_PAYMENT_DATE","DMS_EDIT_PAYMENT_REFERENCE","DMS_EDIT_PAYMENT_LOSS_PAYEE","DMS_EDIT_PAYMENT_AMOUNT","subItem","DMS_EDIT_PAYMENT_CURRENCY","actions","label","handler","values","handleMetaDataSubmit","defaultValues","form","getInitialValues","validationSchema","getValidationSchema","resolver","control","reset","errors","handleSubmit","formState","watch","documentType","generic","isValidObject","metadataField","Object","keys","payment","propVal","DMS_EDIT_PAYMENT_PAYLOAD","parseInt","editMetadata","documentExtType","documentTypeId","documentTypeID","createdDate","createdBy","docClassificationId","documentClassification","newFileName","then","response","status","API_RESPONSE_OK"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as Yup from 'yup';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\n\r\n//app\r\nimport DmsMetadataView from './DmsMetadata.view';\r\nimport * as utils from 'utils';\r\nimport * as constants from 'consts';\r\nimport {\r\n  getDocumentMetaData,\r\n  getDmsContext,\r\n  selectRefDataXbInstances,\r\n  getViewTableDocuments,\r\n  selectRefDataNewDocumentTypesByContextSource,\r\n  selectCaseDetails,\r\n  getDmsEditMetadataSelector,\r\n  getDmsEditMetadata,\r\n  selectSettlementCurrency,\r\n  postEditedMetadataDetails,\r\n} from 'stores';\r\n\r\nDmsMetadata.propTypes = {\r\n  docData: PropTypes.object.isRequired,\r\n  context: PropTypes.string.isRequired,\r\n  selectedSourceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n  referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n  documentTypeKey: PropTypes.oneOf([constants.DMS_DOCUMENT_TYPE_SECTION_KEYS]),\r\n  searchParamsAfterUpload: PropTypes.shape({\r\n    referenceId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\r\n    sectionType: PropTypes.string.isRequired,\r\n  }),\r\n  cancelHandler: PropTypes.func.isRequired,\r\n};\r\n\r\nDmsMetadata.defaultProps = {\r\n  documentTypeKey: constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.type.policy,\r\n};\r\n\r\nexport default function DmsMetadata({ docData, context, selectedSourceId, referenceId, documentTypeKey, searchParamsAfterUpload, cancelHandler }) {\r\n  const dispatch = useDispatch();\r\n  const { documentMetaData, isDoc_Pending } = useSelector(getDocumentMetaData);\r\n  const dmsContext = useSelector(getDmsContext);\r\n  const refDataXbInstances = useSelector(selectRefDataXbInstances);\r\n  const ppSelectCaseDetails = useSelector(selectCaseDetails);\r\n  const docInfo = utils.dmsFormatter.formatDocumentMetaData(documentMetaData, dmsContext, refDataXbInstances);\r\n\r\n  const sourceId = selectedSourceId ? selectedSourceId : constants.DMS_CLAIM_SOURCE_ID;\r\n\r\n  const { dmsSectionKey } = utils.dmsFormatter.getDocumentTypeFilterKeys(dmsContext, sourceId, documentTypeKey);\r\n\r\n  const documentTypes = useSelector(selectRefDataNewDocumentTypesByContextSource(dmsSectionKey, sourceId));\r\n  const existedMetaData = useSelector(getDmsEditMetadataSelector);\r\n\r\n  let currencies = useSelector(selectSettlementCurrency);\r\n  currencies = currencies.map((currency) => ({ ...currency, name: `${currency.id} - ${currency.name}` }));\r\n  const { documentId, docClassification } = docData;\r\n  const [isPaymentAllowed, setIsPaymentAllowed] = useState(existedMetaData?.documentTypeDescription === constants.DMS_EDIT_PAYMENT_TYPE);\r\n  const isDmsFromPiInstruction = utils.dmsFormatter.isDmsFromPiInstruction(documentTypeKey);\r\n  const { policyRef, instructionId} = ppSelectCaseDetails;\r\n\r\n  //if api is added for this, please update this\r\n  const docClassificationTypes = [\r\n    { id: 1, value: utils.string.t('dms.upload.modalItems.classificationType.low') },\r\n    { id: 2, value: utils.string.t('dms.upload.modalItems.classificationType.guarded') },\r\n    { id: 3, value: utils.string.t('dms.upload.modalItems.classificationType.high') },\r\n    { id: 4, value: utils.string.t('dms.upload.modalItems.classificationType.severe') },\r\n  ];\r\n\r\n  const fields = [\r\n    {\r\n      name: 'documentName',\r\n      type: 'text',\r\n      value: existedMetaData?.documentName || '',\r\n      validation: Yup.string().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      name: 'documentType',\r\n      type: 'autocompletemui',\r\n      options: documentTypes || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'documentTypeDescription',\r\n      value: documentTypes?.find((item) => item.documentTypeDescription === existedMetaData?.documentTypeDescription) || '',\r\n      validation: Yup.object().nullable().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      name: 'documentClassification',\r\n      type: 'autocompletemui',\r\n      options: docClassificationTypes || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'value',\r\n      value: docClassificationTypes?.find((item) => item.id === Number(docClassification)) || '',\r\n      validation: Yup.object().nullable().required(utils.string.t('validation.required')),\r\n    },\r\n    {\r\n      type: 'datepicker',\r\n      name: 'payment.paymentDate',\r\n      icon: 'TodayIcon',\r\n      muiComponentProps: {\r\n        fullWidth: true,\r\n      },\r\n      outputFormat: 'iso',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_DATE)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.paymentReference',\r\n      type: 'text',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_REFERENCE)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.lossPayee',\r\n      type: 'text',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_LOSS_PAYEE)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.amount',\r\n      type: 'number',\r\n      value: existedMetaData?.metadataFields?.find((item) => item.prop === constants.DMS_EDIT_PAYMENT_AMOUNT)?.value || '',\r\n    },\r\n    {\r\n      name: 'payment.currency',\r\n      type: 'autocompletemui',\r\n      options: currencies || [],\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      value:\r\n        currencies?.find((item) => {\r\n          return item.id === existedMetaData?.metadataFields?.find((subItem) => subItem.prop === constants.DMS_EDIT_PAYMENT_CURRENCY)?.value;\r\n        }) || '',\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'secondary',\r\n      label: utils.string.t('app.cancel'),\r\n      handler: () => {\r\n        cancelHandler();\r\n      },\r\n    },\r\n    {\r\n      name: 'submit',\r\n      label: utils.string.t('app.save'),\r\n      handler: (values) => {\r\n        handleMetaDataSubmit(values);\r\n      },\r\n    },\r\n  ];\r\n\r\n  const defaultValues = utils.form.getInitialValues(fields);\r\n  const validationSchema = utils.form.getValidationSchema(fields);\r\n  const { control, reset, errors, handleSubmit, formState, watch } = useForm({\r\n    defaultValues,\r\n    ...(validationSchema && { resolver: yupResolver(validationSchema) }),\r\n  });\r\n  const documentType = watch('documentType');\r\n\r\n  useEffect(() => {\r\n    !utils.generic.isValidObject(existedMetaData) && dispatch(getDmsEditMetadata(documentId, docClassification));\r\n  }, [documentId]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    setIsPaymentAllowed(documentType?.documentTypeDescription === constants.DMS_EDIT_PAYMENT_TYPE);\r\n  }, [documentType]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const handleMetaDataSubmit = (values) => {\r\n    const metadataField =\r\n      isPaymentAllowed &&\r\n      Object.keys(values?.payment)?.map((item) => {\r\n        const propVal = item === 'currency' ? values?.payment[item]?.id : values?.payment[item];\r\n        return {\r\n          prop: constants.DMS_EDIT_PAYMENT_PAYLOAD[item],\r\n          value: (item === 'amount' ? parseInt(propVal) : propVal) || '',\r\n        };\r\n      });\r\n    const editMetadata = {\r\n      documentExtType: existedMetaData?.documentExtType || '',\r\n      documentId: parseInt(existedMetaData?.documentId) || '',\r\n      documentTypeId: values?.documentType?.documentTypeID || '',\r\n      documentTypeDescription: values?.documentType?.documentTypeDescription || '',\r\n      createdDate: docData?.createdDate || '',\r\n      createdBy: existedMetaData?.createdBy || '',\r\n      docClassificationId: values?.documentClassification?.id || '',\r\n      newFileName: values?.documentName,\r\n      metadataFields: metadataField || null,\r\n    };\r\n\r\n    dispatch(postEditedMetadataDetails(editMetadata)).then((response) => {\r\n      if (response?.status === constants.API_RESPONSE_OK) {\r\n        if (!isDmsFromPiInstruction) {\r\n          dispatch(\r\n            getViewTableDocuments({\r\n              ...(searchParamsAfterUpload\r\n                ? searchParamsAfterUpload\r\n                : {\r\n                  referenceId,\r\n                  sectionType: context,\r\n                  documentTypeKey,\r\n                  ...(policyRef && instructionId && { policyRef, instructionId }),\r\n                }),\r\n            })\r\n          );\r\n        }\r\n        cancelHandler();\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <DmsMetadataView\r\n      fields={fields}\r\n      control={control}\r\n      errors={errors}\r\n      actions={actions}\r\n      reset={reset}\r\n      handleSubmit={handleSubmit}\r\n      formState={formState}\r\n      dmsContext={dmsContext}\r\n      isDocPending={isDoc_Pending}\r\n      docInfo={docInfo}\r\n      documentData={docData}\r\n      existedMetaData={existedMetaData}\r\n      isPaymentAllowed={isPaymentAllowed}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}