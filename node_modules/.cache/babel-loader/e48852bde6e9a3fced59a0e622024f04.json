{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\AdminMarkets\\\\AdminMarkets.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport get from 'lodash/get'; // app\n\nimport { getMarketParentList, showModal } from 'stores';\nimport { AdminMarketsView } from './AdminMarkets.view';\nimport { usePagination } from 'hooks';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function AdminMarkets() {\n  _s();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedId = _useState2[0],\n      setSelectedId = _useState2[1];\n\n  var parentList = useSelector(function (state) {\n    return state.marketParent.list;\n  }) || [];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      params = _useState4[0],\n      setParams = _useState4[1];\n\n  var dispatch = useDispatch();\n  var paginationObj = {\n    page: parentList.page - 1,\n    rowsTotal: parentList.itemsTotal,\n    rowsPerPage: parentList.pageSize\n  };\n  useEffect(function () {\n    dispatch(getMarketParentList());\n  }, [] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  useEffect(function () {\n    if (parentList.items.length === 1) {\n      setSelectedId(parentList.items[0].id);\n    }\n  }, [parentList.items] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var handleClickRow = function handleClickRow(id) {\n    setSelectedId(id === selectedId ? null : id);\n  };\n\n  var handleChangePage = function handleChangePage(newPage) {\n    dispatch(getMarketParentList(_objectSpread(_objectSpread({}, params), {}, {\n      page: newPage + 1\n    })));\n  };\n\n  var handleChangeRowsPerPage = function handleChangeRowsPerPage(rowsPerPage) {\n    dispatch(getMarketParentList(_objectSpread(_objectSpread({}, params), {}, {\n      size: rowsPerPage\n    })));\n  };\n\n  var pagination = usePagination(parentList.items, paginationObj, handleChangePage, handleChangeRowsPerPage);\n  var fields = [{\n    gridSize: {\n      xs: 12\n    },\n    name: 'marketParent',\n    type: 'autocomplete',\n    placeholder: utils.string.t('admin.searchByMarketParent'),\n    value: [],\n    options: parentList.items,\n    optionKey: 'id',\n    optionLabel: 'name',\n    muiComponentProps: {\n      'data-testid': 'marketParent'\n    }\n  }];\n  var actions = [{\n    name: 'filter',\n    label: utils.string.t('app.filter'),\n    handler: function handler(values) {\n      var marketParent = values.marketParent;\n      if (!get(marketParent, '[0].name')) return;\n      var name = get(marketParent, '[0].name').toLowerCase();\n      setParams({\n        name: name\n      });\n      dispatch(getMarketParentList({\n        name: name\n      }));\n    }\n  }, {\n    name: 'reset',\n    label: utils.string.t('app.reset'),\n    handler: function handler() {\n      dispatch(getMarketParentList());\n      setParams({});\n    }\n  }];\n  var popoverActions = [{\n    id: 'add-edit-markets',\n    label: 'admin.addEditMarkets',\n    callback: function callback(_ref) {\n      var parent = _ref.parent;\n      return handleAddEditMarkets(parent);\n    }\n  }];\n\n  var handleAddEditMarkets = function handleAddEditMarkets(marketParent) {\n    dispatch(showModal({\n      component: 'ADD_EDIT_MARKETS',\n      props: {\n        title: 'admin.addEditMarkets',\n        fullWidth: true,\n        maxWidth: 'md',\n        componentProps: {\n          marketParent: marketParent\n        }\n      }\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(AdminMarketsView, {\n    parents: parentList.items,\n    sort: {\n      by: 'name',\n      type: 'text',\n      direction: 'asc'\n    },\n    fields: fields,\n    actions: actions,\n    handleClickRow: handleClickRow,\n    selectedId: selectedId,\n    handleChangeRowsPerPage: pagination.handlers.handleChangeRowsPerPage,\n    handleChangePage: pagination.handlers.handleChangePage,\n    pagination: pagination.obj,\n    popoverActions: popoverActions\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AdminMarkets, \"q230NinQaQUwQHjidlZgGyAbIkw=\", false, function () {\n  return [useSelector, useDispatch, usePagination];\n});\n\n_c = AdminMarkets;\nexport default AdminMarkets;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminMarkets\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/AdminMarkets/AdminMarkets.js"],"names":["React","useState","useEffect","useDispatch","useSelector","get","getMarketParentList","showModal","AdminMarketsView","usePagination","utils","AdminMarkets","selectedId","setSelectedId","parentList","state","marketParent","list","params","setParams","dispatch","paginationObj","page","rowsTotal","itemsTotal","rowsPerPage","pageSize","items","length","id","handleClickRow","handleChangePage","newPage","handleChangeRowsPerPage","size","pagination","fields","gridSize","xs","name","type","placeholder","string","t","value","options","optionKey","optionLabel","muiComponentProps","actions","label","handler","values","toLowerCase","popoverActions","callback","parent","handleAddEditMarkets","component","props","title","fullWidth","maxWidth","componentProps","by","direction","handlers","obj"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { getMarketParentList, showModal } from 'stores';\r\nimport { AdminMarketsView } from './AdminMarkets.view';\r\nimport { usePagination } from 'hooks';\r\nimport * as utils from 'utils';\r\n\r\nexport function AdminMarkets() {\r\n  const [selectedId, setSelectedId] = useState();\r\n  const parentList = useSelector((state) => state.marketParent.list) || [];\r\n  const [params, setParams] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const paginationObj = {\r\n    page: parentList.page - 1,\r\n    rowsTotal: parentList.itemsTotal,\r\n    rowsPerPage: parentList.pageSize,\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      dispatch(getMarketParentList());\r\n    },\r\n    [] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  useEffect(\r\n    () => {\r\n      if (parentList.items.length === 1) {\r\n        setSelectedId(parentList.items[0].id);\r\n      }\r\n    },\r\n    [parentList.items] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const handleClickRow = (id) => {\r\n    setSelectedId(id === selectedId ? null : id);\r\n  };\r\n\r\n  const handleChangePage = (newPage) => {\r\n    dispatch(getMarketParentList({ ...params, page: newPage + 1 }));\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (rowsPerPage) => {\r\n    dispatch(getMarketParentList({ ...params, size: rowsPerPage }));\r\n  };\r\n\r\n  const pagination = usePagination(parentList.items, paginationObj, handleChangePage, handleChangeRowsPerPage);\r\n\r\n  const fields = [\r\n    {\r\n      gridSize: { xs: 12 },\r\n      name: 'marketParent',\r\n      type: 'autocomplete',\r\n      placeholder: utils.string.t('admin.searchByMarketParent'),\r\n      value: [],\r\n      options: parentList.items,\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      muiComponentProps: {\r\n        'data-testid': 'marketParent',\r\n      },\r\n    },\r\n  ];\r\n\r\n  const actions = [\r\n    {\r\n      name: 'filter',\r\n      label: utils.string.t('app.filter'),\r\n      handler: (values) => {\r\n        const { marketParent } = values;\r\n        if (!get(marketParent, '[0].name')) return;\r\n\r\n        const name = get(marketParent, '[0].name').toLowerCase();\r\n        setParams({ name });\r\n        dispatch(getMarketParentList({ name }));\r\n      },\r\n    },\r\n    {\r\n      name: 'reset',\r\n      label: utils.string.t('app.reset'),\r\n      handler: () => {\r\n        dispatch(getMarketParentList());\r\n        setParams({});\r\n      },\r\n    },\r\n  ];\r\n\r\n  const popoverActions = [\r\n    {\r\n      id: 'add-edit-markets',\r\n      label: 'admin.addEditMarkets',\r\n      callback: ({ parent }) => handleAddEditMarkets(parent),\r\n    },\r\n  ];\r\n\r\n  const handleAddEditMarkets = (marketParent) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'ADD_EDIT_MARKETS',\r\n        props: {\r\n          title: 'admin.addEditMarkets',\r\n          fullWidth: true,\r\n          maxWidth: 'md',\r\n          componentProps: {\r\n            marketParent,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <AdminMarketsView\r\n      parents={parentList.items}\r\n      sort={{\r\n        by: 'name',\r\n        type: 'text',\r\n        direction: 'asc',\r\n      }}\r\n      fields={fields}\r\n      actions={actions}\r\n      handleClickRow={handleClickRow}\r\n      selectedId={selectedId}\r\n      handleChangeRowsPerPage={pagination.handlers.handleChangeRowsPerPage}\r\n      handleChangePage={pagination.handlers.handleChangePage}\r\n      pagination={pagination.obj}\r\n      popoverActions={popoverActions}\r\n    />\r\n  );\r\n}\r\n\r\nexport default AdminMarkets;\r\n"]},"metadata":{},"sourceType":"module"}