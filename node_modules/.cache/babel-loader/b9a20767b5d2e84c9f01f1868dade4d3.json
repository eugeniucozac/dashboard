{"ast":null,"code":"import _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\components\\\\DmsWidget\\\\DmsFnolWidget.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport get from 'lodash/get'; //app\n\nimport { TreeView } from 'components';\nimport { selectDmsDocDetails, selectClaimData, selectLossId, selectClaimAssociateWithLoss, getClaimsAssociateWithLoss, getViewTableDocuments, selectDmsWidgetClaimDocs } from 'stores';\nimport config from 'config';\nimport * as utils from 'utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DmsWidget() {\n  _s();\n\n  var _associatedClaims$map, _dmsWidgetClaimDocs$c, _claimRefsArray$, _data$children;\n\n  var dispatch = useDispatch();\n  var lossInformation = useSelector(selectLossId);\n  var savedDmsDocList = useSelector(selectDmsDocDetails);\n  var claimData = useSelector(selectClaimData);\n  var associatedClaims = useSelector(selectClaimAssociateWithLoss);\n  var dmsWidgetClaimDocs = useSelector(selectDmsWidgetClaimDocs);\n  var currentLossDetailId = get(lossInformation, 'lossDetailID');\n  var currentLossRef = get(lossInformation, 'lossRef');\n  var lossDocDetails = get(savedDmsDocList, 'lossDocDetails');\n  var currentClaimRef = get(claimData, 'claimRef') || get(claimData, 'claimReference');\n  useEffect(function () {\n    if (currentLossDetailId) {\n      dispatch(getClaimsAssociateWithLoss(currentLossDetailId));\n    }\n  }, [currentLossDetailId]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    if (currentClaimRef) {\n      dispatch(getViewTableDocuments({\n        referenceId: currentClaimRef,\n        sectionType: \"Claim\",\n        isFromDmsWidget: true\n      }));\n    }\n  }, [currentClaimRef]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var claimRefsArray = associatedClaims === null || associatedClaims === void 0 ? void 0 : (_associatedClaims$map = associatedClaims.map(function (item) {\n    return item.claimReference;\n  })) === null || _associatedClaims$map === void 0 ? void 0 : _associatedClaims$map.filter(function (claimref) {\n    return claimref !== currentClaimRef;\n  });\n  var lossDocuments = lossDocDetails.map(function (doc, index) {\n    return _objectSpread(_objectSpread({}, doc), {}, {\n      id: \"\".concat(doc.documentId).concat(index),\n      label: doc.documentName,\n      labelInfo: utils.string.t('format.date', {\n        value: {\n          date: doc === null || doc === void 0 ? void 0 : doc.updatedDate,\n          format: config.ui.format.date.text\n        }\n      })\n    });\n  });\n  var currentClaimDocuments = (_dmsWidgetClaimDocs$c = dmsWidgetClaimDocs[currentClaimRef]) === null || _dmsWidgetClaimDocs$c === void 0 ? void 0 : _dmsWidgetClaimDocs$c.map(function (doc, index) {\n    return _objectSpread(_objectSpread({}, doc), {}, {\n      id: \"\".concat(doc.documentId).concat(index),\n      label: doc.documentName,\n      labelInfo: utils.string.t('format.date', {\n        value: {\n          date: doc === null || doc === void 0 ? void 0 : doc.updatedDate,\n          format: config.ui.format.date.text\n        }\n      })\n    });\n  });\n  var openedChild = [].concat(_toConsumableArray(lossDocuments), [currentClaimRef ? {\n    id: 'child1',\n    label: \"Claim \".concat(currentClaimRef),\n    labelInfo: '',\n    children: currentClaimDocuments\n  } : {}]);\n  var closedChild = (claimRefsArray === null || claimRefsArray === void 0 ? void 0 : (_claimRefsArray$ = claimRefsArray[0]) === null || _claimRefsArray$ === void 0 ? void 0 : _claimRefsArray$.claimId) ? claimRefsArray === null || claimRefsArray === void 0 ? void 0 : claimRefsArray.map(function (item) {\n    return {\n      id: item,\n      label: \"Claim \".concat(item),\n      labelInfo: '',\n      children: [dmsWidgetClaimDocs[item]]\n    };\n  }) : [];\n  var data = {\n    id: 'root',\n    label: \"Loss Reference \".concat(currentLossRef),\n    labelInfo: '',\n    children: [].concat(_toConsumableArray(openedChild), _toConsumableArray(closedChild))\n  };\n  var arr = [];\n  data === null || data === void 0 ? void 0 : (_data$children = data.children) === null || _data$children === void 0 ? void 0 : _data$children.forEach(function (child) {\n    if (child.labelInfo) {\n      arr.push(child);\n    } else {\n      var _child$children;\n\n      child === null || child === void 0 ? void 0 : (_child$children = child.children) === null || _child$children === void 0 ? void 0 : _child$children.forEach(function (child) {\n        if (child) {\n          arr.push(child);\n        }\n      });\n    }\n  });\n\n  var handleSelect = function handleSelect(_, nodeIds) {\n    if (nodeIds !== 'root' && nodeIds !== 'child1') {\n      dispatch(getViewTableDocuments({\n        referenceId: nodeIds,\n        sectionType: 'Claim',\n        isFromDmsWidget: true\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(TreeView, {\n    handleAccordionClick: handleSelect,\n    treeData: data,\n    rootRef: currentLossRef,\n    widgetTitle: utils.string.t('dms.view.documents.title'),\n    columns: [{\n      header: utils.string.t('dms.upload.file'),\n      flex: '0.8'\n    }, {\n      header: utils.string.t('dms.upload.uploadedOn'),\n      flex: '0.5'\n    }],\n    defaultExpanded: ['child1', 'root'],\n    filteredData: arr\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 7\n  }, this);\n}\n\n_s(DmsWidget, \"or/t/rMkNfUqseVvWiF7laxpJR4=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = DmsWidget;\n\nvar _c;\n\n$RefreshReg$(_c, \"DmsWidget\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/components/DmsWidget/DmsFnolWidget.js"],"names":["React","useEffect","useSelector","useDispatch","get","TreeView","selectDmsDocDetails","selectClaimData","selectLossId","selectClaimAssociateWithLoss","getClaimsAssociateWithLoss","getViewTableDocuments","selectDmsWidgetClaimDocs","config","utils","DmsWidget","dispatch","lossInformation","savedDmsDocList","claimData","associatedClaims","dmsWidgetClaimDocs","currentLossDetailId","currentLossRef","lossDocDetails","currentClaimRef","referenceId","sectionType","isFromDmsWidget","claimRefsArray","map","item","claimReference","filter","claimref","lossDocuments","doc","index","id","documentId","label","documentName","labelInfo","string","t","value","date","updatedDate","format","ui","text","currentClaimDocuments","openedChild","children","closedChild","claimId","data","arr","forEach","child","push","handleSelect","_","nodeIds","header","flex"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport get from 'lodash/get';\r\n\r\n//app\r\nimport { TreeView } from 'components';\r\nimport { \r\n  selectDmsDocDetails,\r\n  selectClaimData,\r\n  selectLossId,\r\n  selectClaimAssociateWithLoss,\r\n  getClaimsAssociateWithLoss,\r\n  getViewTableDocuments,\r\n  selectDmsWidgetClaimDocs \r\n } from 'stores';\r\n import config from 'config';\r\n import * as utils from 'utils';\r\n\r\nexport default function DmsWidget() {\r\n  const dispatch = useDispatch();\r\n  const lossInformation = useSelector(selectLossId);\r\n  const savedDmsDocList = useSelector(selectDmsDocDetails);\r\n  const claimData = useSelector(selectClaimData);\r\n  const associatedClaims = useSelector(selectClaimAssociateWithLoss);\r\n  const dmsWidgetClaimDocs = useSelector(selectDmsWidgetClaimDocs);\r\n  const currentLossDetailId = get(lossInformation, 'lossDetailID');\r\n  const currentLossRef = get(lossInformation, 'lossRef');\r\n  const lossDocDetails = get(savedDmsDocList, 'lossDocDetails');\r\n  const currentClaimRef = get(claimData, 'claimRef') || get(claimData, 'claimReference');\r\n\r\n  useEffect(() => {\r\n    if (currentLossDetailId) {\r\n      dispatch(getClaimsAssociateWithLoss(currentLossDetailId))\r\n    }\r\n  }, [currentLossDetailId]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  useEffect(() => {\r\n    if (currentClaimRef) {\r\n      dispatch(getViewTableDocuments({ referenceId: currentClaimRef, sectionType: \"Claim\", isFromDmsWidget: true }))\r\n    }\r\n  }, [currentClaimRef]) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const claimRefsArray = associatedClaims?.map((item) => item.claimReference)?.filter((claimref) => claimref !== currentClaimRef);\r\n\r\n  const lossDocuments = lossDocDetails.map((doc, index) => {\r\n    return { \r\n      ...doc,\r\n      id: `${doc.documentId}${index}`,\r\n      label: doc.documentName,\r\n      labelInfo: utils.string.t('format.date', { value: { date: doc?.updatedDate, format: config.ui.format.date.text } }) }\r\n  });\r\n\r\n  const currentClaimDocuments = dmsWidgetClaimDocs[currentClaimRef]?.map((doc, index) => {\r\n    return { \r\n      ...doc,\r\n      id: `${doc.documentId}${index}`,\r\n      label: doc.documentName,\r\n      labelInfo: utils.string.t('format.date', { value: { date: doc?.updatedDate, format: config.ui.format.date.text } }) }\r\n  });\r\n\r\n  const openedChild = [...lossDocuments, currentClaimRef ? { id: 'child1', label: `Claim ${currentClaimRef}`, labelInfo: '', children: currentClaimDocuments } : {}]\r\n\r\n  const closedChild = claimRefsArray?.[0]?.claimId ? claimRefsArray?.map((item) => { return { id: item, label: `Claim ${item}`, labelInfo: '', children:  [dmsWidgetClaimDocs[item]]} }) : [];\r\n  \r\n  const data = {\r\n    id: 'root',\r\n    label: `Loss Reference ${currentLossRef}`,\r\n    labelInfo: '',\r\n    children: [...openedChild, ...closedChild]\r\n  };\r\n\r\n  let arr = [];\r\n\r\n  data?.children?.forEach(child => {\r\n    if (child.labelInfo) {\r\n      arr.push(child)\r\n    } else {\r\n      child?.children?.forEach(child => {\r\n        if (child) {\r\n          arr.push(child)\r\n        }\r\n      })\r\n    }\r\n  });\r\n\r\n  const handleSelect = (_, nodeIds) => {\r\n    if (nodeIds !== 'root' && nodeIds !== 'child1') {\r\n      dispatch(getViewTableDocuments({ referenceId: nodeIds, sectionType: 'Claim', isFromDmsWidget: true }));\r\n    }\r\n  }\r\n\r\n  return (\r\n      <TreeView \r\n        handleAccordionClick={handleSelect}\r\n        treeData={data} \r\n        rootRef={currentLossRef}\r\n        widgetTitle={utils.string.t('dms.view.documents.title')}\r\n        columns={[\r\n          {header: utils.string.t('dms.upload.file'), flex: '0.8'},\r\n          {header: utils.string.t('dms.upload.uploadedOn'), flex: '0.5'}\r\n        ]}\r\n        defaultExpanded={['child1', 'root']}\r\n        filteredData={arr}\r\n      />\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}