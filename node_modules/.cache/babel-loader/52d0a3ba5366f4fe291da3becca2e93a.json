{"ast":null,"code":"import _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\QuoteBindAggregate\\\\QuoteBindLimitGraph.view.js\",\n    _s = $RefreshSig$();\n\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useMemo, useState, useRef, Fragment } from 'react';\nimport { useDispatch, useSelector } from 'react-redux'; // app\n\nimport { Empty } from 'components';\nimport * as utils from 'utils';\nimport styles from './QuoteBindAggregate.styles'; // app\n\nimport { Loader } from 'components'; // mui\n\nimport { Typography, Box } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core';\nimport { getAggregateLimitsGraph, selectFacilityAggregateLimits, selectIsLimitsLoading } from 'stores';\nimport { ReactComponent as IconSearchFile } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/svg/line-icon-search-file.svg\";\nimport { ComposedChart, Line, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Brush } from 'recharts';\nimport { useMedia } from 'hooks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nQuoteBindLimitGraphView.propTypes = {\n  facilityId: PropTypes.string.isRequired\n};\nexport function QuoteBindLimitGraphView(_ref) {\n  _s();\n\n  var _this = this;\n\n  var facilityId = _ref.facilityId;\n  var dispatch = useDispatch();\n  var aggregateLimits = useSelector(selectFacilityAggregateLimits);\n  var isLimitsLoading = useSelector(selectIsLimitsLoading);\n  var media = useMedia();\n  var parentRef = useRef(null);\n\n  var _useState = useState(1200),\n      _useState2 = _slicedToArray(_useState, 2),\n      width = _useState2[0],\n      setWidth = _useState2[1];\n\n  var classes = makeStyles(styles, {\n    name: 'QuoteBindAggregate'\n  })({\n    media: media\n  });\n  useEffect(function () {\n    dispatch(getAggregateLimitsGraph(facilityId));\n  }, [facilityId, dispatch]);\n  var parsedAggregateLimits = useMemo(function () {\n    var graphData = [];\n\n    if ((aggregateLimits === null || aggregateLimits === void 0 ? void 0 : aggregateLimits.length) > 0) {\n      aggregateLimits.forEach(function (item) {\n        var valueLimits = utils.risk.parsedGraphValues(item === null || item === void 0 ? void 0 : item.valueLimits);\n        graphData.push({\n          title: item === null || item === void 0 ? void 0 : item.label,\n          data: valueLimits\n        });\n      });\n      return graphData;\n    }\n\n    return [];\n  }, [aggregateLimits]);\n  useEffect(function () {\n    var _parentRef$current;\n\n    if (parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : _parentRef$current.offsetWidth) {\n      var _parentRef$current2;\n\n      setWidth(parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current2 = parentRef.current) === null || _parentRef$current2 === void 0 ? void 0 : _parentRef$current2.offsetWidth);\n    }\n  }, [parentRef]);\n\n  var CustomTooltip = function CustomTooltip(_ref2) {\n    var _payload$, _payload$$payload, _payload$2, _payload$2$payload;\n\n    var payload = _ref2.payload,\n        label = _ref2.label;\n    var boundQuotesLimit = (_payload$ = payload[0]) === null || _payload$ === void 0 ? void 0 : (_payload$$payload = _payload$.payload) === null || _payload$$payload === void 0 ? void 0 : _payload$$payload.boundQuotesLimit;\n    var aggregateLimits = (_payload$2 = payload[0]) === null || _payload$2 === void 0 ? void 0 : (_payload$2$payload = _payload$2.payload) === null || _payload$2$payload === void 0 ? void 0 : _payload$2$payload.facilityLimit;\n    return /*#__PURE__*/_jsxDEV(Box, {\n      className: classes.tootlTip,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        style: {\n          fontWeight: 900\n        },\n        variant: \"caption\",\n        children: label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, _this), boundQuotesLimit ? /*#__PURE__*/_jsxDEV(Typography, {\n        style: {\n          color: '#413ea0'\n        },\n        variant: \"caption\",\n        children: \"\".concat(utils.string.t('products.aggregateLimits.bondAggregate'), \": \").concat(boundQuotesLimit.toLocaleString())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, _this) : null, aggregateLimits ? /*#__PURE__*/_jsxDEV(Typography, {\n        style: {\n          color: '#ff7300'\n        },\n        variant: \"caption\",\n        children: \"\".concat(utils.string.t('products.aggregateLimits.aggregateLimitLabel'), \": \").concat(aggregateLimits.toLocaleString())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, _this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var customTraveler = function customTraveler(_ref3) {\n    var x = _ref3.x,\n        y = _ref3.y,\n        width = _ref3.width,\n        height = _ref3.height,\n        fill = _ref3.fill,\n        stroke = _ref3.stroke;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"rect\", {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        fill: fill,\n        stroke: stroke\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false);\n  };\n\n  if (isLimitsLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      height: 300,\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        visible: true,\n        absolute: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (!isLimitsLoading && (aggregateLimits === null || aggregateLimits === void 0 ? void 0 : aggregateLimits.length) === 0) return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      style: {\n        whiteSpace: 'nowrap'\n      },\n      children: /*#__PURE__*/_jsxDEV(Empty, {\n        title: utils.string.t('products.aggregateLimits.graphNotFound'),\n        icon: /*#__PURE__*/_jsxDEV(IconSearchFile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 89\n        }, this),\n        padding: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: parsedAggregateLimits.map(function (item, index) {\n      var _item$data, _item$data2, _item$data3, _item$data4;\n\n      return /*#__PURE__*/_jsxDEV(Box, {\n        justifyContent: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          justifyContent: \"left\",\n          className: classes.titleDiv,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            style: {\n              color: 'rgb(128, 128, 128)',\n              fontWeight: 500\n            },\n            variant: \"h3\",\n            testid: \"products-aggregate-limits-title\",\n            children: \"\".concat(item.title, \" \").concat(utils.string.t('products.aggregateLimits.aggregateLimitTitle'))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          className: classes.contentWrapper,\n          ref: parentRef,\n          children: ((_item$data = item.data) === null || _item$data === void 0 ? void 0 : _item$data.length) > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n              width: \"100%\",\n              height: media.mobile ? 300 : 500,\n              children: /*#__PURE__*/_jsxDEV(ComposedChart, {\n                data: item.data,\n                margin: {\n                  top: media.mobile ? 20 : 50,\n                  right: media.mobile ? 10 : 30,\n                  bottom: media.mobile ? 20 : 50,\n                  left: media.mobile ? 20 : 30\n                },\n                children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                  stroke: \"#f5f5f5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(XAxis, {\n                  dataKey: \"label\",\n                  scale: \"band\",\n                  angle: -45,\n                  textAnchor: \"end\",\n                  interval: 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(YAxis, {\n                  tickFormatter: function tickFormatter(parameter) {\n                    return parameter.toLocaleString();\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  content: /*#__PURE__*/_jsxDEV(CustomTooltip, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 135,\n                    columnNumber: 41\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(Legend, {\n                  wrapperStyle: {\n                    position: 'sticky',\n                    paddingTop: media.mobile ? 0 : 15,\n                    width: '100%'\n                  },\n                  align: \"center\",\n                  verticalAlign: \"bottom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(Bar, {\n                  dataKey: \"boundQuotesLimit\",\n                  barSize: 50,\n                  fill: \"#413ea0\",\n                  name: utils.string.t('products.aggregateLimits.bondAggregate')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 23\n                }, _this), /*#__PURE__*/_jsxDEV(Line, {\n                  type: \"monotone\",\n                  dataKey: \"facilityLimit\",\n                  stroke: \"#ff7300\",\n                  name: utils.string.t('products.aggregateLimits.aggregateLimitLabel')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 23\n                }, _this), ((_item$data2 = item.data) === null || _item$data2 === void 0 ? void 0 : _item$data2.length) > 10 ? /*#__PURE__*/_jsxDEV(Brush, {\n                  dataKey: \"label\",\n                  height: media.mobile ? 10 : 35,\n                  stroke: \"#7699bc\",\n                  x: 0,\n                  y: media.mobile ? 290 : 465,\n                  width: parseInt(width),\n                  endIndex: media.mobile ? parseInt(((_item$data3 = item.data) === null || _item$data3 === void 0 ? void 0 : _item$data3.length) / 4) : parseInt(((_item$data4 = item.data) === null || _item$data4 === void 0 ? void 0 : _item$data4.length) / 2),\n                  travellerWidth: 15,\n                  travellerContent: customTraveler\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 25\n                }, _this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, _this)]\n      }, \"\".concat(item.title, \"-\").concat(index), true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, _this);\n    })\n  }, void 0, false);\n}\n\n_s(QuoteBindLimitGraphView, \"vGDxx4tPOkWSYvXQU919dFskOW4=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useMedia];\n});\n\n_c = QuoteBindLimitGraphView;\nQuoteBindLimitGraphView.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"QuoteBindLimitGraphView\",\n  \"props\": {\n    \"facilityId\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\pages\\\\QuoteBindAggregate\\\\QuoteBindLimitGraph.view.js\"] = {\n    name: \"QuoteBindLimitGraphView\",\n    docgenInfo: QuoteBindLimitGraphView.__docgenInfo,\n    path: \"src\\\\pages\\\\QuoteBindAggregate\\\\QuoteBindLimitGraph.view.js\"\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"QuoteBindLimitGraphView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/QuoteBindAggregate/QuoteBindLimitGraph.view.js"],"names":["PropTypes","React","useEffect","useMemo","useState","useRef","Fragment","useDispatch","useSelector","Empty","utils","styles","Loader","Typography","Box","makeStyles","getAggregateLimitsGraph","selectFacilityAggregateLimits","selectIsLimitsLoading","ComposedChart","Line","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","Brush","useMedia","QuoteBindLimitGraphView","propTypes","facilityId","string","isRequired","dispatch","aggregateLimits","isLimitsLoading","media","parentRef","width","setWidth","classes","name","parsedAggregateLimits","graphData","length","forEach","item","valueLimits","risk","parsedGraphValues","push","title","label","data","current","offsetWidth","CustomTooltip","payload","boundQuotesLimit","facilityLimit","tootlTip","fontWeight","color","t","toLocaleString","customTraveler","x","y","height","fill","stroke","whiteSpace","map","index","titleDiv","contentWrapper","mobile","top","right","bottom","left","parameter","position","paddingTop","parseInt"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\r\nimport React, { useEffect, useMemo, useState, useRef, Fragment } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\n// app\r\nimport { Empty } from 'components';\r\nimport * as utils from 'utils';\r\nimport styles from './QuoteBindAggregate.styles';\r\n\r\n// app\r\nimport { Loader } from 'components';\r\n\r\n// mui\r\nimport { Typography, Box } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { getAggregateLimitsGraph, selectFacilityAggregateLimits, selectIsLimitsLoading } from 'stores';\r\nimport { ReactComponent as IconSearchFile } from '../../assets/svg/line-icon-search-file.svg';\r\n\r\nimport { ComposedChart, Line, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Brush } from 'recharts';\r\nimport { useMedia } from 'hooks';\r\n\r\nQuoteBindLimitGraphView.propTypes = {\r\n  facilityId: PropTypes.string.isRequired,\r\n};\r\n\r\nexport function QuoteBindLimitGraphView({ facilityId }) {\r\n  const dispatch = useDispatch();\r\n  const aggregateLimits = useSelector(selectFacilityAggregateLimits);\r\n  const isLimitsLoading = useSelector(selectIsLimitsLoading);\r\n  const media = useMedia();\r\n  const parentRef = useRef(null);\r\n  const [width, setWidth] = useState(1200);\r\n  const classes = makeStyles(styles, { name: 'QuoteBindAggregate' })({ media });\r\n\r\n  useEffect(() => {\r\n    dispatch(getAggregateLimitsGraph(facilityId));\r\n  }, [facilityId, dispatch]);\r\n\r\n  const parsedAggregateLimits = useMemo(() => {\r\n    let graphData = [];\r\n    if (aggregateLimits?.length > 0) {\r\n      aggregateLimits.forEach((item) => {\r\n        const valueLimits = utils.risk.parsedGraphValues(item?.valueLimits);\r\n        graphData.push({\r\n          title: item?.label,\r\n          data: valueLimits,\r\n        });\r\n      });\r\n\r\n      return graphData;\r\n    }\r\n    return [];\r\n  }, [aggregateLimits]);\r\n\r\n  useEffect(() => {\r\n    if (parentRef?.current?.offsetWidth) {\r\n      setWidth(parentRef?.current?.offsetWidth);\r\n    }\r\n  }, [parentRef]);\r\n\r\n  const CustomTooltip = ({ payload, label }) => {\r\n    const boundQuotesLimit = payload[0]?.payload?.boundQuotesLimit;\r\n    const aggregateLimits = payload[0]?.payload?.facilityLimit;\r\n\r\n    return (\r\n      <Box className={classes.tootlTip}>\r\n        <Typography style={{ fontWeight: 900 }} variant=\"caption\">\r\n          {label}\r\n        </Typography>\r\n        {boundQuotesLimit ? (\r\n          <Typography style={{ color: '#413ea0' }} variant=\"caption\">\r\n            {`${utils.string.t('products.aggregateLimits.bondAggregate')}: ${boundQuotesLimit.toLocaleString()}`}\r\n          </Typography>\r\n        ) : null}\r\n        {aggregateLimits ? (\r\n          <Typography style={{ color: '#ff7300' }} variant=\"caption\">\r\n            {`${utils.string.t('products.aggregateLimits.aggregateLimitLabel')}: ${aggregateLimits.toLocaleString()}`}\r\n          </Typography>\r\n        ) : null}\r\n      </Box>\r\n    );\r\n  };\r\n  const customTraveler = ({ x, y, width, height, fill, stroke }) => {\r\n    return (\r\n      <>\r\n        <rect x={x} y={y} width={width} height={height} fill={fill} stroke={stroke} />\r\n      </>\r\n    );\r\n  };\r\n\r\n  if (isLimitsLoading) {\r\n    return (\r\n      <Box height={300}>\r\n        <Loader visible absolute />\r\n      </Box>\r\n    );\r\n  }\r\n  if (!isLimitsLoading && aggregateLimits?.length === 0)\r\n    return (\r\n      <Fragment>\r\n        <Box style={{ whiteSpace: 'nowrap' }}>\r\n          <Empty title={utils.string.t('products.aggregateLimits.graphNotFound')} icon={<IconSearchFile />} padding />\r\n        </Box>\r\n      </Fragment>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      {parsedAggregateLimits.map((item, index) => {\r\n        return (\r\n          <Box key={`${item.title}-${index}`} justifyContent=\"center\">\r\n            <Box justifyContent=\"left\" className={classes.titleDiv}>\r\n              <Typography style={{ color: 'rgb(128, 128, 128)', fontWeight: 500 }} variant=\"h3\" testid=\"products-aggregate-limits-title\">\r\n                {`${item.title} ${utils.string.t('products.aggregateLimits.aggregateLimitTitle')}`}\r\n              </Typography>\r\n            </Box>\r\n            <Box display=\"flex\" className={classes.contentWrapper} ref={parentRef}>\r\n              {item.data?.length > 0 ? (\r\n                <>\r\n                  <ResponsiveContainer width=\"100%\" height={media.mobile ? 300 : 500}>\r\n                    <ComposedChart\r\n                      data={item.data}\r\n                      margin={{\r\n                        top: media.mobile ? 20 : 50,\r\n                        right: media.mobile ? 10 : 30,\r\n                        bottom: media.mobile ? 20 : 50,\r\n                        left: media.mobile ? 20 : 30,\r\n                      }}\r\n                    >\r\n                      <CartesianGrid stroke=\"#f5f5f5\" />\r\n                      <XAxis dataKey=\"label\" scale=\"band\" angle={-45} textAnchor=\"end\" interval={0} />\r\n\r\n                      <YAxis tickFormatter={(parameter) => parameter.toLocaleString()} />\r\n\r\n                      <Tooltip content={<CustomTooltip />} />\r\n\r\n                      <Legend\r\n                        wrapperStyle={{ position: 'sticky', paddingTop: media.mobile ? 0 : 15, width: '100%' }}\r\n                        align=\"center\"\r\n                        verticalAlign=\"bottom\"\r\n                      />\r\n\r\n                      <Bar\r\n                        dataKey=\"boundQuotesLimit\"\r\n                        barSize={50}\r\n                        fill=\"#413ea0\"\r\n                        name={utils.string.t('products.aggregateLimits.bondAggregate')}\r\n                      />\r\n                      <Line\r\n                        type=\"monotone\"\r\n                        dataKey=\"facilityLimit\"\r\n                        stroke=\"#ff7300\"\r\n                        name={utils.string.t('products.aggregateLimits.aggregateLimitLabel')}\r\n                      />\r\n\r\n                      {item.data?.length > 10 ? (\r\n                        <Brush\r\n                          dataKey=\"label\"\r\n                          height={media.mobile ? 10 : 35}\r\n                          stroke=\"#7699bc\"\r\n                          x={0}\r\n                          y={media.mobile ? 290 : 465}\r\n                          width={parseInt(width)}\r\n                          endIndex={media.mobile ? parseInt(item.data?.length / 4) : parseInt(item.data?.length / 2)}\r\n                          travellerWidth={15}\r\n                          travellerContent={customTraveler}\r\n                        />\r\n                      ) : null}\r\n                    </ComposedChart>\r\n                  </ResponsiveContainer>\r\n                </>\r\n              ) : null}\r\n            </Box>\r\n          </Box>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}