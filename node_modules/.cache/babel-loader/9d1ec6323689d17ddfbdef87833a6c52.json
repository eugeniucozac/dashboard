{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ProcessingInstructionsDetails\\\\ProcessingInstructionsDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport get from 'lodash/get';\nimport isNumber from 'lodash/isNumber'; // app\n\nimport ProcessingInstructionsDetailsView from './ProcessingInstructionsDetails.view';\nimport { selectUser, showModal, updateProcessingInstruction, removePremiumTaxSignedLinesDocument, storeRetainedBrokerageAmountForPdf, storeTotalAmountForPdf, addLoader, storeProcessingInstructionDocuments, viewDocumentsDownload, enqueueNotification, selectRefDataThirdPartyList } from 'stores';\nimport * as constants from 'consts';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nProcessingInstructionsDetails.propTypes = {\n  instruction: PropTypes.object.isRequired,\n  handlers: PropTypes.shape({\n    back: PropTypes.func.isRequired,\n    next: PropTypes.func.isRequired\n  }).isRequired,\n  childRef: PropTypes.object.isRequired\n};\nexport default function ProcessingInstructionsDetails(_ref) {\n  _s();\n\n  var _instruction$riskRefe, _instruction$details, _instruction$details2, _utils$processingInst, _utils$processingInst2, _utils$processingInst3, _utils$processingInst4, _utils$processingInst5, _utils$processingInst6, _utils$processingInst7, _utils$processingInst8, _utils$processingInst9, _utils$processingInst10, _utils$processingInst11, _utils$processingInst12, _utils$processingInst13, _utils$processingInst14, _utils$processingInst15, _utils$processingInst16, _utils$processingInst17, _utils$processingInst18, _utils$processingInst19, _utils$processingInst20, _utils$processingInst21, _utils$processingInst22, _utils$processingInst23, _utils$processingInst24, _utils$processingInst25, _utils$processingInst26, _utils$processingInst27, _utils$processingInst28, _utils$processingInst29, _utils$processingInst30, _validateWarrantyList, _validateWarrantyList2, _utils$processingInst31, _validateWarrantyList3, _validateWarrantyList4, _validateWarrantyList5, _utils$processingInst32, _utils$processingInst33, _utils$processingInst34, _instruction$details3, _childRef$current, _childRef$current$pro;\n\n  var instruction = _ref.instruction,\n      handlers = _ref.handlers,\n      childRef = _ref.childRef;\n  var dispatch = useDispatch();\n  var user = useSelector(selectUser);\n  var documents = useSelector(function (state) {\n    return get(state, 'processingInstructions.documents');\n  }) || {};\n  var refDataCurrencies = useSelector(function (state) {\n    return get(state, 'referenceData.currencyCodes');\n  }) || [];\n  var optionsDepartments = useSelector(function (state) {\n    return state.processingInstructions.departmentList;\n  }) || [];\n  var warrantyListOptions = useSelector(function (state) {\n    return get(state, 'referenceData.warrantyList');\n  }) || [];\n  var optionsThirdParty = useSelector(selectRefDataThirdPartyList) || [];\n  var isDraft = utils.processingInstructions.status.isDraft(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isRejectedDraft = utils.processingInstructions.status.isRejectedDraft(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isSubmittedAuthorisedSignatory = utils.processingInstructions.status.isSubmittedAuthorisedSignatory(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isReopened = utils.processingInstructions.status.isReopened(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var userHasWritePermission = utils.app.access.feature('processingInstructions.processingInstructions', ['create', 'update'], user);\n  var userHasApproverAccess = utils.app.access.feature('processingInstructions.approverChecklist', ['create', 'update'], user);\n  var isCheckboxesEditable = userHasApproverAccess && isSubmittedAuthorisedSignatory;\n  var isEditable = userHasWritePermission && (isDraft || isRejectedDraft || isReopened);\n  var isReadOnly = !isEditable;\n  var selectedRiskRef = instruction === null || instruction === void 0 ? void 0 : (_instruction$riskRefe = instruction.riskReferences) === null || _instruction$riskRefe === void 0 ? void 0 : _instruction$riskRefe.find(function (r) {\n    return r.leadPolicy;\n  });\n  var paymentBasisOptions = [{\n    id: '1',\n    code: 'cash',\n    name: 'Cash'\n  }, {\n    id: '2',\n    code: 'quaterly',\n    name: 'Quaterly'\n  }, {\n    id: '3',\n    code: 'otherDeferred',\n    name: 'Other Deferred'\n  }];\n  var toggleOptions = [{\n    label: utils.string.t('app.yes'),\n    value: 1\n  }, {\n    label: utils.string.t('app.no'),\n    value: 0\n  }, {\n    label: utils.string.t('app.na'),\n    value: -1\n  }];\n\n  var getToggleValue = function getToggleValue(value) {\n    return toggleOptions.map(function (o) {\n      return o.value;\n    }).includes(value) ? value : null;\n  };\n\n  var selectedThirdParty = function selectedThirdParty() {\n    var _instruction$financia, _instruction$financia2, _optionsThirdParty$fi;\n\n    var thirdvalue = utils.generic.isValidArray(instruction === null || instruction === void 0 ? void 0 : instruction.financialChecklist, true) ? (_instruction$financia = instruction.financialChecklist) === null || _instruction$financia === void 0 ? void 0 : (_instruction$financia2 = _instruction$financia.find(function (a) {\n      return a.name === 'thirdParty';\n    })) === null || _instruction$financia2 === void 0 ? void 0 : _instruction$financia2.stringValue : null;\n    return utils.generic.isValidArray(optionsThirdParty, true) && thirdvalue ? ((_optionsThirdParty$fi = optionsThirdParty.find(function (value) {\n      return (value === null || value === void 0 ? void 0 : value.partnerName) === thirdvalue;\n    })) === null || _optionsThirdParty$fi === void 0 ? void 0 : _optionsThirdParty$fi.id) || null : null;\n  };\n\n  var validateWarrantyListValue = function validateWarrantyListValue() {\n    var _instruction$financia3, _instruction$financia4;\n\n    var isFinancialListAvailable = utils.generic.isValidArray(instruction === null || instruction === void 0 ? void 0 : instruction.financialChecklist, true) ? (instruction === null || instruction === void 0 ? void 0 : (_instruction$financia3 = instruction.financialChecklist) === null || _instruction$financia3 === void 0 ? void 0 : (_instruction$financia4 = _instruction$financia3.find(function (a) {\n      return a.name === 'ppwOrPpc';\n    })) === null || _instruction$financia4 === void 0 ? void 0 : _instruction$financia4.stringValue) ? true : false : false;\n\n    if (!isFinancialListAvailable) {\n      var _selectedRiskRef$warr, _selectedRiskRef$warr2, _selectedRiskRef$warr3, _selectedRiskRef$warr4, _selectedRiskRef$warr5;\n\n      if ((selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr === void 0 ? void 0 : _selectedRiskRef$warr.isInvalidData) === 0 && utils.generic.isValidArray(selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr2 = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr2 === void 0 ? void 0 : _selectedRiskRef$warr2.warrantyList, true)) {\n        return selectedRiskRef.warrantyDetails.warrantyList.find(function (a) {\n          return a.isSelected;\n        }) || null;\n      } else if (((selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr3 = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr3 === void 0 ? void 0 : _selectedRiskRef$warr3.isInvalidData) === 0 || (selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr4 = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr4 === void 0 ? void 0 : _selectedRiskRef$warr4.isInvalidData) === 1) && !utils.generic.isValidArray(selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr5 = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr5 === void 0 ? void 0 : _selectedRiskRef$warr5.warrantyList, true)) {\n        var _selectedRiskRef$warr6;\n\n        return {\n          warrantyCode: 'na',\n          warrantyDate: null,\n          displayError: (selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr6 = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr6 === void 0 ? void 0 : _selectedRiskRef$warr6.isInvalidData) === 1\n        };\n      }\n    }\n\n    return null;\n  };\n\n  var fields = [{\n    name: 'highPriority',\n    type: 'checkbox',\n    value: instruction === null || instruction === void 0 ? void 0 : (_instruction$details = instruction.details) === null || _instruction$details === void 0 ? void 0 : _instruction$details.highPriority,\n    label: utils.string.t('processingInstructions.processingInstructionsForEndFaBorder.fields.highPriority'),\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'frontEndSendDocs',\n    type: 'checkbox',\n    value: instruction === null || instruction === void 0 ? void 0 : (_instruction$details2 = instruction.details) === null || _instruction$details2 === void 0 ? void 0 : _instruction$details2.frontEndSendDocs,\n    label: utils.string.t('processingInstructions.processingInstructionsForEndFaBorder.fields.frontEndSendDocuments'),\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'premiumTaxCalculationSheetAttachedNumber',\n    type: 'toggle',\n    value: getToggleValue((_utils$processingInst = utils.processingInstructions.getFinancialField(instruction, 'premiumTaxCalculationSheetAttached')) === null || _utils$processingInst === void 0 ? void 0 : _utils$processingInst.numberValue),\n    options: toggleOptions,\n    buttonGroupProps: {\n      exclusive: true,\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'premiumTaxCalculationSheetAttachedCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst2 = utils.processingInstructions.getFinancialField(instruction, 'premiumTaxCalculationSheetAttached')) === null || _utils$processingInst2 === void 0 ? void 0 : _utils$processingInst2.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'signedLinesCalculationSheetAttachedNumber',\n    type: 'toggle',\n    value: getToggleValue((_utils$processingInst3 = utils.processingInstructions.getFinancialField(instruction, 'signedLinesCalculationSheetAttached')) === null || _utils$processingInst3 === void 0 ? void 0 : _utils$processingInst3.numberValue),\n    options: toggleOptions,\n    buttonGroupProps: {\n      exclusive: true,\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'signedLinesCalculationSheetAttachedCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst4 = utils.processingInstructions.getFinancialField(instruction, 'signedLinesCalculationSheetAttached')) === null || _utils$processingInst4 === void 0 ? void 0 : _utils$processingInst4.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'grossPremiumAmountNumber',\n    type: 'number',\n    value: ((_utils$processingInst5 = utils.processingInstructions.getFinancialField(instruction, 'grossPremiumAmount')) === null || _utils$processingInst5 === void 0 ? void 0 : _utils$processingInst5.numberValue) || '',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'grossPremiumAmountCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst6 = utils.processingInstructions.getFinancialField(instruction, 'grossPremiumAmount')) === null || _utils$processingInst6 === void 0 ? void 0 : _utils$processingInst6.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'slipOrderNumber',\n    type: 'number',\n    value: ((_utils$processingInst7 = utils.processingInstructions.getFinancialField(instruction, 'slipOrder')) === null || _utils$processingInst7 === void 0 ? void 0 : _utils$processingInst7.numberValue) || '',\n    muiComponentProps: {\n      autoComplete: 'off',\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'slipOrderCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst8 = utils.processingInstructions.getFinancialField(instruction, 'slipOrder')) === null || _utils$processingInst8 === void 0 ? void 0 : _utils$processingInst8.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'totalBrokerageNumber',\n    type: 'number',\n    value: ((_utils$processingInst9 = utils.processingInstructions.getFinancialField(instruction, 'totalBrokerage')) === null || _utils$processingInst9 === void 0 ? void 0 : _utils$processingInst9.numberValue) || '',\n    muiComponentProps: {\n      autoComplete: 'off',\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'totalBrokerageCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst10 = utils.processingInstructions.getFinancialField(instruction, 'totalBrokerage')) === null || _utils$processingInst10 === void 0 ? void 0 : _utils$processingInst10.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'clientDiscountNumber',\n    type: 'number',\n    value: ((_utils$processingInst11 = utils.processingInstructions.getFinancialField(instruction, 'clientDiscount')) === null || _utils$processingInst11 === void 0 ? void 0 : _utils$processingInst11.numberValue) || '',\n    muiComponentProps: {\n      autoComplete: 'off',\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'clientDiscountCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst12 = utils.processingInstructions.getFinancialField(instruction, 'clientDiscount')) === null || _utils$processingInst12 === void 0 ? void 0 : _utils$processingInst12.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'thirdPartyNumber',\n    type: 'number',\n    value: ((_utils$processingInst13 = utils.processingInstructions.getFinancialField(instruction, 'thirdParty')) === null || _utils$processingInst13 === void 0 ? void 0 : _utils$processingInst13.numberValue) || '',\n    muiComponentProps: {\n      autoComplete: 'off',\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'thirdPartyString',\n    type: 'select',\n    value: selectedThirdParty() || ((_utils$processingInst14 = utils.processingInstructions.getFinancialField(instruction, 'thirdParty')) === null || _utils$processingInst14 === void 0 ? void 0 : _utils$processingInst14.stringValue) || '',\n    options: (optionsThirdParty === null || optionsThirdParty === void 0 ? void 0 : optionsThirdParty.map(function (option) {\n      return {\n        value: option === null || option === void 0 ? void 0 : option.id,\n        label: option === null || option === void 0 ? void 0 : option.partnerName\n      };\n    })) || [],\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'thirdPartyCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst15 = utils.processingInstructions.getFinancialField(instruction, 'thirdParty')) === null || _utils$processingInst15 === void 0 ? void 0 : _utils$processingInst15.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'pfinternalNumber',\n    type: 'number',\n    value: ((_utils$processingInst16 = utils.processingInstructions.getFinancialField(instruction, 'pfinternal')) === null || _utils$processingInst16 === void 0 ? void 0 : _utils$processingInst16.numberValue) || '',\n    muiComponentProps: {\n      autoComplete: 'off',\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'pfinternalString',\n    type: 'select',\n    value: ((_utils$processingInst17 = utils.processingInstructions.getFinancialField(instruction, 'pfinternal')) === null || _utils$processingInst17 === void 0 ? void 0 : _utils$processingInst17.stringValue) || '',\n    options: optionsDepartments,\n    optionKey: 'id',\n    optionLabel: 'deptName',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'pfinternalCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst18 = utils.processingInstructions.getFinancialField(instruction, 'pfinternal')) === null || _utils$processingInst18 === void 0 ? void 0 : _utils$processingInst18.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'retainedBrokerageNumber',\n    type: 'number',\n    value: ((_utils$processingInst19 = utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerage')) === null || _utils$processingInst19 === void 0 ? void 0 : _utils$processingInst19.numberValue) || '',\n    muiComponentProps: {\n      autoComplete: 'off',\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'retainedBrokerageCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst20 = utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerage')) === null || _utils$processingInst20 === void 0 ? void 0 : _utils$processingInst20.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'retainedBrokerageCurrencyCodeString',\n    value: ((_utils$processingInst21 = utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerageCurrencyCode')) === null || _utils$processingInst21 === void 0 ? void 0 : _utils$processingInst21.stringValue) || constants.CURRENCY_USD,\n    optionsKey: 'premiumCurrency',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'retainedBrokerageCurrencyCodeCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst22 = utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerageCurrencyCode')) === null || _utils$processingInst22 === void 0 ? void 0 : _utils$processingInst22.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'feesNumber',\n    type: 'number',\n    value: ((_utils$processingInst23 = utils.processingInstructions.getFinancialField(instruction, 'fees')) === null || _utils$processingInst23 === void 0 ? void 0 : _utils$processingInst23.numberValue) || '',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'feesCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst24 = utils.processingInstructions.getFinancialField(instruction, 'fees')) === null || _utils$processingInst24 === void 0 ? void 0 : _utils$processingInst24.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'otherDeductionsNumber',\n    type: 'number',\n    value: ((_utils$processingInst25 = utils.processingInstructions.getFinancialField(instruction, 'otherDeductions')) === null || _utils$processingInst25 === void 0 ? void 0 : _utils$processingInst25.numberValue) || '',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'otherDeductionsCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst26 = utils.processingInstructions.getFinancialField(instruction, 'otherDeductions')) === null || _utils$processingInst26 === void 0 ? void 0 : _utils$processingInst26.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'settlementCurrencyCodeIdNumber',\n    type: 'select',\n    value: ((_utils$processingInst27 = utils.processingInstructions.getFinancialField(instruction, 'settlementCurrencyCodeId')) === null || _utils$processingInst27 === void 0 ? void 0 : _utils$processingInst27.numberValue) || '',\n    options: refDataCurrencies,\n    optionKey: 'currencyCodeID',\n    optionLabel: 'currencyCd',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'settlementCurrencyCodeIdCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst28 = utils.processingInstructions.getFinancialField(instruction, 'settlementCurrencyCodeId')) === null || _utils$processingInst28 === void 0 ? void 0 : _utils$processingInst28.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'paymentBasisNumber',\n    type: 'select',\n    value: ((_utils$processingInst29 = utils.processingInstructions.getFinancialField(instruction, 'paymentBasis')) === null || _utils$processingInst29 === void 0 ? void 0 : _utils$processingInst29.numberValue) || '',\n    options: paymentBasisOptions,\n    optionKey: 'id',\n    optionLabel: 'name',\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'paymentBasisCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst30 = utils.processingInstructions.getFinancialField(instruction, 'paymentBasis')) === null || _utils$processingInst30 === void 0 ? void 0 : _utils$processingInst30.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'ppwOrPpcString',\n    type: 'select',\n    value: ((_validateWarrantyList = validateWarrantyListValue()) === null || _validateWarrantyList === void 0 ? void 0 : (_validateWarrantyList2 = _validateWarrantyList.warrantyCode) === null || _validateWarrantyList2 === void 0 ? void 0 : _validateWarrantyList2.toLowerCase()) || ((_utils$processingInst31 = utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')) === null || _utils$processingInst31 === void 0 ? void 0 : _utils$processingInst31.stringValue) || '',\n    options: warrantyListOptions,\n    optionKey: 'code',\n    optionLabel: 'description',\n    displayError: ((_validateWarrantyList3 = validateWarrantyListValue()) === null || _validateWarrantyList3 === void 0 ? void 0 : _validateWarrantyList3.displayError) || false,\n    muiComponentProps: {\n      disabled: isReadOnly\n    }\n  }, {\n    name: 'ppwOrPpcDate',\n    type: 'datepicker',\n    value: ((_validateWarrantyList4 = validateWarrantyListValue()) === null || _validateWarrantyList4 === void 0 ? void 0 : _validateWarrantyList4.warrantyDate) ? moment((_validateWarrantyList5 = validateWarrantyListValue()) === null || _validateWarrantyList5 === void 0 ? void 0 : _validateWarrantyList5.warrantyDate) : null || ((_utils$processingInst32 = utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')) === null || _utils$processingInst32 === void 0 ? void 0 : _utils$processingInst32.dateValue) ? moment((_utils$processingInst33 = utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')) === null || _utils$processingInst33 === void 0 ? void 0 : _utils$processingInst33.dateValue) : null,\n    outputFormat: 'iso',\n    placeholder: utils.string.t('app.selectDate'),\n    muiComponentProps: {\n      disabled: isReadOnly\n    },\n    muiPickerProps: {\n      format: config.ui.format.date.text,\n      clearable: true\n    }\n  }, {\n    name: 'ppwOrPpcCheckbox',\n    type: 'checkbox',\n    value: (_utils$processingInst34 = utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')) === null || _utils$processingInst34 === void 0 ? void 0 : _utils$processingInst34.approvedByAuthorisedSignatory,\n    disabled: !isCheckboxesEditable\n  }, {\n    name: 'notes',\n    label: utils.string.t('processingInstructions.details.notes'),\n    type: 'textarea',\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details3 = instruction.details) === null || _instruction$details3 === void 0 ? void 0 : _instruction$details3.notes) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 4000\n      },\n      multiline: true,\n      minRows: 4,\n      maxRows: 8,\n      disabled: isReadOnly\n    }\n  }];\n  var retainedBrokerageCurrencyCodeField = utils.form.getFieldProps(fields, 'retainedBrokerageCurrencyCodeString');\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      defaultValues = _useState2[0],\n      setDefaultValues = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      retainedBrokerageAmount = _useState4[0],\n      setRetainedBrokerageAmount = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      convertedBrokerage = _useState6[0],\n      setConvertedBrokerage = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      totalAmount = _useState8[0],\n      setTotalAmount = _useState8[1];\n\n  var _useState9 = useState({\n    premiumTaxDocument: false,\n    signedLinesDocument: false\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      documentNotUploadedError = _useState10[0],\n      setDocumentNotUploadedError = _useState10[1];\n\n  var formValues = childRef === null || childRef === void 0 ? void 0 : (_childRef$current = childRef.current) === null || _childRef$current === void 0 ? void 0 : (_childRef$current$pro = _childRef$current.props) === null || _childRef$current$pro === void 0 ? void 0 : _childRef$current$pro.values;\n  var retainedBrokerageCurrencyCode = (formValues === null || formValues === void 0 ? void 0 : formValues.retainedBrokerageCurrencyCodeString) || (retainedBrokerageCurrencyCodeField === null || retainedBrokerageCurrencyCodeField === void 0 ? void 0 : retainedBrokerageCurrencyCodeField.defaultValue) || (retainedBrokerageCurrencyCodeField === null || retainedBrokerageCurrencyCodeField === void 0 ? void 0 : retainedBrokerageCurrencyCodeField.value);\n\n  var getRetainedBrokerageAmount = function getRetainedBrokerageAmount(_ref2) {\n    var grossPremiumAmount = _ref2.grossPremiumAmount,\n        slipOrder = _ref2.slipOrder,\n        retainedBrokerage = _ref2.retainedBrokerage,\n        retainedBrokerageCurrencyCode = _ref2.retainedBrokerageCurrencyCode,\n        retainedBrokerageAmount = _ref2.retainedBrokerageAmount;\n    var amount = utils.processingInstructions.getRetainedBrokerageValue(grossPremiumAmount, slipOrder, retainedBrokerage);\n    var brokerage = utils.processingInstructions.getRetainedBrokerageConvertedValue(retainedBrokerageCurrencyCode, retainedBrokerageAmount);\n    setRetainedBrokerageAmount(amount);\n    setConvertedBrokerage(brokerage);\n    dispatch(storeRetainedBrokerageAmountForPdf({\n      retBrokerageAmt: amount,\n      convertedBrokerageAmt: brokerage\n    }));\n  };\n\n  var getTotalAmount = function getTotalAmount(_ref3) {\n    var clientDiscount = _ref3.clientDiscount,\n        thirdPartyCommissionSharing = _ref3.thirdPartyCommissionSharing,\n        pfinternalCommissionSharing = _ref3.pfinternalCommissionSharing,\n        retainedBrokerage = _ref3.retainedBrokerage;\n\n    if (clientDiscount && thirdPartyCommissionSharing && pfinternalCommissionSharing && retainedBrokerage) {\n      var sumValuesArray = [clientDiscount, thirdPartyCommissionSharing, pfinternalCommissionSharing, retainedBrokerage];\n      setTotalAmount(utils.generic.getSumOfArray(sumValuesArray, config.ui.format.percent.decimal));\n      dispatch(storeTotalAmountForPdf(utils.generic.getSumOfArray(sumValuesArray, config.ui.format.percent.decimal)));\n    } else {\n      setTotalAmount('');\n    }\n  };\n\n  var checkPremiumTaxDocumentAndSignedLinesDocument = function checkPremiumTaxDocumentAndSignedLinesDocument() {\n    var _childRef$current2, _childRef$current2$pr;\n\n    var formValues = (childRef === null || childRef === void 0 ? void 0 : (_childRef$current2 = childRef.current) === null || _childRef$current2 === void 0 ? void 0 : (_childRef$current2$pr = _childRef$current2.props) === null || _childRef$current2$pr === void 0 ? void 0 : _childRef$current2$pr.values) || {};\n\n    if (formValues.premiumTaxCalculationSheetAttachedNumber === 1 && !documents.premiumTaxDocument || formValues.signedLinesCalculationSheetAttachedNumber === 1 && !documents.signedLinesDocument) {\n      dispatch(enqueueNotification(utils.string.t('processingInstructions.details.noDocumentUploaded', {\n        documentType: formValues.premiumTaxCalculationSheetAttachedNumber === 1 && !documents.premiumTaxDocument && formValues.signedLinesCalculationSheetAttachedNumber === 1 && !documents.signedLinesDocument && utils.string.t('processingInstructions.details.premiumTaxCalculationSheetAttachedAndSignedLinesCalculationAttached') || formValues.premiumTaxCalculationSheetAttachedNumber === 1 && !documents.premiumTaxDocument && utils.string.t('processingInstructions.details.premiumTaxCalculationSheetAttached') || formValues.signedLinesCalculationSheetAttachedNumber === 1 && !documents.signedLinesDocument && utils.string.t('processingInstructions.details.signedLinesCalculationAttached')\n      }), 'warning'));\n      setDocumentNotUploadedError({\n        premiumTaxDocument: formValues.premiumTaxCalculationSheetAttachedNumber === 1 && !documents.premiumTaxDocumen,\n        signedLinesDocument: formValues.signedLinesCalculationSheetAttachedNumber === 1 && !documents.signedLinesDocument\n      });\n      return true;\n    }\n\n    setDocumentNotUploadedError({\n      premiumTaxDocument: false,\n      signedLinesDocument: false\n    });\n    return false;\n  };\n\n  var handleNext = function handleNext() {\n    if (checkPremiumTaxDocumentAndSignedLinesDocument()) {\n      return;\n    }\n\n    handlers.next();\n  };\n\n  var handleSave = function handleSave(type) {\n    var _childRef$current3, _childRef$current3$pr, _selectedRiskRef$warr7, _warrantyListOptions$;\n\n    if (type === constants.SAVE_NEXT && checkPremiumTaxDocumentAndSignedLinesDocument()) {\n      return;\n    }\n\n    setDocumentNotUploadedError({\n      premiumTaxDocument: false,\n      signedLinesDocument: false\n    });\n    var formValues = (childRef === null || childRef === void 0 ? void 0 : (_childRef$current3 = childRef.current) === null || _childRef$current3 === void 0 ? void 0 : (_childRef$current3$pr = _childRef$current3.props) === null || _childRef$current3$pr === void 0 ? void 0 : _childRef$current3$pr.values) || {};\n    var financialChecklistBlank = [{\n      name: 'signedLinesCalculationSheetAttached',\n      types: ['Number']\n    }, {\n      name: 'premiumTaxCalculationSheetAttached',\n      types: ['Number']\n    }, {\n      name: 'grossPremiumAmount',\n      types: ['Number']\n    }, {\n      name: 'slipOrder',\n      types: ['Number']\n    }, {\n      name: 'totalBrokerage',\n      types: ['Number']\n    }, {\n      name: 'fees',\n      types: ['Number']\n    }, {\n      name: 'otherDeductions',\n      types: ['Number']\n    }, {\n      name: 'settlementCurrencyCodeId',\n      types: ['Number']\n    }, {\n      name: 'paymentBasis',\n      types: ['Number']\n    }, {\n      name: 'ppwOrPpc',\n      types: ['String', 'Date']\n    }, {\n      name: 'clientDiscount',\n      types: ['Number']\n    }, {\n      name: 'thirdParty',\n      types: ['Number', 'String']\n    }, {\n      name: 'pfinternal',\n      types: ['Number', 'String']\n    }, {\n      name: 'retainedBrokerage',\n      types: ['Number']\n    }, {\n      name: 'retainedBrokerageCurrencyCode',\n      types: ['String']\n    }];\n    var defaultWarrantyDetails = utils.generic.isValidArray(selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : (_selectedRiskRef$warr7 = selectedRiskRef.warrantyDetails) === null || _selectedRiskRef$warr7 === void 0 ? void 0 : _selectedRiskRef$warr7.warrantyList, true) ? isNumber(formValues['ppwOrPpcString']) ? selectedRiskRef.warrantyDetails.warrantyList.find(function (a) {\n      return a.warrantyTypeId === formValues['ppwOrPpcString'];\n    }) : selectedRiskRef.warrantyDetails.warrantyList.find(function (a) {\n      var _a$warrantyCode, _formValues$ppwOrPpcS;\n\n      return ((_a$warrantyCode = a.warrantyCode) === null || _a$warrantyCode === void 0 ? void 0 : _a$warrantyCode.toLowerCase()) === ((_formValues$ppwOrPpcS = formValues['ppwOrPpcString']) === null || _formValues$ppwOrPpcS === void 0 ? void 0 : _formValues$ppwOrPpcS.toLowerCase());\n    }) : null;\n\n    var updatedInstruction = _objectSpread(_objectSpread({}, instruction), {}, {\n      details: _objectSpread(_objectSpread({}, instruction.details), {}, {\n        highPriority: formValues.highPriority,\n        frontEndSendDocs: formValues.frontEndSendDocs,\n        notes: formValues.notes,\n        retainedBrokerageCurrencyCode: retainedBrokerageCurrencyCode,\n        warrantyDescription: (defaultWarrantyDetails === null || defaultWarrantyDetails === void 0 ? void 0 : defaultWarrantyDetails.warrantyDescription) || '',\n        warrantyTypeId: (defaultWarrantyDetails === null || defaultWarrantyDetails === void 0 ? void 0 : defaultWarrantyDetails.warrantyTypeId) || '',\n        warrantyDate: (defaultWarrantyDetails === null || defaultWarrantyDetails === void 0 ? void 0 : defaultWarrantyDetails.warrantyDate) || '',\n        warrantyCode: isNumber(formValues['ppwOrPpcString']) ? ((_warrantyListOptions$ = warrantyListOptions.find(function (a) {\n          return a.warrantyTypeID === formValues['ppwOrPpcString'];\n        })) === null || _warrantyListOptions$ === void 0 ? void 0 : _warrantyListOptions$.code) || null : formValues['ppwOrPpcString']\n      }),\n      financialChecklist: financialChecklistBlank.map(function (_ref4) {\n        var name = _ref4.name,\n            types = _ref4.types;\n        return types.reduce(function (acc, type) {\n          var _objectSpread2;\n\n          var valueKey = \"\".concat(name).concat(type);\n          var isWarrantyType = valueKey === 'ppwOrPpcString';\n          var warrantyType = isWarrantyType ? formValues['ppwOrPpcString'] : '';\n          var isThirdPartyString = valueKey === 'thirdPartyString';\n          var thirdPartyNumberValue = formValues['thirdPartyNumber'];\n          var thirdPartyStringValue = Boolean(thirdPartyNumberValue) && formValues[valueKey] ? optionsThirdParty === null || optionsThirdParty === void 0 ? void 0 : optionsThirdParty.find(function (val) {\n            return val.id === formValues[valueKey];\n          }) : null || {};\n          var isPfInternalString = valueKey === 'pfinternalString';\n          var pfInternalNumberValue = formValues['pfinternalNumber'];\n          var pfInternalStringValue = Boolean(pfInternalNumberValue) ? formValues[valueKey] : '';\n          var value = isWarrantyType ? warrantyType : isThirdPartyString ? thirdPartyStringValue === null || thirdPartyStringValue === void 0 ? void 0 : thirdPartyStringValue.partnerName : isPfInternalString ? pfInternalStringValue : formValues[valueKey];\n          var isDate = type === 'Date';\n          var isValidDate = isDate && moment(value).isValid();\n          return _objectSpread(_objectSpread({}, acc), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, \"\".concat(type.toLowerCase(), \"Value\"), isDate ? isValidDate ? moment(value).format('YYYY-MM-DD') : '' : value), _defineProperty(_objectSpread2, \"approvedByAuthorisedSignatory\", formValues[\"\".concat(name, \"Checkbox\")]), _objectSpread2));\n        }, {\n          name: name\n        });\n      })\n    });\n\n    dispatch(updateProcessingInstruction(updatedInstruction, formValues)).then(function (response) {\n      if ((response === null || response === void 0 ? void 0 : response.status) === constants.API_RESPONSE_OK) {\n        if (type === 'saveNext') {\n          handlers.next();\n        }\n      }\n    });\n  };\n\n  var handleCancel = function handleCancel() {\n    var _childRef$current4, _childRef$current4$pr;\n\n    var reset = childRef === null || childRef === void 0 ? void 0 : (_childRef$current4 = childRef.current) === null || _childRef$current4 === void 0 ? void 0 : (_childRef$current4$pr = _childRef$current4.props) === null || _childRef$current4$pr === void 0 ? void 0 : _childRef$current4$pr.resetFunc;\n\n    if (utils.generic.isFunction(reset)) {\n      reset(defaultValues, {\n        keepDirty: false\n      });\n    }\n\n    setDocumentNotUploadedError({\n      premiumTaxDocument: false,\n      signedLinesDocument: false\n    });\n  };\n\n  useEffect(function () {\n    var _childRef$current5, _childRef$current5$pr;\n\n    var reset = childRef === null || childRef === void 0 ? void 0 : (_childRef$current5 = childRef.current) === null || _childRef$current5 === void 0 ? void 0 : (_childRef$current5$pr = _childRef$current5.props) === null || _childRef$current5$pr === void 0 ? void 0 : _childRef$current5$pr.resetFunc;\n\n    var updatedDefaultValues = _objectSpread({}, utils.form.getInitialValues(fields));\n\n    setDefaultValues(updatedDefaultValues);\n\n    if (utils.generic.isFunction(reset)) {\n      reset(updatedDefaultValues, {\n        keepDirty: false\n      });\n    }\n  }, [instruction] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var handleUploadedDocument = function handleUploadedDocument(data, documentTypeKey) {\n    var _data$data;\n\n    var newFiles = data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.documentDto;\n    if (!utils.generic.isValidArray(newFiles)) return;\n    var newGxbDocs = newFiles.map(function (file) {\n      return _objectSpread(_objectSpread({}, file), {}, {\n        folderUuid: file === null || file === void 0 ? void 0 : file.folderUid,\n        name: file === null || file === void 0 ? void 0 : file.documentName,\n        path: file === null || file === void 0 ? void 0 : file.documentPath,\n        source: file === null || file === void 0 ? void 0 : file.documentSource,\n        typeId: file === null || file === void 0 ? void 0 : file.documentTypeId,\n        uuid: file === null || file === void 0 ? void 0 : file.documentUid\n      });\n    });\n\n    var updatedDocuments = _objectSpread(_objectSpread(_objectSpread({}, documents), documentTypeKey === constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.piPremiumCalculation && {\n      premiumTaxDocument: newGxbDocs[0]\n    }), documentTypeKey === constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.piMarketSigned && {\n      signedLinesDocument: newGxbDocs[0]\n    });\n\n    dispatch(storeProcessingInstructionDocuments(updatedDocuments));\n  };\n\n  var uploadPremiumTaxSignedLinesModal = function uploadPremiumTaxSignedLinesModal(documentTypeKey) {\n    return function (files) {\n      dispatch(addLoader('DmsUploadFiles'));\n      dispatch(showModal({\n        component: 'DMS_UPLOAD_FILES',\n        props: {\n          fullWidth: true,\n          title: utils.string.t('dms.upload.modalItems.uploadDocuments'),\n          maxWidth: 'xl',\n          componentProps: {\n            files: files,\n            context: constants.DMS_CONTEXT_PROCESSING_INSTRUCTION,\n            referenceId: Number(instruction === null || instruction === void 0 ? void 0 : instruction.id),\n            sourceId: Number(selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : selectedRiskRef.xbInstanceId),\n            documentTypeKey: documentTypeKey,\n            postDmsDocumentsSuccess: function postDmsDocumentsSuccess(data) {\n              return handleUploadedDocument(data, documentTypeKey);\n            },\n            confirmLabel: utils.string.t('app.ok'),\n            cancelLabel: utils.string.t('app.goBack'),\n            confirmMessage: utils.string.t('processingInstructions.documentsWillNotBeSaved'),\n            buttonColors: {\n              confirm: 'secondary',\n              cancel: 'primary'\n            }\n          }\n        }\n      }));\n    };\n  };\n\n  var confirmRemoveDocumentModal = function confirmRemoveDocumentModal(file, removeDocumentType) {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('processingInstructions.checklist.warning.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('app.yes'),\n          cancelLabel: utils.string.t('app.no'),\n          confirmMessage: utils.string.t('processingInstructions.removeDocumentWarning'),\n          buttonColors: {\n            confirm: 'secondary',\n            cancel: 'primary'\n          },\n          submitHandler: function submitHandler() {\n            dispatch(removePremiumTaxSignedLinesDocument({\n              docIds: file === null || file === void 0 ? void 0 : file.documentId,\n              removeDocumentType: removeDocumentType,\n              documents: documents\n            }));\n          },\n          cancelHandler: function cancelHandler() {},\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  };\n\n  var handleLinkDownload = function handleLinkDownload(file) {\n    dispatch(viewDocumentsDownload({\n      documentId: file === null || file === void 0 ? void 0 : file.documentId,\n      documentName: file === null || file === void 0 ? void 0 : file.name\n    }));\n  }; // abort if data is not ready/available\n\n\n  if (!defaultValues || !instruction) return null;\n  return /*#__PURE__*/_jsxDEV(ProcessingInstructionsDetailsView, {\n    instructionId: instruction === null || instruction === void 0 ? void 0 : instruction.id,\n    documents: documents,\n    fields: fields,\n    defaultValues: defaultValues,\n    retainedBrokerageAmount: retainedBrokerageAmount,\n    convertedBrokerage: convertedBrokerage,\n    premiumCurrency: retainedBrokerageCurrencyCode,\n    sumTotal: totalAmount,\n    riskRefId: selectedRiskRef === null || selectedRiskRef === void 0 ? void 0 : selectedRiskRef.riskRefId,\n    isEditable: isEditable,\n    isReadOnly: isReadOnly,\n    documentNotUploadedError: documentNotUploadedError,\n    handlers: _objectSpread(_objectSpread({}, handlers), {}, {\n      next: handleNext,\n      save: handleSave,\n      cancel: handleCancel,\n      getRetainedBrokerageAmount: getRetainedBrokerageAmount,\n      getTotalAmount: getTotalAmount,\n      uploadPremiumTaxSignedLinesModal: uploadPremiumTaxSignedLinesModal,\n      confirmRemoveDocumentModal: confirmRemoveDocumentModal,\n      download: handleLinkDownload\n    }),\n    ref: childRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 721,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProcessingInstructionsDetails, \"d5eJraVu97n3xM65g1huLA0FrS8=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ProcessingInstructionsDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProcessingInstructionsDetails\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ProcessingInstructionsDetails/ProcessingInstructionsDetails.js"],"names":["React","useState","useEffect","PropTypes","useDispatch","useSelector","moment","get","isNumber","ProcessingInstructionsDetailsView","selectUser","showModal","updateProcessingInstruction","removePremiumTaxSignedLinesDocument","storeRetainedBrokerageAmountForPdf","storeTotalAmountForPdf","addLoader","storeProcessingInstructionDocuments","viewDocumentsDownload","enqueueNotification","selectRefDataThirdPartyList","constants","utils","config","ProcessingInstructionsDetails","propTypes","instruction","object","isRequired","handlers","shape","back","func","next","childRef","dispatch","user","documents","state","refDataCurrencies","optionsDepartments","processingInstructions","departmentList","warrantyListOptions","optionsThirdParty","isDraft","status","statusId","isRejectedDraft","isSubmittedAuthorisedSignatory","isReopened","userHasWritePermission","app","access","feature","userHasApproverAccess","isCheckboxesEditable","isEditable","isReadOnly","selectedRiskRef","riskReferences","find","r","leadPolicy","paymentBasisOptions","id","code","name","toggleOptions","label","string","t","value","getToggleValue","map","o","includes","selectedThirdParty","thirdvalue","generic","isValidArray","financialChecklist","a","stringValue","partnerName","validateWarrantyListValue","isFinancialListAvailable","warrantyDetails","isInvalidData","warrantyList","isSelected","warrantyCode","warrantyDate","displayError","fields","type","details","highPriority","muiComponentProps","disabled","frontEndSendDocs","getFinancialField","numberValue","options","buttonGroupProps","exclusive","approvedByAuthorisedSignatory","autoComplete","option","optionKey","optionLabel","CURRENCY_USD","optionsKey","toLowerCase","dateValue","outputFormat","placeholder","muiPickerProps","format","ui","date","text","clearable","notes","inputProps","maxLength","multiline","minRows","maxRows","retainedBrokerageCurrencyCodeField","form","getFieldProps","defaultValues","setDefaultValues","retainedBrokerageAmount","setRetainedBrokerageAmount","convertedBrokerage","setConvertedBrokerage","totalAmount","setTotalAmount","premiumTaxDocument","signedLinesDocument","documentNotUploadedError","setDocumentNotUploadedError","formValues","current","props","values","retainedBrokerageCurrencyCode","retainedBrokerageCurrencyCodeString","defaultValue","getRetainedBrokerageAmount","grossPremiumAmount","slipOrder","retainedBrokerage","amount","getRetainedBrokerageValue","brokerage","getRetainedBrokerageConvertedValue","retBrokerageAmt","convertedBrokerageAmt","getTotalAmount","clientDiscount","thirdPartyCommissionSharing","pfinternalCommissionSharing","sumValuesArray","getSumOfArray","percent","decimal","checkPremiumTaxDocumentAndSignedLinesDocument","premiumTaxCalculationSheetAttachedNumber","signedLinesCalculationSheetAttachedNumber","documentType","premiumTaxDocumen","handleNext","handleSave","SAVE_NEXT","financialChecklistBlank","types","defaultWarrantyDetails","warrantyTypeId","updatedInstruction","warrantyDescription","warrantyTypeID","reduce","acc","valueKey","isWarrantyType","warrantyType","isThirdPartyString","thirdPartyNumberValue","thirdPartyStringValue","Boolean","val","isPfInternalString","pfInternalNumberValue","pfInternalStringValue","isDate","isValidDate","isValid","then","response","API_RESPONSE_OK","handleCancel","reset","resetFunc","isFunction","keepDirty","updatedDefaultValues","getInitialValues","handleUploadedDocument","data","documentTypeKey","newFiles","documentDto","newGxbDocs","file","folderUuid","folderUid","documentName","path","documentPath","source","documentSource","typeId","documentTypeId","uuid","documentUid","updatedDocuments","DMS_DOCUMENT_TYPE_SECTION_KEYS","piPremiumCalculation","piMarketSigned","uploadPremiumTaxSignedLinesModal","files","component","fullWidth","title","maxWidth","componentProps","context","DMS_CONTEXT_PROCESSING_INSTRUCTION","referenceId","Number","sourceId","xbInstanceId","postDmsDocumentsSuccess","confirmLabel","cancelLabel","confirmMessage","buttonColors","confirm","cancel","confirmRemoveDocumentModal","removeDocumentType","submitHandler","docIds","documentId","cancelHandler","handleClose","handleLinkDownload","riskRefId","save","download"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,YAAhB;AACA,OAAOC,QAAP,MAAqB,iBAArB,C,CAEA;;AACA,OAAOC,iCAAP,MAA8C,sCAA9C;AACA,SACEC,UADF,EAEEC,SAFF,EAGEC,2BAHF,EAIEC,mCAJF,EAKEC,kCALF,EAMEC,sBANF,EAOEC,SAPF,EAQEC,mCARF,EASEC,qBATF,EAUEC,mBAVF,EAWEC,2BAXF,QAYO,QAZP;AAaA,OAAO,KAAKC,SAAZ,MAA2B,QAA3B;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEAC,6BAA6B,CAACC,SAA9B,GAA0C;AACxCC,EAAAA,WAAW,EAAEvB,SAAS,CAACwB,MAAV,CAAiBC,UADU;AAExCC,EAAAA,QAAQ,EAAE1B,SAAS,CAAC2B,KAAV,CAAgB;AACxBC,IAAAA,IAAI,EAAE5B,SAAS,CAAC6B,IAAV,CAAeJ,UADG;AAExBK,IAAAA,IAAI,EAAE9B,SAAS,CAAC6B,IAAV,CAAeJ;AAFG,GAAhB,EAGPA,UALqC;AAMxCM,EAAAA,QAAQ,EAAE/B,SAAS,CAACwB,MAAV,CAAiBC;AANa,CAA1C;AASA,eAAe,SAASJ,6BAAT,OAA4E;AAAA;;AAAA;;AAAA,MAAnCE,WAAmC,QAAnCA,WAAmC;AAAA,MAAtBG,QAAsB,QAAtBA,QAAsB;AAAA,MAAZK,QAAY,QAAZA,QAAY;AACzF,MAAMC,QAAQ,GAAG/B,WAAW,EAA5B;AACA,MAAMgC,IAAI,GAAG/B,WAAW,CAACK,UAAD,CAAxB;AACA,MAAM2B,SAAS,GAAGhC,WAAW,CAAC,UAACiC,KAAD;AAAA,WAAW/B,GAAG,CAAC+B,KAAD,EAAQ,kCAAR,CAAd;AAAA,GAAD,CAAX,IAA0E,EAA5F;AACA,MAAMC,iBAAiB,GAAGlC,WAAW,CAAC,UAACiC,KAAD;AAAA,WAAW/B,GAAG,CAAC+B,KAAD,EAAQ,6BAAR,CAAd;AAAA,GAAD,CAAX,IAAqE,EAA/F;AACA,MAAME,kBAAkB,GAAGnC,WAAW,CAAC,UAACiC,KAAD;AAAA,WAAWA,KAAK,CAACG,sBAAN,CAA6BC,cAAxC;AAAA,GAAD,CAAX,IAAuE,EAAlG;AACA,MAAMC,mBAAmB,GAAGtC,WAAW,CAAC,UAACiC,KAAD;AAAA,WAAW/B,GAAG,CAAC+B,KAAD,EAAQ,4BAAR,CAAd;AAAA,GAAD,CAAX,IAAoE,EAAhG;AACA,MAAMM,iBAAiB,GAAGvC,WAAW,CAACe,2BAAD,CAAX,IAA4C,EAAtE;AACA,MAAMyB,OAAO,GAAGvB,KAAK,CAACmB,sBAAN,CAA6BK,MAA7B,CAAoCD,OAApC,CAA4CnB,WAA5C,aAA4CA,WAA5C,uBAA4CA,WAAW,CAAEqB,QAAzD,CAAhB;AACA,MAAMC,eAAe,GAAG1B,KAAK,CAACmB,sBAAN,CAA6BK,MAA7B,CAAoCE,eAApC,CAAoDtB,WAApD,aAAoDA,WAApD,uBAAoDA,WAAW,CAAEqB,QAAjE,CAAxB;AACA,MAAME,8BAA8B,GAAG3B,KAAK,CAACmB,sBAAN,CAA6BK,MAA7B,CAAoCG,8BAApC,CAAmEvB,WAAnE,aAAmEA,WAAnE,uBAAmEA,WAAW,CAAEqB,QAAhF,CAAvC;AACA,MAAMG,UAAU,GAAG5B,KAAK,CAACmB,sBAAN,CAA6BK,MAA7B,CAAoCI,UAApC,CAA+CxB,WAA/C,aAA+CA,WAA/C,uBAA+CA,WAAW,CAAEqB,QAA5D,CAAnB;AACA,MAAMI,sBAAsB,GAAG7B,KAAK,CAAC8B,GAAN,CAAUC,MAAV,CAAiBC,OAAjB,CAAyB,+CAAzB,EAA0E,CAAC,QAAD,EAAW,QAAX,CAA1E,EAAgGlB,IAAhG,CAA/B;AACA,MAAMmB,qBAAqB,GAAGjC,KAAK,CAAC8B,GAAN,CAAUC,MAAV,CAAiBC,OAAjB,CAAyB,0CAAzB,EAAqE,CAAC,QAAD,EAAW,QAAX,CAArE,EAA2FlB,IAA3F,CAA9B;AACA,MAAMoB,oBAAoB,GAAGD,qBAAqB,IAAIN,8BAAtD;AAEA,MAAMQ,UAAU,GAAGN,sBAAsB,KAAKN,OAAO,IAAIG,eAAX,IAA8BE,UAAnC,CAAzC;AACA,MAAMQ,UAAU,GAAG,CAACD,UAApB;AACA,MAAME,eAAe,GAAGjC,WAAH,aAAGA,WAAH,gDAAGA,WAAW,CAAEkC,cAAhB,0DAAG,sBAA6BC,IAA7B,CAAkC,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACC,UAAT;AAAA,GAAlC,CAAxB;AAEA,MAAMC,mBAAmB,GAAG,CAC1B;AAAEC,IAAAA,EAAE,EAAE,GAAN;AAAWC,IAAAA,IAAI,EAAE,MAAjB;AAAyBC,IAAAA,IAAI,EAAE;AAA/B,GAD0B,EAE1B;AAAEF,IAAAA,EAAE,EAAE,GAAN;AAAWC,IAAAA,IAAI,EAAE,UAAjB;AAA6BC,IAAAA,IAAI,EAAE;AAAnC,GAF0B,EAG1B;AAAEF,IAAAA,EAAE,EAAE,GAAN;AAAWC,IAAAA,IAAI,EAAE,eAAjB;AAAkCC,IAAAA,IAAI,EAAE;AAAxC,GAH0B,CAA5B;AAMA,MAAMC,aAAa,GAAG,CACpB;AAAEC,IAAAA,KAAK,EAAE/C,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,SAAf,CAAT;AAAoCC,IAAAA,KAAK,EAAE;AAA3C,GADoB,EAEpB;AAAEH,IAAAA,KAAK,EAAE/C,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,QAAf,CAAT;AAAmCC,IAAAA,KAAK,EAAE;AAA1C,GAFoB,EAGpB;AAAEH,IAAAA,KAAK,EAAE/C,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,QAAf,CAAT;AAAmCC,IAAAA,KAAK,EAAE,CAAC;AAA3C,GAHoB,CAAtB;;AAMA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACD,KAAD,EAAW;AAChC,WAAOJ,aAAa,CAACM,GAAd,CAAkB,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACH,KAAT;AAAA,KAAlB,EAAkCI,QAAlC,CAA2CJ,KAA3C,IAAoDA,KAApD,GAA4D,IAAnE;AACD,GAFD;;AAIA,MAAMK,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAAA;;AAC/B,QAAMC,UAAU,GAAGxD,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BtD,WAA3B,aAA2BA,WAA3B,uBAA2BA,WAAW,CAAEuD,kBAAxC,EAA4D,IAA5D,6BACfvD,WAAW,CAACuD,kBADG,oFACf,sBAAgCpB,IAAhC,CAAqC,UAACqB,CAAD;AAAA,aAAOA,CAAC,CAACf,IAAF,KAAW,YAAlB;AAAA,KAArC,CADe,2DACf,uBAAsEgB,WADvD,GAEf,IAFJ;AAGA,WAAO7D,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BpC,iBAA3B,EAA8C,IAA9C,KAAuDkC,UAAvD,GAAoE,0BAAAlC,iBAAiB,CAACiB,IAAlB,CAAuB,UAACW,KAAD;AAAA,aAAW,CAAAA,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEY,WAAP,MAAuBN,UAAlC;AAAA,KAAvB,iFAAsEb,EAAtE,KAA4E,IAAhJ,GAAuJ,IAA9J;AACD,GALD;;AAMA,MAAMoB,yBAAyB,GAAG,SAA5BA,yBAA4B,GAAM;AAAA;;AACtC,QAAMC,wBAAwB,GAAGhE,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BtD,WAA3B,aAA2BA,WAA3B,uBAA2BA,WAAW,CAAEuD,kBAAxC,EAA4D,IAA5D,IAC7B,CAAAvD,WAAW,SAAX,IAAAA,WAAW,WAAX,sCAAAA,WAAW,CAAEuD,kBAAb,4GAAiCpB,IAAjC,CAAsC,UAACqB,CAAD;AAAA,aAAOA,CAAC,CAACf,IAAF,KAAW,UAAlB;AAAA,KAAtC,mFAAqEgB,WAArE,IACE,IADF,GAEE,KAH2B,GAI7B,KAJJ;;AAKA,QAAI,CAACG,wBAAL,EAA+B;AAAA;;AAC7B,UACE,CAAA3B,eAAe,SAAf,IAAAA,eAAe,WAAf,qCAAAA,eAAe,CAAE4B,eAAjB,gFAAkCC,aAAlC,MAAoD,CAApD,IACAlE,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BrB,eAA3B,aAA2BA,eAA3B,iDAA2BA,eAAe,CAAE4B,eAA5C,2DAA2B,uBAAkCE,YAA7D,EAA2E,IAA3E,CAFF,EAGE;AACA,eAAO9B,eAAe,CAAC4B,eAAhB,CAAgCE,YAAhC,CAA6C5B,IAA7C,CAAkD,UAACqB,CAAD;AAAA,iBAAOA,CAAC,CAACQ,UAAT;AAAA,SAAlD,KAA0E,IAAjF;AACD,OALD,MAKO,IACL,CAAC,CAAA/B,eAAe,SAAf,IAAAA,eAAe,WAAf,sCAAAA,eAAe,CAAE4B,eAAjB,kFAAkCC,aAAlC,MAAoD,CAApD,IAAyD,CAAA7B,eAAe,SAAf,IAAAA,eAAe,WAAf,sCAAAA,eAAe,CAAE4B,eAAjB,kFAAkCC,aAAlC,MAAoD,CAA9G,KACA,CAAClE,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BrB,eAA3B,aAA2BA,eAA3B,iDAA2BA,eAAe,CAAE4B,eAA5C,2DAA2B,uBAAkCE,YAA7D,EAA2E,IAA3E,CAFI,EAGL;AAAA;;AACA,eAAO;AACLE,UAAAA,YAAY,EAAE,IADT;AAELC,UAAAA,YAAY,EAAE,IAFT;AAGLC,UAAAA,YAAY,EAAE,CAAAlC,eAAe,SAAf,IAAAA,eAAe,WAAf,sCAAAA,eAAe,CAAE4B,eAAjB,kFAAkCC,aAAlC,MAAoD;AAH7D,SAAP;AAKD;AACF;;AACD,WAAO,IAAP;AACD,GAxBD;;AA0BA,MAAMM,MAAM,GAAG,CACb;AACE3B,IAAAA,IAAI,EAAE,cADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,EAAE9C,WAAF,aAAEA,WAAF,+CAAEA,WAAW,CAAEsE,OAAf,yDAAE,qBAAsBC,YAH/B;AAIE5B,IAAAA,KAAK,EAAE/C,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,iFAAf,CAJT;AAKE2B,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AALrB,GADa,EAUb;AACES,IAAAA,IAAI,EAAE,kBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,EAAE9C,WAAF,aAAEA,WAAF,gDAAEA,WAAW,CAAEsE,OAAf,0DAAE,sBAAsBI,gBAH/B;AAIE/B,IAAAA,KAAK,EAAE/C,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,0FAAf,CAJT;AAKE2B,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AALrB,GAVa,EAmBb;AACES,IAAAA,IAAI,EAAE,0CADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAEC,cAAc,0BAACnD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,oCAA5D,CAAD,0DAAC,sBAAmG4E,WAApG,CAHvB;AAIEC,IAAAA,OAAO,EAAEnC,aAJX;AAKEoC,IAAAA,gBAAgB,EAAE;AAChBC,MAAAA,SAAS,EAAE,IADK;AAEhBN,MAAAA,QAAQ,EAAEzC;AAFM;AALpB,GAnBa,EA6Bb;AACES,IAAAA,IAAI,EAAE,4CADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,4BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,oCAA5D,CAAF,2DAAE,uBACHgF,6BAJN;AAKEP,IAAAA,QAAQ,EAAE,CAAC3C;AALb,GA7Ba,EAoCb;AACEW,IAAAA,IAAI,EAAE,2CADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAEC,cAAc,2BACnBnD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,qCAA5D,CADmB,2DACnB,uBAAoG4E,WADjF,CAHvB;AAMEC,IAAAA,OAAO,EAAEnC,aANX;AAOEoC,IAAAA,gBAAgB,EAAE;AAChBC,MAAAA,SAAS,EAAE,IADK;AAEhBN,MAAAA,QAAQ,EAAEzC;AAFM;AAPpB,GApCa,EAgDb;AACES,IAAAA,IAAI,EAAE,6CADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,4BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,qCAA5D,CAAF,2DAAE,uBACHgF,6BAJN;AAKEP,IAAAA,QAAQ,EAAE,CAAC3C;AALb,GAhDa,EAuDb;AACEW,IAAAA,IAAI,EAAE,0BADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,2BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,oBAA5D,mFAAmF4E,WAAnF,KAAkG,EAH3G;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAJrB,GAvDa,EA+Db;AACES,IAAAA,IAAI,EAAE,4BADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,4BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,oBAA5D,CAAF,2DAAE,uBAAmFgF,6BAH5F;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA/Da,EAqEb;AACEW,IAAAA,IAAI,EAAE,iBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,2BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,WAA5D,mFAA0E4E,WAA1E,KAAyF,EAHlG;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBS,MAAAA,YAAY,EAAE,KADG;AAEjBR,MAAAA,QAAQ,EAAEzC;AAFO;AAJrB,GArEa,EA8Eb;AACES,IAAAA,IAAI,EAAE,mBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,4BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,WAA5D,CAAF,2DAAE,uBAA0EgF,6BAHnF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA9Ea,EAoFb;AACEW,IAAAA,IAAI,EAAE,sBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,2BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,gBAA5D,mFAA+E4E,WAA/E,KAA8F,EAHvG;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBS,MAAAA,YAAY,EAAE,KADG;AAEjBR,MAAAA,QAAQ,EAAEzC;AAFO;AAJrB,GApFa,EA6Fb;AACES,IAAAA,IAAI,EAAE,wBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,gBAA5D,CAAF,4DAAE,wBAA+EgF,6BAHxF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA7Fa,EAmGb;AACEW,IAAAA,IAAI,EAAE,sBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,gBAA5D,qFAA+E4E,WAA/E,KAA8F,EAHvG;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBS,MAAAA,YAAY,EAAE,KADG;AAEjBR,MAAAA,QAAQ,EAAEzC;AAFO;AAJrB,GAnGa,EA4Gb;AACES,IAAAA,IAAI,EAAE,wBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,gBAA5D,CAAF,4DAAE,wBAA+EgF,6BAHxF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA5Ga,EAkHb;AACEW,IAAAA,IAAI,EAAE,kBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,YAA5D,qFAA2E4E,WAA3E,KAA0F,EAHnG;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBS,MAAAA,YAAY,EAAE,KADG;AAEjBR,MAAAA,QAAQ,EAAEzC;AAFO;AAJrB,GAlHa,EA2Hb;AACES,IAAAA,IAAI,EAAE,kBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAEK,kBAAkB,kCAAMvD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,YAA5D,CAAN,4DAAM,wBAA2EyD,WAAjF,CAAlB,IAAkH,EAH3H;AAIEoB,IAAAA,OAAO,EACL,CAAA3D,iBAAiB,SAAjB,IAAAA,iBAAiB,WAAjB,YAAAA,iBAAiB,CAAE8B,GAAnB,CAAuB,UAACkC,MAAD;AAAA,aAAa;AAClCpC,QAAAA,KAAK,EAAEoC,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAE3C,EADmB;AAElCI,QAAAA,KAAK,EAAEuC,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAExB;AAFmB,OAAb;AAAA,KAAvB,MAGO,EARX;AASEc,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AATrB,GA3Ha,EAwIb;AACES,IAAAA,IAAI,EAAE,oBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,YAA5D,CAAF,4DAAE,wBAA2EgF,6BAHpF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GAxIa,EA8Ib;AACEW,IAAAA,IAAI,EAAE,kBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,YAA5D,qFAA2E4E,WAA3E,KAA0F,EAHnG;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBS,MAAAA,YAAY,EAAE,KADG;AAEjBR,MAAAA,QAAQ,EAAEzC;AAFO;AAJrB,GA9Ia,EAuJb;AACES,IAAAA,IAAI,EAAE,kBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,YAA5D,qFAA2EyD,WAA3E,KAA0F,EAHnG;AAIEoB,IAAAA,OAAO,EAAE/D,kBAJX;AAKEqE,IAAAA,SAAS,EAAE,IALb;AAMEC,IAAAA,WAAW,EAAE,UANf;AAOEZ,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAPrB,GAvJa,EAkKb;AACES,IAAAA,IAAI,EAAE,oBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,YAA5D,CAAF,4DAAE,wBAA2EgF,6BAHpF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GAlKa,EAwKb;AACEW,IAAAA,IAAI,EAAE,yBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,mBAA5D,qFAAkF4E,WAAlF,KAAiG,EAH1G;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBS,MAAAA,YAAY,EAAE,KADG;AAEjBR,MAAAA,QAAQ,EAAEzC;AAFO;AAJrB,GAxKa,EAiLb;AACES,IAAAA,IAAI,EAAE,2BADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,mBAA5D,CAAF,4DAAE,wBAAkFgF,6BAH3F;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GAjLa,EAuLb;AACEW,IAAAA,IAAI,EAAE,qCADR;AAEEK,IAAAA,KAAK,EACH,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,+BAA5D,qFAA8FyD,WAA9F,KAA6G9D,SAAS,CAAC0F,YAH3H;AAIEC,IAAAA,UAAU,EAAE,iBAJd;AAKEd,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AALrB,GAvLa,EAgMb;AACES,IAAAA,IAAI,EAAE,uCADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,+BAA5D,CAAF,4DAAE,wBAA8FgF,6BAHvG;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GAhMa,EAsMb;AACEW,IAAAA,IAAI,EAAE,YADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,MAA5D,qFAAqE4E,WAArE,KAAoF,EAH7F;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAJrB,GAtMa,EA8Mb;AACES,IAAAA,IAAI,EAAE,cADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,MAA5D,CAAF,4DAAE,wBAAqEgF,6BAH9E;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA9Ma,EAoNb;AACEW,IAAAA,IAAI,EAAE,uBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,iBAA5D,qFAAgF4E,WAAhF,KAA+F,EAHxG;AAIEJ,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAJrB,GApNa,EA4Nb;AACES,IAAAA,IAAI,EAAE,yBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,iBAA5D,CAAF,4DAAE,wBAAgFgF,6BAHzF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA5Na,EAkOb;AACEW,IAAAA,IAAI,EAAE,gCADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,0BAA5D,qFAAyF4E,WAAzF,KAAwG,EAHjH;AAIEC,IAAAA,OAAO,EAAEhE,iBAJX;AAKEsE,IAAAA,SAAS,EAAE,gBALb;AAMEC,IAAAA,WAAW,EAAE,YANf;AAOEZ,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAPrB,GAlOa,EA6Ob;AACES,IAAAA,IAAI,EAAE,kCADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,0BAA5D,CAAF,4DAAE,wBAAyFgF,6BAHlG;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA7Oa,EAmPb;AACEW,IAAAA,IAAI,EAAE,oBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EAAE,4BAAAlD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,cAA5D,qFAA6E4E,WAA7E,KAA4F,EAHrG;AAIEC,IAAAA,OAAO,EAAEvC,mBAJX;AAKE6C,IAAAA,SAAS,EAAE,IALb;AAMEC,IAAAA,WAAW,EAAE,MANf;AAOEZ,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAPrB,GAnPa,EA8Pb;AACES,IAAAA,IAAI,EAAE,sBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,cAA5D,CAAF,4DAAE,wBAA6EgF,6BAHtF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GA9Pa,EAoQb;AACEW,IAAAA,IAAI,EAAE,gBADR;AAEE4B,IAAAA,IAAI,EAAE,QAFR;AAGEvB,IAAAA,KAAK,EACH,0BAAAa,yBAAyB,YAAzB,gGAA6BM,YAA7B,kFAA2CsB,WAA3C,mCACA3F,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,UAA5D,CADA,4DACA,wBAAyEyD,WADzE,KAEA,EANJ;AAOEoB,IAAAA,OAAO,EAAE5D,mBAPX;AAQEkE,IAAAA,SAAS,EAAE,MARb;AASEC,IAAAA,WAAW,EAAE,aATf;AAUEjB,IAAAA,YAAY,EAAE,2BAAAR,yBAAyB,YAAzB,wEAA6BQ,YAA7B,KAA6C,KAV7D;AAWEK,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO;AAXrB,GApQa,EAmRb;AACES,IAAAA,IAAI,EAAE,cADR;AAEE4B,IAAAA,IAAI,EAAE,YAFR;AAGEvB,IAAAA,KAAK,EAAE,2BAAAa,yBAAyB,YAAzB,wEAA6BO,YAA7B,IACHtF,MAAM,2BAAC+E,yBAAyB,EAA1B,2DAAC,uBAA6BO,YAA9B,CADH,GAEH,oCAAQtE,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,UAA5D,CAAR,4DAAQ,wBAAyEwF,SAAjF,IACE5G,MAAM,4BAACgB,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,UAA5D,CAAD,4DAAC,wBAAyEwF,SAA1E,CADR,GAEE,IAPR;AAQEC,IAAAA,YAAY,EAAE,KARhB;AASEC,IAAAA,WAAW,EAAE9F,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,gBAAf,CATf;AAUE2B,IAAAA,iBAAiB,EAAE;AACjBC,MAAAA,QAAQ,EAAEzC;AADO,KAVrB;AAaE2D,IAAAA,cAAc,EAAE;AACdC,MAAAA,MAAM,EAAE/F,MAAM,CAACgG,EAAP,CAAUD,MAAV,CAAiBE,IAAjB,CAAsBC,IADhB;AAEdC,MAAAA,SAAS,EAAE;AAFG;AAblB,GAnRa,EAqSb;AACEvD,IAAAA,IAAI,EAAE,kBADR;AAEE4B,IAAAA,IAAI,EAAE,UAFR;AAGEvB,IAAAA,KAAK,6BAAElD,KAAK,CAACmB,sBAAN,CAA6B4D,iBAA7B,CAA+C3E,WAA/C,EAA4D,UAA5D,CAAF,4DAAE,wBAAyEgF,6BAHlF;AAIEP,IAAAA,QAAQ,EAAE,CAAC3C;AAJb,GArSa,EA2Sb;AACEW,IAAAA,IAAI,EAAE,OADR;AAEEE,IAAAA,KAAK,EAAE/C,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,sCAAf,CAFT;AAGEwB,IAAAA,IAAI,EAAE,UAHR;AAIEvB,IAAAA,KAAK,EAAE,CAAA9C,WAAW,SAAX,IAAAA,WAAW,WAAX,qCAAAA,WAAW,CAAEsE,OAAb,gFAAsB2B,KAAtB,KAA+B,EAJxC;AAKEzB,IAAAA,iBAAiB,EAAE;AACjB0B,MAAAA,UAAU,EAAE;AAAEC,QAAAA,SAAS,EAAE;AAAb,OADK;AAEjBC,MAAAA,SAAS,EAAE,IAFM;AAGjBC,MAAAA,OAAO,EAAE,CAHQ;AAIjBC,MAAAA,OAAO,EAAE,CAJQ;AAKjB7B,MAAAA,QAAQ,EAAEzC;AALO;AALrB,GA3Sa,CAAf;AAyTA,MAAMuE,kCAAkC,GAAG3G,KAAK,CAAC4G,IAAN,CAAWC,aAAX,CAAyBrC,MAAzB,EAAiC,qCAAjC,CAA3C;;AA7XyF,kBA+X/C7F,QAAQ,EA/XuC;AAAA;AAAA,MA+XlFmI,aA/XkF;AAAA,MA+XnEC,gBA/XmE;;AAAA,mBAgY3BpI,QAAQ,CAAC,EAAD,CAhYmB;AAAA;AAAA,MAgYlFqI,uBAhYkF;AAAA,MAgYzDC,0BAhYyD;;AAAA,mBAiYrCtI,QAAQ,EAjY6B;AAAA;AAAA,MAiYlFuI,kBAjYkF;AAAA,MAiY9DC,qBAjY8D;;AAAA,mBAkYnDxI,QAAQ,CAAC,EAAD,CAlY2C;AAAA;AAAA,MAkYlFyI,WAlYkF;AAAA,MAkYrEC,cAlYqE;;AAAA,mBAmYzB1I,QAAQ,CAAC;AAAE2I,IAAAA,kBAAkB,EAAE,KAAtB;AAA6BC,IAAAA,mBAAmB,EAAE;AAAlD,GAAD,CAnYiB;AAAA;AAAA,MAmYlFC,wBAnYkF;AAAA,MAmYxDC,2BAnYwD;;AAqYzF,MAAMC,UAAU,GAAG9G,QAAH,aAAGA,QAAH,4CAAGA,QAAQ,CAAE+G,OAAb,+EAAG,kBAAmBC,KAAtB,0DAAG,sBAA0BC,MAA7C;AACA,MAAMC,6BAA6B,GACjC,CAAAJ,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEK,mCAAZ,MACApB,kCADA,aACAA,kCADA,uBACAA,kCAAkC,CAAEqB,YADpC,MAEArB,kCAFA,aAEAA,kCAFA,uBAEAA,kCAAkC,CAAEzD,KAFpC,CADF;;AAKA,MAAM+E,0BAA0B,GAAG,SAA7BA,0BAA6B,QAM7B;AAAA,QALJC,kBAKI,SALJA,kBAKI;AAAA,QAJJC,SAII,SAJJA,SAII;AAAA,QAHJC,iBAGI,SAHJA,iBAGI;AAAA,QAFJN,6BAEI,SAFJA,6BAEI;AAAA,QADJd,uBACI,SADJA,uBACI;AACJ,QAAMqB,MAAM,GAAGrI,KAAK,CAACmB,sBAAN,CAA6BmH,yBAA7B,CAAuDJ,kBAAvD,EAA2EC,SAA3E,EAAsFC,iBAAtF,CAAf;AACA,QAAMG,SAAS,GAAGvI,KAAK,CAACmB,sBAAN,CAA6BqH,kCAA7B,CAChBV,6BADgB,EAEhBd,uBAFgB,CAAlB;AAKAC,IAAAA,0BAA0B,CAACoB,MAAD,CAA1B;AACAlB,IAAAA,qBAAqB,CAACoB,SAAD,CAArB;AACA1H,IAAAA,QAAQ,CACNrB,kCAAkC,CAAC;AACjCiJ,MAAAA,eAAe,EAAEJ,MADgB;AAEjCK,MAAAA,qBAAqB,EAAEH;AAFU,KAAD,CAD5B,CAAR;AAMD,GArBD;;AAuBA,MAAMI,cAAc,GAAG,SAAjBA,cAAiB,QAAqG;AAAA,QAAlGC,cAAkG,SAAlGA,cAAkG;AAAA,QAAlFC,2BAAkF,SAAlFA,2BAAkF;AAAA,QAArDC,2BAAqD,SAArDA,2BAAqD;AAAA,QAAxBV,iBAAwB,SAAxBA,iBAAwB;;AAC1H,QAAIQ,cAAc,IAAIC,2BAAlB,IAAiDC,2BAAjD,IAAgFV,iBAApF,EAAuG;AACrG,UAAMW,cAAc,GAAG,CAACH,cAAD,EAAiBC,2BAAjB,EAA8CC,2BAA9C,EAA2EV,iBAA3E,CAAvB;AAEAf,MAAAA,cAAc,CAACrH,KAAK,CAACyD,OAAN,CAAcuF,aAAd,CAA4BD,cAA5B,EAA4C9I,MAAM,CAACgG,EAAP,CAAUD,MAAV,CAAiBiD,OAAjB,CAAyBC,OAArE,CAAD,CAAd;AACArI,MAAAA,QAAQ,CAACpB,sBAAsB,CAACO,KAAK,CAACyD,OAAN,CAAcuF,aAAd,CAA4BD,cAA5B,EAA4C9I,MAAM,CAACgG,EAAP,CAAUD,MAAV,CAAiBiD,OAAjB,CAAyBC,OAArE,CAAD,CAAvB,CAAR;AACD,KALD,MAKO;AACL7B,MAAAA,cAAc,CAAC,EAAD,CAAd;AACD;AACF,GATD;;AAWA,MAAM8B,6CAA6C,GAAG,SAAhDA,6CAAgD,GAAM;AAAA;;AAC1D,QAAMzB,UAAU,GAAG,CAAA9G,QAAQ,SAAR,IAAAA,QAAQ,WAAR,kCAAAA,QAAQ,CAAE+G,OAAV,mGAAmBC,KAAnB,gFAA0BC,MAA1B,KAAoC,EAAvD;;AACA,QACGH,UAAU,CAAC0B,wCAAX,KAAwD,CAAxD,IAA6D,CAACrI,SAAS,CAACuG,kBAAzE,IACCI,UAAU,CAAC2B,yCAAX,KAAyD,CAAzD,IAA8D,CAACtI,SAAS,CAACwG,mBAF5E,EAGE;AACA1G,MAAAA,QAAQ,CACNhB,mBAAmB,CACjBG,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,mDAAf,EAAoE;AAClEqG,QAAAA,YAAY,EACT5B,UAAU,CAAC0B,wCAAX,KAAwD,CAAxD,IACC,CAACrI,SAAS,CAACuG,kBADZ,IAECI,UAAU,CAAC2B,yCAAX,KAAyD,CAF1D,IAGC,CAACtI,SAAS,CAACwG,mBAHZ,IAICvH,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,oGAAf,CAJF,IAKCyE,UAAU,CAAC0B,wCAAX,KAAwD,CAAxD,IACC,CAACrI,SAAS,CAACuG,kBADZ,IAECtH,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,mEAAf,CAPF,IAQCyE,UAAU,CAAC2B,yCAAX,KAAyD,CAAzD,IACC,CAACtI,SAAS,CAACwG,mBADZ,IAECvH,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,+DAAf;AAZ8D,OAApE,CADiB,EAejB,SAfiB,CADb,CAAR;AAmBAwE,MAAAA,2BAA2B,CAAC;AAC1BH,QAAAA,kBAAkB,EAAEI,UAAU,CAAC0B,wCAAX,KAAwD,CAAxD,IAA6D,CAACrI,SAAS,CAACwI,iBADlE;AAE1BhC,QAAAA,mBAAmB,EAAEG,UAAU,CAAC2B,yCAAX,KAAyD,CAAzD,IAA8D,CAACtI,SAAS,CAACwG;AAFpE,OAAD,CAA3B;AAIA,aAAO,IAAP;AACD;;AACDE,IAAAA,2BAA2B,CAAC;AAC1BH,MAAAA,kBAAkB,EAAE,KADM;AAE1BC,MAAAA,mBAAmB,EAAE;AAFK,KAAD,CAA3B;AAIA,WAAO,KAAP;AACD,GApCD;;AAsCA,MAAMiC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,QAAIL,6CAA6C,EAAjD,EAAqD;AACnD;AACD;;AACD5I,IAAAA,QAAQ,CAACI,IAAT;AACD,GALD;;AAOA,MAAM8I,UAAU,GAAG,SAAbA,UAAa,CAAChF,IAAD,EAAU;AAAA;;AAC3B,QAAIA,IAAI,KAAK1E,SAAS,CAAC2J,SAAnB,IAAgCP,6CAA6C,EAAjF,EAAqF;AACnF;AACD;;AACD1B,IAAAA,2BAA2B,CAAC;AAC1BH,MAAAA,kBAAkB,EAAE,KADM;AAE1BC,MAAAA,mBAAmB,EAAE;AAFK,KAAD,CAA3B;AAIA,QAAMG,UAAU,GAAG,CAAA9G,QAAQ,SAAR,IAAAA,QAAQ,WAAR,kCAAAA,QAAQ,CAAE+G,OAAV,mGAAmBC,KAAnB,gFAA0BC,MAA1B,KAAoC,EAAvD;AACA,QAAM8B,uBAAuB,GAAG,CAC9B;AAAE9G,MAAAA,IAAI,EAAE,qCAAR;AAA+C+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAAtD,KAD8B,EAE9B;AAAE/G,MAAAA,IAAI,EAAE,oCAAR;AAA8C+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAArD,KAF8B,EAG9B;AAAE/G,MAAAA,IAAI,EAAE,oBAAR;AAA8B+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAArC,KAH8B,EAI9B;AAAE/G,MAAAA,IAAI,EAAE,WAAR;AAAqB+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAA5B,KAJ8B,EAK9B;AAAE/G,MAAAA,IAAI,EAAE,gBAAR;AAA0B+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAAjC,KAL8B,EAM9B;AAAE/G,MAAAA,IAAI,EAAE,MAAR;AAAgB+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAAvB,KAN8B,EAO9B;AAAE/G,MAAAA,IAAI,EAAE,iBAAR;AAA2B+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAAlC,KAP8B,EAQ9B;AAAE/G,MAAAA,IAAI,EAAE,0BAAR;AAAoC+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAA3C,KAR8B,EAS9B;AAAE/G,MAAAA,IAAI,EAAE,cAAR;AAAwB+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAA/B,KAT8B,EAU9B;AAAE/G,MAAAA,IAAI,EAAE,UAAR;AAAoB+G,MAAAA,KAAK,EAAE,CAAC,QAAD,EAAW,MAAX;AAA3B,KAV8B,EAW9B;AAAE/G,MAAAA,IAAI,EAAE,gBAAR;AAA0B+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAAjC,KAX8B,EAY9B;AAAE/G,MAAAA,IAAI,EAAE,YAAR;AAAsB+G,MAAAA,KAAK,EAAE,CAAC,QAAD,EAAW,QAAX;AAA7B,KAZ8B,EAa9B;AAAE/G,MAAAA,IAAI,EAAE,YAAR;AAAsB+G,MAAAA,KAAK,EAAE,CAAC,QAAD,EAAW,QAAX;AAA7B,KAb8B,EAc9B;AAAE/G,MAAAA,IAAI,EAAE,mBAAR;AAA6B+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAApC,KAd8B,EAe9B;AAAE/G,MAAAA,IAAI,EAAE,+BAAR;AAAyC+G,MAAAA,KAAK,EAAE,CAAC,QAAD;AAAhD,KAf8B,CAAhC;AAiBA,QAAMC,sBAAsB,GAAG7J,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BrB,eAA3B,aAA2BA,eAA3B,iDAA2BA,eAAe,CAAE4B,eAA5C,2DAA2B,uBAAkCE,YAA7D,EAA2E,IAA3E,IAC3BjF,QAAQ,CAACwI,UAAU,CAAC,gBAAD,CAAX,CAAR,GACErF,eAAe,CAAC4B,eAAhB,CAAgCE,YAAhC,CAA6C5B,IAA7C,CAAkD,UAACqB,CAAD;AAAA,aAAOA,CAAC,CAACkG,cAAF,KAAqBpC,UAAU,CAAC,gBAAD,CAAtC;AAAA,KAAlD,CADF,GAEErF,eAAe,CAAC4B,eAAhB,CAAgCE,YAAhC,CAA6C5B,IAA7C,CACA,UAACqB,CAAD;AAAA;;AAAA,aAAO,oBAAAA,CAAC,CAACS,YAAF,oEAAgBsB,WAAhB,kCAAkC+B,UAAU,CAAC,gBAAD,CAA5C,0DAAkC,sBAA8B/B,WAA9B,EAAlC,CAAP;AAAA,KADA,CAHyB,GAM3B,IANJ;;AAOA,QAAMoE,kBAAkB,mCACnB3J,WADmB;AAEtBsE,MAAAA,OAAO,kCACFtE,WAAW,CAACsE,OADV;AAELC,QAAAA,YAAY,EAAE+C,UAAU,CAAC/C,YAFpB;AAGLG,QAAAA,gBAAgB,EAAE4C,UAAU,CAAC5C,gBAHxB;AAILuB,QAAAA,KAAK,EAAEqB,UAAU,CAACrB,KAJb;AAKLyB,QAAAA,6BAA6B,EAA7BA,6BALK;AAOLkC,QAAAA,mBAAmB,EAAE,CAAAH,sBAAsB,SAAtB,IAAAA,sBAAsB,WAAtB,YAAAA,sBAAsB,CAAEG,mBAAxB,KAA+C,EAP/D;AAQLF,QAAAA,cAAc,EAAE,CAAAD,sBAAsB,SAAtB,IAAAA,sBAAsB,WAAtB,YAAAA,sBAAsB,CAAEC,cAAxB,KAA0C,EARrD;AASLxF,QAAAA,YAAY,EAAE,CAAAuF,sBAAsB,SAAtB,IAAAA,sBAAsB,WAAtB,YAAAA,sBAAsB,CAAEvF,YAAxB,KAAwC,EATjD;AAULD,QAAAA,YAAY,EAAEnF,QAAQ,CAACwI,UAAU,CAAC,gBAAD,CAAX,CAAR,GACV,0BAAArG,mBAAmB,CAACkB,IAApB,CAAyB,UAACqB,CAAD;AAAA,iBAAOA,CAAC,CAACqG,cAAF,KAAqBvC,UAAU,CAAC,gBAAD,CAAtC;AAAA,SAAzB,iFAAoF9E,IAApF,KAA4F,IADlF,GAEV8E,UAAU,CAAC,gBAAD;AAZT,QAFe;AAgBtB/D,MAAAA,kBAAkB,EAAEgG,uBAAuB,CAACvG,GAAxB,CAA4B,iBAAqB;AAAA,YAAlBP,IAAkB,SAAlBA,IAAkB;AAAA,YAAZ+G,KAAY,SAAZA,KAAY;AACnE,eAAOA,KAAK,CAACM,MAAN,CACL,UAACC,GAAD,EAAM1F,IAAN,EAAe;AAAA;;AACb,cAAM2F,QAAQ,aAAMvH,IAAN,SAAa4B,IAAb,CAAd;AACA,cAAM4F,cAAc,GAAGD,QAAQ,KAAK,gBAApC;AACA,cAAME,YAAY,GAAGD,cAAc,GAAG3C,UAAU,CAAC,gBAAD,CAAb,GAAkC,EAArE;AAEA,cAAM6C,kBAAkB,GAAGH,QAAQ,KAAK,kBAAxC;AACA,cAAMI,qBAAqB,GAAG9C,UAAU,CAAC,kBAAD,CAAxC;AACA,cAAM+C,qBAAqB,GAAGC,OAAO,CAACF,qBAAD,CAAP,IAAkC9C,UAAU,CAAC0C,QAAD,CAA5C,GAC1B9I,iBAD0B,aAC1BA,iBAD0B,uBAC1BA,iBAAiB,CAAEiB,IAAnB,CAAwB,UAACoI,GAAD;AAAA,mBAASA,GAAG,CAAChI,EAAJ,KAAW+E,UAAU,CAAC0C,QAAD,CAA9B;AAAA,WAAxB,CAD0B,GAC0C,QAAQ,EADhF;AAGA,cAAMQ,kBAAkB,GAAGR,QAAQ,KAAK,kBAAxC;AACA,cAAMS,qBAAqB,GAAGnD,UAAU,CAAC,kBAAD,CAAxC;AACA,cAAMoD,qBAAqB,GAAGJ,OAAO,CAACG,qBAAD,CAAP,GAAiCnD,UAAU,CAAC0C,QAAD,CAA3C,GAAwD,EAAtF;AAEA,cAAMlH,KAAK,GAAGmH,cAAc,GACxBC,YADwB,GAExBC,kBAAkB,GAChBE,qBADgB,aAChBA,qBADgB,uBAChBA,qBAAqB,CAAE3G,WADP,GAEhB8G,kBAAkB,GAChBE,qBADgB,GAEhBpD,UAAU,CAAC0C,QAAD,CANlB;AAOA,cAAMW,MAAM,GAAGtG,IAAI,KAAK,MAAxB;AACA,cAAMuG,WAAW,GAAGD,MAAM,IAAI/L,MAAM,CAACkE,KAAD,CAAN,CAAc+H,OAAd,EAA9B;AAEA,iDACKd,GADL,uEAEM1F,IAAI,CAACkB,WAAL,EAFN,YAEkCoF,MAAM,GAAIC,WAAW,GAAGhM,MAAM,CAACkE,KAAD,CAAN,CAAc8C,MAAd,CAAqB,YAArB,CAAH,GAAwC,EAAvD,GAA6D9C,KAFrG,oEAGiCwE,UAAU,WAAI7E,IAAJ,cAH3C;AAKD,SA9BI,EA+BL;AAAEA,UAAAA,IAAI,EAAJA;AAAF,SA/BK,CAAP;AAiCD,OAlCmB;AAhBE,MAAxB;;AAqDAhC,IAAAA,QAAQ,CAACvB,2BAA2B,CAACyK,kBAAD,EAAqBrC,UAArB,CAA5B,CAAR,CAAsEwD,IAAtE,CAA2E,UAACC,QAAD,EAAc;AACvF,UAAI,CAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAE3J,MAAV,MAAqBzB,SAAS,CAACqL,eAAnC,EAAoD;AAClD,YAAI3G,IAAI,KAAK,UAAb,EAAyB;AACvBlE,UAAAA,QAAQ,CAACI,IAAT;AACD;AACF;AACF,KAND;AAOD,GA7FD;;AA+FA,MAAM0K,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA;;AACzB,QAAMC,KAAK,GAAG1K,QAAH,aAAGA,QAAH,6CAAGA,QAAQ,CAAE+G,OAAb,gFAAG,mBAAmBC,KAAtB,0DAAG,sBAA0B2D,SAAxC;;AAEA,QAAIvL,KAAK,CAACyD,OAAN,CAAc+H,UAAd,CAAyBF,KAAzB,CAAJ,EAAqC;AACnCA,MAAAA,KAAK,CAACxE,aAAD,EAAgB;AAAE2E,QAAAA,SAAS,EAAE;AAAb,OAAhB,CAAL;AACD;;AACDhE,IAAAA,2BAA2B,CAAC;AAC1BH,MAAAA,kBAAkB,EAAE,KADM;AAE1BC,MAAAA,mBAAmB,EAAE;AAFK,KAAD,CAA3B;AAID,GAVD;;AAYA3I,EAAAA,SAAS,CACP,YAAM;AAAA;;AACJ,QAAM0M,KAAK,GAAG1K,QAAH,aAAGA,QAAH,6CAAGA,QAAQ,CAAE+G,OAAb,gFAAG,mBAAmBC,KAAtB,0DAAG,sBAA0B2D,SAAxC;;AACA,QAAMG,oBAAoB,qBACrB1L,KAAK,CAAC4G,IAAN,CAAW+E,gBAAX,CAA4BnH,MAA5B,CADqB,CAA1B;;AAIAuC,IAAAA,gBAAgB,CAAC2E,oBAAD,CAAhB;;AAEA,QAAI1L,KAAK,CAACyD,OAAN,CAAc+H,UAAd,CAAyBF,KAAzB,CAAJ,EAAqC;AACnCA,MAAAA,KAAK,CAACI,oBAAD,EAAuB;AAC1BD,QAAAA,SAAS,EAAE;AADe,OAAvB,CAAL;AAGD;AACF,GAdM,EAeP,CAACrL,WAAD,CAfO,CAeO;AAfP,GAAT;;AAkBA,MAAMwL,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,IAAD,EAAOC,eAAP,EAA2B;AAAA;;AACxD,QAAMC,QAAQ,GAAGF,IAAH,aAAGA,IAAH,qCAAGA,IAAI,CAAEA,IAAT,+CAAG,WAAYG,WAA7B;AACA,QAAI,CAAChM,KAAK,CAACyD,OAAN,CAAcC,YAAd,CAA2BqI,QAA3B,CAAL,EAA2C;AAC3C,QAAME,UAAU,GAAGF,QAAQ,CAAC3I,GAAT,CAAa,UAAC8I,IAAD,EAAU;AACxC,6CACKA,IADL;AAEEC,QAAAA,UAAU,EAAED,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEE,SAFpB;AAGEvJ,QAAAA,IAAI,EAAEqJ,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEG,YAHd;AAIEC,QAAAA,IAAI,EAAEJ,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEK,YAJd;AAKEC,QAAAA,MAAM,EAAEN,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEO,cALhB;AAMEC,QAAAA,MAAM,EAAER,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAES,cANhB;AAOEC,QAAAA,IAAI,EAAEV,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEW;AAPd;AASD,KAVkB,CAAnB;;AAYA,QAAMC,gBAAgB,iDACjB/L,SADiB,GAEhB+K,eAAe,KAAK/L,SAAS,CAACgN,8BAAV,CAAyCC,oBAA7D,IAAqF;AACvF1F,MAAAA,kBAAkB,EAAE2E,UAAU,CAAC,CAAD;AADyD,KAFrE,GAKhBH,eAAe,KAAK/L,SAAS,CAACgN,8BAAV,CAAyCE,cAA7D,IAA+E;AACjF1F,MAAAA,mBAAmB,EAAE0E,UAAU,CAAC,CAAD;AADkD,KAL/D,CAAtB;;AASApL,IAAAA,QAAQ,CAAClB,mCAAmC,CAACmN,gBAAD,CAApC,CAAR;AACD,GAzBD;;AA2BA,MAAMI,gCAAgC,GAAG,SAAnCA,gCAAmC,CAACpB,eAAD;AAAA,WAAqB,UAACqB,KAAD,EAAW;AACvEtM,MAAAA,QAAQ,CAACnB,SAAS,CAAC,gBAAD,CAAV,CAAR;AAEAmB,MAAAA,QAAQ,CACNxB,SAAS,CAAC;AACR+N,QAAAA,SAAS,EAAE,kBADH;AAERxF,QAAAA,KAAK,EAAE;AACLyF,UAAAA,SAAS,EAAE,IADN;AAELC,UAAAA,KAAK,EAAEtN,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,uCAAf,CAFF;AAGLsK,UAAAA,QAAQ,EAAE,IAHL;AAILC,UAAAA,cAAc,EAAE;AACdL,YAAAA,KAAK,EAALA,KADc;AAEdM,YAAAA,OAAO,EAAE1N,SAAS,CAAC2N,kCAFL;AAGdC,YAAAA,WAAW,EAAEC,MAAM,CAACxN,WAAD,aAACA,WAAD,uBAACA,WAAW,CAAEuC,EAAd,CAHL;AAIdkL,YAAAA,QAAQ,EAAED,MAAM,CAACvL,eAAD,aAACA,eAAD,uBAACA,eAAe,CAAEyL,YAAlB,CAJF;AAKdhC,YAAAA,eAAe,EAAfA,eALc;AAMdiC,YAAAA,uBAAuB,EAAE,iCAAClC,IAAD;AAAA,qBAAUD,sBAAsB,CAACC,IAAD,EAAOC,eAAP,CAAhC;AAAA,aANX;AAOdkC,YAAAA,YAAY,EAAEhO,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,QAAf,CAPA;AAQdgL,YAAAA,WAAW,EAAEjO,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,YAAf,CARC;AASdiL,YAAAA,cAAc,EAAElO,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,gDAAf,CATF;AAUdkL,YAAAA,YAAY,EAAE;AAAEC,cAAAA,OAAO,EAAE,WAAX;AAAwBC,cAAAA,MAAM,EAAE;AAAhC;AAVA;AAJX;AAFC,OAAD,CADH,CAAR;AAsBD,KAzBwC;AAAA,GAAzC;;AA2BA,MAAMC,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACpC,IAAD,EAAOqC,kBAAP,EAA8B;AAC/D1N,IAAAA,QAAQ,CACNxB,SAAS,CAAC;AACR+N,MAAAA,SAAS,EAAE,SADH;AAERxF,MAAAA,KAAK,EAAE;AACLyF,QAAAA,SAAS,EAAE,IADN;AAELC,QAAAA,KAAK,EAAEtN,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,gDAAf,CAFF;AAGLsK,QAAAA,QAAQ,EAAE,IAHL;AAILC,QAAAA,cAAc,EAAE;AACdQ,UAAAA,YAAY,EAAEhO,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,SAAf,CADA;AAEdgL,UAAAA,WAAW,EAAEjO,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,QAAf,CAFC;AAGdiL,UAAAA,cAAc,EAAElO,KAAK,CAACgD,MAAN,CAAaC,CAAb,CAAe,8CAAf,CAHF;AAIdkL,UAAAA,YAAY,EAAE;AAAEC,YAAAA,OAAO,EAAE,WAAX;AAAwBC,YAAAA,MAAM,EAAE;AAAhC,WAJA;AAKdG,UAAAA,aAAa,EAAE,yBAAM;AACnB3N,YAAAA,QAAQ,CAACtB,mCAAmC,CAAC;AAAEkP,cAAAA,MAAM,EAAEvC,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEwC,UAAhB;AAA4BH,cAAAA,kBAAkB,EAAlBA,kBAA5B;AAAgDxN,cAAAA,SAAS,EAATA;AAAhD,aAAD,CAApC,CAAR;AACD,WAPa;AAQd4N,UAAAA,aAAa,EAAE,yBAAM,CAAG,CARV;AASdC,UAAAA,WAAW,EAAE,uBAAM,CAAG;AATR;AAJX;AAFC,KAAD,CADH,CAAR;AAqBD,GAtBD;;AAwBA,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC3C,IAAD,EAAU;AACnCrL,IAAAA,QAAQ,CAACjB,qBAAqB,CAAC;AAAE8O,MAAAA,UAAU,EAAExC,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEwC,UAApB;AAAgCrC,MAAAA,YAAY,EAAEH,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAErJ;AAApD,KAAD,CAAtB,CAAR;AACD,GAFD,CArqByF,CAyqBzF;;;AACA,MAAI,CAACiE,aAAD,IAAkB,CAAC1G,WAAvB,EAAoC,OAAO,IAAP;AAEpC,sBACE,QAAC,iCAAD;AACE,IAAA,aAAa,EAAEA,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEuC,EAD9B;AAEE,IAAA,SAAS,EAAE5B,SAFb;AAGE,IAAA,MAAM,EAAEyD,MAHV;AAIE,IAAA,aAAa,EAAEsC,aAJjB;AAKE,IAAA,uBAAuB,EAAEE,uBAL3B;AAME,IAAA,kBAAkB,EAAEE,kBANtB;AAOE,IAAA,eAAe,EAAEY,6BAPnB;AAQE,IAAA,QAAQ,EAAEV,WARZ;AASE,IAAA,SAAS,EAAE/E,eAAF,aAAEA,eAAF,uBAAEA,eAAe,CAAEyM,SAT9B;AAUE,IAAA,UAAU,EAAE3M,UAVd;AAWE,IAAA,UAAU,EAAEC,UAXd;AAYE,IAAA,wBAAwB,EAAEoF,wBAZ5B;AAaE,IAAA,QAAQ,kCACHjH,QADG;AAENI,MAAAA,IAAI,EAAE6I,UAFA;AAGNuF,MAAAA,IAAI,EAAEtF,UAHA;AAIN4E,MAAAA,MAAM,EAAEhD,YAJF;AAKNpD,MAAAA,0BAA0B,EAA1BA,0BALM;AAMNU,MAAAA,cAAc,EAAdA,cANM;AAONuE,MAAAA,gCAAgC,EAAhCA,gCAPM;AAQNoB,MAAAA,0BAA0B,EAA1BA,0BARM;AASNU,MAAAA,QAAQ,EAAEH;AATJ,MAbV;AAwBE,IAAA,GAAG,EAAEjO;AAxBP;AAAA;AAAA;AAAA;AAAA,UADF;AA4BD;;GAxsBuBV,6B;UACLpB,W,EACJC,W,EACKA,W,EACQA,W,EACCA,W,EACCA,W,EACFA,W;;;KAPJmB,6B","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport get from 'lodash/get';\r\nimport isNumber from 'lodash/isNumber';\r\n\r\n// app\r\nimport ProcessingInstructionsDetailsView from './ProcessingInstructionsDetails.view';\r\nimport {\r\n  selectUser,\r\n  showModal,\r\n  updateProcessingInstruction,\r\n  removePremiumTaxSignedLinesDocument,\r\n  storeRetainedBrokerageAmountForPdf,\r\n  storeTotalAmountForPdf,\r\n  addLoader,\r\n  storeProcessingInstructionDocuments,\r\n  viewDocumentsDownload,\r\n  enqueueNotification,\r\n  selectRefDataThirdPartyList,\r\n} from 'stores';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\n\r\nProcessingInstructionsDetails.propTypes = {\r\n  instruction: PropTypes.object.isRequired,\r\n  handlers: PropTypes.shape({\r\n    back: PropTypes.func.isRequired,\r\n    next: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n  childRef: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default function ProcessingInstructionsDetails({ instruction, handlers, childRef }) {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector(selectUser);\r\n  const documents = useSelector((state) => get(state, 'processingInstructions.documents')) || {};\r\n  const refDataCurrencies = useSelector((state) => get(state, 'referenceData.currencyCodes')) || [];\r\n  const optionsDepartments = useSelector((state) => state.processingInstructions.departmentList) || [];\r\n  const warrantyListOptions = useSelector((state) => get(state, 'referenceData.warrantyList')) || [];\r\n  const optionsThirdParty = useSelector(selectRefDataThirdPartyList) || [];\r\n  const isDraft = utils.processingInstructions.status.isDraft(instruction?.statusId);\r\n  const isRejectedDraft = utils.processingInstructions.status.isRejectedDraft(instruction?.statusId);\r\n  const isSubmittedAuthorisedSignatory = utils.processingInstructions.status.isSubmittedAuthorisedSignatory(instruction?.statusId);\r\n  const isReopened = utils.processingInstructions.status.isReopened(instruction?.statusId);\r\n  const userHasWritePermission = utils.app.access.feature('processingInstructions.processingInstructions', ['create', 'update'], user);\r\n  const userHasApproverAccess = utils.app.access.feature('processingInstructions.approverChecklist', ['create', 'update'], user);\r\n  const isCheckboxesEditable = userHasApproverAccess && isSubmittedAuthorisedSignatory;\r\n\r\n  const isEditable = userHasWritePermission && (isDraft || isRejectedDraft || isReopened);\r\n  const isReadOnly = !isEditable;\r\n  const selectedRiskRef = instruction?.riskReferences?.find((r) => r.leadPolicy);\r\n\r\n  const paymentBasisOptions = [\r\n    { id: '1', code: 'cash', name: 'Cash' },\r\n    { id: '2', code: 'quaterly', name: 'Quaterly' },\r\n    { id: '3', code: 'otherDeferred', name: 'Other Deferred' },\r\n  ];\r\n\r\n  const toggleOptions = [\r\n    { label: utils.string.t('app.yes'), value: 1 },\r\n    { label: utils.string.t('app.no'), value: 0 },\r\n    { label: utils.string.t('app.na'), value: -1 },\r\n  ];\r\n\r\n  const getToggleValue = (value) => {\r\n    return toggleOptions.map((o) => o.value).includes(value) ? value : null;\r\n  };\r\n\r\n  const selectedThirdParty = () => {\r\n    const thirdvalue = utils.generic.isValidArray(instruction?.financialChecklist, true)\r\n      ? instruction.financialChecklist?.find((a) => a.name === 'thirdParty')?.stringValue\r\n      : null\r\n    return utils.generic.isValidArray(optionsThirdParty, true) && thirdvalue ? optionsThirdParty.find((value) => value?.partnerName === thirdvalue)?.id || null : null;\r\n  }\r\n  const validateWarrantyListValue = () => {\r\n    const isFinancialListAvailable = utils.generic.isValidArray(instruction?.financialChecklist, true)\r\n      ? instruction?.financialChecklist?.find((a) => a.name === 'ppwOrPpc')?.stringValue\r\n        ? true\r\n        : false\r\n      : false;\r\n    if (!isFinancialListAvailable) {\r\n      if (\r\n        selectedRiskRef?.warrantyDetails?.isInvalidData === 0 &&\r\n        utils.generic.isValidArray(selectedRiskRef?.warrantyDetails?.warrantyList, true)\r\n      ) {\r\n        return selectedRiskRef.warrantyDetails.warrantyList.find((a) => a.isSelected) || null;\r\n      } else if (\r\n        (selectedRiskRef?.warrantyDetails?.isInvalidData === 0 || selectedRiskRef?.warrantyDetails?.isInvalidData === 1) &&\r\n        !utils.generic.isValidArray(selectedRiskRef?.warrantyDetails?.warrantyList, true)\r\n      ) {\r\n        return {\r\n          warrantyCode: 'na',\r\n          warrantyDate: null,\r\n          displayError: selectedRiskRef?.warrantyDetails?.isInvalidData === 1,\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const fields = [\r\n    {\r\n      name: 'highPriority',\r\n      type: 'checkbox',\r\n      value: instruction?.details?.highPriority,\r\n      label: utils.string.t('processingInstructions.processingInstructionsForEndFaBorder.fields.highPriority'),\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'frontEndSendDocs',\r\n      type: 'checkbox',\r\n      value: instruction?.details?.frontEndSendDocs,\r\n      label: utils.string.t('processingInstructions.processingInstructionsForEndFaBorder.fields.frontEndSendDocuments'),\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'premiumTaxCalculationSheetAttachedNumber',\r\n      type: 'toggle',\r\n      value: getToggleValue(utils.processingInstructions.getFinancialField(instruction, 'premiumTaxCalculationSheetAttached')?.numberValue),\r\n      options: toggleOptions,\r\n      buttonGroupProps: {\r\n        exclusive: true,\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'premiumTaxCalculationSheetAttachedCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'premiumTaxCalculationSheetAttached')\r\n        ?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'signedLinesCalculationSheetAttachedNumber',\r\n      type: 'toggle',\r\n      value: getToggleValue(\r\n        utils.processingInstructions.getFinancialField(instruction, 'signedLinesCalculationSheetAttached')?.numberValue\r\n      ),\r\n      options: toggleOptions,\r\n      buttonGroupProps: {\r\n        exclusive: true,\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'signedLinesCalculationSheetAttachedCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'signedLinesCalculationSheetAttached')\r\n        ?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'grossPremiumAmountNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'grossPremiumAmount')?.numberValue || '',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'grossPremiumAmountCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'grossPremiumAmount')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'slipOrderNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'slipOrder')?.numberValue || '',\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'slipOrderCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'slipOrder')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'totalBrokerageNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'totalBrokerage')?.numberValue || '',\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'totalBrokerageCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'totalBrokerage')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'clientDiscountNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'clientDiscount')?.numberValue || '',\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'clientDiscountCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'clientDiscount')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'thirdPartyNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'thirdParty')?.numberValue || '',\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'thirdPartyString',\r\n      type: 'select',\r\n      value: selectedThirdParty() || utils.processingInstructions.getFinancialField(instruction, 'thirdParty')?.stringValue || '',\r\n      options:\r\n        optionsThirdParty?.map((option) => ({\r\n          value: option?.id,\r\n          label: option?.partnerName,\r\n        })) || [],\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'thirdPartyCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'thirdParty')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'pfinternalNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'pfinternal')?.numberValue || '',\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'pfinternalString',\r\n      type: 'select',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'pfinternal')?.stringValue || '',\r\n      options: optionsDepartments,\r\n      optionKey: 'id',\r\n      optionLabel: 'deptName',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'pfinternalCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'pfinternal')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'retainedBrokerageNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerage')?.numberValue || '',\r\n      muiComponentProps: {\r\n        autoComplete: 'off',\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'retainedBrokerageCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerage')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'retainedBrokerageCurrencyCodeString',\r\n      value:\r\n        utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerageCurrencyCode')?.stringValue || constants.CURRENCY_USD,\r\n      optionsKey: 'premiumCurrency',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'retainedBrokerageCurrencyCodeCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'retainedBrokerageCurrencyCode')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'feesNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'fees')?.numberValue || '',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'feesCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'fees')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'otherDeductionsNumber',\r\n      type: 'number',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'otherDeductions')?.numberValue || '',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'otherDeductionsCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'otherDeductions')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'settlementCurrencyCodeIdNumber',\r\n      type: 'select',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'settlementCurrencyCodeId')?.numberValue || '',\r\n      options: refDataCurrencies,\r\n      optionKey: 'currencyCodeID',\r\n      optionLabel: 'currencyCd',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'settlementCurrencyCodeIdCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'settlementCurrencyCodeId')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'paymentBasisNumber',\r\n      type: 'select',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'paymentBasis')?.numberValue || '',\r\n      options: paymentBasisOptions,\r\n      optionKey: 'id',\r\n      optionLabel: 'name',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'paymentBasisCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'paymentBasis')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'ppwOrPpcString',\r\n      type: 'select',\r\n      value:\r\n        validateWarrantyListValue()?.warrantyCode?.toLowerCase() ||\r\n        utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')?.stringValue ||\r\n        '',\r\n      options: warrantyListOptions,\r\n      optionKey: 'code',\r\n      optionLabel: 'description',\r\n      displayError: validateWarrantyListValue()?.displayError || false,\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n    {\r\n      name: 'ppwOrPpcDate',\r\n      type: 'datepicker',\r\n      value: validateWarrantyListValue()?.warrantyDate\r\n        ? moment(validateWarrantyListValue()?.warrantyDate)\r\n        : null || utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')?.dateValue\r\n          ? moment(utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')?.dateValue)\r\n          : null,\r\n      outputFormat: 'iso',\r\n      placeholder: utils.string.t('app.selectDate'),\r\n      muiComponentProps: {\r\n        disabled: isReadOnly,\r\n      },\r\n      muiPickerProps: {\r\n        format: config.ui.format.date.text,\r\n        clearable: true,\r\n      },\r\n    },\r\n    {\r\n      name: 'ppwOrPpcCheckbox',\r\n      type: 'checkbox',\r\n      value: utils.processingInstructions.getFinancialField(instruction, 'ppwOrPpc')?.approvedByAuthorisedSignatory,\r\n      disabled: !isCheckboxesEditable,\r\n    },\r\n    {\r\n      name: 'notes',\r\n      label: utils.string.t('processingInstructions.details.notes'),\r\n      type: 'textarea',\r\n      value: instruction?.details?.notes || '',\r\n      muiComponentProps: {\r\n        inputProps: { maxLength: 4000 },\r\n        multiline: true,\r\n        minRows: 4,\r\n        maxRows: 8,\r\n        disabled: isReadOnly,\r\n      },\r\n    },\r\n  ];\r\n  const retainedBrokerageCurrencyCodeField = utils.form.getFieldProps(fields, 'retainedBrokerageCurrencyCodeString');\r\n\r\n  const [defaultValues, setDefaultValues] = useState();\r\n  const [retainedBrokerageAmount, setRetainedBrokerageAmount] = useState('');\r\n  const [convertedBrokerage, setConvertedBrokerage] = useState();\r\n  const [totalAmount, setTotalAmount] = useState('');\r\n  const [documentNotUploadedError, setDocumentNotUploadedError] = useState({ premiumTaxDocument: false, signedLinesDocument: false });\r\n\r\n  const formValues = childRef?.current?.props?.values;\r\n  const retainedBrokerageCurrencyCode =\r\n    formValues?.retainedBrokerageCurrencyCodeString ||\r\n    retainedBrokerageCurrencyCodeField?.defaultValue ||\r\n    retainedBrokerageCurrencyCodeField?.value;\r\n\r\n  const getRetainedBrokerageAmount = ({\r\n    grossPremiumAmount,\r\n    slipOrder,\r\n    retainedBrokerage,\r\n    retainedBrokerageCurrencyCode,\r\n    retainedBrokerageAmount,\r\n  }) => {\r\n    const amount = utils.processingInstructions.getRetainedBrokerageValue(grossPremiumAmount, slipOrder, retainedBrokerage);\r\n    const brokerage = utils.processingInstructions.getRetainedBrokerageConvertedValue(\r\n      retainedBrokerageCurrencyCode,\r\n      retainedBrokerageAmount\r\n    );\r\n\r\n    setRetainedBrokerageAmount(amount);\r\n    setConvertedBrokerage(brokerage);\r\n    dispatch(\r\n      storeRetainedBrokerageAmountForPdf({\r\n        retBrokerageAmt: amount,\r\n        convertedBrokerageAmt: brokerage,\r\n      })\r\n    );\r\n  };\r\n\r\n  const getTotalAmount = ({ clientDiscount, thirdPartyCommissionSharing, pfinternalCommissionSharing, retainedBrokerage }) => {\r\n    if (clientDiscount && thirdPartyCommissionSharing && pfinternalCommissionSharing && retainedBrokerage) {\r\n      const sumValuesArray = [clientDiscount, thirdPartyCommissionSharing, pfinternalCommissionSharing, retainedBrokerage];\r\n\r\n      setTotalAmount(utils.generic.getSumOfArray(sumValuesArray, config.ui.format.percent.decimal));\r\n      dispatch(storeTotalAmountForPdf(utils.generic.getSumOfArray(sumValuesArray, config.ui.format.percent.decimal)));\r\n    } else {\r\n      setTotalAmount('');\r\n    }\r\n  };\r\n\r\n  const checkPremiumTaxDocumentAndSignedLinesDocument = () => {\r\n    const formValues = childRef?.current?.props?.values || {};\r\n    if (\r\n      (formValues.premiumTaxCalculationSheetAttachedNumber === 1 && !documents.premiumTaxDocument) ||\r\n      (formValues.signedLinesCalculationSheetAttachedNumber === 1 && !documents.signedLinesDocument)\r\n    ) {\r\n      dispatch(\r\n        enqueueNotification(\r\n          utils.string.t('processingInstructions.details.noDocumentUploaded', {\r\n            documentType:\r\n              (formValues.premiumTaxCalculationSheetAttachedNumber === 1 &&\r\n                !documents.premiumTaxDocument &&\r\n                formValues.signedLinesCalculationSheetAttachedNumber === 1 &&\r\n                !documents.signedLinesDocument &&\r\n                utils.string.t('processingInstructions.details.premiumTaxCalculationSheetAttachedAndSignedLinesCalculationAttached')) ||\r\n              (formValues.premiumTaxCalculationSheetAttachedNumber === 1 &&\r\n                !documents.premiumTaxDocument &&\r\n                utils.string.t('processingInstructions.details.premiumTaxCalculationSheetAttached')) ||\r\n              (formValues.signedLinesCalculationSheetAttachedNumber === 1 &&\r\n                !documents.signedLinesDocument &&\r\n                utils.string.t('processingInstructions.details.signedLinesCalculationAttached')),\r\n          }),\r\n          'warning'\r\n        )\r\n      );\r\n      setDocumentNotUploadedError({\r\n        premiumTaxDocument: formValues.premiumTaxCalculationSheetAttachedNumber === 1 && !documents.premiumTaxDocumen,\r\n        signedLinesDocument: formValues.signedLinesCalculationSheetAttachedNumber === 1 && !documents.signedLinesDocument,\r\n      });\r\n      return true;\r\n    }\r\n    setDocumentNotUploadedError({\r\n      premiumTaxDocument: false,\r\n      signedLinesDocument: false,\r\n    });\r\n    return false;\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (checkPremiumTaxDocumentAndSignedLinesDocument()) {\r\n      return;\r\n    }\r\n    handlers.next();\r\n  };\r\n\r\n  const handleSave = (type) => {\r\n    if (type === constants.SAVE_NEXT && checkPremiumTaxDocumentAndSignedLinesDocument()) {\r\n      return;\r\n    }\r\n    setDocumentNotUploadedError({\r\n      premiumTaxDocument: false,\r\n      signedLinesDocument: false,\r\n    });\r\n    const formValues = childRef?.current?.props?.values || {};\r\n    const financialChecklistBlank = [\r\n      { name: 'signedLinesCalculationSheetAttached', types: ['Number'] },\r\n      { name: 'premiumTaxCalculationSheetAttached', types: ['Number'] },\r\n      { name: 'grossPremiumAmount', types: ['Number'] },\r\n      { name: 'slipOrder', types: ['Number'] },\r\n      { name: 'totalBrokerage', types: ['Number'] },\r\n      { name: 'fees', types: ['Number'] },\r\n      { name: 'otherDeductions', types: ['Number'] },\r\n      { name: 'settlementCurrencyCodeId', types: ['Number'] },\r\n      { name: 'paymentBasis', types: ['Number'] },\r\n      { name: 'ppwOrPpc', types: ['String', 'Date'] },\r\n      { name: 'clientDiscount', types: ['Number'] },\r\n      { name: 'thirdParty', types: ['Number', 'String'] },\r\n      { name: 'pfinternal', types: ['Number', 'String'] },\r\n      { name: 'retainedBrokerage', types: ['Number'] },\r\n      { name: 'retainedBrokerageCurrencyCode', types: ['String'] },\r\n    ];\r\n    const defaultWarrantyDetails = utils.generic.isValidArray(selectedRiskRef?.warrantyDetails?.warrantyList, true)\r\n      ? isNumber(formValues['ppwOrPpcString'])\r\n        ? selectedRiskRef.warrantyDetails.warrantyList.find((a) => a.warrantyTypeId === formValues['ppwOrPpcString'])\r\n        : selectedRiskRef.warrantyDetails.warrantyList.find(\r\n          (a) => a.warrantyCode?.toLowerCase() === formValues['ppwOrPpcString']?.toLowerCase()\r\n        )\r\n      : null;\r\n    const updatedInstruction = {\r\n      ...instruction,\r\n      details: {\r\n        ...instruction.details,\r\n        highPriority: formValues.highPriority,\r\n        frontEndSendDocs: formValues.frontEndSendDocs,\r\n        notes: formValues.notes,\r\n        retainedBrokerageCurrencyCode,\r\n\r\n        warrantyDescription: defaultWarrantyDetails?.warrantyDescription || '',\r\n        warrantyTypeId: defaultWarrantyDetails?.warrantyTypeId || '',\r\n        warrantyDate: defaultWarrantyDetails?.warrantyDate || '',\r\n        warrantyCode: isNumber(formValues['ppwOrPpcString'])\r\n          ? warrantyListOptions.find((a) => a.warrantyTypeID === formValues['ppwOrPpcString'])?.code || null\r\n          : formValues['ppwOrPpcString'],\r\n      },\r\n      financialChecklist: financialChecklistBlank.map(({ name, types }) => {\r\n        return types.reduce(\r\n          (acc, type) => {\r\n            const valueKey = `${name}${type}`;\r\n            const isWarrantyType = valueKey === 'ppwOrPpcString';\r\n            const warrantyType = isWarrantyType ? formValues['ppwOrPpcString'] : '';\r\n\r\n            const isThirdPartyString = valueKey === 'thirdPartyString';\r\n            const thirdPartyNumberValue = formValues['thirdPartyNumber'];\r\n            const thirdPartyStringValue = Boolean(thirdPartyNumberValue) && formValues[valueKey]\r\n              ? optionsThirdParty?.find((val) => val.id === formValues[valueKey]) : null || {};\r\n\r\n            const isPfInternalString = valueKey === 'pfinternalString';\r\n            const pfInternalNumberValue = formValues['pfinternalNumber'];\r\n            const pfInternalStringValue = Boolean(pfInternalNumberValue) ? formValues[valueKey] : '';\r\n\r\n            const value = isWarrantyType\r\n              ? warrantyType\r\n              : isThirdPartyString\r\n                ? thirdPartyStringValue?.partnerName\r\n                : isPfInternalString\r\n                  ? pfInternalStringValue\r\n                  : formValues[valueKey];\r\n            const isDate = type === 'Date';\r\n            const isValidDate = isDate && moment(value).isValid();\r\n\r\n            return {\r\n              ...acc,\r\n              [`${type.toLowerCase()}Value`]: isDate ? (isValidDate ? moment(value).format('YYYY-MM-DD') : '') : value,\r\n              approvedByAuthorisedSignatory: formValues[`${name}Checkbox`],\r\n            };\r\n          },\r\n          { name }\r\n        );\r\n      }),\r\n    };\r\n\r\n    dispatch(updateProcessingInstruction(updatedInstruction, formValues)).then((response) => {\r\n      if (response?.status === constants.API_RESPONSE_OK) {\r\n        if (type === 'saveNext') {\r\n          handlers.next();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    const reset = childRef?.current?.props?.resetFunc;\r\n\r\n    if (utils.generic.isFunction(reset)) {\r\n      reset(defaultValues, { keepDirty: false });\r\n    }\r\n    setDocumentNotUploadedError({\r\n      premiumTaxDocument: false,\r\n      signedLinesDocument: false,\r\n    });\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      const reset = childRef?.current?.props?.resetFunc;\r\n      const updatedDefaultValues = {\r\n        ...utils.form.getInitialValues(fields),\r\n      };\r\n\r\n      setDefaultValues(updatedDefaultValues);\r\n\r\n      if (utils.generic.isFunction(reset)) {\r\n        reset(updatedDefaultValues, {\r\n          keepDirty: false,\r\n        });\r\n      }\r\n    },\r\n    [instruction] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const handleUploadedDocument = (data, documentTypeKey) => {\r\n    const newFiles = data?.data?.documentDto;\r\n    if (!utils.generic.isValidArray(newFiles)) return;\r\n    const newGxbDocs = newFiles.map((file) => {\r\n      return {\r\n        ...file,\r\n        folderUuid: file?.folderUid,\r\n        name: file?.documentName,\r\n        path: file?.documentPath,\r\n        source: file?.documentSource,\r\n        typeId: file?.documentTypeId,\r\n        uuid: file?.documentUid,\r\n      };\r\n    });\r\n\r\n    const updatedDocuments = {\r\n      ...documents,\r\n      ...(documentTypeKey === constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.piPremiumCalculation && {\r\n        premiumTaxDocument: newGxbDocs[0],\r\n      }),\r\n      ...(documentTypeKey === constants.DMS_DOCUMENT_TYPE_SECTION_KEYS.piMarketSigned && {\r\n        signedLinesDocument: newGxbDocs[0],\r\n      }),\r\n    };\r\n    dispatch(storeProcessingInstructionDocuments(updatedDocuments));\r\n  };\r\n\r\n  const uploadPremiumTaxSignedLinesModal = (documentTypeKey) => (files) => {\r\n    dispatch(addLoader('DmsUploadFiles'));\r\n\r\n    dispatch(\r\n      showModal({\r\n        component: 'DMS_UPLOAD_FILES',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('dms.upload.modalItems.uploadDocuments'),\r\n          maxWidth: 'xl',\r\n          componentProps: {\r\n            files,\r\n            context: constants.DMS_CONTEXT_PROCESSING_INSTRUCTION,\r\n            referenceId: Number(instruction?.id),\r\n            sourceId: Number(selectedRiskRef?.xbInstanceId),\r\n            documentTypeKey,\r\n            postDmsDocumentsSuccess: (data) => handleUploadedDocument(data, documentTypeKey),\r\n            confirmLabel: utils.string.t('app.ok'),\r\n            cancelLabel: utils.string.t('app.goBack'),\r\n            confirmMessage: utils.string.t('processingInstructions.documentsWillNotBeSaved'),\r\n            buttonColors: { confirm: 'secondary', cancel: 'primary' },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const confirmRemoveDocumentModal = (file, removeDocumentType) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('processingInstructions.checklist.warning.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('app.yes'),\r\n            cancelLabel: utils.string.t('app.no'),\r\n            confirmMessage: utils.string.t('processingInstructions.removeDocumentWarning'),\r\n            buttonColors: { confirm: 'secondary', cancel: 'primary' },\r\n            submitHandler: () => {\r\n              dispatch(removePremiumTaxSignedLinesDocument({ docIds: file?.documentId, removeDocumentType, documents }));\r\n            },\r\n            cancelHandler: () => { },\r\n            handleClose: () => { },\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleLinkDownload = (file) => {\r\n    dispatch(viewDocumentsDownload({ documentId: file?.documentId, documentName: file?.name }));\r\n  };\r\n\r\n  // abort if data is not ready/available\r\n  if (!defaultValues || !instruction) return null;\r\n\r\n  return (\r\n    <ProcessingInstructionsDetailsView\r\n      instructionId={instruction?.id}\r\n      documents={documents}\r\n      fields={fields}\r\n      defaultValues={defaultValues}\r\n      retainedBrokerageAmount={retainedBrokerageAmount}\r\n      convertedBrokerage={convertedBrokerage}\r\n      premiumCurrency={retainedBrokerageCurrencyCode}\r\n      sumTotal={totalAmount}\r\n      riskRefId={selectedRiskRef?.riskRefId}\r\n      isEditable={isEditable}\r\n      isReadOnly={isReadOnly}\r\n      documentNotUploadedError={documentNotUploadedError}\r\n      handlers={{\r\n        ...handlers,\r\n        next: handleNext,\r\n        save: handleSave,\r\n        cancel: handleCancel,\r\n        getRetainedBrokerageAmount,\r\n        getTotalAmount,\r\n        uploadPremiumTaxSignedLinesModal,\r\n        confirmRemoveDocumentModal,\r\n        download: handleLinkDownload,\r\n      }}\r\n      ref={childRef}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}