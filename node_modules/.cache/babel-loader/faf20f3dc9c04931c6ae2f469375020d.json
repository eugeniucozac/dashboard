{"ast":null,"code":"import _regeneratorRuntime from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\DepartmentAccountsCalendarTable\\\\DepartmentAccountsCalendarTable.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport get from 'lodash/get'; // app\n\nimport { Skeleton } from 'components';\nimport styles from './DepartmentAccountsCalendarTable.styles';\nimport { DepartmentAccountsCalendarTableView } from './DepartmentAccountsCalendarTable.view';\nimport { selectCalendarViewEdit, selectPlacementId, selectRefDataStatusesPlacement, selectUser } from 'stores';\nimport * as utils from 'utils'; // mui\n\nimport { makeStyles } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar DepartmentAccountsCalendarTable = function DepartmentAccountsCalendarTable(_ref) {\n  _s();\n\n  var cols = _ref.cols,\n      handlers = _ref.handlers,\n      deptId = _ref.deptId,\n      monthDetails = _ref.monthDetails;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      firstItem = _useState4[0],\n      setFirstItem = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var placementSelectedId = useSelector(selectPlacementId);\n  var refDataStatusesPlacement = useSelector(selectRefDataStatusesPlacement);\n  var calendarViewEdit = useSelector(selectCalendarViewEdit);\n  var today = utils.date.today();\n  var classes = makeStyles(styles, {\n    name: 'DepartmentAccountsCalendarTable'\n  })({\n    wide: true\n  });\n  var user = useSelector(selectUser);\n  var endpoint = useSelector(function (state) {\n    return get(state, 'config.vars.endpoint');\n  });\n  var auth = user.auth;\n  useEffect(function () {\n    var isSubscribed = true;\n\n    var fetchTable = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var endpointParams, response, json, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                endpointParams = {\n                  month: monthDetails.month,\n                  year: monthDetails.year\n                };\n                _context.next = 4;\n                return utils.api.get({\n                  token: auth.accessToken,\n                  endpoint: endpoint.edge,\n                  path: \"api/placement/department/\".concat(deptId, \"/calendar\"),\n                  params: endpointParams\n                });\n\n              case 4:\n                response = _context.sent;\n                _context.next = 7;\n                return utils.api.handleResponse(response);\n\n              case 7:\n                json = _context.sent;\n                _context.next = 10;\n                return utils.api.handleData(json);\n\n              case 10:\n                data = _context.sent;\n\n                if (isSubscribed) {\n                  setItems(utils.placement.parsePlacements(data));\n                  setIsLoading(false);\n                }\n\n                _context.next = 16;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](0);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 14]]);\n      }));\n\n      return function fetchTable() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchTable();\n    return function () {\n      return isSubscribed = false;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    if (today === monthDetails.date && items.length) {\n      var firstItemToday = items.findIndex(function (item) {\n        return item.inceptionDate >= today;\n      });\n      firstItemToday > 0 && setFirstItem(firstItemToday);\n    }\n  }, [today, monthDetails, items]);\n  useEffect(function () {\n    if (calendarViewEdit) {\n      var listItems = items.map(function (item) {\n        return item.id === calendarViewEdit.id ? calendarViewEdit : item;\n      }).filter(function (item) {\n        return item.isHidden === false && deptId === item.departmentId;\n      });\n      setItems(listItems);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [calendarViewEdit]);\n  return isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.monthBox,\n    \"data-testid\": \"department-accounts-table-loading\",\n    children: /*#__PURE__*/_jsxDEV(Skeleton, {\n      height: 40,\n      animation: \"wave\",\n      displayNumber: 10\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, _this) : /*#__PURE__*/_jsxDEV(DepartmentAccountsCalendarTableView, {\n    isLoading: isLoading,\n    items: items,\n    firstItem: firstItem,\n    cols: cols,\n    placementId: placementSelectedId,\n    placementStatuses: refDataStatusesPlacement,\n    handleClickRow: handlers.handleClickRow,\n    handleDoubleClickRow: handlers.handleDoubleClickRow,\n    handleNtuClick: handlers.handleNtuClick,\n    handleEditPlacementClick: handlers.handleEditPlacementClick,\n    handleRemovePlacementClick: handlers.handleRemovePlacementClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(DepartmentAccountsCalendarTable, \"A6fRFzasD+vP5A1/YVObafZrI6s=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = DepartmentAccountsCalendarTable;\nDepartmentAccountsCalendarTable.propTypes = {\n  rows: PropTypes.array.isRequired,\n  cols: PropTypes.array.isRequired,\n  monthDetails: PropTypes.shape({\n    month: PropTypes.string.isRequired,\n    monthName: PropTypes.string.isRequired,\n    year: PropTypes.string.isRequired\n  }).isRequired,\n  handlers: PropTypes.shape({\n    handleChangePage: PropTypes.func.isRequired,\n    handleChangeRowsPerPage: PropTypes.func.isRequired,\n    handleClickRow: PropTypes.func,\n    handleDoubleClickRow: PropTypes.func,\n    handleNtuClick: PropTypes.func,\n    handleEditPlacementClick: PropTypes.func,\n    handleRemovePlacementClick: PropTypes.func\n  }).isRequired\n};\nDepartmentAccountsCalendarTable.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [],\n  \"displayName\": \"DepartmentAccountsCalendarTable\",\n  \"props\": {\n    \"rows\": {\n      \"type\": {\n        \"name\": \"array\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"cols\": {\n      \"type\": {\n        \"name\": \"array\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"monthDetails\": {\n      \"type\": {\n        \"name\": \"shape\",\n        \"value\": {\n          \"month\": {\n            \"name\": \"string\",\n            \"required\": true\n          },\n          \"monthName\": {\n            \"name\": \"string\",\n            \"required\": true\n          },\n          \"year\": {\n            \"name\": \"string\",\n            \"required\": true\n          }\n        }\n      },\n      \"required\": true,\n      \"description\": \"\"\n    },\n    \"handlers\": {\n      \"type\": {\n        \"name\": \"shape\",\n        \"value\": {\n          \"handleChangePage\": {\n            \"name\": \"func\",\n            \"required\": true\n          },\n          \"handleChangeRowsPerPage\": {\n            \"name\": \"func\",\n            \"required\": true\n          },\n          \"handleClickRow\": {\n            \"name\": \"func\",\n            \"required\": false\n          },\n          \"handleDoubleClickRow\": {\n            \"name\": \"func\",\n            \"required\": false\n          },\n          \"handleNtuClick\": {\n            \"name\": \"func\",\n            \"required\": false\n          },\n          \"handleEditPlacementClick\": {\n            \"name\": \"func\",\n            \"required\": false\n          },\n          \"handleRemovePlacementClick\": {\n            \"name\": \"func\",\n            \"required\": false\n          }\n        }\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};\nexport default DepartmentAccountsCalendarTable;\n\nif (typeof STORYBOOK_REACT_CLASSES !== \"undefined\") {\n  STORYBOOK_REACT_CLASSES[\"src\\\\modules\\\\DepartmentAccountsCalendarTable\\\\DepartmentAccountsCalendarTable.js\"] = {\n    name: \"DepartmentAccountsCalendarTable\",\n    docgenInfo: DepartmentAccountsCalendarTable.__docgenInfo,\n    path: \"src\\\\modules\\\\DepartmentAccountsCalendarTable\\\\DepartmentAccountsCalendarTable.js\"\n  };\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"DepartmentAccountsCalendarTable\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/DepartmentAccountsCalendarTable/DepartmentAccountsCalendarTable.js"],"names":["React","useState","useEffect","PropTypes","useSelector","get","Skeleton","styles","DepartmentAccountsCalendarTableView","selectCalendarViewEdit","selectPlacementId","selectRefDataStatusesPlacement","selectUser","utils","makeStyles","DepartmentAccountsCalendarTable","cols","handlers","deptId","monthDetails","items","setItems","firstItem","setFirstItem","isLoading","setIsLoading","placementSelectedId","refDataStatusesPlacement","calendarViewEdit","today","date","classes","name","wide","user","endpoint","state","auth","isSubscribed","fetchTable","endpointParams","month","year","api","token","accessToken","edge","path","params","response","handleResponse","json","handleData","data","placement","parsePlacements","length","firstItemToday","findIndex","item","inceptionDate","listItems","map","id","filter","isHidden","departmentId","monthBox","handleClickRow","handleDoubleClickRow","handleNtuClick","handleEditPlacementClick","handleRemovePlacementClick","propTypes","rows","array","isRequired","shape","string","monthName","handleChangePage","func","handleChangeRowsPerPage"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { Skeleton } from 'components';\r\nimport styles from './DepartmentAccountsCalendarTable.styles';\r\nimport { DepartmentAccountsCalendarTableView } from './DepartmentAccountsCalendarTable.view';\r\nimport { selectCalendarViewEdit, selectPlacementId, selectRefDataStatusesPlacement, selectUser } from 'stores';\r\n\r\nimport * as utils from 'utils';\r\n\r\n// mui\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst DepartmentAccountsCalendarTable = ({ cols, handlers, deptId, monthDetails }) => {\r\n  const [items, setItems] = useState([]);\r\n  const [firstItem, setFirstItem] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const placementSelectedId = useSelector(selectPlacementId);\r\n  const refDataStatusesPlacement = useSelector(selectRefDataStatusesPlacement);\r\n  const calendarViewEdit = useSelector(selectCalendarViewEdit);\r\n  const today = utils.date.today();\r\n\r\n  const classes = makeStyles(styles, { name: 'DepartmentAccountsCalendarTable' })({ wide: true });\r\n\r\n  const user = useSelector(selectUser);\r\n  const endpoint = useSelector((state) => get(state, 'config.vars.endpoint'));\r\n  const { auth } = user;\r\n\r\n  useEffect(() => {\r\n    let isSubscribed = true;\r\n\r\n    const fetchTable = async () => {\r\n      try {\r\n        const endpointParams = {\r\n          month: monthDetails.month,\r\n          year: monthDetails.year,\r\n        };\r\n\r\n        const response = await utils.api.get({\r\n          token: auth.accessToken,\r\n          endpoint: endpoint.edge,\r\n          path: `api/placement/department/${deptId}/calendar`,\r\n          params: endpointParams,\r\n        });\r\n        const json = await utils.api.handleResponse(response);\r\n        const data = await utils.api.handleData(json);\r\n        if (isSubscribed) {\r\n          setItems(utils.placement.parsePlacements(data));\r\n          setIsLoading(false);\r\n        }\r\n      } catch (err) {}\r\n    };\r\n\r\n    fetchTable();\r\n\r\n    return () => (isSubscribed = false);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (today === monthDetails.date && items.length) {\r\n      const firstItemToday = items.findIndex((item) => item.inceptionDate >= today);\r\n\r\n      firstItemToday > 0 && setFirstItem(firstItemToday);\r\n    }\r\n  }, [today, monthDetails, items]);\r\n\r\n  useEffect(() => {\r\n    if (calendarViewEdit) {\r\n      const listItems = items\r\n        .map((item) => (item.id === calendarViewEdit.id ? calendarViewEdit : item))\r\n        .filter((item) => {\r\n          return item.isHidden === false && deptId === item.departmentId;\r\n        });\r\n      setItems(listItems);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [calendarViewEdit]);\r\n\r\n  return isLoading ? (\r\n    <div className={classes.monthBox} data-testid=\"department-accounts-table-loading\">\r\n      <Skeleton height={40} animation=\"wave\" displayNumber={10} />\r\n    </div>\r\n  ) : (\r\n    <DepartmentAccountsCalendarTableView\r\n      isLoading={isLoading}\r\n      items={items}\r\n      firstItem={firstItem}\r\n      cols={cols}\r\n      placementId={placementSelectedId}\r\n      placementStatuses={refDataStatusesPlacement}\r\n      handleClickRow={handlers.handleClickRow}\r\n      handleDoubleClickRow={handlers.handleDoubleClickRow}\r\n      handleNtuClick={handlers.handleNtuClick}\r\n      handleEditPlacementClick={handlers.handleEditPlacementClick}\r\n      handleRemovePlacementClick={handlers.handleRemovePlacementClick}\r\n    />\r\n  );\r\n};\r\n\r\nDepartmentAccountsCalendarTable.propTypes = {\r\n  rows: PropTypes.array.isRequired,\r\n  cols: PropTypes.array.isRequired,\r\n  monthDetails: PropTypes.shape({\r\n    month: PropTypes.string.isRequired,\r\n    monthName: PropTypes.string.isRequired,\r\n    year: PropTypes.string.isRequired,\r\n  }).isRequired,\r\n  handlers: PropTypes.shape({\r\n    handleChangePage: PropTypes.func.isRequired,\r\n    handleChangeRowsPerPage: PropTypes.func.isRequired,\r\n    handleClickRow: PropTypes.func,\r\n    handleDoubleClickRow: PropTypes.func,\r\n    handleNtuClick: PropTypes.func,\r\n    handleEditPlacementClick: PropTypes.func,\r\n    handleRemovePlacementClick: PropTypes.func,\r\n  }).isRequired,\r\n};\r\n\r\nexport default DepartmentAccountsCalendarTable;\r\n"]},"metadata":{},"sourceType":"module"}