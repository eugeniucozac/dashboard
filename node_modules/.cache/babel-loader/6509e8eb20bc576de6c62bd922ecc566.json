{"ast":null,"code":"import _defineProperty from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\DepartmentAccountsTable\\\\DepartmentAccountsTable.view.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport get from 'lodash/get';\nimport uniqBy from 'lodash/uniqBy'; // app\n\nimport styles from './DepartmentAccountsTable.styles';\nimport { AvatarGroup, SeparatedList, Overflow, Pagination, PopoverMenu, Restricted, Status, TableCell, TableHead, Translate } from 'components';\nimport * as constants from 'consts';\nimport * as utils from 'utils';\nimport { useMedia } from 'hooks';\nimport config from 'config'; // mui\n\nimport { makeStyles, Table, TableRow, TableBody } from '@material-ui/core';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nDepartmentAccountsTableView.propTypes = {\n  items: PropTypes.array.isRequired,\n  cols: PropTypes.array.isRequired,\n  sort: PropTypes.object.isRequired,\n  pagination: PropTypes.shape({\n    obj: PropTypes.object.isRequired,\n    handlers: PropTypes.shape({\n      handleChangePage: PropTypes.func.isRequired,\n      handleChangeRowsPerPage: PropTypes.func.isRequired\n    }).isRequired\n  }).isRequired,\n  placementId: PropTypes.number,\n  placementStatuses: PropTypes.array,\n  handleClickRow: PropTypes.func.isRequired,\n  handleDoubleClickRow: PropTypes.func.isRequired,\n  handleNtuClick: PropTypes.func.isRequired,\n  handleRemovePlacementClick: PropTypes.func.isRequired,\n  handleEditPlacementClick: PropTypes.func.isRequired\n};\nDepartmentAccountsTableView.defaultProps = {\n  pagination: {\n    obj: {},\n    handlers: {}\n  }\n};\nexport function DepartmentAccountsTableView(_ref) {\n  _s();\n\n  var _this = this;\n\n  var items = _ref.items,\n      cols = _ref.cols,\n      sort = _ref.sort,\n      pagination = _ref.pagination,\n      placementId = _ref.placementId,\n      placementStatuses = _ref.placementStatuses,\n      handleClickRow = _ref.handleClickRow,\n      handleDoubleClickRow = _ref.handleDoubleClickRow,\n      handleNtuClick = _ref.handleNtuClick,\n      handleEditPlacementClick = _ref.handleEditPlacementClick,\n      handleRemovePlacementClick = _ref.handleRemovePlacementClick;\n  var media = useMedia();\n  var classes = makeStyles(styles, {\n    name: 'DepartmentAccountsTable'\n  })({\n    wide: media.wideUp\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-testid\": \"department-accounts-table\",\n    children: [/*#__PURE__*/_jsxDEV(Overflow, {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          columns: cols,\n          sorting: sort\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          \"data-testid\": \"renewal-list\",\n          children: items.map(function (item) {\n            var _classnames;\n\n            var statusPlacementNtuId = utils.referenceData.status.getIdByCode(placementStatuses, constants.STATUS_PLACEMENT_NTU);\n            var statusLabel = utils.referenceData.status.getLabelById(placementStatuses, item.statusId);\n            var brokers = utils.users.getBrokers(item.users, {\n              gxbUsersIncluded: true\n            });\n            var cobrokersPlacement = utils.users.getCobrokers(item.users);\n            var cobrokersOffice = utils.placement.getOfficeCobrokers(item);\n            var cobrokers = uniqBy([].concat(_toConsumableArray(cobrokersPlacement), _toConsumableArray(cobrokersOffice)));\n            return /*#__PURE__*/_jsxDEV(TableRow, {\n              onClick: handleClickRow(item.id),\n              onDoubleClick: handleDoubleClickRow(item.id),\n              hover: true,\n              className: classnames(classes.row, (_classnames = {}, _defineProperty(_classnames, classes.rowNew, Boolean(item.__new__)), _defineProperty(_classnames, classes.rowSelected, item.id === placementId), _classnames)),\n              \"data-testid\": \"placement.\".concat(item.id),\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                \"data-testid\": \"insured-\".concat(item.id),\n                children: /*#__PURE__*/_jsxDEV(SeparatedList, {\n                  list: item.insureds,\n                  flag: \"isProvisional\",\n                  flagType: \"alert\",\n                  flagIcon: InfoOutlinedIcon,\n                  flagTooltip: /*#__PURE__*/_jsxDEV(Translate, {\n                    label: \"renewals.provisionalInsuredTooltip\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 36\n                  }, _this),\n                  hover: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 2,\n                compact: true,\n                nestedClasses: {\n                  root: classes.clientWrapperCell\n                },\n                \"data-testid\": \"client-office-\".concat(item.id),\n                children: /*#__PURE__*/_jsxDEV(Table, {\n                  children: /*#__PURE__*/_jsxDEV(TableBody, {\n                    children: item.clients && item.clients.map(function (client) {\n                      var _classesClientCell;\n\n                      var logo = utils.client.parent.getLogoFilePath(client);\n                      var altText = [client.parent, client.name].filter(function (i) {\n                        return i;\n                      }).join(' ');\n                      var classesClientCell = (_classesClientCell = {}, _defineProperty(_classesClientCell, classes.clientCell, true), _defineProperty(_classesClientCell, classes.clientNoOfficeCell, !logo), _classesClientCell);\n                      var colspan = logo ? 1 : 2;\n                      return /*#__PURE__*/_jsxDEV(TableRow, {\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          colSpan: colspan,\n                          borderless: true,\n                          compact: true,\n                          title: altText,\n                          nestedClasses: {\n                            root: classnames(classesClientCell)\n                          },\n                          children: [logo && /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: logo,\n                            alt: \"logo \".concat(altText),\n                            className: classes.logo\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 140,\n                            columnNumber: 44\n                          }, _this), !logo && /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: classes.clientName,\n                            children: client.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 141,\n                            columnNumber: 45\n                          }, _this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 133,\n                          columnNumber: 33\n                        }, _this), logo && /*#__PURE__*/_jsxDEV(TableCell, {\n                          borderless: true,\n                          compact: true,\n                          title: client.name,\n                          nestedClasses: {\n                            root: classes.officeCell\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: classes.officeName,\n                            children: client.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 146,\n                            columnNumber: 37\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 145,\n                          columnNumber: 35\n                        }, _this)]\n                      }, client.id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 132,\n                        columnNumber: 31\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                nowrap: true,\n                \"data-testid\": \"inceptiondate-\".concat(item.id),\n                children: utils.string.t('format.date', {\n                  value: {\n                    date: item.inceptionDate,\n                    format: config.ui.format.date.text\n                  }\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                nowrap: true,\n                compact: true,\n                children: statusLabel && /*#__PURE__*/_jsxDEV(Status, {\n                  size: media.wideUp ? 'sm' : 'xs',\n                  text: /*#__PURE__*/_jsxDEV(Translate, {\n                    label: \"status.\".concat(statusLabel)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 31\n                  }, _this),\n                  status: statusLabel,\n                  \"data-testid\": \"status-\".concat(item.id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                nowrap: true,\n                \"data-testid\": \"users-\".concat(item.id),\n                children: brokers && /*#__PURE__*/_jsxDEV(AvatarGroup, {\n                  users: brokers,\n                  max: 3,\n                  size: media.wideUp ? 22 : 20,\n                  nestedClasses: {\n                    name: classes.avatarName\n                  },\n                  testid: \"brokers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                nowrap: true,\n                \"data-testid\": \"users-\".concat(item.id),\n                children: cobrokers && /*#__PURE__*/_jsxDEV(AvatarGroup, {\n                  users: cobrokers,\n                  max: 3,\n                  size: media.wideUp ? 22 : 20,\n                  nestedClasses: {\n                    name: classes.avatarName\n                  },\n                  testid: \"cobrokers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 23\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(TableCell, {\n                menu: true,\n                children: /*#__PURE__*/_jsxDEV(Restricted, {\n                  include: [constants.ROLE_BROKER],\n                  children: utils.generic.isFunction(handleNtuClick) && /*#__PURE__*/_jsxDEV(PopoverMenu, {\n                    id: \"renewal-list\",\n                    data: {\n                      placement: item,\n                      title: utils.placement.getInsureds(item)\n                    },\n                    items: [{\n                      id: 'ntu',\n                      label: 'renewals.ntuPlacement',\n                      disabled: item.statusId === statusPlacementNtuId,\n                      callback: handleNtuClick\n                    }, {\n                      id: 'editPlacement',\n                      label: 'renewals.editPlacement',\n                      callback: handleEditPlacementClick\n                    }, {\n                      id: 'removePlacement',\n                      label: 'renewals.removePlacement',\n                      callback: handleRemovePlacementClick\n                    }]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 25\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 19\n              }, _this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      page: get(pagination, 'obj.page'),\n      count: get(pagination, 'obj.rowsTotal'),\n      rowsPerPage: get(pagination, 'obj.rowsPerPage'),\n      onChangePage: get(pagination, 'handlers.handleChangePage'),\n      onChangeRowsPerPage: get(pagination, 'handlers.handleChangeRowsPerPage')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DepartmentAccountsTableView, \"Inu6KbwmgyiVqUeOTSx0E+dAczw=\", false, function () {\n  return [useMedia];\n});\n\n_c = DepartmentAccountsTableView;\n\nvar _c;\n\n$RefreshReg$(_c, \"DepartmentAccountsTableView\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/DepartmentAccountsTable/DepartmentAccountsTable.view.js"],"names":["React","PropTypes","classnames","get","uniqBy","styles","AvatarGroup","SeparatedList","Overflow","Pagination","PopoverMenu","Restricted","Status","TableCell","TableHead","Translate","constants","utils","useMedia","config","makeStyles","Table","TableRow","TableBody","InfoOutlinedIcon","DepartmentAccountsTableView","propTypes","items","array","isRequired","cols","sort","object","pagination","shape","obj","handlers","handleChangePage","func","handleChangeRowsPerPage","placementId","number","placementStatuses","handleClickRow","handleDoubleClickRow","handleNtuClick","handleRemovePlacementClick","handleEditPlacementClick","defaultProps","media","classes","name","wide","wideUp","map","item","statusPlacementNtuId","referenceData","status","getIdByCode","STATUS_PLACEMENT_NTU","statusLabel","getLabelById","statusId","brokers","users","getBrokers","gxbUsersIncluded","cobrokersPlacement","getCobrokers","cobrokersOffice","placement","getOfficeCobrokers","cobrokers","id","row","rowNew","Boolean","__new__","rowSelected","insureds","root","clientWrapperCell","clients","client","logo","parent","getLogoFilePath","altText","filter","i","join","classesClientCell","clientCell","clientNoOfficeCell","colspan","clientName","officeCell","officeName","string","t","value","date","inceptionDate","format","ui","text","avatarName","ROLE_BROKER","generic","isFunction","title","getInsureds","label","disabled","callback"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport get from 'lodash/get';\r\nimport uniqBy from 'lodash/uniqBy';\r\n\r\n// app\r\nimport styles from './DepartmentAccountsTable.styles';\r\nimport {\r\n  AvatarGroup,\r\n  SeparatedList,\r\n  Overflow,\r\n  Pagination,\r\n  PopoverMenu,\r\n  Restricted,\r\n  Status,\r\n  TableCell,\r\n  TableHead,\r\n  Translate,\r\n} from 'components';\r\nimport * as constants from 'consts';\r\nimport * as utils from 'utils';\r\nimport { useMedia } from 'hooks';\r\nimport config from 'config';\r\n\r\n// mui\r\nimport { makeStyles, Table, TableRow, TableBody } from '@material-ui/core';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\n\r\nDepartmentAccountsTableView.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  cols: PropTypes.array.isRequired,\r\n  sort: PropTypes.object.isRequired,\r\n  pagination: PropTypes.shape({\r\n    obj: PropTypes.object.isRequired,\r\n    handlers: PropTypes.shape({\r\n      handleChangePage: PropTypes.func.isRequired,\r\n      handleChangeRowsPerPage: PropTypes.func.isRequired,\r\n    }).isRequired,\r\n  }).isRequired,\r\n  placementId: PropTypes.number,\r\n  placementStatuses: PropTypes.array,\r\n  handleClickRow: PropTypes.func.isRequired,\r\n  handleDoubleClickRow: PropTypes.func.isRequired,\r\n  handleNtuClick: PropTypes.func.isRequired,\r\n  handleRemovePlacementClick: PropTypes.func.isRequired,\r\n  handleEditPlacementClick: PropTypes.func.isRequired,\r\n};\r\n\r\nDepartmentAccountsTableView.defaultProps = {\r\n  pagination: {\r\n    obj: {},\r\n    handlers: {},\r\n  },\r\n};\r\n\r\nexport function DepartmentAccountsTableView({\r\n  items,\r\n  cols,\r\n  sort,\r\n  pagination,\r\n  placementId,\r\n  placementStatuses,\r\n  handleClickRow,\r\n  handleDoubleClickRow,\r\n  handleNtuClick,\r\n  handleEditPlacementClick,\r\n  handleRemovePlacementClick,\r\n}) {\r\n  const media = useMedia();\r\n  const classes = makeStyles(styles, { name: 'DepartmentAccountsTable' })({ wide: media.wideUp });\r\n\r\n  return (\r\n    <div data-testid=\"department-accounts-table\">\r\n      <Overflow>\r\n        <Table>\r\n          <TableHead columns={cols} sorting={sort} />\r\n\r\n          <TableBody data-testid=\"renewal-list\">\r\n            {items.map((item) => {\r\n              const statusPlacementNtuId = utils.referenceData.status.getIdByCode(placementStatuses, constants.STATUS_PLACEMENT_NTU);\r\n              const statusLabel = utils.referenceData.status.getLabelById(placementStatuses, item.statusId);\r\n              const brokers = utils.users.getBrokers(item.users, { gxbUsersIncluded: true });\r\n              const cobrokersPlacement = utils.users.getCobrokers(item.users);\r\n              const cobrokersOffice = utils.placement.getOfficeCobrokers(item);\r\n              const cobrokers = uniqBy([...cobrokersPlacement, ...cobrokersOffice]);\r\n\r\n              return (\r\n                <TableRow\r\n                  key={item.id}\r\n                  onClick={handleClickRow(item.id)}\r\n                  onDoubleClick={handleDoubleClickRow(item.id)}\r\n                  hover\r\n                  className={classnames(classes.row, {\r\n                    [classes.rowNew]: Boolean(item.__new__),\r\n                    [classes.rowSelected]: item.id === placementId,\r\n                  })}\r\n                  data-testid={`placement.${item.id}`}\r\n                >\r\n                  <TableCell data-testid={`insured-${item.id}`}>\r\n                    <SeparatedList\r\n                      list={item.insureds}\r\n                      flag=\"isProvisional\"\r\n                      flagType=\"alert\"\r\n                      flagIcon={InfoOutlinedIcon}\r\n                      flagTooltip={<Translate label=\"renewals.provisionalInsuredTooltip\" />}\r\n                      hover\r\n                    />\r\n                  </TableCell>\r\n\r\n                  <TableCell\r\n                    colSpan={2}\r\n                    compact\r\n                    nestedClasses={{ root: classes.clientWrapperCell }}\r\n                    data-testid={`client-office-${item.id}`}\r\n                  >\r\n                    <Table>\r\n                      <TableBody>\r\n                        {item.clients &&\r\n                          item.clients.map((client) => {\r\n                            const logo = utils.client.parent.getLogoFilePath(client);\r\n                            const altText = [client.parent, client.name].filter((i) => i).join(' ');\r\n\r\n                            const classesClientCell = {\r\n                              [classes.clientCell]: true,\r\n                              [classes.clientNoOfficeCell]: !logo,\r\n                            };\r\n\r\n                            const colspan = logo ? 1 : 2;\r\n\r\n                            return (\r\n                              <TableRow key={client.id}>\r\n                                <TableCell\r\n                                  colSpan={colspan}\r\n                                  borderless\r\n                                  compact\r\n                                  title={altText}\r\n                                  nestedClasses={{ root: classnames(classesClientCell) }}\r\n                                >\r\n                                  {logo && <img src={logo} alt={`logo ${altText}`} className={classes.logo} />}\r\n                                  {!logo && <span className={classes.clientName}>{client.name}</span>}\r\n                                </TableCell>\r\n\r\n                                {logo && (\r\n                                  <TableCell borderless compact title={client.name} nestedClasses={{ root: classes.officeCell }}>\r\n                                    <span className={classes.officeName}>{client.name}</span>\r\n                                  </TableCell>\r\n                                )}\r\n                              </TableRow>\r\n                            );\r\n                          })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </TableCell>\r\n\r\n                  <TableCell nowrap data-testid={`inceptiondate-${item.id}`}>\r\n                    {utils.string.t('format.date', {\r\n                      value: { date: item.inceptionDate, format: config.ui.format.date.text },\r\n                    })}\r\n                  </TableCell>\r\n\r\n                  <TableCell nowrap compact>\r\n                    {statusLabel && (\r\n                      <Status\r\n                        size={media.wideUp ? 'sm' : 'xs'}\r\n                        text={<Translate label={`status.${statusLabel}`} />}\r\n                        status={statusLabel}\r\n                        data-testid={`status-${item.id}`}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n\r\n                  <TableCell nowrap data-testid={`users-${item.id}`}>\r\n                    {brokers && (\r\n                      <AvatarGroup\r\n                        users={brokers}\r\n                        max={3}\r\n                        size={media.wideUp ? 22 : 20}\r\n                        nestedClasses={{ name: classes.avatarName }}\r\n                        testid=\"brokers\"\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n\r\n                  <TableCell nowrap data-testid={`users-${item.id}`}>\r\n                    {cobrokers && (\r\n                      <AvatarGroup\r\n                        users={cobrokers}\r\n                        max={3}\r\n                        size={media.wideUp ? 22 : 20}\r\n                        nestedClasses={{ name: classes.avatarName }}\r\n                        testid=\"cobrokers\"\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n\r\n                  <TableCell menu>\r\n                    <Restricted include={[constants.ROLE_BROKER]}>\r\n                      {utils.generic.isFunction(handleNtuClick) && (\r\n                        <PopoverMenu\r\n                          id=\"renewal-list\"\r\n                          data={{\r\n                            placement: item,\r\n                            title: utils.placement.getInsureds(item),\r\n                          }}\r\n                          items={[\r\n                            {\r\n                              id: 'ntu',\r\n                              label: 'renewals.ntuPlacement',\r\n                              disabled: item.statusId === statusPlacementNtuId,\r\n                              callback: handleNtuClick,\r\n                            },\r\n                            {\r\n                              id: 'editPlacement',\r\n                              label: 'renewals.editPlacement',\r\n                              callback: handleEditPlacementClick,\r\n                            },\r\n                            {\r\n                              id: 'removePlacement',\r\n                              label: 'renewals.removePlacement',\r\n                              callback: handleRemovePlacementClick,\r\n                            },\r\n                          ]}\r\n                        />\r\n                      )}\r\n                    </Restricted>\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </Overflow>\r\n\r\n      <Pagination\r\n        page={get(pagination, 'obj.page')}\r\n        count={get(pagination, 'obj.rowsTotal')}\r\n        rowsPerPage={get(pagination, 'obj.rowsPerPage')}\r\n        onChangePage={get(pagination, 'handlers.handleChangePage')}\r\n        onChangeRowsPerPage={get(pagination, 'handlers.handleChangeRowsPerPage')}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}