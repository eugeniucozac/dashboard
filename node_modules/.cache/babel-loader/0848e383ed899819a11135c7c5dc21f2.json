{"ast":null,"code":"import _objectSpread from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\modules\\\\ProcessingInstructionsChecklist\\\\ProcessingInstructionsChecklist.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory, useParams } from 'react-router'; // app\n\nimport ProcessingInstructionsChecklistView from './ProcessingInstructionsChecklist.view';\nimport { processingInstructionsSchema } from 'schemas';\nimport { enqueueNotification, checkListUpdate, showModal, selectUser, selectPiProducingBrokers, selectPiAccountExecutives, selectPiFacilityTypes } from 'stores';\nimport * as utils from 'utils';\nimport config from 'config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nProcessingInstructionsChecklist.propTypes = {\n  instruction: PropTypes.object.isRequired,\n  handlers: PropTypes.shape({\n    back: PropTypes.func.isRequired,\n    next: PropTypes.func.isRequired\n  }).isRequired\n};\nexport default function ProcessingInstructionsChecklist(_ref) {\n  _s();\n\n  var _instruction$riskRefe,\n      _instruction$details7,\n      _instruction$details8,\n      _instruction$details9,\n      _instruction$details10,\n      _this = this;\n\n  var instruction = _ref.instruction,\n      handlers = _ref.handlers,\n      childRef = _ref.childRef;\n  var dispatch = useDispatch();\n  var history = useHistory();\n\n  var _useParams = useParams(),\n      id = _useParams.id,\n      step = _useParams.step,\n      tab = _useParams.tab;\n\n  var producingBrokers = useSelector(selectPiProducingBrokers);\n  var accountExecutives = useSelector(selectPiAccountExecutives);\n  var facilityTypes = useSelector(selectPiFacilityTypes);\n  var user = useSelector(selectUser);\n  var columns = [{\n    id: 'detail',\n    label: utils.string.t('processingInstructions.checklist.cols.detail')\n  }, {\n    id: 'frontEndContact',\n    label: utils.string.t('processingInstructions.checklist.cols.frontEndContact'),\n    align: 'center'\n  }, {\n    id: 'authorisedSignatory',\n    label: utils.string.t('processingInstructions.checklist.cols.authorisedSignatory'),\n    align: 'center'\n  }];\n  var tabs = [{\n    value: 'general',\n    label: utils.string.t('processingInstructions.checklist.tabs.general.title')\n  }, {\n    value: 'pre-placing',\n    label: utils.string.t('processingInstructions.checklist.tabs.prePlacing.title')\n  }, {\n    value: 'mrc',\n    label: utils.string.t('processingInstructions.checklist.tabs.mrc.title')\n  }, {\n    value: 'other-details',\n    label: utils.string.t('processingInstructions.checklist.tabs.otherDetails.title')\n  }, {\n    value: 'risk-references',\n    label: utils.string.t('processingInstructions.checklist.tabs.riskRefs.title')\n  }];\n  var isValidTab = tabs.map(function (item) {\n    return item.value;\n  }).includes(tab);\n\n  var _useState = useState(isValidTab ? tab : 'general'),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedTab = _useState2[0],\n      setSelectedTab = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      defaultValues = _useState4[0],\n      setDefaultValues = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      schemaData = _useState6[0],\n      setSchemaData = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      resetKey = _useState8[0],\n      setResetKey = _useState8[1];\n\n  var leadRef = instruction === null || instruction === void 0 ? void 0 : (_instruction$riskRefe = instruction.riskReferences) === null || _instruction$riskRefe === void 0 ? void 0 : _instruction$riskRefe.find(function (r) {\n    return r.leadPolicy;\n  });\n  var isFdo = utils.processingInstructions.isFdo(instruction === null || instruction === void 0 ? void 0 : instruction.processTypeId);\n  var isDraft = utils.processingInstructions.status.isDraft(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isRejectedDraft = utils.processingInstructions.status.isRejectedDraft(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isSubmittedAuthorisedSignatory = utils.processingInstructions.status.isSubmittedAuthorisedSignatory(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var isReopened = utils.processingInstructions.status.isReopened(instruction === null || instruction === void 0 ? void 0 : instruction.statusId);\n  var userHasWritePermission = utils.app.access.feature('processingInstructions.processingInstructions', ['create', 'update'], user);\n  var userHasApproverAccess = utils.app.access.feature('processingInstructions.approverChecklist', ['create', 'update'], user);\n  var isCheckboxesEditable = userHasApproverAccess && isSubmittedAuthorisedSignatory;\n  var isEditable = userHasWritePermission && (isDraft || isRejectedDraft || isReopened);\n  var isReadOnly = !isEditable;\n\n  var getFacilityTypeId = function getFacilityTypeId() {\n    var _instruction$details;\n\n    var facilityTypeId = instruction === null || instruction === void 0 ? void 0 : (_instruction$details = instruction.details) === null || _instruction$details === void 0 ? void 0 : _instruction$details.facilityTypeId;\n\n    if (!facilityTypeId && utils.generic.isValidArray(facilityTypes, true)) {\n      var item = facilityTypes.find(function (type) {\n        var _instruction$details2;\n\n        return type.facilityTypeID === (instruction === null || instruction === void 0 ? void 0 : (_instruction$details2 = instruction.details) === null || _instruction$details2 === void 0 ? void 0 : _instruction$details2.facilityTypeId);\n      });\n      facilityTypeId = item === null || item === void 0 ? void 0 : item.facilityTypeID;\n    }\n\n    return facilityTypeId || '';\n  };\n\n  var getProducingBrokerId = function getProducingBrokerId() {\n    var _instruction$details3;\n\n    var producingBrokerId = instruction === null || instruction === void 0 ? void 0 : (_instruction$details3 = instruction.details) === null || _instruction$details3 === void 0 ? void 0 : _instruction$details3.producingBrokerId;\n\n    if (!producingBrokerId && utils.generic.isValidArray(producingBrokers, true)) {\n      var item = producingBrokers.find(function (type) {\n        var _instruction$details4;\n\n        return type.id === (instruction === null || instruction === void 0 ? void 0 : (_instruction$details4 = instruction.details) === null || _instruction$details4 === void 0 ? void 0 : _instruction$details4.producingBrokerId);\n      });\n      producingBrokerId = item === null || item === void 0 ? void 0 : item.id;\n    }\n\n    return producingBrokerId || '';\n  };\n\n  var getAccountExecutiveId = function getAccountExecutiveId() {\n    var _instruction$details5;\n\n    var accountExecutiveId = instruction === null || instruction === void 0 ? void 0 : (_instruction$details5 = instruction.details) === null || _instruction$details5 === void 0 ? void 0 : _instruction$details5.accountExecutiveId;\n\n    if (!accountExecutiveId && utils.generic.isValidArray(accountExecutives, true)) {\n      var item = accountExecutives.find(function (type) {\n        var _instruction$details6;\n\n        return type.id === (instruction === null || instruction === void 0 ? void 0 : (_instruction$details6 = instruction.details) === null || _instruction$details6 === void 0 ? void 0 : _instruction$details6.accountExecutiveId);\n      });\n      accountExecutiveId = item === null || item === void 0 ? void 0 : item.id;\n    }\n\n    return accountExecutiveId || '';\n  };\n\n  var fields = [{\n    name: 'invoicingClient',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.invoicingClient'),\n    value: (leadRef === null || leadRef === void 0 ? void 0 : leadRef.clientName) || '',\n    muiComponentProps: {\n      InputProps: {\n        readOnly: true,\n        disabled: true\n      }\n    }\n  }, {\n    name: 'contactName',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.contactName'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details7 = instruction.details) === null || _instruction$details7 === void 0 ? void 0 : _instruction$details7.contactName) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'clientEmail',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.clientEmail'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details8 = instruction.details) === null || _instruction$details8 === void 0 ? void 0 : _instruction$details8.clientEmail) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'eocInvoiceContactName',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceContactName'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details9 = instruction.details) === null || _instruction$details9 === void 0 ? void 0 : _instruction$details9.eocInvoiceContactName) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'eocInvoiceMail',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceMail'),\n    value: (instruction === null || instruction === void 0 ? void 0 : (_instruction$details10 = instruction.details) === null || _instruction$details10 === void 0 ? void 0 : _instruction$details10.eocInvoiceMail) || '',\n    muiComponentProps: {\n      inputProps: {\n        maxLength: 50\n      },\n      InputProps: {\n        readOnly: isReadOnly,\n        disabled: isReadOnly\n      }\n    }\n  }, {\n    name: 'producingBroker',\n    group: 'general',\n    type: 'select',\n    label: utils.string.t('processingInstructions.checklist.fields.producingBroker'),\n    value: getProducingBrokerId(),\n    options: producingBrokers,\n    optionKey: 'id',\n    optionLabel: 'value',\n    muiComponentProps: {\n      disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(producingBrokers)\n    }\n  }, {\n    name: 'accountExecutive',\n    group: 'general',\n    type: 'select',\n    label: utils.string.t('processingInstructions.checklist.fields.accountExecutive'),\n    value: getAccountExecutiveId(),\n    options: accountExecutives,\n    optionKey: 'id',\n    optionLabel: 'value',\n    muiComponentProps: {\n      disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(accountExecutives)\n    }\n  }].concat(_toConsumableArray(isFdo ? [{\n    name: 'businessType',\n    group: 'general',\n    type: 'text',\n    label: utils.string.t('processingInstructions.checklist.fields.businessType'),\n    value: (leadRef === null || leadRef === void 0 ? void 0 : leadRef.businessType) || '',\n    muiComponentProps: {\n      InputProps: {\n        readOnly: true,\n        disabled: true\n      }\n    }\n  }, {\n    name: 'facilityType',\n    group: 'general',\n    type: 'select',\n    label: utils.string.t('processingInstructions.checklist.fields.facilityType'),\n    value: getFacilityTypeId(),\n    options: facilityTypes,\n    optionKey: 'facilityTypeID',\n    optionLabel: 'facilityTypeDetails',\n    disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(facilityTypes)\n  }] : []));\n  useEffect(function () {\n    var _childRef$current, _childRef$current$pro;\n\n    var reset = childRef === null || childRef === void 0 ? void 0 : (_childRef$current = childRef.current) === null || _childRef$current === void 0 ? void 0 : (_childRef$current$pro = _childRef$current.props) === null || _childRef$current$pro === void 0 ? void 0 : _childRef$current$pro.resetFunc;\n    var schema = utils.schemas.parsePiChecklist(processingInstructionsSchema, instruction);\n\n    var updatedDefaultValues = _objectSpread({\n      checklist: utils.form.getNestedInitialValues(schema === null || schema === void 0 ? void 0 : schema.rows, 'columnName')\n    }, utils.form.getInitialValues(fields));\n\n    setSchemaData(schema);\n    setDefaultValues(updatedDefaultValues);\n\n    if (utils.generic.isFunction(reset)) {\n      reset(updatedDefaultValues, {\n        keepDirty: false\n      });\n    }\n  }, [instruction] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  var validateAllChecklistSelected = function validateAllChecklistSelected(valuesChecklist) {\n    return Object.values(valuesChecklist).every(function (c) {\n      return ['YES', 'NO', 'NA'].includes(c.accountHandler);\n    });\n  };\n\n  var validateChecklistDates = function validateChecklistDates(valuesChecklist) {\n    var _valuesChecklist$quot, _valuesChecklist$quot2, _valuesChecklist$duty, _valuesChecklist$duty2, _valuesChecklist$evid, _valuesChecklist$evid2;\n\n    if ((valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$quot = valuesChecklist.quotesPutUp) === null || _valuesChecklist$quot === void 0 ? void 0 : _valuesChecklist$quot.accountHandler) === 'YES' && (valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$quot2 = valuesChecklist.quotesPutUp) === null || _valuesChecklist$quot2 === void 0 ? void 0 : _valuesChecklist$quot2.signedDate) === null) {\n      return false;\n    }\n\n    if ((valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$duty = valuesChecklist.dutyOfDisclosure) === null || _valuesChecklist$duty === void 0 ? void 0 : _valuesChecklist$duty.accountHandler) === 'YES' && (valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$duty2 = valuesChecklist.dutyOfDisclosure) === null || _valuesChecklist$duty2 === void 0 ? void 0 : _valuesChecklist$duty2.signedDate) === null) {\n      return false;\n    }\n\n    if ((valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$evid = valuesChecklist.evidence) === null || _valuesChecklist$evid === void 0 ? void 0 : _valuesChecklist$evid.accountHandler) === 'YES' && (valuesChecklist === null || valuesChecklist === void 0 ? void 0 : (_valuesChecklist$evid2 = valuesChecklist.evidence) === null || _valuesChecklist$evid2 === void 0 ? void 0 : _valuesChecklist$evid2.signedDate) === null) {\n      return false;\n    }\n\n    return true;\n  };\n\n  var checklistCompletedModal = function checklistCompletedModal() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        fullWidth: true,\n        title: utils.string.t('processingInstructions.checklist.warning.title'),\n        maxWidth: 'xs',\n        componentProps: {\n          confirmLabel: utils.string.t('app.yes'),\n          cancelLabel: utils.string.t('app.no'),\n          confirmMessage: /*#__PURE__*/_jsxDEV(\"span\", {\n            dangerouslySetInnerHTML: {\n              __html: \"\".concat(utils.string.t('processingInstructions.checklist.allChecklistSelected'))\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, _this),\n          buttonColors: {\n            confirm: 'secondary',\n            cancel: 'primary'\n          },\n          submitHandler: function submitHandler() {\n            handlers.next();\n          },\n          cancelHandler: function cancelHandler() {},\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  };\n\n  var handleSave = function handleSave() {\n    var _childRef$current$pro2;\n\n    var formValues = (_childRef$current$pro2 = childRef.current.props) === null || _childRef$current$pro2 === void 0 ? void 0 : _childRef$current$pro2.values;\n    var isProducingBrokerSelected = Boolean(formValues === null || formValues === void 0 ? void 0 : formValues.producingBroker);\n    var isFacilityTypeSelected = Boolean(isFdo ? formValues === null || formValues === void 0 ? void 0 : formValues.facilityType : true);\n    var isChecklistDatesSelected = validateChecklistDates(formValues === null || formValues === void 0 ? void 0 : formValues.checklist);\n\n    if (isProducingBrokerSelected && isChecklistDatesSelected && isFacilityTypeSelected) {\n      dispatch(checkListUpdate(formValues, instruction));\n    } else if (!isProducingBrokerSelected) {\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noProducingBrokerValue', 'warning'));\n    } else if (!isFacilityTypeSelected) {\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noFacilityTypeValue', 'warning'));\n    } else if (!isChecklistDatesSelected) {\n      dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\n    }\n  };\n\n  var handleNext = function handleNext() {\n    var _childRef$current$pro3;\n\n    var formValues = (_childRef$current$pro3 = childRef.current.props) === null || _childRef$current$pro3 === void 0 ? void 0 : _childRef$current$pro3.values;\n    var isProducingBrokerSelected = Boolean(formValues === null || formValues === void 0 ? void 0 : formValues.producingBroker);\n    var isFacilityTypeSelected = Boolean(isFdo ? formValues === null || formValues === void 0 ? void 0 : formValues.facilityType : true);\n    var isChecklistCompleted = validateAllChecklistSelected(formValues === null || formValues === void 0 ? void 0 : formValues.checklist);\n\n    if (!isEditable || isChecklistCompleted || selectedTab === 'general' && isProducingBrokerSelected && isFacilityTypeSelected) {\n      handlers.next();\n    } else if (!isProducingBrokerSelected) {\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noProducingBrokerValue', 'warning'));\n    } else if (!isFacilityTypeSelected) {\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noFacilityTypeValue', 'warning'));\n    } else if (isEditable && !isChecklistCompleted) {\n      checklistCompletedModal(formValues, instruction);\n    }\n  };\n\n  var handleCancel = function handleCancel() {\n    var _childRef$current2, _childRef$current2$pr;\n\n    var reset = childRef === null || childRef === void 0 ? void 0 : (_childRef$current2 = childRef.current) === null || _childRef$current2 === void 0 ? void 0 : (_childRef$current2$pr = _childRef$current2.props) === null || _childRef$current2$pr === void 0 ? void 0 : _childRef$current2$pr.resetFunc;\n    setResetKey(new Date().getTime());\n\n    if (utils.generic.isFunction(reset)) {\n      reset(defaultValues, {\n        keepDirty: false\n      });\n    }\n  };\n\n  var showAlertNavigation = function showAlertNavigation(submitHandler, cancelHandler) {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        title: 'navigation.page.title',\n        subtitle: 'navigation.page.subtitle',\n        fullWidth: true,\n        maxWidth: 'sm',\n        componentProps: {\n          cancelLabel: utils.string.t('navigation.page.cancel'),\n          confirmLabel: utils.string.t('navigation.page.confirm'),\n          submitHandler: submitHandler,\n          cancelHandler: cancelHandler\n        }\n      }\n    }));\n  };\n\n  var toggleTab = function toggleTab(isPageDirty) {\n    return function (tab) {\n      if (isPageDirty) {\n        showAlertNavigation(function () {\n          return switchTab(tab);\n        }, function () {});\n      } else {\n        switchTab(tab);\n      }\n    };\n  };\n\n  var switchTab = function switchTab(tab) {\n    var _childRef$current$pro4;\n\n    var formValues = (_childRef$current$pro4 = childRef.current.props) === null || _childRef$current$pro4 === void 0 ? void 0 : _childRef$current$pro4.values;\n\n    var _ref2 = (formValues === null || formValues === void 0 ? void 0 : formValues.checklist) || {},\n        quotesPutUp = _ref2.quotesPutUp,\n        dutyOfDisclosure = _ref2.dutyOfDisclosure,\n        evidence = _ref2.evidence;\n\n    if (tab !== 'pre-placing') {\n      if ((quotesPutUp === null || quotesPutUp === void 0 ? void 0 : quotesPutUp.accountHandler) === 'YES' && (quotesPutUp === null || quotesPutUp === void 0 ? void 0 : quotesPutUp.signedDate) === null) {\n        dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\n        return;\n      }\n\n      if ((dutyOfDisclosure === null || dutyOfDisclosure === void 0 ? void 0 : dutyOfDisclosure.accountHandler) === 'YES' && (dutyOfDisclosure === null || dutyOfDisclosure === void 0 ? void 0 : dutyOfDisclosure.signedDate) === null) {\n        dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\n        return;\n      }\n\n      if ((evidence === null || evidence === void 0 ? void 0 : evidence.accountHandler) === 'YES' && (evidence === null || evidence === void 0 ? void 0 : evidence.signedDate) === null) {\n        dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\n        return;\n      }\n    }\n\n    setSelectedTab(tab);\n    history.replace(\"\".concat(config.routes.processingInstructions.steps, \"/\").concat(id).concat(step ? \"/\".concat(step) : '').concat(tab ? \"/\".concat(tab) : ''));\n  }; // abort if data is not ready/available\n\n\n  if (!defaultValues || !instruction) return null;\n  return /*#__PURE__*/_jsxDEV(ProcessingInstructionsChecklistView, {\n    instruction: instruction,\n    leadRef: leadRef,\n    defaultValues: defaultValues,\n    columns: columns,\n    tabs: tabs,\n    selectedTab: selectedTab,\n    fields: fields,\n    schemaData: schemaData,\n    isFdo: isFdo,\n    isReadOnly: isReadOnly,\n    isEditable: isEditable,\n    isCheckboxesEditable: isCheckboxesEditable,\n    handlers: _objectSpread(_objectSpread({}, handlers), {}, {\n      cancel: handleCancel,\n      save: handleSave,\n      next: handleNext,\n      toggleTab: toggleTab\n    }),\n    resetKey: resetKey,\n    ref: childRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 414,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProcessingInstructionsChecklist, \"X3tag+o6wuoE0GQe4mgveq1kKjk=\", false, function () {\n  return [useDispatch, useHistory, useParams, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ProcessingInstructionsChecklist;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProcessingInstructionsChecklist\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/modules/ProcessingInstructionsChecklist/ProcessingInstructionsChecklist.js"],"names":["React","useEffect","useState","PropTypes","useSelector","useDispatch","useHistory","useParams","ProcessingInstructionsChecklistView","processingInstructionsSchema","enqueueNotification","checkListUpdate","showModal","selectUser","selectPiProducingBrokers","selectPiAccountExecutives","selectPiFacilityTypes","utils","config","ProcessingInstructionsChecklist","propTypes","instruction","object","isRequired","handlers","shape","back","func","next","childRef","dispatch","history","id","step","tab","producingBrokers","accountExecutives","facilityTypes","user","columns","label","string","t","align","tabs","value","isValidTab","map","item","includes","selectedTab","setSelectedTab","defaultValues","setDefaultValues","schemaData","setSchemaData","resetKey","setResetKey","leadRef","riskReferences","find","r","leadPolicy","isFdo","processingInstructions","processTypeId","isDraft","status","statusId","isRejectedDraft","isSubmittedAuthorisedSignatory","isReopened","userHasWritePermission","app","access","feature","userHasApproverAccess","isCheckboxesEditable","isEditable","isReadOnly","getFacilityTypeId","facilityTypeId","details","generic","isValidArray","type","facilityTypeID","getProducingBrokerId","producingBrokerId","getAccountExecutiveId","accountExecutiveId","fields","name","group","clientName","muiComponentProps","InputProps","readOnly","disabled","contactName","inputProps","maxLength","clientEmail","eocInvoiceContactName","eocInvoiceMail","options","optionKey","optionLabel","isInvalidOrEmptyArray","businessType","reset","current","props","resetFunc","schema","schemas","parsePiChecklist","updatedDefaultValues","checklist","form","getNestedInitialValues","rows","getInitialValues","isFunction","keepDirty","validateAllChecklistSelected","valuesChecklist","Object","values","every","c","accountHandler","validateChecklistDates","quotesPutUp","signedDate","dutyOfDisclosure","evidence","checklistCompletedModal","component","fullWidth","title","maxWidth","componentProps","confirmLabel","cancelLabel","confirmMessage","__html","buttonColors","confirm","cancel","submitHandler","cancelHandler","handleClose","handleSave","formValues","isProducingBrokerSelected","Boolean","producingBroker","isFacilityTypeSelected","facilityType","isChecklistDatesSelected","handleNext","isChecklistCompleted","handleCancel","Date","getTime","showAlertNavigation","subtitle","toggleTab","isPageDirty","switchTab","replace","routes","steps","save"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useHistory, useParams } from 'react-router';\r\n\r\n// app\r\nimport ProcessingInstructionsChecklistView from './ProcessingInstructionsChecklist.view';\r\nimport { processingInstructionsSchema } from 'schemas';\r\nimport {\r\n  enqueueNotification,\r\n  checkListUpdate,\r\n  showModal,\r\n  selectUser,\r\n  selectPiProducingBrokers,\r\n  selectPiAccountExecutives,\r\n  selectPiFacilityTypes,\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\n\r\nProcessingInstructionsChecklist.propTypes = {\r\n  instruction: PropTypes.object.isRequired,\r\n  handlers: PropTypes.shape({\r\n    back: PropTypes.func.isRequired,\r\n    next: PropTypes.func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default function ProcessingInstructionsChecklist({ instruction, handlers, childRef }) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { id, step, tab } = useParams();\r\n\r\n  const producingBrokers = useSelector(selectPiProducingBrokers);\r\n  const accountExecutives = useSelector(selectPiAccountExecutives);\r\n  const facilityTypes = useSelector(selectPiFacilityTypes);\r\n  const user = useSelector(selectUser);\r\n\r\n  const columns = [\r\n    { id: 'detail', label: utils.string.t('processingInstructions.checklist.cols.detail') },\r\n    { id: 'frontEndContact', label: utils.string.t('processingInstructions.checklist.cols.frontEndContact'), align: 'center' },\r\n    { id: 'authorisedSignatory', label: utils.string.t('processingInstructions.checklist.cols.authorisedSignatory'), align: 'center' },\r\n  ];\r\n\r\n  const tabs = [\r\n    { value: 'general', label: utils.string.t('processingInstructions.checklist.tabs.general.title') },\r\n    { value: 'pre-placing', label: utils.string.t('processingInstructions.checklist.tabs.prePlacing.title') },\r\n    { value: 'mrc', label: utils.string.t('processingInstructions.checklist.tabs.mrc.title') },\r\n    { value: 'other-details', label: utils.string.t('processingInstructions.checklist.tabs.otherDetails.title') },\r\n    { value: 'risk-references', label: utils.string.t('processingInstructions.checklist.tabs.riskRefs.title') },\r\n  ];\r\n\r\n  const isValidTab = tabs.map((item) => item.value).includes(tab);\r\n\r\n  const [selectedTab, setSelectedTab] = useState(isValidTab ? tab : 'general');\r\n  const [defaultValues, setDefaultValues] = useState();\r\n  const [schemaData, setSchemaData] = useState({});\r\n  const [resetKey, setResetKey] = useState();\r\n  const leadRef = instruction?.riskReferences?.find((r) => r.leadPolicy);\r\n\r\n  const isFdo = utils.processingInstructions.isFdo(instruction?.processTypeId);\r\n  const isDraft = utils.processingInstructions.status.isDraft(instruction?.statusId);\r\n  const isRejectedDraft = utils.processingInstructions.status.isRejectedDraft(instruction?.statusId);\r\n  const isSubmittedAuthorisedSignatory = utils.processingInstructions.status.isSubmittedAuthorisedSignatory(instruction?.statusId);\r\n  const isReopened = utils.processingInstructions.status.isReopened(instruction?.statusId);\r\n  const userHasWritePermission = utils.app.access.feature('processingInstructions.processingInstructions', ['create', 'update'], user);\r\n  const userHasApproverAccess = utils.app.access.feature('processingInstructions.approverChecklist', ['create', 'update'], user);\r\n  const isCheckboxesEditable = userHasApproverAccess && isSubmittedAuthorisedSignatory;\r\n  const isEditable = userHasWritePermission && (isDraft || isRejectedDraft || isReopened);\r\n  const isReadOnly = !isEditable;\r\n\r\n  const getFacilityTypeId = () => {\r\n    let facilityTypeId = instruction?.details?.facilityTypeId;\r\n\r\n    if (!facilityTypeId && utils.generic.isValidArray(facilityTypes, true)) {\r\n      const item = facilityTypes.find((type) => type.facilityTypeID === instruction?.details?.facilityTypeId);\r\n      facilityTypeId = item?.facilityTypeID;\r\n    }\r\n\r\n    return facilityTypeId || '';\r\n  };\r\n\r\n  const getProducingBrokerId = () => {\r\n    let producingBrokerId = instruction?.details?.producingBrokerId;\r\n\r\n    if (!producingBrokerId && utils.generic.isValidArray(producingBrokers, true)) {\r\n      const item = producingBrokers.find((type) => type.id === instruction?.details?.producingBrokerId);\r\n      producingBrokerId = item?.id;\r\n    }\r\n\r\n    return producingBrokerId || '';\r\n  };\r\n\r\n  const getAccountExecutiveId = () => {\r\n    let accountExecutiveId = instruction?.details?.accountExecutiveId;\r\n\r\n    if (!accountExecutiveId && utils.generic.isValidArray(accountExecutives, true)) {\r\n      const item = accountExecutives.find((type) => type.id === instruction?.details?.accountExecutiveId);\r\n      accountExecutiveId = item?.id;\r\n    }\r\n\r\n    return accountExecutiveId || '';\r\n  };\r\n\r\n  const fields = [\r\n    {\r\n      name: 'invoicingClient',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.invoicingClient'),\r\n      value: leadRef?.clientName || '',\r\n      muiComponentProps: {\r\n        InputProps: {\r\n          readOnly: true,\r\n          disabled: true,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'contactName',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.contactName'),\r\n      value: instruction?.details?.contactName || '',\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'clientEmail',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.clientEmail'),\r\n      value: instruction?.details?.clientEmail || '',\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'eocInvoiceContactName',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceContactName'),\r\n      value: instruction?.details?.eocInvoiceContactName || '',\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'eocInvoiceMail',\r\n      group: 'general',\r\n      type: 'text',\r\n      label: utils.string.t('processingInstructions.checklist.fields.eocInvoiceMail'),\r\n      value: instruction?.details?.eocInvoiceMail || '',\r\n      muiComponentProps: {\r\n        inputProps: {\r\n          maxLength: 50,\r\n        },\r\n        InputProps: {\r\n          readOnly: isReadOnly,\r\n          disabled: isReadOnly,\r\n        },\r\n      },\r\n    },\r\n    {\r\n      name: 'producingBroker',\r\n      group: 'general',\r\n      type: 'select',\r\n      label: utils.string.t('processingInstructions.checklist.fields.producingBroker'),\r\n      value: getProducingBrokerId(),\r\n      options: producingBrokers,\r\n      optionKey: 'id',\r\n      optionLabel: 'value',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(producingBrokers),\r\n      },\r\n    },\r\n    {\r\n      name: 'accountExecutive',\r\n      group: 'general',\r\n      type: 'select',\r\n      label: utils.string.t('processingInstructions.checklist.fields.accountExecutive'),\r\n      value: getAccountExecutiveId(),\r\n      options: accountExecutives,\r\n      optionKey: 'id',\r\n      optionLabel: 'value',\r\n      muiComponentProps: {\r\n        disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(accountExecutives),\r\n      },\r\n    },\r\n    ...(isFdo\r\n      ? [\r\n          {\r\n            name: 'businessType',\r\n            group: 'general',\r\n            type: 'text',\r\n            label: utils.string.t('processingInstructions.checklist.fields.businessType'),\r\n            value: leadRef?.businessType || '',\r\n            muiComponentProps: {\r\n              InputProps: {\r\n                readOnly: true,\r\n                disabled: true,\r\n              },\r\n            },\r\n          },\r\n          {\r\n            name: 'facilityType',\r\n            group: 'general',\r\n            type: 'select',\r\n            label: utils.string.t('processingInstructions.checklist.fields.facilityType'),\r\n            value: getFacilityTypeId(),\r\n            options: facilityTypes,\r\n            optionKey: 'facilityTypeID',\r\n            optionLabel: 'facilityTypeDetails',\r\n            disabled: isReadOnly || utils.generic.isInvalidOrEmptyArray(facilityTypes),\r\n          },\r\n        ]\r\n      : []),\r\n  ];\r\n\r\n  useEffect(\r\n    () => {\r\n      const reset = childRef?.current?.props?.resetFunc;\r\n      const schema = utils.schemas.parsePiChecklist(processingInstructionsSchema, instruction);\r\n      const updatedDefaultValues = {\r\n        checklist: utils.form.getNestedInitialValues(schema?.rows, 'columnName'),\r\n        ...utils.form.getInitialValues(fields),\r\n      };\r\n\r\n      setSchemaData(schema);\r\n      setDefaultValues(updatedDefaultValues);\r\n\r\n      if (utils.generic.isFunction(reset)) {\r\n        reset(updatedDefaultValues, {\r\n          keepDirty: false,\r\n        });\r\n      }\r\n    },\r\n    [instruction] // eslint-disable-line react-hooks/exhaustive-deps\r\n  );\r\n\r\n  const validateAllChecklistSelected = (valuesChecklist) => {\r\n    return Object.values(valuesChecklist).every((c) => ['YES', 'NO', 'NA'].includes(c.accountHandler));\r\n  };\r\n\r\n  const validateChecklistDates = (valuesChecklist) => {\r\n    if (valuesChecklist?.quotesPutUp?.accountHandler === 'YES' && valuesChecklist?.quotesPutUp?.signedDate === null) {\r\n      return false;\r\n    }\r\n\r\n    if (valuesChecklist?.dutyOfDisclosure?.accountHandler === 'YES' && valuesChecklist?.dutyOfDisclosure?.signedDate === null) {\r\n      return false;\r\n    }\r\n\r\n    if (valuesChecklist?.evidence?.accountHandler === 'YES' && valuesChecklist?.evidence?.signedDate === null) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const checklistCompletedModal = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          fullWidth: true,\r\n          title: utils.string.t('processingInstructions.checklist.warning.title'),\r\n          maxWidth: 'xs',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('app.yes'),\r\n            cancelLabel: utils.string.t('app.no'),\r\n            confirmMessage: (\r\n              <span\r\n                dangerouslySetInnerHTML={{\r\n                  __html: `${utils.string.t('processingInstructions.checklist.allChecklistSelected')}`,\r\n                }}\r\n              />\r\n            ),\r\n            buttonColors: { confirm: 'secondary', cancel: 'primary' },\r\n            submitHandler: () => {\r\n              handlers.next();\r\n            },\r\n            cancelHandler: () => {},\r\n            handleClose: () => {},\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const formValues = childRef.current.props?.values;\r\n    const isProducingBrokerSelected = Boolean(formValues?.producingBroker);\r\n    const isFacilityTypeSelected = Boolean(isFdo ? formValues?.facilityType : true);\r\n    const isChecklistDatesSelected = validateChecklistDates(formValues?.checklist);\r\n\r\n    if (isProducingBrokerSelected && isChecklistDatesSelected && isFacilityTypeSelected) {\r\n      dispatch(checkListUpdate(formValues, instruction));\r\n    } else if (!isProducingBrokerSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noProducingBrokerValue', 'warning'));\r\n    } else if (!isFacilityTypeSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noFacilityTypeValue', 'warning'));\r\n    } else if (!isChecklistDatesSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    const formValues = childRef.current.props?.values;\r\n    const isProducingBrokerSelected = Boolean(formValues?.producingBroker);\r\n    const isFacilityTypeSelected = Boolean(isFdo ? formValues?.facilityType : true);\r\n    const isChecklistCompleted = validateAllChecklistSelected(formValues?.checklist);\r\n\r\n    if (!isEditable || isChecklistCompleted || (selectedTab === 'general' && isProducingBrokerSelected && isFacilityTypeSelected)) {\r\n      handlers.next();\r\n    } else if (!isProducingBrokerSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noProducingBrokerValue', 'warning'));\r\n    } else if (!isFacilityTypeSelected) {\r\n      dispatch(enqueueNotification('processingInstructions.addRiskReference.noFacilityTypeValue', 'warning'));\r\n    } else if (isEditable && !isChecklistCompleted) {\r\n      checklistCompletedModal(formValues, instruction);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    const reset = childRef?.current?.props?.resetFunc;\r\n\r\n    setResetKey(new Date().getTime());\r\n\r\n    if (utils.generic.isFunction(reset)) {\r\n      reset(defaultValues, { keepDirty: false });\r\n    }\r\n  };\r\n\r\n  const showAlertNavigation = (submitHandler, cancelHandler) => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          title: 'navigation.page.title',\r\n          subtitle: 'navigation.page.subtitle',\r\n          fullWidth: true,\r\n          maxWidth: 'sm',\r\n          componentProps: {\r\n            cancelLabel: utils.string.t('navigation.page.cancel'),\r\n            confirmLabel: utils.string.t('navigation.page.confirm'),\r\n            submitHandler,\r\n            cancelHandler,\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const toggleTab = (isPageDirty) => (tab) => {\r\n    if (isPageDirty) {\r\n      showAlertNavigation(\r\n        () => switchTab(tab),\r\n        () => {}\r\n      );\r\n    } else {\r\n      switchTab(tab);\r\n    }\r\n  };\r\n\r\n  const switchTab = (tab) => {\r\n    const formValues = childRef.current.props?.values;\r\n    const { quotesPutUp, dutyOfDisclosure, evidence } = formValues?.checklist || {};\r\n\r\n    if (tab !== 'pre-placing') {\r\n      if (quotesPutUp?.accountHandler === 'YES' && quotesPutUp?.signedDate === null) {\r\n        dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\r\n        return;\r\n      }\r\n\r\n      if (dutyOfDisclosure?.accountHandler === 'YES' && dutyOfDisclosure?.signedDate === null) {\r\n        dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\r\n        return;\r\n      }\r\n\r\n      if (evidence?.accountHandler === 'YES' && evidence?.signedDate === null) {\r\n        dispatch(enqueueNotification('processingInstructions.checklist.prePlacing.mandatoryDateSelection', 'warning'));\r\n        return;\r\n      }\r\n    }\r\n\r\n    setSelectedTab(tab);\r\n    history.replace(`${config.routes.processingInstructions.steps}/${id}${step ? `/${step}` : ''}${tab ? `/${tab}` : ''}`);\r\n  };\r\n\r\n  // abort if data is not ready/available\r\n  if (!defaultValues || !instruction) return null;\r\n\r\n  return (\r\n    <ProcessingInstructionsChecklistView\r\n      instruction={instruction}\r\n      leadRef={leadRef}\r\n      defaultValues={defaultValues}\r\n      columns={columns}\r\n      tabs={tabs}\r\n      selectedTab={selectedTab}\r\n      fields={fields}\r\n      schemaData={schemaData}\r\n      isFdo={isFdo}\r\n      isReadOnly={isReadOnly}\r\n      isEditable={isEditable}\r\n      isCheckboxesEditable={isCheckboxesEditable}\r\n      handlers={{\r\n        ...handlers,\r\n        cancel: handleCancel,\r\n        save: handleSave,\r\n        next: handleNext,\r\n        toggleTab,\r\n      }}\r\n      resetKey={resetKey}\r\n      ref={childRef}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}