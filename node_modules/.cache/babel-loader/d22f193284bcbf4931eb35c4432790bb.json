{"ast":null,"code":"import _regeneratorRuntime from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:/MPHASIS/claims-page/Mphasis-Edge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\MPHASIS\\\\claims-page\\\\Mphasis-Edge\\\\src\\\\pages\\\\ClaimsNewLoss\\\\ClaimsNewLoss.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Helmet } from 'react-helmet';\nimport get from 'lodash/get'; // app\n\nimport { ClaimsNewLossView } from './ClaimsNewLoss.view';\nimport { showModal, selectLossId, selectClaimIdUnderProgress, selectClaimsStepper, selectCatCodes, selectClaimsStatuses, selectPriorities, selectLossQualifiers, selectSettlementCurrency, selectReferralResponse, getCatCodes, getStatuses, getPriorityLevels, getLossQualifiers, getSettlementCurrency, getReferralResponse, postLossInformation, postLossInformationSuccess, postClaimDetailsInformation, postEditClaimDetailsInformation, postClaimDetailsInformationSuccess, postEditLossInformation, resetClaimsPoliciesTemp, resetClaimData, selectClaimIdFromGrid, selectAllClaimDetails, selectComplexityValues, getComplexityValues, selectClaimData, selectClaimsPolicySections, getPolicyInformation, selectClaimsPolicyInformation, selectClaimsUnderwritingGroups, selectClaimPolicyInsures } from 'stores';\nimport * as utils from 'utils';\nimport config from 'config'; // mui\n\nimport { Typography } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ClaimsNewLoss() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isNavigationAllowed = _useState2[0],\n      setIsNavigationAllowed = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      validation = _useState4[0],\n      setValidation = _useState4[1];\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n  var brand = useSelector(function (state) {\n    return state.ui.brand;\n  });\n  var lossInformation = useSelector(selectLossId);\n  var claimData = useSelector(selectClaimIdUnderProgress);\n  var catCodes = useSelector(selectCatCodes);\n  var priorities = useSelector(selectPriorities);\n  var lossQualifiers = useSelector(selectLossQualifiers);\n  var claimsStatuses = useSelector(selectClaimsStatuses);\n  var settlementCurrency = useSelector(selectSettlementCurrency);\n  var referralResponse = useSelector(selectReferralResponse);\n  var submitClaimID = get(claimData, 'claimID') || '';\n  var currentStep = useSelector(selectClaimsStepper);\n  var claimsInformation = useSelector(selectClaimIdFromGrid);\n  var editClaimId = get(claimsInformation, 'claimID') || '';\n  var allClaimDetails = useSelector(selectAllClaimDetails);\n  var complexityValues = useSelector(selectComplexityValues);\n  var existingClaimData = useSelector(selectClaimData);\n  var policySections = useSelector(selectClaimsPolicySections);\n  var policyInformation = useSelector(selectClaimsPolicyInformation);\n  var underWritingGroups = useSelector(selectClaimsUnderwritingGroups);\n  var claimPolicyInsures = useSelector(selectClaimPolicyInsures);\n  var steps = [{\n    slug: 'enterLossInformation',\n    label: 'Enter Loss Information'\n  }, {\n    slug: 'searchPolicy',\n    label: 'Search Policy'\n  }, {\n    slug: 'enterClaimInformation',\n    label: 'Enter Claim Information'\n  }, {\n    slug: 'previewInformation',\n    label: 'Preview Information'\n  }, {\n    slug: 'acknowledgement',\n    label: 'Acknowledgement'\n  }]; // Get this info from api\n\n  var claim = {\n    claimRef: 'CL55690',\n    firstAdvicePac: '13/05/2021',\n    firstAdviceDtu: '13/05/2021'\n  };\n\n  var handleSaveNewClaim = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (submitClaimID) {\n                _context.next = 10;\n                break;\n              }\n\n              if (!editClaimId) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 4;\n              return dispatch(postEditClaimDetailsInformation(values));\n\n            case 4:\n              _context.next = 8;\n              break;\n\n            case 6:\n              _context.next = 8;\n              return dispatch(postClaimDetailsInformation(values));\n\n            case 8:\n              _context.next = 12;\n              break;\n\n            case 10:\n              _context.next = 12;\n              return dispatch(postEditClaimDetailsInformation(values));\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSaveNewClaim(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleSaveNewLoss = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(lossInformation === null || lossInformation === void 0 ? void 0 : lossInformation.lossDetailID)) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 3;\n              return dispatch(postEditLossInformation(values));\n\n            case 3:\n              _context2.next = 7;\n              break;\n\n            case 5:\n              _context2.next = 7;\n              return dispatch(postLossInformation(values));\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSaveNewLoss(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // On click of cancel button\n\n\n  var launchConfirmModal = function launchConfirmModal() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        title: utils.string.t('navigation.alert'),\n        fullWidth: true,\n        maxWidth: 'sm',\n        componentProps: {\n          confirmLabel: utils.string.t('app.yes'),\n          cancelLabel: utils.string.t('app.no'),\n          confirmMessage: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            color: \"secondary\",\n            children: utils.string.t('claims.modals.confirm.subtitle')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, _this),\n          submitHandler: function submitHandler() {\n            setIsNavigationAllowed(true);\n            dispatch(postLossInformationSuccess({}));\n            dispatch(postClaimDetailsInformationSuccess(null));\n            dispatch(resetClaimsPoliciesTemp());\n            history.push(config.routes.claimsFNOL.root);\n          },\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  }; // On click of Finish button\n\n\n  var launchFinishModal = function launchFinishModal() {\n    dispatch(showModal({\n      component: 'CONFIRM',\n      props: {\n        title: utils.string.t('claims.modals.finishRegisterLoss.title'),\n        fullWidth: true,\n        maxWidth: 'sm',\n        componentProps: {\n          confirmLabel: utils.string.t('app.yes'),\n          cancelLabel: utils.string.t('app.no'),\n          confirmMessage: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            color: \"secondary\",\n            children: utils.string.t('claims.modals.finishRegisterLoss.content')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, _this),\n          submitHandler: function submitHandler() {\n            setIsNavigationAllowed(true);\n            dispatch(resetClaimData());\n            history.push(config.routes.claimsFNOL.root);\n          },\n          handleClose: function handleClose() {}\n        }\n      }\n    }));\n  };\n\n  var handleCancelRegisterNewLoss = function handleCancelRegisterNewLoss() {\n    launchConfirmModal();\n  };\n\n  var getAllReferentialData = function getAllReferentialData() {\n    if (utils.generic.isInvalidOrEmptyArray(catCodes)) {\n      dispatch(getCatCodes());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(priorities)) {\n      dispatch(getPriorityLevels());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(lossQualifiers)) {\n      dispatch(getLossQualifiers());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(claimsStatuses)) {\n      dispatch(getStatuses());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(settlementCurrency)) {\n      dispatch(getSettlementCurrency());\n    }\n\n    if (utils.generic.isInvalidOrEmptyArray(referralResponse)) {\n      dispatch(getReferralResponse());\n    }\n  };\n\n  useEffect(function () {\n    getAllReferentialData();\n\n    if (!(existingClaimData === null || existingClaimData === void 0 ? void 0 : existingClaimData.claimId)) {\n      if (utils.generic.isInvalidOrEmptyArray(lossQualifiers)) {\n        dispatch(getLossQualifiers());\n        dispatch(getPolicyInformation());\n      }\n\n      dispatch(getComplexityValues());\n    }\n\n    return function () {\n      dispatch(resetClaimData());\n    };\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\".concat(utils.string.t('claims.actions.registerNewLoss'), \" - \").concat(utils.app.getAppName(brand))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ClaimsNewLossView, {\n      claim: claim,\n      steps: steps,\n      currentStep: currentStep,\n      isNavigationAllowed: isNavigationAllowed,\n      handleCancel: handleCancelRegisterNewLoss,\n      handleFinishNewLoss: launchFinishModal,\n      handleSaveNewLoss: handleSaveNewLoss,\n      handleSaveNewClaim: handleSaveNewClaim,\n      validation: validation,\n      setValidation: setValidation,\n      allClaimDetails: allClaimDetails,\n      complexityValues: complexityValues,\n      lossQualifiers: lossQualifiers,\n      policySections: policySections,\n      policyInformation: policyInformation,\n      underWritingGroups: underWritingGroups,\n      claimPolicyInsures: claimPolicyInsures\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ClaimsNewLoss, \"ryjjmSwO0yRF3rLIOvixd0tak6o=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = ClaimsNewLoss;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClaimsNewLoss\");","map":{"version":3,"sources":["E:/MPHASIS/claims-page/Mphasis-Edge/src/pages/ClaimsNewLoss/ClaimsNewLoss.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useHistory","Helmet","get","ClaimsNewLossView","showModal","selectLossId","selectClaimIdUnderProgress","selectClaimsStepper","selectCatCodes","selectClaimsStatuses","selectPriorities","selectLossQualifiers","selectSettlementCurrency","selectReferralResponse","getCatCodes","getStatuses","getPriorityLevels","getLossQualifiers","getSettlementCurrency","getReferralResponse","postLossInformation","postLossInformationSuccess","postClaimDetailsInformation","postEditClaimDetailsInformation","postClaimDetailsInformationSuccess","postEditLossInformation","resetClaimsPoliciesTemp","resetClaimData","selectClaimIdFromGrid","selectAllClaimDetails","selectComplexityValues","getComplexityValues","selectClaimData","selectClaimsPolicySections","getPolicyInformation","selectClaimsPolicyInformation","selectClaimsUnderwritingGroups","selectClaimPolicyInsures","utils","config","Typography","ClaimsNewLoss","isNavigationAllowed","setIsNavigationAllowed","validation","setValidation","dispatch","history","brand","state","ui","lossInformation","claimData","catCodes","priorities","lossQualifiers","claimsStatuses","settlementCurrency","referralResponse","submitClaimID","currentStep","claimsInformation","editClaimId","allClaimDetails","complexityValues","existingClaimData","policySections","policyInformation","underWritingGroups","claimPolicyInsures","steps","slug","label","claim","claimRef","firstAdvicePac","firstAdviceDtu","handleSaveNewClaim","values","handleSaveNewLoss","lossDetailID","launchConfirmModal","component","props","title","string","t","fullWidth","maxWidth","componentProps","confirmLabel","cancelLabel","confirmMessage","submitHandler","push","routes","claimsFNOL","root","handleClose","launchFinishModal","handleCancelRegisterNewLoss","getAllReferentialData","generic","isInvalidOrEmptyArray","claimId","app","getAppName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router';\r\nimport { Helmet } from 'react-helmet';\r\nimport get from 'lodash/get';\r\n\r\n// app\r\nimport { ClaimsNewLossView } from './ClaimsNewLoss.view';\r\nimport {\r\n  showModal,\r\n  selectLossId,\r\n  selectClaimIdUnderProgress,\r\n  selectClaimsStepper,\r\n  selectCatCodes,\r\n  selectClaimsStatuses,\r\n  selectPriorities,\r\n  selectLossQualifiers,\r\n  selectSettlementCurrency,\r\n  selectReferralResponse,\r\n  getCatCodes,\r\n  getStatuses,\r\n  getPriorityLevels,\r\n  getLossQualifiers,\r\n  getSettlementCurrency,\r\n  getReferralResponse,\r\n  postLossInformation,\r\n  postLossInformationSuccess,\r\n  postClaimDetailsInformation,\r\n  postEditClaimDetailsInformation,\r\n  postClaimDetailsInformationSuccess,\r\n  postEditLossInformation,\r\n  resetClaimsPoliciesTemp,\r\n  resetClaimData,\r\n  selectClaimIdFromGrid,\r\n\r\n\r\n  selectAllClaimDetails,\r\n  selectComplexityValues,\r\n  getComplexityValues,\r\n  selectClaimData,\r\n  selectClaimsPolicySections,\r\n  getPolicyInformation,\r\n  selectClaimsPolicyInformation,\r\n  selectClaimsUnderwritingGroups,\r\n  selectClaimPolicyInsures\r\n} from 'stores';\r\nimport * as utils from 'utils';\r\nimport config from 'config';\r\n\r\n// mui\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport default function ClaimsNewLoss() {\r\n  const [isNavigationAllowed, setIsNavigationAllowed] = useState(false);\r\n  const [validation, setValidation] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const brand = useSelector((state) => state.ui.brand);\r\n  const lossInformation = useSelector(selectLossId);\r\n  const claimData = useSelector(selectClaimIdUnderProgress);\r\n\r\n  const catCodes = useSelector(selectCatCodes);\r\n  const priorities = useSelector(selectPriorities);\r\n  const lossQualifiers = useSelector(selectLossQualifiers);\r\n  const claimsStatuses = useSelector(selectClaimsStatuses);\r\n  const settlementCurrency = useSelector(selectSettlementCurrency);\r\n  const referralResponse = useSelector(selectReferralResponse);\r\n\r\n  const submitClaimID = get(claimData, 'claimID') || '';\r\n  const currentStep = useSelector(selectClaimsStepper);\r\n\r\n  const claimsInformation = useSelector(selectClaimIdFromGrid);\r\n  const editClaimId = get(claimsInformation, 'claimID') || '';\r\n\r\n  const allClaimDetails = useSelector(selectAllClaimDetails);\r\n  const complexityValues = useSelector(selectComplexityValues);\r\n  const existingClaimData = useSelector(selectClaimData);\r\n  const policySections = useSelector(selectClaimsPolicySections);\r\n  const policyInformation = useSelector(selectClaimsPolicyInformation);\r\n  const underWritingGroups = useSelector(selectClaimsUnderwritingGroups);\r\n  const claimPolicyInsures = useSelector(selectClaimPolicyInsures);\r\n\r\n  const steps = [\r\n    { slug: 'enterLossInformation', label: 'Enter Loss Information' },\r\n    { slug: 'searchPolicy', label: 'Search Policy' },\r\n    { slug: 'enterClaimInformation', label: 'Enter Claim Information' },\r\n    { slug: 'previewInformation', label: 'Preview Information' },\r\n    { slug: 'acknowledgement', label: 'Acknowledgement' },\r\n  ];\r\n\r\n  // Get this info from api\r\n  const claim = {\r\n    claimRef: 'CL55690',\r\n    firstAdvicePac: '13/05/2021',\r\n    firstAdviceDtu: '13/05/2021',\r\n  };\r\n\r\n  const handleSaveNewClaim = async (values) => {\r\n    if (!submitClaimID) {\r\n      if (editClaimId) {\r\n        await dispatch(postEditClaimDetailsInformation(values));\r\n      } else {\r\n        await dispatch(postClaimDetailsInformation(values));\r\n      }\r\n    } else {\r\n      await dispatch(postEditClaimDetailsInformation(values));\r\n    }\r\n  };\r\n\r\n  const handleSaveNewLoss = async (values) => {\r\n    if (lossInformation?.lossDetailID) {\r\n      await dispatch(postEditLossInformation(values));\r\n    } else {\r\n      await dispatch(postLossInformation(values));\r\n    }\r\n  };\r\n\r\n  // On click of cancel button\r\n  const launchConfirmModal = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          title: utils.string.t('navigation.alert'),\r\n          fullWidth: true,\r\n          maxWidth: 'sm',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('app.yes'),\r\n            cancelLabel: utils.string.t('app.no'),\r\n            confirmMessage: (\r\n              <Typography variant=\"h5\" color=\"secondary\">\r\n                {utils.string.t('claims.modals.confirm.subtitle')}\r\n              </Typography>\r\n            ),\r\n            submitHandler: () => {\r\n              setIsNavigationAllowed(true);\r\n              dispatch(postLossInformationSuccess({}));\r\n              dispatch(postClaimDetailsInformationSuccess(null));\r\n              dispatch(resetClaimsPoliciesTemp());\r\n              history.push(config.routes.claimsFNOL.root);\r\n            },\r\n            handleClose: () => {},\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  // On click of Finish button\r\n  const launchFinishModal = () => {\r\n    dispatch(\r\n      showModal({\r\n        component: 'CONFIRM',\r\n        props: {\r\n          title: utils.string.t('claims.modals.finishRegisterLoss.title'),\r\n          fullWidth: true,\r\n          maxWidth: 'sm',\r\n          componentProps: {\r\n            confirmLabel: utils.string.t('app.yes'),\r\n            cancelLabel: utils.string.t('app.no'),\r\n            confirmMessage: (\r\n              <Typography variant=\"h5\" color=\"secondary\">\r\n                {utils.string.t('claims.modals.finishRegisterLoss.content')}\r\n              </Typography>\r\n            ),\r\n            submitHandler: () => {\r\n              setIsNavigationAllowed(true);\r\n              dispatch(resetClaimData());\r\n              history.push(config.routes.claimsFNOL.root);\r\n            },\r\n            handleClose: () => {},\r\n          },\r\n        },\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCancelRegisterNewLoss = () => {\r\n    launchConfirmModal();\r\n  };\r\n\r\n  const getAllReferentialData = () => {\r\n    if (utils.generic.isInvalidOrEmptyArray(catCodes)) {\r\n      dispatch(getCatCodes());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(priorities)) {\r\n      dispatch(getPriorityLevels());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(lossQualifiers)) {\r\n      dispatch(getLossQualifiers());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(claimsStatuses)) {\r\n      dispatch(getStatuses());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(settlementCurrency)) {\r\n      dispatch(getSettlementCurrency());\r\n    }\r\n    if (utils.generic.isInvalidOrEmptyArray(referralResponse)) {\r\n      dispatch(getReferralResponse());\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getAllReferentialData();\r\n\r\n    if (!existingClaimData?.claimId) {\r\n      if (utils.generic.isInvalidOrEmptyArray(lossQualifiers)) {\r\n        dispatch(getLossQualifiers());\r\n        dispatch(getPolicyInformation());\r\n      }\r\n      dispatch(getComplexityValues());\r\n    }\r\n\r\n    return () => {\r\n      dispatch(resetClaimData());\r\n    };\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${utils.string.t('claims.actions.registerNewLoss')} - ${utils.app.getAppName(brand)}`}</title>\r\n      </Helmet>\r\n      <ClaimsNewLossView\r\n        claim={claim}\r\n        steps={steps}\r\n        currentStep={currentStep}\r\n        isNavigationAllowed={isNavigationAllowed}\r\n        handleCancel={handleCancelRegisterNewLoss}\r\n        handleFinishNewLoss={launchFinishModal}\r\n        handleSaveNewLoss={handleSaveNewLoss}\r\n        handleSaveNewClaim={handleSaveNewClaim}\r\n        validation={validation}\r\n        setValidation={setValidation}\r\n\r\n        allClaimDetails={allClaimDetails}\r\n        complexityValues={complexityValues}\r\n        lossQualifiers={lossQualifiers}\r\n        policySections={policySections}\r\n        policyInformation={policyInformation}\r\n        underWritingGroups={underWritingGroups}\r\n        claimPolicyInsures={claimPolicyInsures}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}